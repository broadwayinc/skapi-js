{"version":3,"file":"skapi.js","mappings":"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","sources":["webpack://skapi-js/webpack/universalModuleDefinition","webpack://skapi-js/./js/Api.js","webpack://skapi-js/./js/decorators.js","webpack://skapi-js/./js/skapi.js","webpack://skapi-js/./js/skapi_error.js","webpack://skapi-js/./js/utils.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/AuthenticationDetails.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/utils/cryptoSecureRandomInt.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/utils/WordArray.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/BigInteger.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/AuthenticationHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoJwtToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoAccessToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoIdToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoRefreshToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserSession.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/DateHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserAttribute.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/StorageHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUser.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/Platform/index.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/UserAgent.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/Client.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserPool.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CookieStorage.js","webpack://skapi-js/./node_modules/base64-js/index.js","webpack://skapi-js/./node_modules/buffer/index.js","webpack://skapi-js/./node_modules/crypto-js/core.js","webpack://skapi-js/./node_modules/crypto-js/enc-base64.js","webpack://skapi-js/./node_modules/crypto-js/hmac-sha256.js","webpack://skapi-js/./node_modules/crypto-js/hmac.js","webpack://skapi-js/./node_modules/crypto-js/lib-typedarrays.js","webpack://skapi-js/./node_modules/crypto-js/sha256.js","webpack://skapi-js/./node_modules/ieee754/index.js","webpack://skapi-js/./node_modules/isarray/index.js","webpack://skapi-js/./node_modules/isomorphic-unfetch/browser.js","webpack://skapi-js/./node_modules/js-cookie/src/js.cookie.js","webpack://skapi-js/./node_modules/unfetch/dist/unfetch.module.js","webpack://skapi-js/webpack/bootstrap","webpack://skapi-js/webpack/runtime/compat get default export","webpack://skapi-js/webpack/runtime/define property getters","webpack://skapi-js/webpack/runtime/global","webpack://skapi-js/webpack/runtime/hasOwnProperty shorthand","webpack://skapi-js/webpack/runtime/make namespace object","webpack://skapi-js/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SkapiError = exports.Skapi = void 0;\nconst skapi_1 = __importDefault(require(\"./skapi\"));\nexports.Skapi = skapi_1.default;\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nexports.SkapiError = skapi_error_1.default;\n//# sourceMappingURL=Api.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formResponse = void 0;\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nconst utils_1 = require(\"./utils\");\nfunction formResponse() {\n    return function (target, propertyKey, descriptor) {\n        const fn = descriptor.value;\n        descriptor.value = function (...arg) {\n            let form = arg[0];\n            let option = (arg === null || arg === void 0 ? void 0 : arg[1]) || {};\n            const handleResponse = (response) => {\n                if (option === null || option === void 0 ? void 0 : option.response) {\n                    if (typeof option.response === 'function') {\n                        option.response(response);\n                        return response;\n                    }\n                    else {\n                        throw new skapi_error_1.default('Callback \"response\" should be type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                if (!(form instanceof HTMLFormElement)) {\n                    return response;\n                }\n                let href = new URL(form.action);\n                let response_key = (0, utils_1.sha256)(form.action);\n                let timestamp = Date.now().toString();\n                window.sessionStorage.setItem(response_key, JSON.stringify({ [timestamp]: response }));\n                href.searchParams.set(response_key, timestamp);\n                window.location.href = href.href;\n            };\n            let response;\n            function handleError(err) {\n                let is_err = err instanceof Error ? err : new skapi_error_1.default(err);\n                if (option === null || option === void 0 ? void 0 : option.onerror) {\n                    if (typeof option.onerror === 'function') {\n                        return option.onerror(is_err);\n                    }\n                    else {\n                        throw new skapi_error_1.default('Callback \"onerror\" should be type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                return is_err;\n            }\n            try {\n                response = fn.bind(this)(...arg);\n            }\n            catch (err) {\n                let is_err = handleError(err);\n                if (is_err instanceof Error) {\n                    throw is_err;\n                }\n                return is_err;\n            }\n            if (response instanceof Promise) {\n                return new Promise((res, rej) => {\n                    response\n                        .then((r) => {\n                        res(handleResponse(r));\n                    })\n                        .catch((err) => {\n                        err = handleError(err);\n                        if (err instanceof Error) {\n                            rej(err);\n                        }\n                        else {\n                            res(err);\n                        }\n                    });\n                });\n            }\n            else {\n                return handleResponse(response);\n            }\n        };\n    };\n}\nexports.formResponse = formResponse;\n//# sourceMappingURL=decorators.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst amazon_cognito_identity_js_1 = require(\"amazon-cognito-identity-js\");\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nconst decorators_1 = require(\"./decorators\");\nconst utils_1 = require(\"./utils\");\nclass Skapi {\n    constructor(service_id, service_owner, autoLogin = false) {\n        this.cognitoUser = null;\n        this.__disabledAccount = null;\n        this.__serviceHash = {};\n        this.__pendingRequest = {};\n        this.__cached_requests = {};\n        this.__startKey_keys = {};\n        this.__request_signup_confirmation = null;\n        this.__index_number_range = 4503599627370496;\n        this.__class_properties_has_been_cached = false;\n        this.session = null;\n        this.user = null;\n        this.connection = null;\n        this.host = 'skapi';\n        this.hostDomain = 'skapi.com';\n        this.userPool = null;\n        this.regex = {\n            validateUserId(val) {\n                try {\n                    (0, utils_1.validateUserId)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validateUrl(val) {\n                try {\n                    (0, utils_1.validateUrl)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validatePhoneNumber(val) {\n                try {\n                    (0, utils_1.validatePhoneNumber)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validateBirthdate(val) {\n                try {\n                    (0, utils_1.validateBirthdate)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validateEmail(val) {\n                try {\n                    (0, utils_1.validateEmail)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            }\n        };\n        this.update_startKey_keys = (option) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            let { hashedParam, url, response } = option;\n            let fetched = null;\n            if (response instanceof Promise) {\n                fetched = yield response;\n            }\n            else {\n                fetched = response;\n            }\n            if (typeof fetched !== 'object' ||\n                !fetched.hasOwnProperty('startKey') ||\n                !hashedParam ||\n                !url) {\n                return fetched;\n            }\n            if (!this.__startKey_keys.hasOwnProperty(url)) {\n                this.__startKey_keys[url] = {};\n            }\n            if (!((_a = this.__cached_requests) === null || _a === void 0 ? void 0 : _a[url])) {\n                this.__cached_requests[url] = {};\n            }\n            this.__cached_requests[url][hashedParam] = fetched;\n            if (!this.__startKey_keys[url].hasOwnProperty(hashedParam)) {\n                this.__startKey_keys[url][hashedParam] = [];\n            }\n            let startKey_string = JSON.stringify(fetched.startKey);\n            if (!this.__startKey_keys[url][hashedParam].includes(startKey_string)) {\n                this.__startKey_keys[url][hashedParam].push(startKey_string);\n            }\n            this.__cached_requests[url][hashedParam] = fetched;\n            return Object.assign({ startKey_list: this.__startKey_keys[url][hashedParam] }, fetched);\n        });\n        this._fetch = (url, opt, responseType) => __awaiter(this, void 0, void 0, function* () {\n            let response = yield fetch(url, opt);\n            if (responseType) {\n                if (response.status === 200) {\n                    return yield response[responseType]();\n                }\n                else {\n                    throw response;\n                }\n            }\n            let received = yield response.text();\n            try {\n                received = JSON.parse(received);\n            }\n            catch (err) {\n            }\n            if (response.status === 200) {\n                if (typeof received === 'object' && opt.method === 'GET' && received.hasOwnProperty('body')) {\n                    try {\n                        received = JSON.parse(received.body);\n                    }\n                    catch (err) { }\n                }\n                return received;\n            }\n            else {\n                let status = response === null || response === void 0 ? void 0 : response.status;\n                let errCode = [\n                    'INVALID_CORS',\n                    'INVALID_REQUEST',\n                    'SERVICE_DISABLED',\n                    'INVALID_PARAMETER',\n                    'ERROR',\n                    'EXISTS',\n                    'NOT_EXISTS'\n                ];\n                if (typeof received === 'object' && (received === null || received === void 0 ? void 0 : received.message)) {\n                    let code = ((status ? status.toString() : null) || 'ERROR');\n                    throw new skapi_error_1.default(received === null || received === void 0 ? void 0 : received.message, { code: code });\n                }\n                else if (typeof received === 'string') {\n                    let errMsg = received.split(':');\n                    let code = errMsg.splice(0, 1)[0];\n                    throw new skapi_error_1.default(errMsg.join(''), { code: (errCode.includes(code) ? code : 'ERROR') });\n                }\n                throw response;\n            }\n        });\n        this._get = (url, params, option) => __awaiter(this, void 0, void 0, function* () {\n            if (params && typeof params === 'object' && Object.keys(params).length) {\n                if (url.substring(url.length - 1) !== '?') {\n                    url = url + '?';\n                }\n                let query = Object.keys(params)\n                    .map(k => {\n                    let value = params[k];\n                    if (typeof value !== 'string') {\n                        value = JSON.stringify(value);\n                    }\n                    return encodeURIComponent(k) + '=' + encodeURIComponent(value);\n                })\n                    .join('&');\n                url += query;\n            }\n            let responseType = null;\n            if (option.hasOwnProperty('responseType')) {\n                responseType = option.responseType;\n                delete option.responseType;\n            }\n            let opt = Object.assign({\n                method: 'GET'\n            }, option);\n            return this._fetch(url, opt, responseType);\n        });\n        if (typeof service_id !== 'string' || typeof service_owner !== 'string') {\n            throw new skapi_error_1.default('\"service_id\" and \"service_owner\" should be type <string>.', { code: 'INVALID_PARAMETER' });\n        }\n        if (!service_id || !service_owner) {\n            throw new skapi_error_1.default('\"service_id\" and \"service_owner\" is required', { code: 'INVALID_PARAMETER' });\n        }\n        if (service_owner !== this.host) {\n            (0, utils_1.validateUserId)(service_owner, '\"service_owner\"');\n        }\n        this.service = service_id;\n        this.service_owner = service_owner;\n        const cdn_domain = 'https://dkls9pxkgz855.cloudfront.net';\n        let sreg = service_id.substring(0, 4);\n        this.admin_endpoint = fetch(`${cdn_domain}/${sreg}/admin.json`)\n            .then(response => response.blob())\n            .then(blob => new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }))\n            .then(data => typeof data === 'string' ? JSON.parse(window.atob(data.split(',')[1])) : null);\n        this.record_endpoint = fetch(`${cdn_domain}/${sreg}/record.json`)\n            .then(response => response.blob())\n            .then(blob => new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }))\n            .then(data => typeof data === 'string' ? JSON.parse(window.atob(data.split(',')[1])) : null);\n        this.__connection = ((skapi) => __awaiter(this, void 0, void 0, function* () {\n            if (!window.sessionStorage) {\n                throw new Error(`This browser does not support skapi.`);\n            }\n            const restore = JSON.parse(window.sessionStorage.getItem(`${service_id}#${service_owner}`) || 'null');\n            if (restore === null || restore === void 0 ? void 0 : restore.connection) {\n                for (let k in restore) {\n                    skapi[k] = restore[k];\n                }\n            }\n            const admin_endpoint = yield skapi.admin_endpoint;\n            skapi.userPool = new amazon_cognito_identity_js_1.CognitoUserPool({\n                UserPoolId: admin_endpoint.userpool_id,\n                ClientId: admin_endpoint.userpool_client\n            });\n            const process = [\n                skapi.updateConnection()\n            ];\n            if ((restore === null || restore === void 0 ? void 0 : restore.connection) || autoLogin) {\n                process.push(skapi.authentication().updateSession({ refreshToken: !!(restore === null || restore === void 0 ? void 0 : restore.connection) }).catch(err => {\n                    skapi.user = null;\n                }));\n            }\n            yield Promise.all(process);\n            const storeClassProperties = () => {\n                if (skapi.__class_properties_has_been_cached) {\n                    return;\n                }\n                let data = {};\n                const to_be_cached = [\n                    '__startKey_keys',\n                    '__cached_requests',\n                    '__request_signup_confirmation',\n                    'connection',\n                ];\n                if (skapi.connection) {\n                    for (let k of to_be_cached) {\n                        data[k] = skapi[k];\n                    }\n                    sessionStorage.setItem(`${service_id}#${service_owner}`, JSON.stringify(data));\n                    skapi.__class_properties_has_been_cached = true;\n                }\n            };\n            window.addEventListener('beforeunload', storeClassProperties);\n            window.addEventListener(\"visibilitychange\", storeClassProperties);\n            return skapi.connection;\n        }))(this).catch(err => { throw err; });\n    }\n    static connect(service_id, service_owner, autoLogin = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const skapi = new Skapi(service_id, service_owner, autoLogin);\n            yield skapi.__connection;\n            return skapi;\n        });\n    }\n    authentication() {\n        if (!this.userPool) {\n            throw new skapi_error_1.default('User pool is missing', { code: 'INVALID_REQUEST' });\n        }\n        const updateSession = (option) => {\n            let { refreshToken = false } = option || {};\n            return new Promise((res, rej) => {\n                var _a;\n                let currentUser = ((_a = this.userPool) === null || _a === void 0 ? void 0 : _a.getCurrentUser()) || null;\n                this.cognitoUser = currentUser;\n                if (currentUser === null) {\n                    rej(null);\n                }\n                currentUser.getSession((err, session) => {\n                    if (err) {\n                        rej(err);\n                    }\n                    const updateAttributes = (sessionToMerge) => __awaiter(this, void 0, void 0, function* () {\n                        if (sessionToMerge.isValid() && currentUser) {\n                            currentUser.getUserAttributes((attrErr, attributes) => {\n                                if (attrErr) {\n                                    rej(attrErr);\n                                }\n                                else {\n                                    let normalized_attributes = {};\n                                    let user = {};\n                                    for (let i of attributes) {\n                                        normalized_attributes[i.Name] = i.Value;\n                                        let key_1 = i.Name.replace('custom:', '');\n                                        user[key_1] = i.Value;\n                                        if (i.Name === 'custom:service' && normalized_attributes[i.Name] !== this.service) {\n                                            rej(new skapi_error_1.default('The user is not registered to the service.', { code: 'INVALID_REQUEST' }));\n                                        }\n                                    }\n                                    for (let k of [\n                                        'address_public',\n                                        'birthdate_public',\n                                        'email_public',\n                                        'email_subscription',\n                                        'gender_public',\n                                        'phone_number_public'\n                                    ]) {\n                                        if (k.includes('_public')) {\n                                            if (user.hasOwnProperty(k.split('_')[0])) {\n                                                user[k] = user.hasOwnProperty(k) ? Number(user[k]) : 0;\n                                            }\n                                            else {\n                                                delete user[k];\n                                            }\n                                        }\n                                        else {\n                                            user[k] = user.hasOwnProperty(k) ? Number(user[k]) : 0;\n                                        }\n                                    }\n                                    for (let k of [\n                                        'email_verified',\n                                        'phone_number_verified'\n                                    ]) {\n                                        if (user[k.split('_')[0]]) {\n                                            user[k] = user.hasOwnProperty(k) ? user[k] === 'true' : false;\n                                        }\n                                        else if (user.hasOwnProperty(k)) {\n                                            delete user[k];\n                                        }\n                                    }\n                                    sessionToMerge.attributes = normalized_attributes;\n                                    this.session = sessionToMerge;\n                                    user.access_group = Number(this.session.idToken.payload.access_group);\n                                    user.user_id = user.sub;\n                                    delete user.sub;\n                                    this.user = user;\n                                    res(user);\n                                }\n                            });\n                        }\n                        else {\n                            rej(new skapi_error_1.default('Invalid session.', { code: 'INVALID_REQUEST' }));\n                        }\n                    });\n                    if (session) {\n                        if (refreshToken) {\n                            currentUser === null || currentUser === void 0 ? void 0 : currentUser.refreshSession(session.getRefreshToken(), (refreshErr, refreshedSession) => {\n                                if (refreshErr) {\n                                    rej(refreshErr);\n                                }\n                                updateAttributes(refreshedSession).catch(err => rej(err));\n                            });\n                        }\n                        else {\n                            updateAttributes(session).catch(err => rej(err));\n                        }\n                    }\n                    else {\n                        rej(new skapi_error_1.default('Current session does not exist.', { code: 'INVALID_REQUEST' }));\n                    }\n                });\n            });\n        };\n        const createCognitoUser = (email) => __awaiter(this, void 0, void 0, function* () {\n            let hash = null;\n            if (email) {\n                hash = this.__serviceHash[email] || (yield this.updateConnection({ request_hash: email })).hash;\n            }\n            else {\n                if (this.session) {\n                    hash = this.session.idToken.payload['cognito:username'];\n                }\n                else {\n                    throw new skapi_error_1.default('E-Mail is required.', { code: 'INVALID_PARAMETER' });\n                }\n            }\n            return {\n                cognitoUser: new amazon_cognito_identity_js_1.CognitoUser({\n                    Username: hash,\n                    Pool: this.userPool\n                }),\n                cognitoUsername: hash\n            };\n        });\n        const authenticateUser = (username, password) => {\n            return new Promise((res, rej) => __awaiter(this, void 0, void 0, function* () {\n                this.logout();\n                this.__request_signup_confirmation = null;\n                this.__disabledAccount = null;\n                let initUser = yield createCognitoUser(username);\n                this.cognitoUser = initUser.cognitoUser;\n                username = initUser.cognitoUsername;\n                let authenticationDetails = new amazon_cognito_identity_js_1.AuthenticationDetails({\n                    Username: username,\n                    Password: password\n                });\n                this.cognitoUser.authenticateUser(authenticationDetails, {\n                    newPasswordRequired: (userAttributes, requiredAttributes) => {\n                        this.__request_signup_confirmation = username;\n                        rej(new skapi_error_1.default(\"User's signup confirmation is required.\", { code: 'SIGNUP_CONFIRMATION_NEEDED' }));\n                    },\n                    onSuccess: (logged) => {\n                        updateSession().then(session => {\n                            res(session);\n                        });\n                    },\n                    onFailure: (err) => {\n                        let error = [err.message || 'Failed to authenticate user.', (err === null || err === void 0 ? void 0 : err.code) || 'INVALID_REQUEST'];\n                        if (err.code === \"NotAuthorizedException\") {\n                            if (err.message === \"User is disabled.\") {\n                                this.__disabledAccount = username;\n                                error = ['This account is disabled.', 'USER_IS_DISABLED'];\n                            }\n                            else {\n                                error = ['Incorrect username or password.', 'INCORRECT_USERNAME_OR_PASSWORD'];\n                            }\n                        }\n                        rej(new skapi_error_1.default(error[0], { code: error[1], cause: err }));\n                    }\n                });\n            }));\n        };\n        return { updateSession, authenticateUser, createCognitoUser };\n    }\n    requireAdmin(option) {\n        var _a, _b, _c, _d, _e, _f;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_b = (_a = this.session) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b['custom:service']) === this.service) {\n                if (((_d = (_c = this.session) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d['custom:service_owner']) === this.host) {\n                    if (!(option === null || option === void 0 ? void 0 : option.ignoreVerification) && !((_f = (_e = this.session) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.email_verified)) {\n                        throw new skapi_error_1.default('Email verification is required.', { code: 'INVALID_REQUEST' });\n                    }\n                    return true;\n                }\n                if (option === null || option === void 0 ? void 0 : option.throwError) {\n                    throw new skapi_error_1.default('Admin access is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            else {\n                this.logout();\n                if (option === null || option === void 0 ? void 0 : option.throwError) {\n                    throw new skapi_error_1.default('User login is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            return false;\n        });\n    }\n    getBlob(params, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let p = (0, utils_1.checkParams)(params, {\n                url: (v) => (0, utils_1.validateUrl)(v)\n            }, ['url']);\n            return yield this.request(p.url, option || null, { method: 'get', auth: p.url.includes('/auth/'), contentType: null, responseType: 'blob' });\n        });\n    }\n    secureRequest(request) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let paramsStruct = {\n                url: (v) => {\n                    return (0, utils_1.validateUrl)(v);\n                },\n                data: null,\n                sync: ['boolean', () => true]\n            };\n            if (Array.isArray(request)) {\n                for (let r of request) {\n                    r = (0, utils_1.checkParams)(r, paramsStruct);\n                }\n            }\n            else {\n                request = (0, utils_1.checkParams)(request, paramsStruct);\n            }\n            return yield this.request('post-secure', request, { auth: true });\n        });\n    }\n    getFormResponse() {\n        let params = new URLSearchParams(window.location.search);\n        for (let [key, val] of params.entries()) {\n            if (key.substring(0, 5) !== 'form-') {\n                continue;\n            }\n            let stored = window.sessionStorage.getItem(key);\n            if (stored) {\n                window.sessionStorage.removeItem(key);\n                try {\n                    stored = JSON.parse(stored);\n                }\n                catch (err) { }\n            }\n            if (typeof stored === 'object' && stored[val]) {\n                return stored[val];\n            }\n            else {\n                continue;\n            }\n        }\n        return null;\n    }\n    request(url, data = null, options = {}) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        return __awaiter(this, void 0, void 0, function* () {\n            let { auth = false, method = 'post', meta = null, bypassAwaitConnection = false } = options;\n            let __connection = bypassAwaitConnection ? null : (yield this.__connection);\n            let token = auth ? (_b = (_a = this.session) === null || _a === void 0 ? void 0 : _a.idToken) === null || _b === void 0 ? void 0 : _b.jwtToken : null;\n            if (auth) {\n                if (!token) {\n                    this.logout();\n                    throw new skapi_error_1.default('User login is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            let isExternalUrl = '';\n            try {\n                isExternalUrl = (0, utils_1.validateUrl)(url);\n            }\n            catch (err) {\n            }\n            const getEndpoint = (dest, auth) => __awaiter(this, void 0, void 0, function* () {\n                const endpoints = yield Promise.all([\n                    this.admin_endpoint,\n                    this.record_endpoint\n                ]);\n                const admin = endpoints[0];\n                const record = endpoints[1];\n                const get_ep = () => {\n                    switch (dest) {\n                        case 'get-serviceletters':\n                        case 'delete-newsletter':\n                        case 'block-account':\n                        case 'register-service':\n                        case 'get-users':\n                        case 'post-userdata':\n                        case 'remove-account':\n                        case 'post-secure':\n                        case 'get-newsletters':\n                        case 'subscribe-newsletter':\n                        case 'signup':\n                        case 'confirm-signup':\n                        case 'recover-account':\n                        case 'service':\n                            return {\n                                public: admin.admin_public,\n                                private: admin.admin_private\n                            };\n                        case 'post-record':\n                        case 'get-records':\n                        case 'subscription':\n                        case 'get-subscription':\n                        case 'del-records':\n                        case 'get-table':\n                        case 'get-tag':\n                        case 'get-index':\n                        case 'storage-info':\n                            return {\n                                private: record.record_private,\n                                public: record.record_public\n                            };\n                    }\n                };\n                return get_ep()[auth ? 'private' : 'public'] + dest;\n            });\n            let endpoint = isExternalUrl || (yield getEndpoint(url, !!auth));\n            let service = ((_d = (_c = this.session) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d['custom:service']) || (__connection === null || __connection === void 0 ? void 0 : __connection.service) || this.service;\n            let service_owner = ((_f = (_e = this.session) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f['custom:service_owner']) || (__connection === null || __connection === void 0 ? void 0 : __connection.owner) || this.service_owner;\n            if (meta) {\n                if (typeof meta === 'object' && !Array.isArray(meta)) {\n                    meta = JSON.parse(JSON.stringify(meta));\n                }\n                else {\n                    throw new skapi_error_1.default('Invalid meta data.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            if (Array.isArray(data) || data && typeof data !== 'object') {\n                throw new skapi_error_1.default('Request data should be a JSON Object | FormData | HTMLFormElement.', { code: 'INVALID_REQUEST' });\n            }\n            let required = { service, service_owner };\n            let fetchOptions = {};\n            let { refresh = false } = options.fetchOptions || {};\n            if (options.fetchOptions && Object.keys(options.fetchOptions).length) {\n                let fetOpt = (0, utils_1.checkParams)({\n                    limit: ((_g = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _g === void 0 ? void 0 : _g.limit) || 100,\n                    startKey: ((_h = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _h === void 0 ? void 0 : _h.startKey) || null,\n                    ascending: typeof ((_j = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _j === void 0 ? void 0 : _j.ascending) === 'boolean' ? options.fetchOptions.ascending : true\n                }, {\n                    limit: ['number', () => 100],\n                    startKey: null,\n                    ascending: ['boolean', () => true]\n                });\n                if (fetOpt.hasOwnProperty('limit') && typeof fetOpt.limit === 'number') {\n                    if (fetOpt.limit > 1000) {\n                        throw new skapi_error_1.default('Fetch limit should be below 1000.', { code: 'INVALID_REQUEST' });\n                    }\n                    Object.assign(fetchOptions, { limit: fetOpt.limit });\n                }\n                if (fetOpt.hasOwnProperty('startKey') && typeof fetOpt.startKey === 'object' && fetOpt.startKey && Object.keys(fetOpt.startKey)) {\n                    Object.assign(fetchOptions, { startKey: fetOpt.startKey });\n                }\n                if (fetOpt.hasOwnProperty('ascending') && typeof fetOpt.ascending === 'boolean') {\n                    Object.assign(fetchOptions, { ascending: fetOpt.ascending });\n                }\n            }\n            Object.assign(required, fetchOptions);\n            let metaData = (0, utils_1.extractFormMetaData)(data);\n            let isForm = metaData === null || metaData === void 0 ? void 0 : metaData.meta;\n            let fileKeys = (metaData === null || metaData === void 0 ? void 0 : metaData.files) || [];\n            let normalize_form = (data, isForm, addRequired = false) => __awaiter(this, void 0, void 0, function* () {\n                var _k, _l;\n                if (isForm === null) {\n                    return data;\n                }\n                let isFormEl = false;\n                if (data instanceof HTMLFormElement) {\n                    data = new FormData(data);\n                    isFormEl = true;\n                }\n                if (!(data instanceof FormData)) {\n                    return data;\n                }\n                if (addRequired) {\n                    for (let k in required) {\n                        if (required[k] !== undefined) {\n                            data.set(k, typeof required[k] === 'string' ? required[k] : new Blob([JSON.stringify(required[k])], {\n                                type: 'application/json'\n                            }));\n                        }\n                    }\n                }\n                for (let k in isForm) {\n                    if (isForm[k] !== undefined) {\n                        data[fileKeys.includes(k) ? \"append\" : \"set\"](k, typeof isForm[k] === 'string' ? isForm[k] : new Blob([JSON.stringify(isForm[k])], {\n                            type: 'application/json'\n                        }));\n                    }\n                }\n                if ((_k = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _k === void 0 ? void 0 : _k.formData) {\n                    if (typeof ((_l = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _l === void 0 ? void 0 : _l.formData) === 'function') {\n                        if (!isFormEl) {\n                            throw new skapi_error_1.default('Form data should be HTMLFormElement when formData() callback is used.', { code: 'INVALID_PARAMETER' });\n                        }\n                        let cb = options.fetchOptions.formData(data);\n                        if (cb instanceof Promise) {\n                            cb = yield cb;\n                        }\n                        if (cb instanceof FormData) {\n                            data = cb;\n                        }\n                        else {\n                            throw new skapi_error_1.default('Callback for extractFormData() should return FormData', { code: 'INVALID_PARAMETER' });\n                        }\n                    }\n                    else {\n                        throw new skapi_error_1.default('Callback \"formData\" should type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                return data;\n            });\n            if (meta) {\n                meta = Object.assign(required, meta);\n                data = yield normalize_form(data, isForm);\n            }\n            else {\n                if (!data && isForm === null) {\n                    data = required;\n                }\n                else {\n                    if (isForm) {\n                        data = yield normalize_form(data, isForm, true);\n                    }\n                    else {\n                        data = Object.assign(required, data);\n                    }\n                }\n            }\n            let requestKey = this.load_startKey_keys({\n                params: data,\n                url: isExternalUrl || url,\n                refresh: isForm ? true : refresh\n            });\n            if (requestKey && typeof requestKey === 'object') {\n                return requestKey;\n            }\n            if (typeof requestKey === 'string') {\n                if (!(this.__pendingRequest[requestKey] instanceof Promise)) {\n                    let headers = {\n                        'Accept': '*/*'\n                    };\n                    if (token) {\n                        headers.Authorization = token;\n                    }\n                    if (meta) {\n                        headers[\"Content-Meta\"] = JSON.stringify(meta);\n                    }\n                    if (options.hasOwnProperty('contentType')) {\n                        if (options === null || options === void 0 ? void 0 : options.contentType) {\n                            headers[\"Content-Type\"] = options.contentType;\n                        }\n                    }\n                    else if (!(data instanceof FormData)) {\n                        headers[\"Content-Type\"] = 'application/json';\n                    }\n                    let opt = { headers };\n                    if (options === null || options === void 0 ? void 0 : options.responseType) {\n                        opt.responseType = options.responseType;\n                    }\n                    if (method === 'post') {\n                        this.__pendingRequest[requestKey] = this._post(endpoint, data, opt);\n                    }\n                    else if (method === 'get') {\n                        this.__pendingRequest[requestKey] = this._get(endpoint, data, opt);\n                    }\n                }\n                try {\n                    let response = yield this.__pendingRequest[requestKey];\n                    if (isForm) {\n                        return response;\n                    }\n                    else {\n                        return yield this.update_startKey_keys({\n                            hashedParam: requestKey,\n                            url,\n                            response\n                        });\n                    }\n                }\n                catch (err) {\n                    throw err;\n                }\n                finally {\n                    if (requestKey && this.__pendingRequest.hasOwnProperty(requestKey)) {\n                        delete this.__pendingRequest[requestKey];\n                    }\n                }\n            }\n        });\n    }\n    load_startKey_keys(option) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        let { params = {}, url, refresh = false } = option || {};\n        if (params.hasOwnProperty('startKey')) {\n            if (typeof params.startKey !== 'object' && !Object.keys(params.startKey).length ||\n                params.startKey !== 'end') {\n                throw new skapi_error_1.default(`\"${params.startKey}\" is invalid startKey key.`, { code: 'INVALID_PARAMETER' });\n            }\n            switch (params.startKey) {\n                case 'end':\n                    return {\n                        list: [],\n                        startKey: 'end',\n                        endOfList: true\n                    };\n                case 'start':\n                    delete params.startKey;\n            }\n        }\n        let hashedParams = (0, utils_1.sha256)((() => {\n            if (params && typeof params === 'object' && Object.keys(params).length) {\n                let paramsHash = JSON.parse(JSON.stringify(params));\n                function orderObjectKeys(obj) {\n                    function sortObject(obj) {\n                        if (typeof obj === 'object' && obj) {\n                            return Object.keys(obj).sort().reduce((res, key) => (res[key] = obj[key], res), {});\n                        }\n                        return obj;\n                    }\n                    ;\n                    let _obj = sortObject(obj);\n                    for (let k in _obj) {\n                        if (_obj[k] && typeof _obj[k] === 'object') {\n                            _obj[k] = sortObject(obj[k]);\n                        }\n                    }\n                    return _obj;\n                }\n                return JSON.stringify(orderObjectKeys(paramsHash)) + url + this.service;\n            }\n            return url + this.service;\n        })());\n        if (refresh && ((_b = (_a = this.__startKey_keys) === null || _a === void 0 ? void 0 : _a[url]) === null || _b === void 0 ? void 0 : _b[hashedParams])) {\n            if (((_c = this.__cached_requests) === null || _c === void 0 ? void 0 : _c[url]) && ((_e = (_d = this.__cached_requests) === null || _d === void 0 ? void 0 : _d[url]) === null || _e === void 0 ? void 0 : _e[hashedParams])) {\n                delete this.__cached_requests[url][hashedParams];\n            }\n            if (Array.isArray(this.__startKey_keys[url][hashedParams]) && this.__startKey_keys[url][hashedParams].length) {\n                for (let p of this.__startKey_keys[url][hashedParams]) {\n                    let hashedParams_cached = hashedParams + (0, utils_1.sha256)(JSON.stringify(p));\n                    if (((_f = this.__cached_requests) === null || _f === void 0 ? void 0 : _f[url]) && ((_h = (_g = this.__cached_requests) === null || _g === void 0 ? void 0 : _g[url]) === null || _h === void 0 ? void 0 : _h[hashedParams_cached])) {\n                        delete this.__cached_requests[url][hashedParams_cached];\n                    }\n                }\n            }\n            delete this.__startKey_keys[url][hashedParams];\n            return hashedParams;\n        }\n        if (!Array.isArray((_k = (_j = this.__startKey_keys) === null || _j === void 0 ? void 0 : _j[url]) === null || _k === void 0 ? void 0 : _k[hashedParams])) {\n            return hashedParams;\n        }\n        let list_of_startKeys = this.__startKey_keys[url][hashedParams];\n        let last_startKey_key = list_of_startKeys[list_of_startKeys.length - 1];\n        let cache_hashedParams = hashedParams;\n        if (last_startKey_key) {\n            if (last_startKey_key === '\"end\"') {\n                return {\n                    list: [],\n                    startKey: 'end',\n                    endOfList: true\n                };\n            }\n            else {\n                cache_hashedParams += (0, utils_1.sha256)(last_startKey_key);\n                params.startKey = JSON.parse(last_startKey_key);\n            }\n        }\n        if ((_m = (_l = this.__cached_requests) === null || _l === void 0 ? void 0 : _l[url]) === null || _m === void 0 ? void 0 : _m[cache_hashedParams]) {\n            return (_p = (_o = this.__cached_requests) === null || _o === void 0 ? void 0 : _o[url]) === null || _p === void 0 ? void 0 : _p[cache_hashedParams];\n        }\n        return hashedParams;\n    }\n    _post(url, params, option) {\n        let responseType = null;\n        if (option.hasOwnProperty('responseType')) {\n            responseType = option.responseType;\n            delete option.responseType;\n        }\n        let opt = Object.assign({\n            method: 'POST'\n        }, option, {\n            body: params instanceof FormData ? params : JSON.stringify(params)\n        });\n        return this._fetch(url, opt, responseType);\n    }\n    postRecord(form, option) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            let is_admin = yield this.requireAdmin({ ignoreVerification: true });\n            let { formData } = option;\n            let fetchOptions = {};\n            if (typeof formData === 'function') {\n                fetchOptions.formData = formData;\n            }\n            option = (0, utils_1.checkParams)(option || {}, {\n                record_id: 'string',\n                access_group: ['number', 'private'],\n                table: ['string', () => {\n                        if (!(option === null || option === void 0 ? void 0 : option.record_id)) {\n                            throw new skapi_error_1.default('Either \"record_id\" or \"table\" should have a value.', { code: 'INVALID_PARAMETER' });\n                        }\n                    }],\n                subscription_group: 'number',\n                reference: ['string', null],\n                index: {\n                    name: 'string',\n                    value: ['string', 'number', 'boolean']\n                },\n                tags: (v) => {\n                    if (v === null) {\n                        return v;\n                    }\n                    if (typeof v === 'string') {\n                        return [v];\n                    }\n                    if (Array.isArray(v)) {\n                        for (let i of v) {\n                            if (typeof i !== 'string') {\n                                throw new skapi_error_1.default(`\"tags\" should be type: <string | string[]>`, { code: 'INVALID_PARAMETER' });\n                            }\n                        }\n                        return v;\n                    }\n                    throw new skapi_error_1.default(`\"tags\" should be type: <string | string[]>`, { code: 'INVALID_PARAMETER' });\n                },\n                config: {\n                    reference_limit: ['number', null],\n                    allow_multiple_reference: 'boolean',\n                    private_access: (v) => {\n                        let param = 'config.private_access';\n                        if (v === null) {\n                            return null;\n                        }\n                        if (v && typeof v === 'string') {\n                            v = [v];\n                        }\n                        if (Array.isArray(v)) {\n                            for (let u of v) {\n                                (0, utils_1.validateUserId)(u, `User ID in \"${param}\"`);\n                                if (this.user && u === this.user.user_id) {\n                                    throw new skapi_error_1.default(`\"${param}\" should not be the uploader's user ID.`, { code: 'INVALID_PARAMETER' });\n                                }\n                            }\n                        }\n                        else {\n                            throw new skapi_error_1.default(`\"${param}\" should be an array of user ID.`, { code: 'INVALID_PARAMETER' });\n                        }\n                        return v;\n                    }\n                }\n            }, [], ['response', 'formData', 'onerror']);\n            delete option.response;\n            delete option.formData;\n            delete option.onerror;\n            if (option === null || option === void 0 ? void 0 : option.index) {\n                if (!((_a = option.index) === null || _a === void 0 ? void 0 : _a.name) || typeof ((_b = option.index) === null || _b === void 0 ? void 0 : _b.name) !== 'string') {\n                    throw new skapi_error_1.default('\"index.name\" is required. type: string.', { code: 'INVALID_PARAMETER' });\n                }\n                (0, utils_1.checkWhiteSpaceAndSpecialChars)(option.index.name, 'index name', true);\n                if (!option.index.hasOwnProperty('value')) {\n                    throw new skapi_error_1.default('\"index.value\" is required.', { code: 'INVALID_PARAMETER' });\n                }\n                if (typeof option.index.value === 'string') {\n                    (0, utils_1.checkWhiteSpaceAndSpecialChars)(option.index.value, 'index value', false, true);\n                }\n                else if (typeof option.index.value === 'number') {\n                    if (option.index.value > this.__index_number_range || option.index.value < -this.__index_number_range) {\n                        throw new skapi_error_1.default(`Number value should be within range -${this.__index_number_range} ~ +${this.__index_number_range}`, { code: 'INVALID_PARAMETER' });\n                    }\n                }\n            }\n            if (is_admin) {\n                if ((option === null || option === void 0 ? void 0 : option.access_group) === 'private') {\n                    throw new skapi_error_1.default('Service owner cannot write private records.', { code: 'INVALID_REQUEST' });\n                }\n                if (option.hasOwnProperty('subscription_group')) {\n                    throw new skapi_error_1.default('Service owner cannot write to subscription table.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            let options = { auth: true };\n            let postData = null;\n            if (form instanceof HTMLFormElement || form instanceof FormData) {\n                Object.assign(options, { meta: option });\n            }\n            else {\n                postData = Object.assign({ data: form }, option);\n            }\n            if (Object.keys(fetchOptions).length) {\n                Object.assign(options, { fetchOptions });\n            }\n            return (0, utils_1.normalize_record_data)(yield this.request('post-record', postData || form, options));\n        });\n    }\n    getRecords(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const indexTypes = {\n                '$record_id': 'string',\n                '$updated': 'number',\n                '$uploaded': 'number',\n                '$referenced_count': 'number'\n            };\n            const struct = {\n                table: 'string',\n                reference: 'string',\n                access_group: ['number', 'private'],\n                subscription: {\n                    user_id: (v) => (0, utils_1.validateUserId)(v, 'User ID in \"subscription.user_id\"'),\n                    group: 'number'\n                },\n                index: {\n                    name: (v) => {\n                        if (typeof v !== 'string') {\n                            throw new skapi_error_1.default('\"index.name\" should be type: string.', { code: 'INVALID_PARAMETER' });\n                        }\n                        if (indexTypes.hasOwnProperty(v)) {\n                            return v;\n                        }\n                        return (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index.name', true, false);\n                    },\n                    value: (v) => {\n                        var _a;\n                        if (((_a = params.index) === null || _a === void 0 ? void 0 : _a.name) && indexTypes.hasOwnProperty(params.index.name)) {\n                            let tp = indexTypes[params.index.name];\n                            if (typeof v === tp) {\n                                return v;\n                            }\n                            else {\n                                throw new skapi_error_1.default(`\"index.value\" should be type: ${tp}.`, { code: 'INVALID_PARAMETER' });\n                            }\n                        }\n                        if (typeof v === 'number') {\n                            if (v > this.__index_number_range || v < -this.__index_number_range) {\n                                throw new skapi_error_1.default(`Number value should be within range -${this.__index_number_range} ~ +${this.__index_number_range}`, { code: 'INVALID_PARAMETER' });\n                            }\n                            return v;\n                        }\n                        else if (typeof v === 'boolean') {\n                            return v;\n                        }\n                        else {\n                            return (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index.value', false, true);\n                        }\n                    },\n                    condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne'],\n                    range: (v) => {\n                        if (!('value' in params.index)) {\n                            throw new skapi_error_1.default('\"index.value\" is required.', { code: 'INVALID_PARAMETER' });\n                        }\n                        if (params.index.name === '$record_id') {\n                            throw new skapi_error_1.default(`Cannot do \"index.range\" on ${params.index.name}`, { code: 'INVALID_PARAMETER' });\n                        }\n                        if (typeof params.index.value !== typeof v) {\n                            throw new skapi_error_1.default('\"index.range\" type should match the type of \"index.value\".', { code: 'INVALID_PARAMETER' });\n                        }\n                        if (typeof v === 'string') {\n                            return (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index.value');\n                        }\n                        return v;\n                    }\n                },\n                tags: (v) => {\n                    if (typeof v === 'string') {\n                        return [v];\n                    }\n                    else if (Array.isArray(v)) {\n                        if (v.length > 10) {\n                            throw new skapi_error_1.default('Cannot query more than 10 tags at once.', { code: 'INVALID_REQUEST' });\n                        }\n                        for (let s of v) {\n                            if (typeof s !== 'string') {\n                                throw new skapi_error_1.default('Tags should be type: <string | string[]>', { code: 'INVALID_PARAMETER' });\n                            }\n                        }\n                        return v;\n                    }\n                }\n            };\n            params = (0, utils_1.checkParams)(params || {}, struct, ['table']);\n            if ((params === null || params === void 0 ? void 0 : params.subscription) && !this.session) {\n                throw new skapi_error_1.default('Requires login.', { code: 'INVALID_REQUEST' });\n            }\n            if (params === null || params === void 0 ? void 0 : params.tags) {\n                let tagFetch = [];\n                let getStartKey = (fetchOptions === null || fetchOptions === void 0 ? void 0 : fetchOptions.startKey) || null;\n                for (let t of params.tags) {\n                    let params_copy = JSON.parse(JSON.stringify(params));\n                    params_copy.tag = t;\n                    delete params_copy.tags;\n                    let fetchOpt = fetchOptions ? JSON.parse(JSON.stringify(fetchOptions)) : null;\n                    if (fetchOpt) {\n                        delete fetchOpt.startKey;\n                        if (getStartKey && (getStartKey === null || getStartKey === void 0 ? void 0 : getStartKey[t])) {\n                            fetchOpt.startKey = getStartKey[t];\n                        }\n                    }\n                    tagFetch.push(this.request('get-records', params_copy, Object.assign({ auth: params.hasOwnProperty('access_group') && (params.access_group === 'private' || params.access_group > 0) ? true : !!this.session }, { fetchOptions: fetchOpt })));\n                }\n                let list = [];\n                let startKey = {};\n                let res_all = yield Promise.all(tagFetch);\n                for (let res of res_all) {\n                    for (let i in res.list) {\n                        if (tagFetch.includes(res.list[i].rec)) {\n                            continue;\n                        }\n                        tagFetch.push(res.list[i]);\n                        list.push((0, utils_1.normalize_record_data)(res.list[i]));\n                    }\n                    ;\n                    if (res.startKey) {\n                        if (Array.isArray(params.tags)) {\n                            let tag = params.tags.splice(0, 1);\n                            startKey[tag[0]] = res.startKey;\n                        }\n                    }\n                }\n                let endOfList = true;\n                for (let k in startKey) {\n                    if (startKey[k] && startKey[k] !== 'end') {\n                        endOfList = false;\n                        break;\n                    }\n                }\n                return {\n                    list,\n                    endOfList,\n                    startKey\n                };\n            }\n            let result = yield this.request('get-records', params, Object.assign({ auth: params.hasOwnProperty('access_group') && (params.access_group === 'private' || params.access_group > 0) ? true : !!this.user }, { fetchOptions }));\n            for (let i in result.list) {\n                result.list[i] = (0, utils_1.normalize_record_data)(result.list[i]);\n            }\n            ;\n            return result;\n        });\n    }\n    getTable(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let res = yield this.request('get-table', (0, utils_1.checkParams)(params || {}, {\n                table: 'string',\n                condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n            }), Object.assign({ auth: true }, { fetchOptions }));\n            let convert = {\n                'cnt_rec': 'number_of_records',\n                'tbl': 'table',\n                'srvc': 'service'\n            };\n            if (Array.isArray(res.list)) {\n                for (let t of res.list) {\n                    for (let k in convert) {\n                        if (t.hasOwnProperty(k)) {\n                            t[convert[k]] = t[k];\n                            delete t[k];\n                        }\n                    }\n                }\n            }\n            return res;\n        });\n    }\n    getIndex(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let p = (0, utils_1.checkParams)(params || {}, {\n                table: 'string',\n                index: (v) => (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index name', true, false),\n                order_by: {\n                    name: [\n                        'average_number',\n                        'total_number',\n                        'number_count',\n                        'average_bool',\n                        'total_bool',\n                        'bool_count',\n                        'string_count',\n                        'index_name'\n                    ],\n                    value: ['string', 'number', 'boolean'],\n                    condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n                }\n            }, ['table']);\n            if (p.hasOwnProperty('order_by')) {\n                if (p.order_by === 'index_name') {\n                    if (!p.hasOwnProperty('index')) {\n                        throw new skapi_error_1.default('\"index\" is required for ordered by \"index_name\".', { code: 'INVALID_PARAMETER' });\n                    }\n                    if (p.index.substring(p.index.length - 1) !== '.') {\n                        throw new skapi_error_1.default('\"index\" should be parent \"index name\".', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                if (p.order_by.hasOwnProperty('condition') && !p.order_by.hasOwnProperty('value')) {\n                    throw new skapi_error_1.default('\"value\" is required for \"condition\".', { code: 'INVALID_PARAMETER' });\n                }\n            }\n            let res = yield this.request('get-index', p, Object.assign({ auth: true }, { fetchOptions }));\n            let convert = {\n                'cnt_bool': 'boolean_count',\n                'cnt_numb': 'number_count',\n                'totl_numb': 'total_number',\n                'totl_bool': 'total_bool',\n                'avrg_numb': 'average_number',\n                'avrg_bool': 'average_bool',\n                'cnt_str': 'string_count'\n            };\n            if (Array.isArray(res.list)) {\n                res.list = res.list.map((i) => {\n                    let iSplit = i.idx.split('/');\n                    let resolved = {\n                        table: iSplit[1],\n                        index: iSplit[2],\n                        number_of_records: i.cnt_rec\n                    };\n                    for (let k in convert) {\n                        if (i === null || i === void 0 ? void 0 : i[k]) {\n                            resolved[convert[k]] = i[k];\n                        }\n                        if (resolved === null || resolved === void 0 ? void 0 : resolved.number_of_number_values) {\n                            resolved.average_of_number_values = i.totl_numb / i.cnt_numb;\n                        }\n                        if (resolved === null || resolved === void 0 ? void 0 : resolved.number_of_boolean_values) {\n                            resolved.average_of_boolean_values = i.totl_bool / i.cnt_bool;\n                        }\n                    }\n                    return resolved;\n                });\n            }\n            return res;\n        });\n    }\n    getTag(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let res = yield this.request('get-tag', (0, utils_1.checkParams)(params || {}, {\n                table: 'string',\n                tag: 'string',\n                condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n            }), Object.assign({ auth: true }, { fetchOptions }));\n            if (Array.isArray(res.list)) {\n                for (let i in res.list) {\n                    let item = res.list[i];\n                    let tSplit = item.tag.split('/');\n                    res.list[i] = {\n                        table: tSplit[1],\n                        tag: tSplit[0],\n                        number_of_records: item.cnt_rec\n                    };\n                }\n            }\n            return res;\n        });\n    }\n    deleteRecords(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isAdmin = yield this.requireAdmin();\n            if (isAdmin && !(params === null || params === void 0 ? void 0 : params.service)) {\n                throw new skapi_error_1.default('Service ID is required.', { code: 'INVALID_PARAMETER' });\n            }\n            if (!isAdmin && !(params === null || params === void 0 ? void 0 : params.table)) {\n                throw new skapi_error_1.default('\"table\" is required.', { code: 'INVALID_PARAMETER' });\n            }\n            if (params === null || params === void 0 ? void 0 : params.record_id) {\n                return yield this.request('del-records', {\n                    service: params.service,\n                    record_id: (v => {\n                        let id = (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'record_id', false);\n                        if (typeof id === 'string') {\n                            return [id];\n                        }\n                        return id;\n                    })(params.record_id)\n                }, { auth: true });\n            }\n            else {\n                if (!(params === null || params === void 0 ? void 0 : params.table)) {\n                    throw new skapi_error_1.default('Either \"table\" or \"record_id\" is required.', { code: 'INVALID_PARAMETER' });\n                }\n                let struct = {\n                    access_group: ['number', 'private'],\n                    table: {\n                        name: 'string',\n                        subscription: (v) => {\n                            if (isAdmin) {\n                                return (0, utils_1.validateUserId)(v, 'User ID in \"table.subscription\"');\n                            }\n                            throw new skapi_error_1.default('\"table.subscription\" is an invalid parameter key.', { code: 'INVALID_PARAMETER' });\n                        },\n                        subscription_group: (v) => {\n                            var _a;\n                            if (isAdmin && typeof ((_a = params === null || params === void 0 ? void 0 : params.table) === null || _a === void 0 ? void 0 : _a.subscription) !== 'string') {\n                                throw new skapi_error_1.default('\"table.subscription\" is required.', { code: 'INVALID_PARAMETER' });\n                            }\n                            if (typeof v === 'number') {\n                                if (v > 0 && v < 99) {\n                                    return v;\n                                }\n                            }\n                            throw new skapi_error_1.default('Subscription group should be between 0 ~ 99.', { code: 'INVALID_PARAMETER' });\n                        }\n                    }\n                };\n                params = (0, utils_1.checkParams)(params || {}, struct, isAdmin ? ['service'] : ['table', 'access_group']);\n            }\n            return yield this.request('del-records', params, { auth: true });\n        });\n    }\n    subscribeNewsletter(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let params = (0, utils_1.checkParams)(form || {}, {\n                email: (v) => (0, utils_1.validateEmail)(v),\n                bypassWelcome: ['boolean', () => true]\n            }, ['email']);\n            return yield this.request('subscribe-newsletter', params);\n        });\n    }\n    subscriptionGroupCheck(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            option = (0, utils_1.checkParams)(option, {\n                user_id: (v) => (0, utils_1.validateUserId)(v, '\"user_id\"'),\n                group: (v) => {\n                    if (v === '*') {\n                        return v;\n                    }\n                    if (typeof v !== 'number') {\n                        throw new skapi_error_1.default('\"group\" should be type: number.', { code: 'INVALID_PARAMETER' });\n                    }\n                    else if (v < 1 && v > 9) {\n                        throw new skapi_error_1.default('\"group\" should be within range 1 ~ 9.', { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                }\n            }, ['user_id', 'group']);\n            if (this.user && option.user_id === this.user.user_id) {\n                throw new skapi_error_1.default(`\"user_id\" cannot be the user's own ID.`, { code: 'INVALID_PARAMETER' });\n            }\n            return option;\n        });\n    }\n    subscribe(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            if (group === '*') {\n                throw new skapi_error_1.default('Cannot subscribe to all groups at once.', { code: 'INVALID_PARAMETER' });\n            }\n            return yield this.request('subscription', {\n                subscribe: user_id,\n                group\n            }, { auth: true });\n        });\n    }\n    unsubscribe(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            return yield this.request('subscription', {\n                unsubscribe: user_id,\n                group\n            }, { auth: true });\n        });\n    }\n    blockSubscriber(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            return yield this.request('subscription', { block: user_id, group }, { auth: true });\n        });\n    }\n    unblockSubscriber(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            return yield this.request('subscription', { unblock: user_id, group }, { auth: true });\n        });\n    }\n    getUserSubscriptions(option) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            option = (0, utils_1.checkParams)(option, {\n                user_id: (v) => {\n                    try {\n                        return (0, utils_1.validateUserId)(v, '\"user_id\"');\n                    }\n                    catch (err) {\n                    }\n                    try {\n                        return (0, utils_1.validateEmail)(v);\n                    }\n                    catch (err) {\n                    }\n                    throw new skapi_error_1.default('\"subscriber\" should be either valid user ID or E-Mail.', { code: 'INVALID_PARAMETER' });\n                },\n                group: 'number'\n            }) || {};\n            return this.getSubscriptions({\n                subscriber: option.user_id || ((_a = this.user) === null || _a === void 0 ? void 0 : _a.user_id),\n                group: option.group\n            });\n        });\n    }\n    getUserSubscribers(option) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            option = (0, utils_1.checkParams)(option, {\n                user_id: (v) => (0, utils_1.validateUserId)(v, '\"user_id\"'),\n                group: 'number'\n            }) || {};\n            let subParams = {\n                subscription: option.user_id || ((_a = this.user) === null || _a === void 0 ? void 0 : _a.user_id),\n                group: option.group\n            };\n            return this.getSubscriptions(subParams);\n        });\n    }\n    getSubscriptions(params, fetchOptions, _mapper) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isNewsletterSub = false;\n            params = (0, utils_1.checkParams)(params, {\n                subscriber: (v) => {\n                    try {\n                        return (0, utils_1.validateUserId)(v, 'User ID in \"subscriber\"');\n                    }\n                    catch (err) {\n                    }\n                    try {\n                        let isEmail = (0, utils_1.validateEmail)(v);\n                        isNewsletterSub = true;\n                        return isEmail;\n                    }\n                    catch (err) {\n                    }\n                    throw new skapi_error_1.default('\"subscriber\" should be either valid user ID or E-Mail.', { code: 'INVALID_PARAMETER' });\n                },\n                group: 'number',\n                subscription: (v) => {\n                    try {\n                        return (0, utils_1.validateUserId)(v, 'User ID in \"subscription\"');\n                    }\n                    catch (err) {\n                    }\n                    if (typeof v === 'string' && v.length === 14) {\n                        return v;\n                    }\n                    throw new skapi_error_1.default('\"subscriber\" should be either valid service ID or user ID.', { code: 'INVALID_PARAMETER' });\n                },\n                blocked: 'boolean'\n            });\n            if (isNewsletterSub && !(params === null || params === void 0 ? void 0 : params.subscription)) {\n                params.subscription = this.service;\n            }\n            if (!params.subscriber && !params.subscription) {\n                throw new skapi_error_1.default('At least either \"subscriber\" or \"subscription\" should have a value.', { code: 'INVALID_PARAMETER' });\n            }\n            let response = yield this.request('get-subscription', params, Object.assign({ auth: !isNewsletterSub }, { fetchOptions }));\n            response.list = response.list.map(_mapper || ((s) => {\n                let subscription = {};\n                let subSplit = s.sub.split('#');\n                subscription.subscriber = subSplit[2];\n                subscription.subscription = subSplit[0];\n                subscription.group = parseInt(subSplit[1]);\n                subscription.timestamp = s.stmp;\n                subscription.blocked = s.grp.substring(0, 1) === 'N';\n                return subscription;\n            }));\n            return response;\n        });\n    }\n    getNewsletters(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isAdmin = yield this.requireAdmin();\n            let searchType = {\n                'message_id': 'string',\n                'timestamp': 'number',\n                'read': 'number',\n                'complaint': 'number',\n                'subject': 'string'\n            };\n            if (!params) {\n                if (!fetchOptions) {\n                    fetchOptions = {};\n                }\n                fetchOptions.ascending = false;\n            }\n            let _params = params || {\n                searchFor: 'timestamp',\n                value: 0,\n                condition: '>'\n            };\n            params = (0, utils_1.checkParams)(_params, {\n                searchFor: ['message_id', 'timestamp', 'read', 'complaint', 'group', 'subject'],\n                value: (v) => {\n                    if (typeof v !== searchType[_params.searchFor]) {\n                        throw new skapi_error_1.default(`\"value\" type does not match the type of \"${_params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    else if (typeof v === 'string' && !v) {\n                        throw new skapi_error_1.default('\"value\" should not be empty string.', { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                },\n                range: (v) => {\n                    if (!_params.hasOwnProperty('value') || typeof v !== typeof _params.value) {\n                        throw new skapi_error_1.default('\"range\" should match type of \"value\".', { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                },\n                condition: ['>', '>=', '=', '<', '<=', 'gt', 'gte', 'eq', 'lt', 'lte', () => '='],\n                group: (x) => {\n                    if (x !== 'newsletter' && !this.session) {\n                        throw new skapi_error_1.default('User should be logged in.', { code: 'INVALID_REQUEST' });\n                    }\n                    if (typeof x === 'string' && x !== 'newsletter') {\n                        throw new skapi_error_1.default('Group should be either \"newsletter\" or access group number.', { code: 'INVALID_PARAMETER' });\n                    }\n                    if (!isAdmin && x > parseInt(this.session.idToken.payload.access_group)) {\n                        throw new skapi_error_1.default('User has no access.', { code: 'INVALID_REQUEST' });\n                    }\n                    if (x === 'newsletter') {\n                        return 0;\n                    }\n                    return x;\n                }\n            }, ['searchFor', 'value', 'group']);\n            let mails = yield this.request(params.group === 0 ? 'get-newsletters' : 'get-serviceletters', params, Object.assign({ method: 'get', auth: params.group !== 0 }, { fetchOptions }));\n            let remap = {\n                'message_id': 'mid',\n                'timestamp': 'stmp',\n                'complaint': 'cmpl',\n                'read': 'read',\n                'subject': 'subj',\n                'bounced': 'bnce',\n                'url': 'url'\n            };\n            let defaults = {\n                'message_id': '',\n                'timestamp': 0,\n                'complaint': 0,\n                'read': 0,\n                'subject': '',\n                'bounced': 0,\n                'url': ''\n            };\n            mails.list = mails.list.map(m => {\n                let remapped = {};\n                for (let k in remap) {\n                    remapped[k] = m[remap[k]] || defaults[remap[k]];\n                }\n                return remapped;\n            });\n            return mails;\n        });\n    }\n    signup(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.logout();\n            let params = (0, utils_1.checkParams)(form || {}, {\n                email: (v) => (0, utils_1.validateEmail)(v),\n                password: (v) => (0, utils_1.validatePassword)(v),\n                name: 'string',\n                address: 'string',\n                gender: 'string',\n                birthdate: (v) => (0, utils_1.validateBirthdate)(v),\n                phone_number: (v) => (0, utils_1.validatePhoneNumber)(v),\n                email_public: ['boolean', () => false],\n                address_public: ['boolean', () => false],\n                gender_public: ['boolean', () => false],\n                birthdate_public: ['boolean', () => false],\n                phone_number_public: ['boolean', () => false],\n                email_subscription: ['boolean', () => false]\n            }, ['email', 'password']);\n            option = (0, utils_1.checkParams)(option || {}, {\n                confirmation: (v) => {\n                    if (typeof v === 'string') {\n                        return (0, utils_1.validateUrl)(v);\n                    }\n                    else if (typeof v === 'boolean') {\n                        return v;\n                    }\n                    else {\n                        throw new skapi_error_1.default('\"option.confirmation\" should be type: <string | boolean>.', { code: 'INVALID_PARAMETER' });\n                    }\n                },\n                login: (v) => {\n                    if (typeof v === 'boolean') {\n                        if (option.confirmation && v) {\n                            throw new skapi_error_1.default('\"login\" is not allowed when \"option.confirmation\" is true.', { code: 'INVALID_PARAMETER' });\n                        }\n                        return v;\n                    }\n                    throw new skapi_error_1.default('\"option.login\" should be type: boolean.', { code: 'INVALID_PARAMETER' });\n                }\n            });\n            let { login = false, confirmation = false } = option || {};\n            if (!confirmation && params.email_public) {\n                throw new skapi_error_1.default('\"option.confirmation\" should be true if \"email_public\" is set to true.', { code: 'INVALID_PARAMETER' });\n            }\n            yield this.request(\"signup\", params, { meta: option });\n            if (confirmation) {\n                return \"SUCCESS: The account has been created. User's email confirmation is required.\";\n            }\n            else if (login) {\n                return yield this.login({ email: params.email, password: params.password });\n            }\n            else {\n                return 'SUCCESS: The account has been created.';\n            }\n        });\n    }\n    logout() {\n        if (this.cognitoUser) {\n            this.cognitoUser.signOut();\n        }\n        let to_be_erased = {\n            'session': null,\n            '__startKey_keys': {},\n            '__cached_requests': {},\n            'user': null\n        };\n        for (let k in to_be_erased) {\n            this[k] = to_be_erased[k];\n        }\n        return 'SUCCESS: The user has been logged out.';\n    }\n    resendSignupConfirmation(redirect) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.__request_signup_confirmation) {\n                throw new skapi_error_1.default('Least one login attempt is required.', { code: 'INVALID_REQUEST' });\n            }\n            if (redirect) {\n                (0, utils_1.validateUrl)(redirect);\n            }\n            let resend = yield this.request(\"confirm-signup\", {\n                username: this.__request_signup_confirmation,\n                redirect\n            });\n            this.__request_signup_confirmation = null;\n            return resend;\n        });\n    }\n    recoverAccount(redirect = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof redirect === 'string') {\n                (0, utils_1.validateUrl)(redirect);\n            }\n            else if (typeof redirect !== 'boolean') {\n                throw new skapi_error_1.default('Argument should be type: <boolean | string>.', { code: 'INVALID_REQUEST' });\n            }\n            if (!this.__disabledAccount) {\n                throw new skapi_error_1.default('Least one signin attempt of disabled account is required.', { code: 'INVALID_REQUEST' });\n            }\n            let resend = yield this.request(\"recover-account\", { username: this.__disabledAccount, redirect });\n            this.__disabledAccount = null;\n            return resend;\n        });\n    }\n    login(form, option) {\n        this.logout();\n        let params = (0, utils_1.checkParams)(form, {\n            email: (v) => (0, utils_1.validateEmail)(v),\n            password: (v) => (0, utils_1.validatePassword)(v)\n        }, ['email', 'password']);\n        return this.authentication().authenticateUser(params.email, params.password);\n    }\n    verifyAttribute(attribute, code) {\n        if (!this.cognitoUser) {\n            throw new skapi_error_1.default('The user has to be logged in.', { code: 'INVALID_REQUEST' });\n        }\n        return new Promise((res, rej) => {\n            var _a, _b;\n            let callback = {\n                onSuccess: (result) => {\n                    if (code) {\n                        this.authentication().updateSession({ refreshToken: true }).then(() => {\n                            if (this.user) {\n                                this.user[attribute + '_verified'] = true;\n                            }\n                            res(`SUCCESS: \"${attribute}\" is verified.`);\n                        }).catch(err => {\n                            rej(err);\n                        });\n                    }\n                    else {\n                        res('SUCCESS: Verification code has been sent.');\n                    }\n                },\n                onFailure: (err) => {\n                    rej(new skapi_error_1.default(err.message || 'Failed to request verification code.', {\n                        code: err === null || err === void 0 ? void 0 : err.code\n                    }));\n                },\n                inputVerificationCode: null\n            };\n            if (code) {\n                (_a = this.cognitoUser) === null || _a === void 0 ? void 0 : _a.verifyAttribute(attribute, code, callback);\n            }\n            else {\n                (_b = this.cognitoUser) === null || _b === void 0 ? void 0 : _b.getAttributeVerificationCode(attribute, callback);\n            }\n        });\n    }\n    verifyEmail(form, option) {\n        let code = (form ? (0, utils_1.checkParams)(form, {\n            code: ['number', 'string']\n        }) : {}).code || '';\n        return this.verifyAttribute('email', code.toString());\n    }\n    verifyMobile(form, option) {\n        let code = (form ? (0, utils_1.checkParams)(form, {\n            code: ['number', 'string']\n        }) : {}).code || null;\n        return this.verifyAttribute('phone_number', code.toString());\n    }\n    forgotPassword(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            let params = (0, utils_1.checkParams)(form, {\n                email: (v) => (0, utils_1.validateEmail)(v)\n            }, ['email']);\n            return new Promise((res, rej) => __awaiter(this, void 0, void 0, function* () {\n                let cognitoUser = (yield this.authentication().createCognitoUser(params.email)).cognitoUser;\n                cognitoUser.forgotPassword({\n                    onSuccess: result => {\n                        res(\"SUCCESS: Verification code has been sent.\");\n                    },\n                    onFailure: (err) => {\n                        rej(new skapi_error_1.default((err === null || err === void 0 ? void 0 : err.message) || 'Failed to send verification code.', { code: (err === null || err === void 0 ? void 0 : err.code) || 'ERROR' }));\n                    }\n                });\n            }));\n        });\n    }\n    resetPassword(form, option) {\n        let params = (0, utils_1.checkParams)(form, {\n            email: (v) => (0, utils_1.validateEmail)(v),\n            code: ['number', 'string'],\n            new_password: (v) => (0, utils_1.validatePassword)(v)\n        }, ['email', 'code', 'new_password']);\n        let code = params.code, new_password = params.new_password;\n        if (typeof code === 'number') {\n            code = code.toString();\n        }\n        return new Promise((res, rej) => __awaiter(this, void 0, void 0, function* () {\n            let cognitoUser = (yield this.authentication().createCognitoUser(params.email)).cognitoUser;\n            cognitoUser.confirmPassword(code, new_password, {\n                onSuccess: result => {\n                    res(\"SUCCESS: New password has been set.\");\n                },\n                onFailure: (err) => {\n                    rej(new skapi_error_1.default((err === null || err === void 0 ? void 0 : err.message) || 'Failed to reset password.', { code: err === null || err === void 0 ? void 0 : err.code }));\n                }\n            });\n        }));\n    }\n    disableAccount() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            if (this.user && Array.isArray(this.user.services)) {\n                for (let s of this.user.services) {\n                    if (s.active) {\n                        throw new skapi_error_1.default('All services needs to be disabled.', { code: 'INVALID_REQUEST' });\n                    }\n                }\n            }\n            let result = yield this.request('remove-account', { disable: true }, { auth: true });\n            this.logout();\n            return result;\n        });\n    }\n    updateUserSettings(form, option) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            let attr = (_a = this.session) === null || _a === void 0 ? void 0 : _a.attributes;\n            if (!attr || !this.cognitoUser) {\n                throw new skapi_error_1.default('User has to be logged in.', { code: 'INVALID_REQUEST' });\n            }\n            let params = (0, utils_1.checkParams)(form || {}, {\n                email: (v) => (0, utils_1.validateEmail)(v),\n                name: 'string',\n                address: 'string',\n                gender: 'string',\n                birthdate: (v) => (0, utils_1.validateBirthdate)(v),\n                phone_number: (v) => (0, utils_1.validatePhoneNumber)(v),\n                email_public: 'boolean',\n                phone_number_public: 'boolean',\n                address_public: 'boolean',\n                gender_public: 'boolean',\n                birthdate_public: 'boolean',\n                email_subscription: 'boolean',\n                current_password: (v) => (0, utils_1.validatePassword)(v),\n                new_password: (v) => (0, utils_1.validatePassword)(v)\n            });\n            if (params && typeof params === 'object' && !Object.keys(params).length) {\n                return this.user;\n            }\n            if (params.new_password || params.current_password) {\n                if (!params.current_password) {\n                    throw new skapi_error_1.default('\"current_password\" is needed to change the password.', { code: 'INVALID_PARAMETER' });\n                }\n                if (!params.new_password) {\n                    throw new skapi_error_1.default('\"new_password\" is needed to change password.', { code: 'INVALID_PARAMETER' });\n                }\n                if (params.new_password !== params.current_password) {\n                    yield new Promise((res, rej) => {\n                        this.cognitoUser.changePassword(params.current_password, params.new_password, (err, result) => {\n                            if (err) {\n                                rej(new skapi_error_1.default((err === null || err === void 0 ? void 0 : err.message) || 'Failed to change users password.', { code: (err === null || err === void 0 ? void 0 : err.code) || (err === null || err === void 0 ? void 0 : err.name) }));\n                            }\n                            res(result);\n                        });\n                    });\n                }\n                delete params.current_password;\n                delete params.new_password;\n            }\n            if (params.email) {\n                let connect = yield this.updateConnection({ request_hash: params.email });\n                params['preferred_username'] = connect.hash;\n            }\n            let collision = [\n                ['email_subscription', 'email_verified', \"User's E-Mail should be verified to set\"],\n                ['email_public', 'email_verified', \"User's E-Mail should be verified to set\"],\n                ['phone_number_public', 'phone_number_verified', \"User's phone number should be verified to set\"]\n            ];\n            if (this.user) {\n                for (let c of collision) {\n                    if (params[c[0]] && !this.user[c[1]]) {\n                        throw new skapi_error_1.default(`${c[2]} \"${c[0]}\" to true.`, { code: 'INVALID_REQUEST' });\n                    }\n                }\n            }\n            let customAttr = [\n                'email_public',\n                'phone_number_public',\n                'address_public',\n                'gender_public',\n                'birthdate_public',\n                'email_subscription'\n            ];\n            for (let k in params) {\n                if (params[k] === attr[k]) {\n                    delete params[k];\n                }\n                else if (customAttr.includes(k)) {\n                    let parseValue = params[k];\n                    if (typeof parseValue === 'boolean')\n                        parseValue = parseValue ? '1' : '0';\n                    params['custom:' + k] = parseValue;\n                    delete params[k];\n                }\n            }\n            if (params && typeof params === 'object' && Object.keys(params).length) {\n                let toSet = [];\n                for (let key in params) {\n                    toSet.push(new amazon_cognito_identity_js_1.CognitoUserAttribute({\n                        Name: key,\n                        Value: params[key]\n                    }));\n                }\n                yield new Promise((res, rej) => {\n                    var _a;\n                    (_a = this.cognitoUser) === null || _a === void 0 ? void 0 : _a.updateAttributes(toSet, (err, result) => {\n                        if (err) {\n                            rej([\n                                (err === null || err === void 0 ? void 0 : err.code) || (err === null || err === void 0 ? void 0 : err.name),\n                                (err === null || err === void 0 ? void 0 : err.message) || `Failed to update user settings.`\n                            ]);\n                        }\n                        res(result);\n                    });\n                });\n                yield this.authentication().updateSession({ refreshToken: true });\n            }\n            return this.user;\n        });\n    }\n    uploadUserData(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            option = (0, utils_1.checkParams)(option || {}, {\n                private: 'array'\n            });\n            let opt = {\n                auth: true\n            };\n            if (option === null || option === void 0 ? void 0 : option.private) {\n                Object.assign(opt, { meta: { '__private__': option.private } });\n            }\n            yield this.request('post-userdata', form, opt);\n            yield this.authentication().updateSession();\n            return this.user;\n        });\n    }\n    getUsers(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isAdmin = yield this.requireAdmin({\n                ignoreVerification: true\n            });\n            if (!params) {\n                if (!fetchOptions) {\n                    fetchOptions = {};\n                }\n                fetchOptions.ascending = false;\n            }\n            params = params || {\n                searchFor: 'timestamp',\n                condition: '>',\n                value: 0\n            };\n            const searchForTypes = {\n                'user_id': (v) => (0, utils_1.validateUserId)(v),\n                'name': 'string',\n                'email': (v) => (0, utils_1.validateEmail)(v),\n                'phone_number': (v) => (0, utils_1.validatePhoneNumber)(v),\n                'address': 'string',\n                'gender': 'string',\n                'birthdate': (v) => (0, utils_1.validateBirthdate)(v),\n                'locale': (v) => {\n                    if (typeof v !== 'string' || typeof v === 'string' && v.length > 5) {\n                        throw new skapi_error_1.default('Value of \"locale\" should be a country code.');\n                    }\n                    return v;\n                },\n                'subscribers': 'number',\n                'timestamp': 'number',\n                'group': 'number',\n                'email_subscription': (v) => {\n                    if (!isAdmin) {\n                        throw new skapi_error_1.default('Only admin is allowed to search \"email_subscription\".', { code: 'INVALID_REQUEST' });\n                    }\n                    return v;\n                },\n                'blocked': (v) => {\n                    if (v) {\n                        return 'by_admin:suspended';\n                    }\n                    else {\n                        return 'by_admin:approved';\n                    }\n                }\n            };\n            let required = ['searchFor', 'value'];\n            params = (0, utils_1.checkParams)(params, {\n                searchFor: [\n                    'user_id',\n                    'name',\n                    'email',\n                    'phone_number',\n                    'address',\n                    'gender',\n                    'birthdate',\n                    'locale',\n                    'subscribers',\n                    'timestamp',\n                    'group',\n                    'email_subscription',\n                    'blocked'\n                ],\n                condition: ['>', '>=', '=', '<', '<=', 'gt', 'gte', 'eq', 'lt', 'lte', () => '='],\n                value: (v) => {\n                    let checker = searchForTypes[params.searchFor];\n                    if (typeof checker === 'function') {\n                        return checker(v);\n                    }\n                    else if (typeof v !== checker) {\n                        throw new skapi_error_1.default(`Value does not match the type of \"${params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                },\n                range: (v) => {\n                    let checker = searchForTypes[params.searchFor];\n                    if (typeof checker === 'function') {\n                        return checker(v);\n                    }\n                    else if (typeof v !== checker) {\n                        throw new skapi_error_1.default(`Range does not match the type of \"${params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                }\n            }, required);\n            if ((params === null || params === void 0 ? void 0 : params.condition) && (params === null || params === void 0 ? void 0 : params.condition) !== '=' && params.hasOwnProperty('range')) {\n                throw new skapi_error_1.default('Conditions does not apply on range search.', { code: 'INVALID_PARAMETER' });\n            }\n            if (['user_id', 'blocked'].includes(params.searchFor) && params.condition !== '=') {\n                throw new skapi_error_1.default(`Condition is not allowed on \"${params.searchFor}\"`, { code: 'INVALID_PARAMETER' });\n            }\n            if (params.searchFor === 'blocked') {\n                params.searchFor = 'suspended';\n            }\n            if (typeof (params === null || params === void 0 ? void 0 : params.value) === 'string' && !(params === null || params === void 0 ? void 0 : params.value)) {\n                throw new skapi_error_1.default('Value should not be an empty string.', { code: 'INVALID_PARAMETER' });\n            }\n            if (typeof (params === null || params === void 0 ? void 0 : params.searchFor) === 'string' && !(params === null || params === void 0 ? void 0 : params.searchFor)) {\n                throw new skapi_error_1.default('\"searchFor\" should not be an empty string.', { code: 'INVALID_PARAMETER' });\n            }\n            let isSelfProfile = params.searchFor === 'user_id' && params.value === this.session.idToken.payload.sub;\n            if (isAdmin && !isSelfProfile && !params.service) {\n                throw new skapi_error_1.default('Service ID is required.', { code: 'INVALID_PARAMETER' });\n            }\n            let result = yield this.request('get-users', params, { auth: true, fetchOptions });\n            if (!result.list[0] || !isSelfProfile || result.list.length > 1) {\n                return result;\n            }\n            let user = result.list[0];\n            Object.assign(user, this.user);\n            user._what_public_see = JSON.parse(JSON.stringify(user));\n            let public_keys = [\n                'service',\n                'user_id',\n                'name',\n                'locale',\n                'address',\n                'birthdate',\n                'phone_number',\n                'email',\n                'gender',\n                'subscribers',\n                'timestamp',\n                'group',\n                'log',\n                'user_data'\n            ];\n            for (let k in user._what_public_see) {\n                if (!public_keys.includes(k)) {\n                    delete user._what_public_see[k];\n                }\n            }\n            return user;\n        });\n    }\n    updateConnection(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let request = null;\n            let connectedService = {};\n            if (params === null || params === void 0 ? void 0 : params.request_hash) {\n                if (this.__serviceHash[params.request_hash]) {\n                    Object.assign(connectedService, { hash: this.__serviceHash[params.request_hash] });\n                }\n                else {\n                    request = {\n                        request_hash: (0, utils_1.validateEmail)(params.request_hash)\n                    };\n                }\n            }\n            if (!this.connection || this.connection.service !== this.service || request) {\n                if (request === null) {\n                    request = {};\n                }\n                Object.assign(request, {\n                    service: this.service,\n                    service_owner: this.service_owner\n                });\n            }\n            Object.assign(connectedService, (request ? yield this.request('service', request, { bypassAwaitConnection: true }) : this.connection));\n            if (params === null || params === void 0 ? void 0 : params.request_hash) {\n                this.__serviceHash[params.request_hash] = connectedService.hash;\n            }\n            let connection = JSON.parse(JSON.stringify(connectedService));\n            delete connection.hash;\n            this.connection = connection;\n            return connectedService;\n        });\n    }\n}\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"postRecord\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"subscribeNewsletter\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"subscribe\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"unsubscribe\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"blockSubscriber\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"unblockSubscriber\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"signup\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"login\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"verifyEmail\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"verifyMobile\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"forgotPassword\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"resetPassword\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"updateUserSettings\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"uploadUserData\", null);\nexports.default = Skapi;\n//# sourceMappingURL=skapi.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass SkapiError extends Error {\n    constructor(error, options) {\n        if (error instanceof Error) {\n            super(error.message || 'Something went wrong.');\n            this.cause = error;\n            this.name = error.name;\n            if (error.hasOwnProperty('code')) {\n                this.code = error.code;\n            }\n        }\n        else if (typeof error === 'string') {\n            super(error || 'Something went wrong.');\n            this.name = \"SkapiError\";\n            this.code = 'ERROR';\n            if (options) {\n                if (options.code) {\n                    this.code = options.code;\n                }\n                if (options.cause) {\n                    this.cause = options.cause;\n                }\n            }\n        }\n    }\n}\nexports.default = SkapiError;\n//# sourceMappingURL=skapi_error.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha256 = exports.validateUrl = exports.validatePhoneNumber = exports.validatePassword = exports.validateEmail = exports.validateBirthdate = exports.validateUserId = exports.extractFormMetaData = exports.checkParams = exports.normalize_record_data = exports.checkWhiteSpaceAndSpecialChars = void 0;\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nconst sha256 = function (ascii) {\n    function rightRotate(value, amount) {\n        return (value >>> amount) | (value << (32 - amount));\n    }\n    ;\n    var mathPow = Math.pow;\n    var maxWord = mathPow(2, 32);\n    var lengthProperty = 'length';\n    var i, j;\n    var result = '';\n    var words = [];\n    var asciiBitLength = ascii[lengthProperty] * 8;\n    var hash = sha256.h = sha256.h || [];\n    var k = sha256.k = sha256.k || [];\n    var primeCounter = k[lengthProperty];\n    var isComposite = {};\n    for (var candidate = 2; primeCounter < 64; candidate++) {\n        if (!isComposite[candidate]) {\n            for (i = 0; i < 313; i += candidate) {\n                isComposite[i] = candidate;\n            }\n            hash[primeCounter] = (mathPow(candidate, .5) * maxWord) | 0;\n            k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n        }\n    }\n    ascii += '\\x80';\n    while (ascii[lengthProperty] % 64 - 56)\n        ascii += '\\x00';\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n        j = ascii.charCodeAt(i);\n        if (j >> 8)\n            return;\n        words[i >> 2] |= j << ((3 - i) % 4) * 8;\n    }\n    words[words[lengthProperty]] = ((asciiBitLength / maxWord) | 0);\n    words[words[lengthProperty]] = (asciiBitLength);\n    for (j = 0; j < words[lengthProperty];) {\n        var w = words.slice(j, j += 16);\n        var oldHash = hash;\n        hash = hash.slice(0, 8);\n        for (i = 0; i < 64; i++) {\n            var i2 = i + j;\n            var w15 = w[i - 15], w2 = w[i - 2];\n            var a = hash[0], e = hash[4];\n            var temp1 = hash[7]\n                + (rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25))\n                + ((e & hash[5]) ^ ((~e) & hash[6]))\n                + k[i]\n                + (w[i] = (i < 16) ? w[i] : (w[i - 16]\n                    + (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))\n                    + w[i - 7]\n                    + (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))) | 0);\n            var temp2 = (rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22))\n                + ((a & hash[1]) ^ (a & hash[2]) ^ (hash[1] & hash[2]));\n            hash = [(temp1 + temp2) | 0].concat(hash);\n            hash[4] = (hash[4] + temp1) | 0;\n        }\n        for (i = 0; i < 8; i++) {\n            hash[i] = (hash[i] + oldHash[i]) | 0;\n        }\n    }\n    for (i = 0; i < 8; i++) {\n        for (j = 3; j + 1; j--) {\n            var b = (hash[i] >> (j * 8)) & 255;\n            result += ((b < 16) ? 0 : '') + b.toString(16);\n        }\n    }\n    return result;\n};\nexports.sha256 = sha256;\nfunction checkParams(params, struct, required = null, bypassCheck = [], _parentKey = null) {\n    var _a;\n    if (Array.isArray(bypassCheck)) {\n        bypassCheck = bypassCheck.concat([\n            'service',\n            'service_owner',\n        ]);\n    }\n    function isObjectWithKeys(obj) {\n        if (obj instanceof Promise) {\n            throw new skapi_error_1.default('Parameter should not be a promise', { code: 'INVALID_PARAMETER' });\n        }\n        return obj && typeof obj === 'object' && !Array.isArray(obj) && Object.keys(obj).length;\n    }\n    function isEmptyObject(obj) {\n        return obj && typeof obj === 'object' && !Array.isArray(obj) && !Object.keys(obj).length;\n    }\n    let _params = params;\n    let val;\n    let errToThrow = null;\n    let isInvalid = _parentKey ? ` in \"${_parentKey}\" is invalid.` : '. Parameter should be type <object>.';\n    if (_parentKey === null) {\n        if (isObjectWithKeys(_params)) {\n            if (_params instanceof HTMLFormElement || _params instanceof FormData) {\n                _params = (_a = extractFormMetaData(params)) === null || _a === void 0 ? void 0 : _a.meta;\n            }\n            else {\n                _params = JSON.parse(JSON.stringify(params));\n            }\n            for (let k in _params) {\n                if (!struct.hasOwnProperty(k) && Array.isArray(bypassCheck) && !bypassCheck.includes(k)) {\n                    throw new skapi_error_1.default(`Key name \"${k}\" is invalid in parameter.`, { code: 'INVALID_PARAMETER' });\n                }\n            }\n            if (Array.isArray(required) && required.length) {\n                for (let k of required) {\n                    if (!Object.keys(_params).includes(k)) {\n                        throw new skapi_error_1.default(`Key \"${k}\" is required in parameter.`, { code: 'INVALID_PARAMETER' });\n                    }\n                }\n            }\n        }\n        else if (isEmptyObject(_params) || typeof _params === 'undefined') {\n            let defaults = {};\n            for (let s in struct) {\n                let structValue = struct[s];\n                if (Array.isArray(structValue) && typeof structValue[structValue.length - 1] === 'function')\n                    defaults[s] = structValue[structValue.length - 1]();\n            }\n            return Object.keys(defaults).length ? defaults : _params;\n        }\n        if (_params === null) {\n            return null;\n        }\n    }\n    if (isObjectWithKeys(struct) && isObjectWithKeys(_params)) {\n        for (let s in struct) {\n            let structValue = struct[s];\n            if (_params.hasOwnProperty(s) && typeof _params[s] != 'undefined') {\n                _params[s] = checkParams(_params[s], structValue, null, null, s);\n            }\n            else {\n                let defaultSetter = Array.isArray(structValue) &&\n                    typeof structValue[structValue.length - 1] === 'function' ? structValue[structValue.length - 1] : null;\n                if (defaultSetter) {\n                    let def = defaultSetter();\n                    if (def !== undefined) {\n                        _params[s] = def;\n                    }\n                }\n            }\n        }\n        val = _params;\n    }\n    else if (Array.isArray(struct)) {\n        for (let s of struct) {\n            try {\n                if (typeof _params !== undefined && typeof s !== 'function') {\n                    val = checkParams(_params, s, null, null, _parentKey);\n                }\n                break;\n            }\n            catch (err) {\n                if (typeof err === 'string' && err.substring(0, 6) === 'BREAK:') {\n                    err = err.substring(5);\n                    let errMsg = err.split(':');\n                    errToThrow = new skapi_error_1.default(errMsg[1], { code: errMsg[0] });\n                    break;\n                }\n                else {\n                    errToThrow = err;\n                }\n            }\n        }\n    }\n    else if (typeof struct === 'function') {\n        return struct(_params);\n    }\n    else if (typeof struct === 'string') {\n        if (Array.isArray(_params)) {\n            if (struct !== 'array') {\n                throw new skapi_error_1.default(`Invalid type \"${typeof _params}\"${isInvalid}`, { code: 'INVALID_PARAMETER' });\n            }\n            for (let p of _params) {\n                if (!['number', 'string', 'boolean'].includes(typeof p) && p !== null) {\n                    throw new skapi_error_1.default(`Invalid type \"${typeof p}\" in \"${_parentKey}\" array value.`, { code: 'INVALID_PARAMETER' });\n                }\n            }\n            val = _params;\n        }\n        else if (!['number', 'string', 'boolean', 'array', 'function'].includes(struct)) {\n            if (_params === struct) {\n                val = _params;\n            }\n            else {\n                throw new skapi_error_1.default(`Value: ${_params}${isInvalid}`, { code: 'INVALID_PARAMETER' });\n            }\n        }\n        else if (typeof _params === struct) {\n            if (struct === 'number') {\n                if (Math.abs(_params) > 4503599627370496) {\n                    throw `BREAK:INVALID_PARAMETER:\"${_parentKey}\" integer value should be within -4503599627370496 ~ +4503599627370546.`;\n                }\n            }\n            val = _params;\n        }\n    }\n    else if (struct === null) {\n        val = _params;\n    }\n    if (val === undefined && errToThrow) {\n        throw errToThrow;\n    }\n    return val;\n}\nexports.checkParams = checkParams;\nfunction extractFormMetaData(form) {\n    function appendData(meta, key, val, append = true) {\n        if (meta[key] && append) {\n            if (Array.isArray(meta)) {\n                meta[key].push(val);\n            }\n            else {\n                meta[key] = [meta[key], val];\n            }\n        }\n        else {\n            meta[key] = val;\n        }\n    }\n    if (form instanceof FormData) {\n        let meta = {};\n        let totalFileSize = 0;\n        let files = [];\n        for (let pair of form.entries()) {\n            let name = pair[0];\n            let v = pair[1];\n            if (v instanceof File) {\n                if (!files.includes(name)) {\n                    files.push(name);\n                }\n                totalFileSize += Math.round((v.size / 1024));\n            }\n            else if (v instanceof FileList) {\n                if (!files.includes(name)) {\n                    files.push(name);\n                }\n                if (v && v.length > 0) {\n                    for (let idx = 0; idx <= v.length - 1; idx++) {\n                        totalFileSize += Math.round((v.item(idx).size / 1024));\n                    }\n                }\n            }\n            else {\n                appendData(meta, name, v);\n            }\n        }\n        if (totalFileSize > 5120) {\n            throw new skapi_error_1.default('Files cannot exceed 5MB. Use skapi.uploadFiles(...) instead.', { code: 'INVALID_REQUEST' });\n        }\n        return { meta, files };\n    }\n    else if (form instanceof HTMLFormElement) {\n        let meta = {};\n        let files = [];\n        let totalFileSize = 0;\n        let inputs = form.querySelectorAll('input');\n        let textarea = form.querySelectorAll('textarea');\n        for (let i of textarea) {\n            if (i.name) {\n                appendData(meta, i.name, i.value);\n            }\n        }\n        for (let i of inputs) {\n            if (i.name) {\n                if (i.type === 'number' && i.value) {\n                    appendData(meta, i.name, Number(i.value));\n                }\n                else if (i.type === 'checkbox' || i.type === 'radio') {\n                    if (i.value === 'on' || i.value === 'true') {\n                        appendData(meta, i.name, i.checked, false);\n                    }\n                    else if (i.value === 'false') {\n                        appendData(meta, i.name, !i.checked, false);\n                    }\n                    else if (i.checked) {\n                        appendData(meta, i.name, i.value, false);\n                    }\n                }\n                else if (i.type === 'file') {\n                    if (!files.includes(i.name)) {\n                        files.push(i.name);\n                    }\n                    if (i.files && i.files.length > 0) {\n                        for (let idx = 0; idx <= i.files.length - 1; idx++) {\n                            totalFileSize += Math.round((i.files.item(idx).size / 1024));\n                        }\n                    }\n                }\n                else {\n                    appendData(meta, i.name, i.value);\n                }\n            }\n        }\n        if (totalFileSize > 5120) {\n            throw new skapi_error_1.default('Files cannot exceed 5MB. Use skapi.uploadFiles(...) instead.', { code: 'INVALID_REQUEST' });\n        }\n        return { meta, files };\n    }\n    return null;\n}\nexports.extractFormMetaData = extractFormMetaData;\nfunction validateUserId(id, param = 'User ID') {\n    let uuid_regex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    if (!id) {\n        throw new skapi_error_1.default(`${param} is empty.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (typeof id !== 'string') {\n        throw new skapi_error_1.default(`${param} should be type: string.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (!id.match(uuid_regex)) {\n        throw new skapi_error_1.default(`${param} is invalid.`, { code: 'INVALID_PARAMETER' });\n    }\n    return id;\n}\nexports.validateUserId = validateUserId;\nfunction validatePhoneNumber(value) {\n    if (typeof value !== 'string' || value.charAt(0) !== '+' || isNaN(Number(value.substring(1)))) {\n        throw new skapi_error_1.default('\"phone_number\" is invalid. The format should be \"+00123456789\". Type: string.', { code: 'INVALID_PARAMETER' });\n    }\n    return value;\n}\nexports.validatePhoneNumber = validatePhoneNumber;\nfunction validateBirthdate(birthdate) {\n    if (typeof birthdate !== 'string') {\n        throw new skapi_error_1.default('\"birthdate\" is invalid. The format should be \"yyyy-mm-dd\". Type: string.', { code: 'INVALID_PARAMETER' });\n    }\n    else {\n        let date_regex = new RegExp(/([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/);\n        if (birthdate.length !== 10 || birthdate.split('-').length !== 3 || !date_regex.test(birthdate)) {\n            throw new skapi_error_1.default('\"birthdate\" is invalid. The format should be \"yyyy-mm-dd\". Type: string.', { code: 'INVALID_PARAMETER' });\n        }\n    }\n    return birthdate;\n}\nexports.validateBirthdate = validateBirthdate;\nfunction validatePassword(password) {\n    if (!password) {\n        throw new skapi_error_1.default('\"password\" is empty.', { code: 'PASSWORD_REQUIRED' });\n    }\n    else if (typeof password !== 'string') {\n        throw new skapi_error_1.default('\"password\" should be type: string.', { code: 'INVALID_PASSWORD' });\n    }\n    else if (password.length < 6) {\n        throw new skapi_error_1.default('\"password\" should be at least 6 characters.', { code: 'INVALID_PASSWORD' });\n    }\n    else if (password.length > 60) {\n        throw new skapi_error_1.default('\"password\" can be up to 60 characters max.', { code: 'INVALID_PASSWORD' });\n    }\n    return password;\n}\nexports.validatePassword = validatePassword;\nfunction validateEmail(email, paramName = 'email') {\n    if (!email) {\n        throw new skapi_error_1.default(`\"${paramName}\" is empty.`, { code: 'EMAIL_REQUIRED' });\n    }\n    else if (typeof email !== 'string') {\n        throw new skapi_error_1.default(`\"${paramName}\"should be type: string.`, { code: 'INVALID_EMAIL' });\n    }\n    else if (email.length < 5 || email.length > 64) {\n        throw new skapi_error_1.default(`\"${paramName}\" should be at least 5 characters and max 64 characters.`, { code: 'INVALID_EMAIL' });\n    }\n    else if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email)) {\n        email = email.trim();\n        let splitAt = email.split('@');\n        let tld = splitAt[1].split('.');\n        if (tld.length >= 2) {\n            return email.toLowerCase();\n        }\n    }\n    throw new skapi_error_1.default(`\"${email}\" is an invalid email.`, { code: 'INVALID_EMAIL' });\n}\nexports.validateEmail = validateEmail;\nfunction validateUrl(url) {\n    const baseUrl = (() => {\n        var _a;\n        let baseUrl = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.origin) || null;\n        if (baseUrl === 'file://') {\n            baseUrl += window.location.pathname;\n            let _baseUrl = baseUrl.split('/');\n            _baseUrl.pop();\n            baseUrl = _baseUrl.join('/');\n        }\n        return baseUrl;\n    })();\n    let check = (c) => {\n        if (typeof c === 'string') {\n            if (c === '*') {\n                return '*';\n            }\n            else {\n                let cu = c.trim();\n                if (!cu.includes(' ') && !cu.includes(',')) {\n                    if (cu.substring(0, 1) === '/' && baseUrl) {\n                        cu = baseUrl + cu;\n                    }\n                    let _url = null;\n                    try {\n                        _url = new URL(cu);\n                    }\n                    catch (err) {\n                        throw new skapi_error_1.default(`\"${c}\" is an invalid url.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    if (_url.protocol) {\n                        let url = _url.href;\n                        if (url.charAt(url.length - 1) === '/')\n                            url = url.substring(0, url.length - 1);\n                        return url;\n                    }\n                }\n            }\n        }\n        throw new skapi_error_1.default(`\"${c}\" is an invalid url.`, { code: 'INVALID_PARAMETER' });\n    };\n    if (Array.isArray(url)) {\n        return url.map(u => check(u));\n    }\n    else {\n        return check(url);\n    }\n}\nexports.validateUrl = validateUrl;\nfunction normalize_record_data(record) {\n    const output = {};\n    const keys = {\n        'rec': (r) => {\n            if (!r)\n                return;\n            output.record_id = r;\n            let base36timestamp = r.substring(0, 8);\n            output.uploaded = parseInt(base36timestamp, 36);\n        },\n        'usr': (r) => {\n            if (!r)\n                return;\n            output.user_id = r;\n        },\n        'tbl': (r) => {\n            if (!r)\n                return;\n            let rSplit = r.split('/');\n            output.table = rSplit[0];\n            output.access_group = rSplit[2] == '@@' ? 'private' : parseInt(rSplit[2]);\n            if (rSplit === null || rSplit === void 0 ? void 0 : rSplit[3]) {\n                output.subscription = {\n                    user_id: rSplit[3],\n                    group: parseInt(rSplit[4])\n                };\n            }\n        },\n        'idx': (r) => {\n            if (!r)\n                return;\n            let rSplit = r.split('!');\n            let name = rSplit.splice(0, 1)[0];\n            let value = normalize_typed_string(rSplit.join('!'));\n            output.index = {\n                name,\n                value\n            };\n        },\n        'ref': (r) => {\n            if (!r)\n                return;\n            output.reference = r.split('/')[0];\n        },\n        'tags': (r) => {\n            if (!r)\n                return;\n            output.tags = r;\n        },\n        'upd': (r) => {\n            if (!r)\n                return;\n            output.updated = r;\n        },\n        'acpt_mrf': (r) => {\n            if (!r)\n                return;\n            if (!(output === null || output === void 0 ? void 0 : output.config))\n                output.config = {};\n            output.config.allow_multiple_reference = r;\n        },\n        'ref_limt': (r) => {\n            if (!r)\n                return;\n            if (!(output === null || output === void 0 ? void 0 : output.config))\n                output.config = {};\n            output.config.reference_limit = r;\n        },\n        'rfd': (r) => {\n            output.referenced_count = r;\n        },\n        'prv_acs': (r) => {\n            if (!r)\n                return;\n            if (!(output === null || output === void 0 ? void 0 : output.config))\n                output.config = {};\n            output.config.private_access = r;\n        },\n        'data': (r) => {\n            let data = r;\n            if (r === '!D%{}') {\n                data = {};\n            }\n            else if (r === '!L%[]') {\n                data = [];\n            }\n            output.data = data;\n        }\n    };\n    if (record.record_id) {\n        return record;\n    }\n    for (let k in keys) {\n        keys[k](record[k]);\n    }\n    return output;\n}\nexports.normalize_record_data = normalize_record_data;\nfunction normalize_typed_string(v) {\n    let value = v.substring(2);\n    let type = v.substring(0, 2);\n    switch (type) {\n        case \"S%\":\n            return value;\n        case \"N%\":\n            return Number(value) - 4503599627370496;\n        case \"B%\":\n            return value === '1';\n        case \"L%\":\n            try {\n                return JSON.parse(value);\n            }\n            catch (err) {\n                throw new skapi_error_1.default('Value parse error.', { code: 'PARSE_ERROR' });\n            }\n        default:\n            return v;\n    }\n}\nfunction checkWhiteSpaceAndSpecialChars(string, p = 'parameter', allowPeriods = false, allowWhiteSpace = false) {\n    let checkStr = (s, array = false) => {\n        if (typeof s !== 'string') {\n            throw new skapi_error_1.default(`${p} should be type: <string | string[]>.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (!allowWhiteSpace && string.includes(' ')) {\n            throw new skapi_error_1.default(`${p} should not have whitespace.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (!allowPeriods && string.includes('.')) {\n            throw new skapi_error_1.default(`${p} should not have periods.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (/[`!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,<>\\/?~]/.test(s)) {\n            throw new skapi_error_1.default(`${p} should not have special characters.`, { code: 'INVALID_PARAMETER' });\n        }\n    };\n    if (Array.isArray(string)) {\n        for (let s of string) {\n            checkStr(s, true);\n        }\n    }\n    else {\n        checkStr(string, false);\n    }\n    return string;\n}\nexports.checkWhiteSpaceAndSpecialChars = checkWhiteSpaceAndSpecialChars;\n//# sourceMappingURL=utils.js.map","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar AuthenticationDetails = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationDetails object\n   * @param {object=} data Creation options.\n   * @param {string} data.Username User being authenticated.\n   * @param {string} data.Password Plain-text password to authenticate with.\n   * @param {(AttributeArg[])?} data.ValidationData Application extra metadata.\n   * @param {(AttributeArg[])?} data.AuthParamaters Authentication paramaters for custom auth.\n   */\n  function AuthenticationDetails(data) {\n    var _ref = data || {},\n      ValidationData = _ref.ValidationData,\n      Username = _ref.Username,\n      Password = _ref.Password,\n      AuthParameters = _ref.AuthParameters,\n      ClientMetadata = _ref.ClientMetadata;\n    this.validationData = ValidationData || {};\n    this.authParameters = AuthParameters || {};\n    this.clientMetadata = ClientMetadata || {};\n    this.username = Username;\n    this.password = Password;\n  }\n\n  /**\n   * @returns {string} the record's username\n   */\n  var _proto = AuthenticationDetails.prototype;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {string} the record's password\n   */;\n  _proto.getPassword = function getPassword() {\n    return this.password;\n  }\n\n  /**\n   * @returns {Array} the record's validationData\n   */;\n  _proto.getValidationData = function getValidationData() {\n    return this.validationData;\n  }\n\n  /**\n   * @returns {Array} the record's authParameters\n   */;\n  _proto.getAuthParameters = function getAuthParameters() {\n    return this.authParameters;\n  }\n\n  /**\n   * @returns {ClientMetadata} the clientMetadata for a Lambda trigger\n   */;\n  _proto.getClientMetadata = function getClientMetadata() {\n    return this.clientMetadata;\n  };\n  return AuthenticationDetails;\n}();\nexport { AuthenticationDetails as default };","var crypto;\n\n// Native crypto from window (Browser)\nif (typeof window !== 'undefined' && window.crypto) {\n  crypto = window.crypto;\n}\n\n// Native (experimental IE 11) crypto from window (Browser)\nif (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n  crypto = window.msCrypto;\n}\n\n// Native crypto from global (NodeJS)\nif (!crypto && typeof global !== 'undefined' && global.crypto) {\n  crypto = global.crypto;\n}\n\n// Native crypto import via require (NodeJS)\nif (!crypto && typeof require === 'function') {\n  try {\n    crypto = require('crypto');\n  } catch (err) {}\n}\n\n/*\n * Cryptographically secure pseudorandom number generator\n * As Math.random() is cryptographically not safe to use\n */\nexport default function cryptoSecureRandomInt() {\n  if (crypto) {\n    // Use getRandomValues method (Browser)\n    if (typeof crypto.getRandomValues === 'function') {\n      try {\n        return crypto.getRandomValues(new Uint32Array(1))[0];\n      } catch (err) {}\n    }\n\n    // Use randomBytes method (NodeJS)\n    if (typeof crypto.randomBytes === 'function') {\n      try {\n        return crypto.randomBytes(4).readInt32LE();\n      } catch (err) {}\n    }\n  }\n  throw new Error('Native crypto module could not be used to get secure random number.');\n}","import cryptoSecureRandomInt from './cryptoSecureRandomInt';\n\n/**\n * Hex encoding strategy.\n * Converts a word array to a hex string.\n * @param {WordArray} wordArray The word array.\n * @return {string} The hex string.\n * @static\n */\nfunction hexStringify(wordArray) {\n  // Shortcuts\n  var words = wordArray.words;\n  var sigBytes = wordArray.sigBytes;\n\n  // Convert\n  var hexChars = [];\n  for (var i = 0; i < sigBytes; i++) {\n    var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 0xff;\n    hexChars.push((bite >>> 4).toString(16));\n    hexChars.push((bite & 0x0f).toString(16));\n  }\n  return hexChars.join('');\n}\nvar WordArray = /*#__PURE__*/function () {\n  function WordArray(words, sigBytes) {\n    words = this.words = words || [];\n    if (sigBytes != undefined) {\n      this.sigBytes = sigBytes;\n    } else {\n      this.sigBytes = words.length * 4;\n    }\n  }\n  var _proto = WordArray.prototype;\n  _proto.random = function random(nBytes) {\n    var words = [];\n    for (var i = 0; i < nBytes; i += 4) {\n      words.push(cryptoSecureRandomInt());\n    }\n    return new WordArray(words, nBytes);\n  };\n  _proto.toString = function toString() {\n    return hexStringify(this);\n  };\n  return WordArray;\n}();\nexport { WordArray as default };","// A small implementation of BigInteger based on http://www-cs-students.stanford.edu/~tjw/jsbn/\n//\n// All public methods have been removed except the following:\n//   new BigInteger(a, b) (only radix 2, 4, 8, 16 and 32 supported)\n//   toString (only radix 2, 4, 8, 16 and 32 supported)\n//   negate\n//   abs\n//   compareTo\n//   bitLength\n//   mod\n//   equals\n//   add\n//   subtract\n//   multiply\n//   divide\n//   modPow\n\nexport default BigInteger;\n\n/*\n * Copyright (c) 2003-2005  Tom Wu\n * All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS-IS\" AND WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY\n * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n *\n * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,\n * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER\n * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF\n * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT\n * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * In addition, the following condition applies:\n *\n * All redistributions must retain an intact copy of this copyright notice\n * and disclaimer.\n */\n\n// (public) Constructor\nfunction BigInteger(a, b) {\n  if (a != null) this.fromString(a, b);\n}\n\n// return new, unset BigInteger\nfunction nbi() {\n  return new BigInteger(null);\n}\n\n// Bits per digit\nvar dbits;\n\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = (canary & 0xffffff) == 0xefcafe;\n\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n) {\n  while (--n >= 0) {\n    var v = x * this[i++] + w[j] + c;\n    c = Math.floor(v / 0x4000000);\n    w[j++] = v & 0x3ffffff;\n  }\n  return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n) {\n  var xl = x & 0x7fff,\n    xh = x >> 15;\n  while (--n >= 0) {\n    var l = this[i] & 0x7fff;\n    var h = this[i++] >> 15;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n    c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n    w[j++] = l & 0x3fffffff;\n  }\n  return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n) {\n  var xl = x & 0x3fff,\n    xh = x >> 14;\n  while (--n >= 0) {\n    var l = this[i] & 0x3fff;\n    var h = this[i++] >> 14;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n    c = (l >> 28) + (m >> 14) + xh * h;\n    w[j++] = l & 0xfffffff;\n  }\n  return c;\n}\nvar inBrowser = typeof navigator !== 'undefined';\nif (inBrowser && j_lm && navigator.appName == 'Microsoft Internet Explorer') {\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n} else if (inBrowser && j_lm && navigator.appName != 'Netscape') {\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n} else {\n  // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = (1 << dbits) - 1;\nBigInteger.prototype.DV = 1 << dbits;\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n\n// Digit conversions\nvar BI_RM = '0123456789abcdefghijklmnopqrstuvwxyz';\nvar BI_RC = new Array();\nvar rr, vv;\nrr = '0'.charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) {\n  BI_RC[rr++] = vv;\n}\nrr = 'a'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n  BI_RC[rr++] = vv;\n}\nrr = 'A'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n  BI_RC[rr++] = vv;\n}\nfunction int2char(n) {\n  return BI_RM.charAt(n);\n}\nfunction intAt(s, i) {\n  var c = BI_RC[s.charCodeAt(i)];\n  return c == null ? -1 : c;\n}\n\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n  for (var i = this.t - 1; i >= 0; --i) {\n    r[i] = this[i];\n  }\n  r.t = this.t;\n  r.s = this.s;\n}\n\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n  this.t = 1;\n  this.s = x < 0 ? -1 : 0;\n  if (x > 0) this[0] = x;else if (x < -1) this[0] = x + this.DV;else this.t = 0;\n}\n\n// return bigint initialized to value\nfunction nbv(i) {\n  var r = nbi();\n  r.fromInt(i);\n  return r;\n}\n\n// (protected) set from string and radix\nfunction bnpFromString(s, b) {\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  this.t = 0;\n  this.s = 0;\n  var i = s.length,\n    mi = false,\n    sh = 0;\n  while (--i >= 0) {\n    var x = intAt(s, i);\n    if (x < 0) {\n      if (s.charAt(i) == '-') mi = true;\n      continue;\n    }\n    mi = false;\n    if (sh == 0) this[this.t++] = x;else if (sh + k > this.DB) {\n      this[this.t - 1] |= (x & (1 << this.DB - sh) - 1) << sh;\n      this[this.t++] = x >> this.DB - sh;\n    } else this[this.t - 1] |= x << sh;\n    sh += k;\n    if (sh >= this.DB) sh -= this.DB;\n  }\n  this.clamp();\n  if (mi) BigInteger.ZERO.subTo(this, this);\n}\n\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n  var c = this.s & this.DM;\n  while (this.t > 0 && this[this.t - 1] == c) {\n    --this.t;\n  }\n}\n\n// (public) return string representation in given radix\nfunction bnToString(b) {\n  if (this.s < 0) return '-' + this.negate().toString(b);\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  var km = (1 << k) - 1,\n    d,\n    m = false,\n    r = '',\n    i = this.t;\n  var p = this.DB - i * this.DB % k;\n  if (i-- > 0) {\n    if (p < this.DB && (d = this[i] >> p) > 0) {\n      m = true;\n      r = int2char(d);\n    }\n    while (i >= 0) {\n      if (p < k) {\n        d = (this[i] & (1 << p) - 1) << k - p;\n        d |= this[--i] >> (p += this.DB - k);\n      } else {\n        d = this[i] >> (p -= k) & km;\n        if (p <= 0) {\n          p += this.DB;\n          --i;\n        }\n      }\n      if (d > 0) m = true;\n      if (m) r += int2char(d);\n    }\n  }\n  return m ? r : '0';\n}\n\n// (public) -this\nfunction bnNegate() {\n  var r = nbi();\n  BigInteger.ZERO.subTo(this, r);\n  return r;\n}\n\n// (public) |this|\nfunction bnAbs() {\n  return this.s < 0 ? this.negate() : this;\n}\n\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n  var r = this.s - a.s;\n  if (r != 0) return r;\n  var i = this.t;\n  r = i - a.t;\n  if (r != 0) return this.s < 0 ? -r : r;\n  while (--i >= 0) {\n    if ((r = this[i] - a[i]) != 0) return r;\n  }\n  return 0;\n}\n\n// returns bit length of the integer x\nfunction nbits(x) {\n  var r = 1,\n    t;\n  if ((t = x >>> 16) != 0) {\n    x = t;\n    r += 16;\n  }\n  if ((t = x >> 8) != 0) {\n    x = t;\n    r += 8;\n  }\n  if ((t = x >> 4) != 0) {\n    x = t;\n    r += 4;\n  }\n  if ((t = x >> 2) != 0) {\n    x = t;\n    r += 2;\n  }\n  if ((t = x >> 1) != 0) {\n    x = t;\n    r += 1;\n  }\n  return r;\n}\n\n// (public) return the number of bits in \"this\"\nfunction bnBitLength() {\n  if (this.t <= 0) return 0;\n  return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s & this.DM);\n}\n\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n, r) {\n  var i;\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + n] = this[i];\n  }\n  for (i = n - 1; i >= 0; --i) {\n    r[i] = 0;\n  }\n  r.t = this.t + n;\n  r.s = this.s;\n}\n\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n, r) {\n  for (var i = n; i < this.t; ++i) {\n    r[i - n] = this[i];\n  }\n  r.t = Math.max(this.t - n, 0);\n  r.s = this.s;\n}\n\n// (protected) r = this << n\nfunction bnpLShiftTo(n, r) {\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << cbs) - 1;\n  var ds = Math.floor(n / this.DB),\n    c = this.s << bs & this.DM,\n    i;\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + ds + 1] = this[i] >> cbs | c;\n    c = (this[i] & bm) << bs;\n  }\n  for (i = ds - 1; i >= 0; --i) {\n    r[i] = 0;\n  }\n  r[ds] = c;\n  r.t = this.t + ds + 1;\n  r.s = this.s;\n  r.clamp();\n}\n\n// (protected) r = this >> n\nfunction bnpRShiftTo(n, r) {\n  r.s = this.s;\n  var ds = Math.floor(n / this.DB);\n  if (ds >= this.t) {\n    r.t = 0;\n    return;\n  }\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << bs) - 1;\n  r[0] = this[ds] >> bs;\n  for (var i = ds + 1; i < this.t; ++i) {\n    r[i - ds - 1] |= (this[i] & bm) << cbs;\n    r[i - ds] = this[i] >> bs;\n  }\n  if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\n  r.t = this.t - ds;\n  r.clamp();\n}\n\n// (protected) r = this - a\nfunction bnpSubTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] - a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c -= a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c -= a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c -= a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c < -1) r[i++] = this.DV + c;else if (c > 0) r[i++] = c;\n  r.t = i;\n  r.clamp();\n}\n\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a, r) {\n  var x = this.abs(),\n    y = a.abs();\n  var i = x.t;\n  r.t = i + y.t;\n  while (--i >= 0) {\n    r[i] = 0;\n  }\n  for (i = 0; i < y.t; ++i) {\n    r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n  }\n  r.s = 0;\n  r.clamp();\n  if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\n}\n\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n  var x = this.abs();\n  var i = r.t = 2 * x.t;\n  while (--i >= 0) {\n    r[i] = 0;\n  }\n  for (i = 0; i < x.t - 1; ++i) {\n    var c = x.am(i, x[i], r, 2 * i, 0, 1);\n    if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n      r[i + x.t] -= x.DV;\n      r[i + x.t + 1] = 1;\n    }\n  }\n  if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n  r.s = 0;\n  r.clamp();\n}\n\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m, q, r) {\n  var pm = m.abs();\n  if (pm.t <= 0) return;\n  var pt = this.abs();\n  if (pt.t < pm.t) {\n    if (q != null) q.fromInt(0);\n    if (r != null) this.copyTo(r);\n    return;\n  }\n  if (r == null) r = nbi();\n  var y = nbi(),\n    ts = this.s,\n    ms = m.s;\n  var nsh = this.DB - nbits(pm[pm.t - 1]);\n  // normalize modulus\n  if (nsh > 0) {\n    pm.lShiftTo(nsh, y);\n    pt.lShiftTo(nsh, r);\n  } else {\n    pm.copyTo(y);\n    pt.copyTo(r);\n  }\n  var ys = y.t;\n  var y0 = y[ys - 1];\n  if (y0 == 0) return;\n  var yt = y0 * (1 << this.F1) + (ys > 1 ? y[ys - 2] >> this.F2 : 0);\n  var d1 = this.FV / yt,\n    d2 = (1 << this.F1) / yt,\n    e = 1 << this.F2;\n  var i = r.t,\n    j = i - ys,\n    t = q == null ? nbi() : q;\n  y.dlShiftTo(j, t);\n  if (r.compareTo(t) >= 0) {\n    r[r.t++] = 1;\n    r.subTo(t, r);\n  }\n  BigInteger.ONE.dlShiftTo(ys, t);\n  t.subTo(y, y);\n  // \"negative\" y so we can replace sub with am later\n  while (y.t < ys) {\n    y[y.t++] = 0;\n  }\n  while (--j >= 0) {\n    // Estimate quotient digit\n    var qd = r[--i] == y0 ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n    if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {\n      // Try it out\n      y.dlShiftTo(j, t);\n      r.subTo(t, r);\n      while (r[i] < --qd) {\n        r.subTo(t, r);\n      }\n    }\n  }\n  if (q != null) {\n    r.drShiftTo(ys, q);\n    if (ts != ms) BigInteger.ZERO.subTo(q, q);\n  }\n  r.t = ys;\n  r.clamp();\n  if (nsh > 0) r.rShiftTo(nsh, r);\n  // Denormalize remainder\n  if (ts < 0) BigInteger.ZERO.subTo(r, r);\n}\n\n// (public) this mod a\nfunction bnMod(a) {\n  var r = nbi();\n  this.abs().divRemTo(a, null, r);\n  if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\n  return r;\n}\n\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n  if (this.t < 1) return 0;\n  var x = this[0];\n  if ((x & 1) == 0) return 0;\n  var y = x & 3;\n  // y == 1/x mod 2^2\n  y = y * (2 - (x & 0xf) * y) & 0xf;\n  // y == 1/x mod 2^4\n  y = y * (2 - (x & 0xff) * y) & 0xff;\n  // y == 1/x mod 2^8\n  y = y * (2 - ((x & 0xffff) * y & 0xffff)) & 0xffff;\n  // y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n  y = y * (2 - x * y % this.DV) % this.DV;\n  // y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n  return y > 0 ? this.DV - y : -y;\n}\nfunction bnEquals(a) {\n  return this.compareTo(a) == 0;\n}\n\n// (protected) r = this + a\nfunction bnpAddTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] + a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c += a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c += a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c > 0) r[i++] = c;else if (c < -1) r[i++] = this.DV + c;\n  r.t = i;\n  r.clamp();\n}\n\n// (public) this + a\nfunction bnAdd(a) {\n  var r = nbi();\n  this.addTo(a, r);\n  return r;\n}\n\n// (public) this - a\nfunction bnSubtract(a) {\n  var r = nbi();\n  this.subTo(a, r);\n  return r;\n}\n\n// (public) this * a\nfunction bnMultiply(a) {\n  var r = nbi();\n  this.multiplyTo(a, r);\n  return r;\n}\n\n// (public) this / a\nfunction bnDivide(a) {\n  var r = nbi();\n  this.divRemTo(a, r, null);\n  return r;\n}\n\n// Montgomery reduction\nfunction Montgomery(m) {\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp & 0x7fff;\n  this.mph = this.mp >> 15;\n  this.um = (1 << m.DB - 15) - 1;\n  this.mt2 = 2 * m.t;\n}\n\n// xR mod m\nfunction montConvert(x) {\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t, r);\n  r.divRemTo(this.m, null, r);\n  if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\n  return r;\n}\n\n// x/R mod m\nfunction montRevert(x) {\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n}\n\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n  while (x.t <= this.mt2) {\n    // pad x so am has enough room later\n    x[x.t++] = 0;\n  }\n  for (var i = 0; i < this.m.t; ++i) {\n    // faster way of calculating u0 = x[i]*mp mod DV\n    var j = x[i] & 0x7fff;\n    var u0 = j * this.mpl + ((j * this.mph + (x[i] >> 15) * this.mpl & this.um) << 15) & x.DM;\n    // use am to combine the multiply-shift-add into one call\n    j = i + this.m.t;\n    x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n    // propagate carry\n    while (x[j] >= x.DV) {\n      x[j] -= x.DV;\n      x[++j]++;\n    }\n  }\n  x.clamp();\n  x.drShiftTo(this.m.t, x);\n  if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x, r) {\n  x.squareTo(r);\n  this.reduce(r);\n}\n\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n\n// (public) this^e % m (HAC 14.85)\nfunction bnModPow(e, m, callback) {\n  var i = e.bitLength(),\n    k,\n    r = nbv(1),\n    z = new Montgomery(m);\n  if (i <= 0) return r;else if (i < 18) k = 1;else if (i < 48) k = 3;else if (i < 144) k = 4;else if (i < 768) k = 5;else k = 6;\n\n  // precomputation\n  var g = new Array(),\n    n = 3,\n    k1 = k - 1,\n    km = (1 << k) - 1;\n  g[1] = z.convert(this);\n  if (k > 1) {\n    var g2 = nbi();\n    z.sqrTo(g[1], g2);\n    while (n <= km) {\n      g[n] = nbi();\n      z.mulTo(g2, g[n - 2], g[n]);\n      n += 2;\n    }\n  }\n  var j = e.t - 1,\n    w,\n    is1 = true,\n    r2 = nbi(),\n    t;\n  i = nbits(e[j]) - 1;\n  while (j >= 0) {\n    if (i >= k1) w = e[j] >> i - k1 & km;else {\n      w = (e[j] & (1 << i + 1) - 1) << k1 - i;\n      if (j > 0) w |= e[j - 1] >> this.DB + i - k1;\n    }\n    n = k;\n    while ((w & 1) == 0) {\n      w >>= 1;\n      --n;\n    }\n    if ((i -= n) < 0) {\n      i += this.DB;\n      --j;\n    }\n    if (is1) {\n      // ret == 1, don't bother squaring or multiplying it\n      g[w].copyTo(r);\n      is1 = false;\n    } else {\n      while (n > 1) {\n        z.sqrTo(r, r2);\n        z.sqrTo(r2, r);\n        n -= 2;\n      }\n      if (n > 0) z.sqrTo(r, r2);else {\n        t = r;\n        r = r2;\n        r2 = t;\n      }\n      z.mulTo(r2, g[w], r);\n    }\n    while (j >= 0 && (e[j] & 1 << i) == 0) {\n      z.sqrTo(r, r2);\n      t = r;\n      r = r2;\n      r2 = t;\n      if (--i < 0) {\n        i = this.DB - 1;\n        --j;\n      }\n    }\n  }\n  var result = z.revert(r);\n  callback(null, result);\n  return result;\n}\n\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.addTo = bnpAddTo;\n\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.modPow = bnModPow;\n\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\nimport CryptoJS from 'crypto-js/core';\nimport 'crypto-js/lib-typedarrays'; // necessary for crypto js\nimport SHA256 from 'crypto-js/sha256';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport WordArray from './utils/WordArray';\n\n/**\n * Returns a Buffer with a sequence of random nBytes\n *\n * @param {number} nBytes\n * @returns {Buffer} fixed-length sequence of random bytes\n */\n\nfunction randomBytes(nBytes) {\n  return Buffer.from(new WordArray().random(nBytes).toString(), 'hex');\n}\nimport BigInteger from './BigInteger';\n\n/**\n * Tests if a hex string has it most significant bit set (case-insensitive regex)\n */\nvar HEX_MSB_REGEX = /^[89a-f]/i;\nvar initN = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1' + '29024E088A67CC74020BBEA63B139B22514A08798E3404DD' + 'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245' + 'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED' + 'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D' + 'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F' + '83655D23DCA3AD961C62F356208552BB9ED529077096966D' + '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B' + 'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9' + 'DE2BCBF6955817183995497CEA956AE515D2261898FA0510' + '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64' + 'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7' + 'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B' + 'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C' + 'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31' + '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';\nvar newPasswordRequiredChallengeUserAttributePrefix = 'userAttributes.';\n\n/** @class */\nvar AuthenticationHelper = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationHelper object\n   * @param {string} PoolName Cognito user pool name.\n   */\n  function AuthenticationHelper(PoolName) {\n    this.N = new BigInteger(initN, 16);\n    this.g = new BigInteger('2', 16);\n    this.k = new BigInteger(this.hexHash(\"\" + this.padHex(this.N) + this.padHex(this.g)), 16);\n    this.smallAValue = this.generateRandomSmallA();\n    this.getLargeAValue(function () {});\n    this.infoBits = Buffer.from('Caldera Derived Key', 'utf8');\n    this.poolName = PoolName;\n  }\n\n  /**\n   * @returns {BigInteger} small A, a random number\n   */\n  var _proto = AuthenticationHelper.prototype;\n  _proto.getSmallAValue = function getSmallAValue() {\n    return this.smallAValue;\n  }\n\n  /**\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   */;\n  _proto.getLargeAValue = function getLargeAValue(callback) {\n    var _this = this;\n    if (this.largeAValue) {\n      callback(null, this.largeAValue);\n    } else {\n      this.calculateA(this.smallAValue, function (err, largeAValue) {\n        if (err) {\n          callback(err, null);\n        }\n        _this.largeAValue = largeAValue;\n        callback(null, _this.largeAValue);\n      });\n    }\n  }\n\n  /**\n   * helper function to generate a random big integer\n   * @returns {BigInteger} a random value.\n   * @private\n   */;\n  _proto.generateRandomSmallA = function generateRandomSmallA() {\n    // This will be interpreted as a postive 128-bit integer\n    var hexRandom = randomBytes(128).toString('hex');\n    var randomBigInt = new BigInteger(hexRandom, 16);\n\n    // There is no need to do randomBigInt.mod(this.N - 1) as N (3072-bit) is > 128 bytes (1024-bit)\n\n    return randomBigInt;\n  }\n\n  /**\n   * helper function to generate a random string\n   * @returns {string} a random value.\n   * @private\n   */;\n  _proto.generateRandomString = function generateRandomString() {\n    return randomBytes(40).toString('base64');\n  }\n\n  /**\n   * @returns {string} Generated random value included in password hash.\n   */;\n  _proto.getRandomPassword = function getRandomPassword() {\n    return this.randomPassword;\n  }\n\n  /**\n   * @returns {string} Generated random value included in devices hash.\n   */;\n  _proto.getSaltDevices = function getSaltDevices() {\n    return this.SaltToHashDevices;\n  }\n\n  /**\n   * @returns {string} Value used to verify devices.\n   */;\n  _proto.getVerifierDevices = function getVerifierDevices() {\n    return this.verifierDevices;\n  }\n\n  /**\n   * Generate salts and compute verifier.\n   * @param {string} deviceGroupKey Devices to generate verifier for.\n   * @param {string} username User to generate verifier for.\n   * @param {nodeCallback<null>} callback Called with (err, null)\n   * @returns {void}\n   */;\n  _proto.generateHashDevice = function generateHashDevice(deviceGroupKey, username, callback) {\n    var _this2 = this;\n    this.randomPassword = this.generateRandomString();\n    var combinedString = \"\" + deviceGroupKey + username + \":\" + this.randomPassword;\n    var hashedString = this.hash(combinedString);\n    var hexRandom = randomBytes(16).toString('hex');\n\n    // The random hex will be unambiguously represented as a postive integer\n    this.SaltToHashDevices = this.padHex(new BigInteger(hexRandom, 16));\n    this.g.modPow(new BigInteger(this.hexHash(this.SaltToHashDevices + hashedString), 16), this.N, function (err, verifierDevicesNotPadded) {\n      if (err) {\n        callback(err, null);\n      }\n      _this2.verifierDevices = _this2.padHex(verifierDevicesNotPadded);\n      callback(null, null);\n    });\n  }\n\n  /**\n   * Calculate the client's public value A = g^a%N\n   * with the generated random number a\n   * @param {BigInteger} a Randomly generated small A.\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   * @private\n   */;\n  _proto.calculateA = function calculateA(a, callback) {\n    var _this3 = this;\n    this.g.modPow(a, this.N, function (err, A) {\n      if (err) {\n        callback(err, null);\n      }\n      if (A.mod(_this3.N).equals(BigInteger.ZERO)) {\n        callback(new Error('Illegal paramater. A mod N cannot be 0.'), null);\n      }\n      callback(null, A);\n    });\n  }\n\n  /**\n   * Calculate the client's value U which is the hash of A and B\n   * @param {BigInteger} A Large A value.\n   * @param {BigInteger} B Server B value.\n   * @returns {BigInteger} Computed U value.\n   * @private\n   */;\n  _proto.calculateU = function calculateU(A, B) {\n    this.UHexHash = this.hexHash(this.padHex(A) + this.padHex(B));\n    var finalU = new BigInteger(this.UHexHash, 16);\n    return finalU;\n  }\n\n  /**\n   * Calculate a hash from a bitArray\n   * @param {Buffer} buf Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hash = function hash(buf) {\n    var str = buf instanceof Buffer ? CryptoJS.lib.WordArray.create(buf) : buf;\n    var hashHex = SHA256(str).toString();\n    return new Array(64 - hashHex.length).join('0') + hashHex;\n  }\n\n  /**\n   * Calculate a hash from a hex string\n   * @param {String} hexStr Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hexHash = function hexHash(hexStr) {\n    return this.hash(Buffer.from(hexStr, 'hex'));\n  }\n\n  /**\n   * Standard hkdf algorithm\n   * @param {Buffer} ikm Input key material.\n   * @param {Buffer} salt Salt value.\n   * @returns {Buffer} Strong key material.\n   * @private\n   */;\n  _proto.computehkdf = function computehkdf(ikm, salt) {\n    var infoBitsWordArray = CryptoJS.lib.WordArray.create(Buffer.concat([this.infoBits, Buffer.from(String.fromCharCode(1), 'utf8')]));\n    var ikmWordArray = ikm instanceof Buffer ? CryptoJS.lib.WordArray.create(ikm) : ikm;\n    var saltWordArray = salt instanceof Buffer ? CryptoJS.lib.WordArray.create(salt) : salt;\n    var prk = HmacSHA256(ikmWordArray, saltWordArray);\n    var hmac = HmacSHA256(infoBitsWordArray, prk);\n    return Buffer.from(hmac.toString(), 'hex').slice(0, 16);\n  }\n\n  /**\n   * Calculates the final hkdf based on computed S value, and computed U value and the key\n   * @param {String} username Username.\n   * @param {String} password Password.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {BigInteger} salt Generated salt.\n   * @param {nodeCallback<Buffer>} callback Called with (err, hkdfValue)\n   * @returns {void}\n   */;\n  _proto.getPasswordAuthenticationKey = function getPasswordAuthenticationKey(username, password, serverBValue, salt, callback) {\n    var _this4 = this;\n    if (serverBValue.mod(this.N).equals(BigInteger.ZERO)) {\n      throw new Error('B cannot be zero.');\n    }\n    this.UValue = this.calculateU(this.largeAValue, serverBValue);\n    if (this.UValue.equals(BigInteger.ZERO)) {\n      throw new Error('U cannot be zero.');\n    }\n    var usernamePassword = \"\" + this.poolName + username + \":\" + password;\n    var usernamePasswordHash = this.hash(usernamePassword);\n    var xValue = new BigInteger(this.hexHash(this.padHex(salt) + usernamePasswordHash), 16);\n    this.calculateS(xValue, serverBValue, function (err, sValue) {\n      if (err) {\n        callback(err, null);\n      }\n      var hkdf = _this4.computehkdf(Buffer.from(_this4.padHex(sValue), 'hex'), Buffer.from(_this4.padHex(_this4.UValue), 'hex'));\n      callback(null, hkdf);\n    });\n  }\n\n  /**\n   * Calculates the S value used in getPasswordAuthenticationKey\n   * @param {BigInteger} xValue Salted password hash value.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.calculateS = function calculateS(xValue, serverBValue, callback) {\n    var _this5 = this;\n    this.g.modPow(xValue, this.N, function (err, gModPowXN) {\n      if (err) {\n        callback(err, null);\n      }\n      var intValue2 = serverBValue.subtract(_this5.k.multiply(gModPowXN));\n      intValue2.modPow(_this5.smallAValue.add(_this5.UValue.multiply(xValue)), _this5.N, function (err2, result) {\n        if (err2) {\n          callback(err2, null);\n        }\n        callback(null, result.mod(_this5.N));\n      });\n    });\n  }\n\n  /**\n   * Return constant newPasswordRequiredChallengeUserAttributePrefix\n   * @return {newPasswordRequiredChallengeUserAttributePrefix} constant prefix value\n   */;\n  _proto.getNewPasswordRequiredChallengeUserAttributePrefix = function getNewPasswordRequiredChallengeUserAttributePrefix() {\n    return newPasswordRequiredChallengeUserAttributePrefix;\n  }\n\n  /**\n   * Returns an unambiguous, even-length hex string of the two's complement encoding of an integer.\n   *\n   * It is compatible with the hex encoding of Java's BigInteger's toByteArray(), wich returns a\n   * byte array containing the two's-complement representation of a BigInteger. The array contains\n   * the minimum number of bytes required to represent the BigInteger, including at least one sign bit.\n   *\n   * Examples showing how ambiguity is avoided by left padding with:\n   * \t\"00\" (for positive values where the most-significant-bit is set)\n   *  \"FF\" (for negative values where the most-significant-bit is set)\n   *\n   * padHex(bigInteger.fromInt(-236))  === \"FF14\"\n   * padHex(bigInteger.fromInt(20))    === \"14\"\n   *\n   * padHex(bigInteger.fromInt(-200))  === \"FF38\"\n   * padHex(bigInteger.fromInt(56))    === \"38\"\n   *\n   * padHex(bigInteger.fromInt(-20))   === \"EC\"\n   * padHex(bigInteger.fromInt(236))   === \"00EC\"\n   *\n   * padHex(bigInteger.fromInt(-56))   === \"C8\"\n   * padHex(bigInteger.fromInt(200))   === \"00C8\"\n   *\n   * @param {BigInteger} bigInt Number to encode.\n   * @returns {String} even-length hex string of the two's complement encoding.\n   */;\n  _proto.padHex = function padHex(bigInt) {\n    if (!(bigInt instanceof BigInteger)) {\n      throw new Error('Not a BigInteger');\n    }\n    var isNegative = bigInt.compareTo(BigInteger.ZERO) < 0;\n\n    /* Get a hex string for abs(bigInt) */\n    var hexStr = bigInt.abs().toString(16);\n\n    /* Pad hex to even length if needed */\n    hexStr = hexStr.length % 2 !== 0 ? \"0\" + hexStr : hexStr;\n\n    /* Prepend \"00\" if the most significant bit is set */\n    hexStr = HEX_MSB_REGEX.test(hexStr) ? \"00\" + hexStr : hexStr;\n    if (isNegative) {\n      /* Flip the bits of the representation */\n      var invertedNibbles = hexStr.split('').map(function (x) {\n        var invertedNibble = ~parseInt(x, 16) & 0xf;\n        return '0123456789ABCDEF'.charAt(invertedNibble);\n      }).join('');\n\n      /* After flipping the bits, add one to get the 2's complement representation */\n      var flippedBitsBI = new BigInteger(invertedNibbles, 16).add(BigInteger.ONE);\n      hexStr = flippedBitsBI.toString(16);\n\n      /*\n      For hex strings starting with 'FF8', 'FF' can be dropped, e.g. 0xFFFF80=0xFF80=0x80=-128\n      \t\tAny sequence of '1' bits on the left can always be substituted with a single '1' bit\n      without changing the represented value.\n      \t\tThis only happens in the case when the input is 80...00\n      */\n      if (hexStr.toUpperCase().startsWith('FF8')) {\n        hexStr = hexStr.substring(2);\n      }\n    }\n    return hexStr;\n  };\n  return AuthenticationHelper;\n}();\nexport { AuthenticationHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\n\n/** @class */\nvar CognitoJwtToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoJwtToken object\n   * @param {string=} token The JWT token.\n   */\n  function CognitoJwtToken(token) {\n    // Assign object\n    this.jwtToken = token || '';\n    this.payload = this.decodePayload();\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoJwtToken.prototype;\n  _proto.getJwtToken = function getJwtToken() {\n    return this.jwtToken;\n  }\n\n  /**\n   * @returns {int} the token's expiration (exp member).\n   */;\n  _proto.getExpiration = function getExpiration() {\n    return this.payload.exp;\n  }\n\n  /**\n   * @returns {int} the token's \"issued at\" (iat member).\n   */;\n  _proto.getIssuedAt = function getIssuedAt() {\n    return this.payload.iat;\n  }\n\n  /**\n   * @returns {object} the token's payload.\n   */;\n  _proto.decodePayload = function decodePayload() {\n    var payload = this.jwtToken.split('.')[1];\n    try {\n      return JSON.parse(Buffer.from(payload, 'base64').toString('utf8'));\n    } catch (err) {\n      return {};\n    }\n  };\n  return CognitoJwtToken;\n}();\nexport { CognitoJwtToken as default };","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CognitoJwtToken from './CognitoJwtToken';\n\n/** @class */\nvar CognitoAccessToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoAccessToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoAccessToken object\n   * @param {string=} AccessToken The JWT access token.\n   */\n  function CognitoAccessToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      AccessToken = _ref.AccessToken;\n    return _CognitoJwtToken.call(this, AccessToken || '') || this;\n  }\n  return CognitoAccessToken;\n}(CognitoJwtToken);\nexport { CognitoAccessToken as default };","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CognitoJwtToken from './CognitoJwtToken';\n\n/** @class */\nvar CognitoIdToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoIdToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoIdToken object\n   * @param {string=} IdToken The JWT Id token\n   */\n  function CognitoIdToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken;\n    return _CognitoJwtToken.call(this, IdToken || '') || this;\n  }\n  return CognitoIdToken;\n}(CognitoJwtToken);\nexport { CognitoIdToken as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoRefreshToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoRefreshToken object\n   * @param {string=} RefreshToken The JWT refresh token.\n   */\n  function CognitoRefreshToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      RefreshToken = _ref.RefreshToken;\n    // Assign object\n    this.token = RefreshToken || '';\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoRefreshToken.prototype;\n  _proto.getToken = function getToken() {\n    return this.token;\n  };\n  return CognitoRefreshToken;\n}();\nexport { CognitoRefreshToken as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserSession = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserSession object\n   * @param {CognitoIdToken} IdToken The session's Id token.\n   * @param {CognitoRefreshToken=} RefreshToken The session's refresh token.\n   * @param {CognitoAccessToken} AccessToken The session's access token.\n   * @param {int} ClockDrift The saved computer's clock drift or undefined to force calculation.\n   */\n  function CognitoUserSession(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken,\n      RefreshToken = _ref.RefreshToken,\n      AccessToken = _ref.AccessToken,\n      ClockDrift = _ref.ClockDrift;\n    if (AccessToken == null || IdToken == null) {\n      throw new Error('Id token and Access Token must be present.');\n    }\n    this.idToken = IdToken;\n    this.refreshToken = RefreshToken;\n    this.accessToken = AccessToken;\n    this.clockDrift = ClockDrift === undefined ? this.calculateClockDrift() : ClockDrift;\n  }\n\n  /**\n   * @returns {CognitoIdToken} the session's Id token\n   */\n  var _proto = CognitoUserSession.prototype;\n  _proto.getIdToken = function getIdToken() {\n    return this.idToken;\n  }\n\n  /**\n   * @returns {CognitoRefreshToken} the session's refresh token\n   */;\n  _proto.getRefreshToken = function getRefreshToken() {\n    return this.refreshToken;\n  }\n\n  /**\n   * @returns {CognitoAccessToken} the session's access token\n   */;\n  _proto.getAccessToken = function getAccessToken() {\n    return this.accessToken;\n  }\n\n  /**\n   * @returns {int} the session's clock drift\n   */;\n  _proto.getClockDrift = function getClockDrift() {\n    return this.clockDrift;\n  }\n\n  /**\n   * @returns {int} the computer's clock drift\n   */;\n  _proto.calculateClockDrift = function calculateClockDrift() {\n    var now = Math.floor(new Date() / 1000);\n    var iat = Math.min(this.accessToken.getIssuedAt(), this.idToken.getIssuedAt());\n    return now - iat;\n  }\n\n  /**\n   * Checks to see if the session is still valid based on session expiry information found\n   * in tokens and the current time (adjusted with clock drift)\n   * @returns {boolean} if the session is still valid\n   */;\n  _proto.isValid = function isValid() {\n    var now = Math.floor(new Date() / 1000);\n    var adjusted = now - this.clockDrift;\n    return adjusted < this.accessToken.getExpiration() && adjusted < this.idToken.getExpiration();\n  };\n  return CognitoUserSession;\n}();\nexport { CognitoUserSession as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nvar weekNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n/** @class */\nvar DateHelper = /*#__PURE__*/function () {\n  function DateHelper() {}\n  var _proto = DateHelper.prototype;\n  /**\n   * @returns {string} The current time in \"ddd MMM D HH:mm:ss UTC YYYY\" format.\n   */\n  _proto.getNowString = function getNowString() {\n    var now = new Date();\n    var weekDay = weekNames[now.getUTCDay()];\n    var month = monthNames[now.getUTCMonth()];\n    var day = now.getUTCDate();\n    var hours = now.getUTCHours();\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n    var minutes = now.getUTCMinutes();\n    if (minutes < 10) {\n      minutes = \"0\" + minutes;\n    }\n    var seconds = now.getUTCSeconds();\n    if (seconds < 10) {\n      seconds = \"0\" + seconds;\n    }\n    var year = now.getUTCFullYear();\n\n    // ddd MMM D HH:mm:ss UTC YYYY\n    var dateNow = weekDay + \" \" + month + \" \" + day + \" \" + hours + \":\" + minutes + \":\" + seconds + \" UTC \" + year;\n    return dateNow;\n  };\n  return DateHelper;\n}();\nexport { DateHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserAttribute = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserAttribute object\n   * @param {string=} Name The record's name\n   * @param {string=} Value The record's value\n   */\n  function CognitoUserAttribute(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      Name = _ref.Name,\n      Value = _ref.Value;\n    this.Name = Name || '';\n    this.Value = Value || '';\n  }\n\n  /**\n   * @returns {string} the record's value.\n   */\n  var _proto = CognitoUserAttribute.prototype;\n  _proto.getValue = function getValue() {\n    return this.Value;\n  }\n\n  /**\n   * Sets the record's value.\n   * @param {string} value The new value.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setValue = function setValue(value) {\n    this.Value = value;\n    return this;\n  }\n\n  /**\n   * @returns {string} the record's name.\n   */;\n  _proto.getName = function getName() {\n    return this.Name;\n  }\n\n  /**\n   * Sets the record's name\n   * @param {string} name The new name.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setName = function setName(name) {\n    this.Name = name;\n    return this;\n  }\n\n  /**\n   * @returns {string} a string representation of the record.\n   */;\n  _proto.toString = function toString() {\n    return JSON.stringify(this);\n  }\n\n  /**\n   * @returns {object} a flat object representing the record.\n   */;\n  _proto.toJSON = function toJSON() {\n    return {\n      Name: this.Name,\n      Value: this.Value\n    };\n  };\n  return CognitoUserAttribute;\n}();\nexport { CognitoUserAttribute as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar dataMemory = {};\n\n/** @class */\nexport var MemoryStorage = /*#__PURE__*/function () {\n  function MemoryStorage() {}\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  MemoryStorage.setItem = function setItem(key, value) {\n    dataMemory[key] = value;\n    return dataMemory[key];\n  }\n\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */;\n  MemoryStorage.getItem = function getItem(key) {\n    return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : undefined;\n  }\n\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {boolean} return true\n   */;\n  MemoryStorage.removeItem = function removeItem(key) {\n    return delete dataMemory[key];\n  }\n\n  /**\n   * This is used to clear the storage\n   * @returns {string} nothing\n   */;\n  MemoryStorage.clear = function clear() {\n    dataMemory = {};\n    return dataMemory;\n  };\n  return MemoryStorage;\n}();\n\n/** @class */\nvar StorageHelper = /*#__PURE__*/function () {\n  /**\n   * This is used to get a storage object\n   * @returns {object} the storage\n   */\n  function StorageHelper() {\n    try {\n      this.storageWindow = window.localStorage;\n      this.storageWindow.setItem('aws.cognito.test-ls', 1);\n      this.storageWindow.removeItem('aws.cognito.test-ls');\n    } catch (exception) {\n      this.storageWindow = MemoryStorage;\n    }\n  }\n\n  /**\n   * This is used to return the storage\n   * @returns {object} the storage\n   */\n  var _proto = StorageHelper.prototype;\n  _proto.getStorage = function getStorage() {\n    return this.storageWindow;\n  };\n  return StorageHelper;\n}();\nexport { StorageHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\nimport CryptoJS from 'crypto-js/core';\nimport TypedArrays from 'crypto-js/lib-typedarrays'; // necessary for crypto js\nimport Base64 from 'crypto-js/enc-base64';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport BigInteger from './BigInteger';\nimport AuthenticationHelper from './AuthenticationHelper';\nimport CognitoAccessToken from './CognitoAccessToken';\nimport CognitoIdToken from './CognitoIdToken';\nimport CognitoRefreshToken from './CognitoRefreshToken';\nimport CognitoUserSession from './CognitoUserSession';\nimport DateHelper from './DateHelper';\nimport CognitoUserAttribute from './CognitoUserAttribute';\nimport StorageHelper from './StorageHelper';\n\n/**\n * @callback nodeCallback\n * @template T result\n * @param {*} err The operation failure reason, or null.\n * @param {T} result The operation result.\n */\n\n/**\n * @callback onFailure\n * @param {*} err Failure reason.\n */\n\n/**\n * @callback onSuccess\n * @template T result\n * @param {T} result The operation result.\n */\n\n/**\n * @callback mfaRequired\n * @param {*} details MFA challenge details.\n */\n\n/**\n * @callback customChallenge\n * @param {*} details Custom challenge details.\n */\n\n/**\n * @callback inputVerificationCode\n * @param {*} data Server response.\n */\n\n/**\n * @callback authSuccess\n * @param {CognitoUserSession} session The new session.\n * @param {bool=} userConfirmationNecessary User must be confirmed.\n */\n\nvar isBrowser = typeof navigator !== 'undefined';\nvar userAgent = isBrowser ? navigator.userAgent : 'nodejs';\n\n/** @class */\nvar CognitoUser = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUser object\n   * @param {object} data Creation options\n   * @param {string} data.Username The user's username.\n   * @param {CognitoUserPool} data.Pool Pool containing the user.\n   * @param {object} data.Storage Optional storage object.\n   */\n  function CognitoUser(data) {\n    if (data == null || data.Username == null || data.Pool == null) {\n      throw new Error('Username and Pool information are required.');\n    }\n    this.username = data.Username || '';\n    this.pool = data.Pool;\n    this.Session = null;\n    this.client = data.Pool.client;\n    this.signInUserSession = null;\n    this.authenticationFlowType = 'USER_SRP_AUTH';\n    this.storage = data.Storage || new StorageHelper().getStorage();\n    this.keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    this.userDataKey = this.keyPrefix + \".\" + this.username + \".userData\";\n  }\n\n  /**\n   * Sets the session for this user\n   * @param {CognitoUserSession} signInUserSession the session\n   * @returns {void}\n   */\n  var _proto = CognitoUser.prototype;\n  _proto.setSignInUserSession = function setSignInUserSession(signInUserSession) {\n    this.clearCachedUserData();\n    this.signInUserSession = signInUserSession;\n    this.cacheTokens();\n  }\n\n  /**\n   * @returns {CognitoUserSession} the current session for this user\n   */;\n  _proto.getSignInUserSession = function getSignInUserSession() {\n    return this.signInUserSession;\n  }\n\n  /**\n   * @returns {string} the user's username\n   */;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {String} the authentication flow type\n   */;\n  _proto.getAuthenticationFlowType = function getAuthenticationFlowType() {\n    return this.authenticationFlowType;\n  }\n\n  /**\n   * sets authentication flow type\n   * @param {string} authenticationFlowType New value.\n   * @returns {void}\n   */;\n  _proto.setAuthenticationFlowType = function setAuthenticationFlowType(authenticationFlowType) {\n    this.authenticationFlowType = authenticationFlowType;\n  }\n\n  /**\n   * This is used for authenticating the user through the custom authentication flow.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.initiateAuth = function initiateAuth(authDetails, callback) {\n    var _this = this;\n    var authParameters = authDetails.getAuthParameters();\n    authParameters.USERNAME = this.username;\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'CUSTOM_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = data.ChallengeName;\n      var challengeParameters = data.ChallengeParameters;\n      if (challengeName === 'CUSTOM_CHALLENGE') {\n        _this.Session = data.Session;\n        return callback.customChallenge(challengeParameters);\n      }\n      _this.signInUserSession = _this.getCognitoUserSession(data.AuthenticationResult);\n      _this.cacheTokens();\n      return callback.onSuccess(_this.signInUserSession);\n    });\n  }\n\n  /**\n   * This is used for authenticating the user.\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUser = function authenticateUser(authDetails, callback) {\n    if (this.authenticationFlowType === 'USER_PASSWORD_AUTH') {\n      return this.authenticateUserPlainUsernamePassword(authDetails, callback);\n    } else if (this.authenticationFlowType === 'USER_SRP_AUTH' || this.authenticationFlowType === 'CUSTOM_AUTH') {\n      return this.authenticateUserDefaultAuth(authDetails, callback);\n    }\n    return callback.onFailure(new Error('Authentication flow type is invalid.'));\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * It calls the AuthenticationHelper for SRP related\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserDefaultAuth = function authenticateUserDefaultAuth(authDetails, callback) {\n    var _this2 = this;\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    var dateHelper = new DateHelper();\n    var serverBValue;\n    var salt;\n    var authParameters = {};\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    authParameters.USERNAME = this.username;\n    authenticationHelper.getLargeAValue(function (errOnAValue, aValue) {\n      // getLargeAValue callback start\n      if (errOnAValue) {\n        callback.onFailure(errOnAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      if (_this2.authenticationFlowType === 'CUSTOM_AUTH') {\n        authParameters.CHALLENGE_NAME = 'SRP_A';\n      }\n      var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n      var jsonReq = {\n        AuthFlow: _this2.authenticationFlowType,\n        ClientId: _this2.pool.getClientId(),\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetaData\n      };\n      if (_this2.getUserContextData(_this2.username)) {\n        jsonReq.UserContextData = _this2.getUserContextData(_this2.username);\n      }\n      _this2.client.request('InitiateAuth', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        _this2.username = challengeParameters.USER_ID_FOR_SRP;\n        _this2.userDataKey = _this2.keyPrefix + \".\" + _this2.username + \".userData\";\n        serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        salt = new BigInteger(challengeParameters.SALT, 16);\n        _this2.getCachedDeviceKeyAndPassword();\n        authenticationHelper.getPasswordAuthenticationKey(_this2.username, authDetails.getPassword(), serverBValue, salt, function (errOnHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errOnHkdf) {\n            callback.onFailure(errOnHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this2.pool.getUserPoolName(), 'utf8'), Buffer.from(_this2.username, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this2.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          if (_this2.deviceKey != null) {\n            challengeResponses.DEVICE_KEY = _this2.deviceKey;\n          }\n          var respondToAuthChallenge = function respondToAuthChallenge(challenge, challengeCallback) {\n            return _this2.client.request('RespondToAuthChallenge', challenge, function (errChallenge, dataChallenge) {\n              if (errChallenge && errChallenge.code === 'ResourceNotFoundException' && errChallenge.message.toLowerCase().indexOf('device') !== -1) {\n                challengeResponses.DEVICE_KEY = null;\n                _this2.deviceKey = null;\n                _this2.randomPassword = null;\n                _this2.deviceGroupKey = null;\n                _this2.clearCachedDeviceKeyAndPassword();\n                return respondToAuthChallenge(challenge, challengeCallback);\n              }\n              return challengeCallback(errChallenge, dataChallenge);\n            });\n          };\n          var jsonReqResp = {\n            ChallengeName: 'PASSWORD_VERIFIER',\n            ClientId: _this2.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session,\n            ClientMetadata: clientMetaData\n          };\n          if (_this2.getUserContextData()) {\n            jsonReqResp.UserContextData = _this2.getUserContextData();\n          }\n          respondToAuthChallenge(jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            return _this2.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserPlainUsernamePassword = function authenticateUserPlainUsernamePassword(authDetails, callback) {\n    var _this3 = this;\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.PASSWORD = authDetails.getPassword();\n    if (!authParameters.PASSWORD) {\n      callback.onFailure(new Error('PASSWORD parameter is required'));\n      return;\n    }\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'USER_PASSWORD_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData(this.username)) {\n      jsonReq.UserContextData = this.getUserContextData(this.username);\n    }\n    // USER_PASSWORD_AUTH happens in a single round-trip: client sends userName and password,\n    // Cognito UserPools verifies password and returns tokens.\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this3.authenticateUserInternal(authResult, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {object} dataAuthenticate authentication data\n   * @param {object} authenticationHelper helper created\n   * @param {callback} callback passed on from caller\n   * @returns {void}\n   */;\n  _proto.authenticateUserInternal = function authenticateUserInternal(dataAuthenticate, authenticationHelper, callback) {\n    var _this4 = this;\n    var challengeName = dataAuthenticate.ChallengeName;\n    var challengeParameters = dataAuthenticate.ChallengeParameters;\n    if (challengeName === 'SMS_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SELECT_MFA_TYPE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.selectMFAType(challengeName, challengeParameters);\n    }\n    if (challengeName === 'MFA_SETUP') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaSetup(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SOFTWARE_TOKEN_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.totpRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'CUSTOM_CHALLENGE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.customChallenge(challengeParameters);\n    }\n    if (challengeName === 'NEW_PASSWORD_REQUIRED') {\n      this.Session = dataAuthenticate.Session;\n      var userAttributes = null;\n      var rawRequiredAttributes = null;\n      var requiredAttributes = [];\n      var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n      if (challengeParameters) {\n        userAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes);\n        rawRequiredAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes);\n      }\n      if (rawRequiredAttributes) {\n        for (var i = 0; i < rawRequiredAttributes.length; i++) {\n          requiredAttributes[i] = rawRequiredAttributes[i].substr(userAttributesPrefix.length);\n        }\n      }\n      return callback.newPasswordRequired(userAttributes, requiredAttributes);\n    }\n    if (challengeName === 'DEVICE_SRP_AUTH') {\n      this.Session = dataAuthenticate.Session;\n      this.getDeviceResponse(callback);\n      return undefined;\n    }\n    this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n    this.challengeName = challengeName;\n    this.cacheTokens();\n    var newDeviceMetadata = dataAuthenticate.AuthenticationResult.NewDeviceMetadata;\n    if (newDeviceMetadata == null) {\n      return callback.onSuccess(this.signInUserSession);\n    }\n    authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n      if (errGenHash) {\n        return callback.onFailure(errGenHash);\n      }\n      var deviceSecretVerifierConfig = {\n        Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n        PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n      };\n      _this4.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n      _this4.deviceGroupKey = newDeviceMetadata.DeviceGroupKey;\n      _this4.randomPassword = authenticationHelper.getRandomPassword();\n      _this4.client.request('ConfirmDevice', {\n        DeviceKey: newDeviceMetadata.DeviceKey,\n        AccessToken: _this4.signInUserSession.getAccessToken().getJwtToken(),\n        DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n        DeviceName: userAgent\n      }, function (errConfirm, dataConfirm) {\n        if (errConfirm) {\n          return callback.onFailure(errConfirm);\n        }\n        _this4.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n        _this4.cacheDeviceKeyAndPassword();\n        if (dataConfirm.UserConfirmationNecessary === true) {\n          return callback.onSuccess(_this4.signInUserSession, dataConfirm.UserConfirmationNecessary);\n        }\n        return callback.onSuccess(_this4.signInUserSession);\n      });\n      return undefined;\n    });\n    return undefined;\n  }\n\n  /**\n   * This method is user to complete the NEW_PASSWORD_REQUIRED challenge.\n   * Pass the new password with any new user attributes to be updated.\n   * User attribute keys must be of format userAttributes.<attribute_name>.\n   * @param {string} newPassword new password for this user\n   * @param {object} requiredAttributeData map with values for all required attributes\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *         response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.completeNewPasswordChallenge = function completeNewPasswordChallenge(newPassword, requiredAttributeData, callback, clientMetadata) {\n    var _this5 = this;\n    if (!newPassword) {\n      return callback.onFailure(new Error('New password is required.'));\n    }\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n    var finalUserAttributes = {};\n    if (requiredAttributeData) {\n      Object.keys(requiredAttributeData).forEach(function (key) {\n        finalUserAttributes[userAttributesPrefix + key] = requiredAttributeData[key];\n      });\n    }\n    finalUserAttributes.NEW_PASSWORD = newPassword;\n    finalUserAttributes.USERNAME = this.username;\n    var jsonReq = {\n      ChallengeName: 'NEW_PASSWORD_REQUIRED',\n      ClientId: this.pool.getClientId(),\n      ChallengeResponses: finalUserAttributes,\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (errAuthenticate, dataAuthenticate) {\n      if (errAuthenticate) {\n        return callback.onFailure(errAuthenticate);\n      }\n      return _this5.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get a session using device authentication. It is called at the end of user\n   * authentication\n   *\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   * @private\n   */;\n  _proto.getDeviceResponse = function getDeviceResponse(callback, clientMetadata) {\n    var _this6 = this;\n    var authenticationHelper = new AuthenticationHelper(this.deviceGroupKey);\n    var dateHelper = new DateHelper();\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.DEVICE_KEY = this.deviceKey;\n    authenticationHelper.getLargeAValue(function (errAValue, aValue) {\n      // getLargeAValue callback start\n      if (errAValue) {\n        callback.onFailure(errAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      var jsonReq = {\n        ChallengeName: 'DEVICE_SRP_AUTH',\n        ClientId: _this6.pool.getClientId(),\n        ChallengeResponses: authParameters,\n        ClientMetadata: clientMetadata,\n        Session: _this6.Session\n      };\n      if (_this6.getUserContextData()) {\n        jsonReq.UserContextData = _this6.getUserContextData();\n      }\n      _this6.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        var serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        var salt = new BigInteger(challengeParameters.SALT, 16);\n        authenticationHelper.getPasswordAuthenticationKey(_this6.deviceKey, _this6.randomPassword, serverBValue, salt, function (errHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errHkdf) {\n            return callback.onFailure(errHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this6.deviceGroupKey, 'utf8'), Buffer.from(_this6.deviceKey, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this6.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          challengeResponses.DEVICE_KEY = _this6.deviceKey;\n          var jsonReqResp = {\n            ChallengeName: 'DEVICE_PASSWORD_VERIFIER',\n            ClientId: _this6.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session\n          };\n          if (_this6.getUserContextData()) {\n            jsonReqResp.UserContextData = _this6.getUserContextData();\n          }\n          _this6.client.request('RespondToAuthChallenge', jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            _this6.signInUserSession = _this6.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n            _this6.cacheTokens();\n            return callback.onSuccess(_this6.signInUserSession);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * This is used for a certain user to confirm the registration by using a confirmation code\n   * @param {string} confirmationCode Code entered by user.\n   * @param {bool} forceAliasCreation Allow migrating from an existing email / phone number.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmRegistration = function confirmRegistration(confirmationCode, forceAliasCreation, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      ConfirmationCode: confirmationCode,\n      Username: this.username,\n      ForceAliasCreation: forceAliasCreation,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmSignUp', jsonReq, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n  }\n\n  /**\n   * This is used by the user once he has the responses to a custom challenge\n   * @param {string} answerChallenge The custom challenge answer.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge\n   *    Custom challenge response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendCustomChallengeAnswer = function sendCustomChallengeAnswer(answerChallenge, callback, clientMetadata) {\n    var _this7 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: 'CUSTOM_CHALLENGE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this7.authenticateUserInternal(data, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * This is used by the user once he has an MFA code\n   * @param {string} confirmationCode The MFA code entered by the user.\n   * @param {object} callback Result callback map.\n   * @param {string} mfaType The mfa we are replying to.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendMFACode = function sendMFACode(confirmationCode, callback, mfaType, clientMetadata) {\n    var _this8 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.SMS_MFA_CODE = confirmationCode;\n    var mfaTypeSelection = mfaType || 'SMS_MFA';\n    if (mfaTypeSelection === 'SOFTWARE_TOKEN_MFA') {\n      challengeResponses.SOFTWARE_TOKEN_MFA_CODE = confirmationCode;\n    }\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: mfaTypeSelection,\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, dataAuthenticate) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = dataAuthenticate.ChallengeName;\n      if (challengeName === 'DEVICE_SRP_AUTH') {\n        _this8.getDeviceResponse(callback);\n        return undefined;\n      }\n      _this8.signInUserSession = _this8.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n      _this8.cacheTokens();\n      if (dataAuthenticate.AuthenticationResult.NewDeviceMetadata == null) {\n        return callback.onSuccess(_this8.signInUserSession);\n      }\n      var authenticationHelper = new AuthenticationHelper(_this8.pool.getUserPoolName());\n      authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n        if (errGenHash) {\n          return callback.onFailure(errGenHash);\n        }\n        var deviceSecretVerifierConfig = {\n          Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n          PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n        };\n        _this8.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n        _this8.deviceGroupKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey;\n        _this8.randomPassword = authenticationHelper.getRandomPassword();\n        _this8.client.request('ConfirmDevice', {\n          DeviceKey: dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,\n          AccessToken: _this8.signInUserSession.getAccessToken().getJwtToken(),\n          DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n          DeviceName: userAgent\n        }, function (errConfirm, dataConfirm) {\n          if (errConfirm) {\n            return callback.onFailure(errConfirm);\n          }\n          _this8.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n          _this8.cacheDeviceKeyAndPassword();\n          if (dataConfirm.UserConfirmationNecessary === true) {\n            return callback.onSuccess(_this8.signInUserSession, dataConfirm.UserConfirmationNecessary);\n          }\n          return callback.onSuccess(_this8.signInUserSession);\n        });\n        return undefined;\n      });\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to change the current password\n   * @param {string} oldUserPassword The current password.\n   * @param {string} newUserPassword The requested new password.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.changePassword = function changePassword(oldUserPassword, newUserPassword, callback, clientMetadata) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('ChangePassword', {\n      PreviousPassword: oldUserPassword,\n      ProposedPassword: newUserPassword,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.enableMFA = function enableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    var mfaEnabled = {\n      DeliveryMedium: 'SMS',\n      AttributeName: 'phone_number'\n    };\n    mfaOptions.push(mfaEnabled);\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @param {IMfaSettings} smsMfaSettings the sms mfa settings\n   * @param {IMFASettings} softwareTokenMfaSettings the software token mfa settings\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.setUserMfaPreference = function setUserMfaPreference(smsMfaSettings, softwareTokenMfaSettings, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('SetUserMFAPreference', {\n      SMSMfaSettings: smsMfaSettings,\n      SoftwareTokenMfaSettings: softwareTokenMfaSettings,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to disable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.disableMFA = function disableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to delete itself\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.deleteUser = function deleteUser(callback, clientMetadata) {\n    var _this9 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      _this9.clearCachedUser();\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * @typedef {CognitoUserAttribute | { Name:string, Value:string }} AttributeArg\n   */\n  /**\n   * This is used by an authenticated user to change a list of attributes\n   * @param {AttributeArg[]} attributes A list of the new user attributes.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.updateAttributes = function updateAttributes(attributes, callback, clientMetadata) {\n    var _this10 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('UpdateUserAttributes', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      UserAttributes: attributes,\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this10.getUserData(function () {\n        return callback(null, 'SUCCESS');\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to get a list of attributes\n   * @param {nodeCallback<CognitoUserAttribute[]>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getUserAttributes = function getUserAttributes(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      var attributeList = [];\n      for (var i = 0; i < userData.UserAttributes.length; i++) {\n        var attribute = {\n          Name: userData.UserAttributes[i].Name,\n          Value: userData.UserAttributes[i].Value\n        };\n        var userAttribute = new CognitoUserAttribute(attribute);\n        attributeList.push(userAttribute);\n      }\n      return callback(null, attributeList);\n    });\n    return undefined;\n  }\n\n  /**\n   * This was previously used by an authenticated user to get MFAOptions,\n   * but no longer returns a meaningful response. Refer to the documentation for\n   * how to setup and use MFA: https://docs.amplify.aws/lib/auth/mfa/q/platform/js\n   * @deprecated\n   * @param {nodeCallback<MFAOptions>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getMFAOptions = function getMFAOptions(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, userData.MFAOptions);\n    });\n    return undefined;\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.createGetUserRequest = function createGetUserRequest() {\n    return this.client.promisifyRequest('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.refreshSessionIfPossible = function refreshSessionIfPossible(options) {\n    var _this11 = this;\n    if (options === void 0) {\n      options = {};\n    }\n    // best effort, if not possible\n    return new Promise(function (resolve) {\n      var refresh = _this11.signInUserSession.getRefreshToken();\n      if (refresh && refresh.getToken()) {\n        _this11.refreshSession(refresh, resolve, options.clientMetadata);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * @typedef {Object} GetUserDataOptions\n   * @property {boolean} bypassCache - force getting data from Cognito service\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used by an authenticated users to get the userData\n   * @param {nodeCallback<UserData>} callback Called on success or error.\n   * @param {GetUserDataOptions} params\n   * @returns {void}\n   */;\n  _proto.getUserData = function getUserData(callback, params) {\n    var _this12 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.clearCachedUserData();\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var userData = this.getUserDataFromCache();\n    if (!userData) {\n      this.fetchUserData().then(function (data) {\n        callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    if (this.isFetchUserDataAndTokenRequired(params)) {\n      this.fetchUserData().then(function (data) {\n        return _this12.refreshSessionIfPossible(params).then(function () {\n          return data;\n        });\n      }).then(function (data) {\n        return callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    try {\n      callback(null, JSON.parse(userData));\n      return;\n    } catch (err) {\n      this.clearCachedUserData();\n      callback(err, null);\n      return;\n    }\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.getUserDataFromCache = function getUserDataFromCache() {\n    var userData = this.storage.getItem(this.userDataKey);\n    return userData;\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.isFetchUserDataAndTokenRequired = function isFetchUserDataAndTokenRequired(params) {\n    var _ref = params || {},\n      _ref$bypassCache = _ref.bypassCache,\n      bypassCache = _ref$bypassCache === void 0 ? false : _ref$bypassCache;\n    return bypassCache;\n  }\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.fetchUserData = function fetchUserData() {\n    var _this13 = this;\n    return this.createGetUserRequest().then(function (data) {\n      _this13.cacheUserData(data);\n      return data;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to delete a list of attributes\n   * @param {string[]} attributeList Names of the attributes to delete.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.deleteAttributes = function deleteAttributes(attributeList, callback) {\n    var _this14 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUserAttributes', {\n      UserAttributeNames: attributeList,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this14.getUserData(function () {\n        return callback(null, 'SUCCESS');\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by a user to resend a confirmation code\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.resendConfirmationCode = function resendConfirmationCode(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    this.client.request('ResendConfirmationCode', jsonReq, function (err, result) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, result);\n    });\n  }\n\n  /**\n   * @typedef {Object} GetSessionOptions\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used to get a session, either from the session object\n   * or from  the local storage, or by using a refresh token\n   *\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {GetSessionOptions} options\n   * @returns {void}\n   */;\n  _proto.getSession = function getSession(callback, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (this.username == null) {\n      return callback(new Error('Username is null. Cannot retrieve a new session'), null);\n    }\n    if (this.signInUserSession != null && this.signInUserSession.isValid()) {\n      return callback(null, this.signInUserSession);\n    }\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var idTokenKey = keyPrefix + \".idToken\";\n    var accessTokenKey = keyPrefix + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".clockDrift\";\n    if (this.storage.getItem(idTokenKey)) {\n      var idToken = new CognitoIdToken({\n        IdToken: this.storage.getItem(idTokenKey)\n      });\n      var accessToken = new CognitoAccessToken({\n        AccessToken: this.storage.getItem(accessTokenKey)\n      });\n      var refreshToken = new CognitoRefreshToken({\n        RefreshToken: this.storage.getItem(refreshTokenKey)\n      });\n      var clockDrift = parseInt(this.storage.getItem(clockDriftKey), 0) || 0;\n      var sessionData = {\n        IdToken: idToken,\n        AccessToken: accessToken,\n        RefreshToken: refreshToken,\n        ClockDrift: clockDrift\n      };\n      var cachedSession = new CognitoUserSession(sessionData);\n      if (cachedSession.isValid()) {\n        this.signInUserSession = cachedSession;\n        return callback(null, this.signInUserSession);\n      }\n      if (!refreshToken.getToken()) {\n        return callback(new Error('Cannot retrieve a new session. Please authenticate.'), null);\n      }\n      this.refreshSession(refreshToken, callback, options.clientMetadata);\n    } else {\n      callback(new Error('Local storage is missing an ID Token, Please authenticate'), null);\n    }\n    return undefined;\n  }\n\n  /**\n   * This uses the refreshToken to retrieve a new session\n   * @param {CognitoRefreshToken} refreshToken A previous session's refresh token.\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.refreshSession = function refreshSession(refreshToken, callback, clientMetadata) {\n    var _this15 = this;\n    var wrappedCallback = this.pool.wrapRefreshSessionCallback ? this.pool.wrapRefreshSessionCallback(callback) : callback;\n    var authParameters = {};\n    authParameters.REFRESH_TOKEN = refreshToken.getToken();\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    if (this.storage.getItem(lastUserKey)) {\n      this.username = this.storage.getItem(lastUserKey);\n      var deviceKeyKey = keyPrefix + \".\" + this.username + \".deviceKey\";\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      AuthFlow: 'REFRESH_TOKEN_AUTH',\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        if (err.code === 'NotAuthorizedException') {\n          _this15.clearCachedUser();\n        }\n        return wrappedCallback(err, null);\n      }\n      if (authResult) {\n        var authenticationResult = authResult.AuthenticationResult;\n        if (!Object.prototype.hasOwnProperty.call(authenticationResult, 'RefreshToken')) {\n          authenticationResult.RefreshToken = refreshToken.getToken();\n        }\n        _this15.signInUserSession = _this15.getCognitoUserSession(authenticationResult);\n        _this15.cacheTokens();\n        return wrappedCallback(null, _this15.signInUserSession);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used to save the session tokens to local storage\n   * @returns {void}\n   */;\n  _proto.cacheTokens = function cacheTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    this.storage.setItem(idTokenKey, this.signInUserSession.getIdToken().getJwtToken());\n    this.storage.setItem(accessTokenKey, this.signInUserSession.getAccessToken().getJwtToken());\n    this.storage.setItem(refreshTokenKey, this.signInUserSession.getRefreshToken().getToken());\n    this.storage.setItem(clockDriftKey, \"\" + this.signInUserSession.getClockDrift());\n    this.storage.setItem(lastUserKey, this.username);\n  }\n\n  /**\n   * This is to cache user data\n   */;\n  _proto.cacheUserData = function cacheUserData(userData) {\n    this.storage.setItem(this.userDataKey, JSON.stringify(userData));\n  }\n\n  /**\n   * This is to remove cached user data\n   */;\n  _proto.clearCachedUserData = function clearCachedUserData() {\n    this.storage.removeItem(this.userDataKey);\n  };\n  _proto.clearCachedUser = function clearCachedUser() {\n    this.clearCachedTokens();\n    this.clearCachedUserData();\n  }\n\n  /**\n   * This is used to cache the device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.cacheDeviceKeyAndPassword = function cacheDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.setItem(deviceKeyKey, this.deviceKey);\n    this.storage.setItem(randomPasswordKey, this.randomPassword);\n    this.storage.setItem(deviceGroupKeyKey, this.deviceGroupKey);\n  }\n\n  /**\n   * This is used to get current device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.getCachedDeviceKeyAndPassword = function getCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    if (this.storage.getItem(deviceKeyKey)) {\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      this.randomPassword = this.storage.getItem(randomPasswordKey);\n      this.deviceGroupKey = this.storage.getItem(deviceGroupKeyKey);\n    }\n  }\n\n  /**\n   * This is used to clear the device key info from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedDeviceKeyAndPassword = function clearCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.removeItem(deviceKeyKey);\n    this.storage.removeItem(randomPasswordKey);\n    this.storage.removeItem(deviceGroupKeyKey);\n  }\n\n  /**\n   * This is used to clear the session tokens from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedTokens = function clearCachedTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    this.storage.removeItem(idTokenKey);\n    this.storage.removeItem(accessTokenKey);\n    this.storage.removeItem(refreshTokenKey);\n    this.storage.removeItem(lastUserKey);\n    this.storage.removeItem(clockDriftKey);\n  }\n\n  /**\n   * This is used to build a user session from tokens retrieved in the authentication result\n   * @param {object} authResult Successful auth response from server.\n   * @returns {CognitoUserSession} The new user session.\n   * @private\n   */;\n  _proto.getCognitoUserSession = function getCognitoUserSession(authResult) {\n    var idToken = new CognitoIdToken(authResult);\n    var accessToken = new CognitoAccessToken(authResult);\n    var refreshToken = new CognitoRefreshToken(authResult);\n    var sessionData = {\n      IdToken: idToken,\n      AccessToken: accessToken,\n      RefreshToken: refreshToken\n    };\n    return new CognitoUserSession(sessionData);\n  }\n\n  /**\n   * This is used to initiate a forgot password request\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode?} callback.inputVerificationCode\n   *    Optional callback raised instead of onSuccess with response data.\n   * @param {onSuccess} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.forgotPassword = function forgotPassword(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ForgotPassword', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess(data);\n    });\n  }\n\n  /**\n   * This is used to confirm a new password using a confirmationCode\n   * @param {string} confirmationCode Code entered by user.\n   * @param {string} newPassword Confirm new password.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<void>} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmPassword = function confirmPassword(confirmationCode, newPassword, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ConfirmationCode: confirmationCode,\n      Password: newPassword,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmForgotPassword', jsonReq, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n  }\n\n  /**\n   * This is used to initiate an attribute confirmation request\n   * @param {string} attributeName User attribute that needs confirmation.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode} callback.inputVerificationCode Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.getAttributeVerificationCode = function getAttributeVerificationCode(attributeName, callback, clientMetadata) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetUserAttributeVerificationCode', {\n      AttributeName: attributeName,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to confirm an attribute using a confirmation code\n   * @param {string} attributeName Attribute being confirmed.\n   * @param {string} confirmationCode Code entered by user.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.verifyAttribute = function verifyAttribute(attributeName, confirmationCode, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('VerifyUserAttribute', {\n      AttributeName: attributeName,\n      Code: confirmationCode,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get the device information using the current device key\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device data.\n   * @returns {void}\n   */;\n  _proto.getDevice = function getDevice(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget a specific device\n   * @param {string} deviceKey Device key.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetSpecificDevice = function forgetSpecificDevice(deviceKey, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('ForgetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: deviceKey\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget the current device\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetDevice = function forgetDevice(callback) {\n    var _this16 = this;\n    this.forgetSpecificDevice(this.deviceKey, {\n      onFailure: callback.onFailure,\n      onSuccess: function onSuccess(result) {\n        _this16.deviceKey = null;\n        _this16.deviceGroupKey = null;\n        _this16.randomPassword = null;\n        _this16.clearCachedDeviceKeyAndPassword();\n        return callback.onSuccess(result);\n      }\n    });\n  }\n\n  /**\n   * This is used to set the device status as remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusRemembered = function setDeviceStatusRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to set the device status as not remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusNotRemembered = function setDeviceStatusNotRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'not_remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to list all devices for a user\n   *\n   * @param {int} limit the number of devices returned in a call\n   * @param {string | null} paginationToken the pagination token in case any was returned before\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device list.\n   * @returns {void}\n   */;\n  _proto.listDevices = function listDevices(limit, paginationToken, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    var requestParams = {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      Limit: limit\n    };\n    if (paginationToken) {\n      requestParams.PaginationToken = paginationToken;\n    }\n    this.client.request('ListDevices', requestParams, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to globally revoke all tokens issued to a user\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.globalSignOut = function globalSignOut(callback) {\n    var _this17 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GlobalSignOut', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this17.clearCachedUser();\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used for the user to signOut of the application and clear the cached tokens.\n   * @returns {void}\n   */;\n  _proto.signOut = function signOut(revokeTokenCallback) {\n    var _this18 = this;\n    // If tokens won't be revoked, we just clean the client data.\n    if (!revokeTokenCallback || typeof revokeTokenCallback !== 'function') {\n      this.cleanClientData();\n      return;\n    }\n    this.getSession(function (error, _session) {\n      if (error) {\n        return revokeTokenCallback(error);\n      }\n      _this18.revokeTokens(function (err) {\n        _this18.cleanClientData();\n        revokeTokenCallback(err);\n      });\n    });\n  };\n  _proto.revokeTokens = function revokeTokens(revokeTokenCallback) {\n    if (revokeTokenCallback === void 0) {\n      revokeTokenCallback = function revokeTokenCallback() {};\n    }\n    if (typeof revokeTokenCallback !== 'function') {\n      throw new Error('Invalid revokeTokenCallback. It should be a function.');\n    }\n    var tokensToBeRevoked = [];\n    if (!this.signInUserSession) {\n      var error = new Error('User is not authenticated');\n      return revokeTokenCallback(error);\n    }\n    if (!this.signInUserSession.getAccessToken()) {\n      var _error = new Error('No Access token available');\n      return revokeTokenCallback(_error);\n    }\n    var refreshToken = this.signInUserSession.getRefreshToken().getToken();\n    var accessToken = this.signInUserSession.getAccessToken();\n    if (this.isSessionRevocable(accessToken)) {\n      if (refreshToken) {\n        return this.revokeToken({\n          token: refreshToken,\n          callback: revokeTokenCallback\n        });\n      }\n    }\n    revokeTokenCallback();\n  };\n  _proto.isSessionRevocable = function isSessionRevocable(token) {\n    if (token && typeof token.decodePayload === 'function') {\n      try {\n        var _token$decodePayload = token.decodePayload(),\n          origin_jti = _token$decodePayload.origin_jti;\n        return !!origin_jti;\n      } catch (err) {\n        // Nothing to do, token doesnt have origin_jti claim\n      }\n    }\n    return false;\n  };\n  _proto.cleanClientData = function cleanClientData() {\n    this.signInUserSession = null;\n    this.clearCachedUser();\n  };\n  _proto.revokeToken = function revokeToken(_ref2) {\n    var token = _ref2.token,\n      callback = _ref2.callback;\n    this.client.requestWithRetry('RevokeToken', {\n      Token: token,\n      ClientId: this.pool.getClientId()\n    }, function (err) {\n      if (err) {\n        return callback(err);\n      }\n      callback();\n    });\n  }\n\n  /**\n   * This is used by a user trying to select a given MFA\n   * @param {string} answerChallenge the mfa the user wants\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.sendMFASelectionAnswer = function sendMFASelectionAnswer(answerChallenge, callback) {\n    var _this19 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var jsonReq = {\n      ChallengeName: 'SELECT_MFA_TYPE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this19.Session = data.Session;\n      if (answerChallenge === 'SMS_MFA') {\n        return callback.mfaRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      if (answerChallenge === 'SOFTWARE_TOKEN_MFA') {\n        return callback.totpRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This returns the user context data for advanced security feature.\n   * @returns {string} the user context data from CognitoUserPool\n   */;\n  _proto.getUserContextData = function getUserContextData() {\n    var pool = this.pool;\n    return pool.getUserContextData(this.username);\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to associate a TOTP MFA\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.associateSoftwareToken = function associateSoftwareToken(callback) {\n    var _this20 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('AssociateSoftwareToken', {\n        Session: this.Session\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this20.Session = data.Session;\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    } else {\n      this.client.request('AssociateSoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    }\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to verify a TOTP MFA\n   * @param {string} totpCode The MFA code entered by the user.\n   * @param {string} friendlyDeviceName The device name we are assigning to the device.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.verifySoftwareToken = function verifySoftwareToken(totpCode, friendlyDeviceName, callback) {\n    var _this21 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('VerifySoftwareToken', {\n        Session: this.Session,\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this21.Session = data.Session;\n        var challengeResponses = {};\n        challengeResponses.USERNAME = _this21.username;\n        var jsonReq = {\n          ChallengeName: 'MFA_SETUP',\n          ClientId: _this21.pool.getClientId(),\n          ChallengeResponses: challengeResponses,\n          Session: _this21.Session\n        };\n        if (_this21.getUserContextData()) {\n          jsonReq.UserContextData = _this21.getUserContextData();\n        }\n        _this21.client.request('RespondToAuthChallenge', jsonReq, function (errRespond, dataRespond) {\n          if (errRespond) {\n            return callback.onFailure(errRespond);\n          }\n          _this21.signInUserSession = _this21.getCognitoUserSession(dataRespond.AuthenticationResult);\n          _this21.cacheTokens();\n          return callback.onSuccess(_this21.signInUserSession);\n        });\n        return undefined;\n      });\n    } else {\n      this.client.request('VerifySoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.onSuccess(data);\n      });\n    }\n  };\n  return CognitoUser;\n}();\nexport { CognitoUser as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { version } from './version';\nvar BASE_USER_AGENT = \"aws-amplify/\" + version;\nexport var Platform = {\n  userAgent: BASE_USER_AGENT + \" js\",\n  product: '',\n  navigator: null,\n  isReactNative: false\n};\nif (typeof navigator !== 'undefined' && navigator.product) {\n  Platform.product = navigator.product || '';\n  Platform.navigator = navigator || null;\n  switch (navigator.product) {\n    case 'ReactNative':\n      Platform.userAgent = BASE_USER_AGENT + \" react-native\";\n      Platform.isReactNative = true;\n      break;\n    default:\n      Platform.userAgent = BASE_USER_AGENT + \" js\";\n      Platform.isReactNative = false;\n      break;\n  }\n}\nexport var getUserAgent = function getUserAgent() {\n  return Platform.userAgent;\n};\n\n/**\n * @deprecated use named import\n */\nexport default Platform;","import { getUserAgent } from \"./Platform\";\n// constructor\nfunction UserAgent() {}\n// public\nUserAgent.prototype.userAgent = getUserAgent();\nexport var appendToCognitoUserAgent = function appendToCognitoUserAgent(content) {\n  if (!content) {\n    return;\n  }\n  if (UserAgent.prototype.userAgent && !UserAgent.prototype.userAgent.includes(content)) {\n    UserAgent.prototype.userAgent = UserAgent.prototype.userAgent.concat(' ', content);\n  }\n  if (!UserAgent.prototype.userAgent || UserAgent.prototype.userAgent === '') {\n    UserAgent.prototype.userAgent = content;\n  }\n};\n\n// class for defining the amzn user-agent\nexport default UserAgent;","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nimport 'isomorphic-unfetch';\nimport UserAgent from './UserAgent';\nvar CognitoError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(CognitoError, _Error);\n  function CognitoError(message, code, name, statusCode) {\n    var _this;\n    _this = _Error.call(this, message) || this;\n    _this.code = code;\n    _this.name = name;\n    _this.statusCode = statusCode;\n    return _this;\n  }\n  return CognitoError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n/** @class */\nvar Client = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AWS Cognito Identity Provider client object\n   * @param {string} region AWS region\n   * @param {string} endpoint endpoint\n   * @param {object} fetchOptions options for fetch API (only credentials is supported)\n   */\n  function Client(region, endpoint, fetchOptions) {\n    this.endpoint = endpoint || \"https://cognito-idp.\" + region + \".amazonaws.com/\";\n    var _ref = fetchOptions || {},\n      credentials = _ref.credentials;\n    this.fetchOptions = credentials ? {\n      credentials: credentials\n    } : {};\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @returns Promise<object>\n   */\n  var _proto = Client.prototype;\n  _proto.promisifyRequest = function promisifyRequest(operation, params) {\n    var _this2 = this;\n    return new Promise(function (resolve, reject) {\n      _this2.request(operation, params, function (err, data) {\n        if (err) {\n          reject(new CognitoError(err.message, err.code, err.name, err.statusCode));\n        } else {\n          resolve(data);\n        }\n      });\n    });\n  };\n  _proto.requestWithRetry = function requestWithRetry(operation, params, callback) {\n    var _this3 = this;\n    var MAX_DELAY_IN_MILLIS = 5 * 1000;\n    jitteredExponentialRetry(function (p) {\n      return new Promise(function (res, rej) {\n        _this3.request(operation, p, function (error, result) {\n          if (error) {\n            rej(error);\n          } else {\n            res(result);\n          }\n        });\n      });\n    }, [params], MAX_DELAY_IN_MILLIS).then(function (result) {\n      return callback(null, result);\n    })[\"catch\"](function (error) {\n      return callback(error);\n    });\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @param {function} callback Callback called when a response is returned\n   * @returns {void}\n   */;\n  _proto.request = function request(operation, params, callback) {\n    var headers = {\n      'Content-Type': 'application/x-amz-json-1.1',\n      'X-Amz-Target': \"AWSCognitoIdentityProviderService.\" + operation,\n      'X-Amz-User-Agent': UserAgent.prototype.userAgent\n    };\n    var options = Object.assign({}, this.fetchOptions, {\n      headers: headers,\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      body: JSON.stringify(params)\n    });\n    var response;\n    var responseJsonData;\n    fetch(this.endpoint, options).then(function (resp) {\n      response = resp;\n      return resp;\n    }, function (err) {\n      // If error happens here, the request failed\n      // if it is TypeError throw network error\n      if (err instanceof TypeError) {\n        throw new Error('Network error');\n      }\n      throw err;\n    }).then(function (resp) {\n      return resp.json()[\"catch\"](function () {\n        return {};\n      });\n    }).then(function (data) {\n      // return parsed body stream\n      if (response.ok) return callback(null, data);\n      responseJsonData = data;\n\n      // Taken from aws-sdk-js/lib/protocol/json.js\n      // eslint-disable-next-line no-underscore-dangle\n      var code = (data.__type || data.code).split('#').pop();\n      var error = new Error(data.message || data.Message || null);\n      error.name = code;\n      error.code = code;\n      return callback(error);\n    })[\"catch\"](function (err) {\n      // first check if we have a service error\n      if (response && response.headers && response.headers.get('x-amzn-errortype')) {\n        try {\n          var code = response.headers.get('x-amzn-errortype').split(':')[0];\n          var error = new Error(response.status ? response.status.toString() : null);\n          error.code = code;\n          error.name = code;\n          error.statusCode = response.status;\n          return callback(error);\n        } catch (ex) {\n          return callback(err);\n        }\n        // otherwise check if error is Network error\n      } else if (err instanceof Error && err.message === 'Network error') {\n        err.code = 'NetworkError';\n      }\n      return callback(err);\n    });\n  };\n  return Client;\n}();\nexport { Client as default };\nvar logger = {\n  debug: function debug() {\n    // Intentionally blank. This package doesn't have logging\n  }\n};\n\n/**\n * For now, all errors are retryable.\n */\nvar NonRetryableError = /*#__PURE__*/function (_Error2) {\n  _inheritsLoose(NonRetryableError, _Error2);\n  function NonRetryableError(message) {\n    var _this4;\n    _this4 = _Error2.call(this, message) || this;\n    _this4.nonRetryable = true;\n    return _this4;\n  }\n  return NonRetryableError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar isNonRetryableError = function isNonRetryableError(obj) {\n  var key = 'nonRetryable';\n  return obj && obj[key];\n};\nfunction retry(functionToRetry, args, delayFn, attempt) {\n  if (attempt === void 0) {\n    attempt = 1;\n  }\n  if (typeof functionToRetry !== 'function') {\n    throw Error('functionToRetry must be a function');\n  }\n  logger.debug(functionToRetry.name + \" attempt #\" + attempt + \" with args: \" + JSON.stringify(args));\n  return functionToRetry.apply(void 0, args)[\"catch\"](function (err) {\n    logger.debug(\"error on \" + functionToRetry.name, err);\n    if (isNonRetryableError(err)) {\n      logger.debug(functionToRetry.name + \" non retryable error\", err);\n      throw err;\n    }\n    var retryIn = delayFn(attempt, args, err);\n    logger.debug(functionToRetry.name + \" retrying in \" + retryIn + \" ms\");\n    if (retryIn !== false) {\n      return new Promise(function (res) {\n        return setTimeout(res, retryIn);\n      }).then(function () {\n        return retry(functionToRetry, args, delayFn, attempt + 1);\n      });\n    } else {\n      throw err;\n    }\n  });\n}\nfunction jitteredBackoff(maxDelayMs) {\n  var BASE_TIME_MS = 100;\n  var JITTER_FACTOR = 100;\n  return function (attempt) {\n    var delay = Math.pow(2, attempt) * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n    return delay > maxDelayMs ? false : delay;\n  };\n}\nvar MAX_DELAY_MS = 5 * 60 * 1000;\nfunction jitteredExponentialRetry(functionToRetry, args, maxDelayMs) {\n  if (maxDelayMs === void 0) {\n    maxDelayMs = MAX_DELAY_MS;\n  }\n  return retry(functionToRetry, args, jitteredBackoff(maxDelayMs));\n}\n;","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Client from './Client';\nimport CognitoUser from './CognitoUser';\nimport StorageHelper from './StorageHelper';\nvar USER_POOL_ID_MAX_LENGTH = 55;\n\n/** @class */\nvar CognitoUserPool = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserPool object\n   * @param {object} data Creation options.\n   * @param {string} data.UserPoolId Cognito user pool id.\n   * @param {string} data.ClientId User pool application client id.\n   * @param {string} data.endpoint Optional custom service endpoint.\n   * @param {object} data.fetchOptions Optional options for fetch API.\n   *        (only credentials option is supported)\n   * @param {object} data.Storage Optional storage object.\n   * @param {boolean} data.AdvancedSecurityDataCollectionFlag Optional:\n   *        boolean flag indicating if the data collection is enabled\n   *        to support cognito advanced security features. By default, this\n   *        flag is set to true.\n   */\n  function CognitoUserPool(data, wrapRefreshSessionCallback) {\n    var _ref = data || {},\n      UserPoolId = _ref.UserPoolId,\n      ClientId = _ref.ClientId,\n      endpoint = _ref.endpoint,\n      fetchOptions = _ref.fetchOptions,\n      AdvancedSecurityDataCollectionFlag = _ref.AdvancedSecurityDataCollectionFlag;\n    if (!UserPoolId || !ClientId) {\n      throw new Error('Both UserPoolId and ClientId are required.');\n    }\n    if (UserPoolId.length > USER_POOL_ID_MAX_LENGTH || !/^[\\w-]+_[0-9a-zA-Z]+$/.test(UserPoolId)) {\n      throw new Error('Invalid UserPoolId format.');\n    }\n    var region = UserPoolId.split('_')[0];\n    this.userPoolId = UserPoolId;\n    this.clientId = ClientId;\n    this.client = new Client(region, endpoint, fetchOptions);\n\n    /**\n     * By default, AdvancedSecurityDataCollectionFlag is set to true,\n     * if no input value is provided.\n     */\n    this.advancedSecurityDataCollectionFlag = AdvancedSecurityDataCollectionFlag !== false;\n    this.storage = data.Storage || new StorageHelper().getStorage();\n    if (wrapRefreshSessionCallback) {\n      this.wrapRefreshSessionCallback = wrapRefreshSessionCallback;\n    }\n  }\n\n  /**\n   * @returns {string} the user pool id\n   */\n  var _proto = CognitoUserPool.prototype;\n  _proto.getUserPoolId = function getUserPoolId() {\n    return this.userPoolId;\n  }\n\n  /**\n   * @returns {string} the user pool name\n   */;\n  _proto.getUserPoolName = function getUserPoolName() {\n    return this.getUserPoolId().split('_')[1];\n  }\n\n  /**\n   * @returns {string} the client id\n   */;\n  _proto.getClientId = function getClientId() {\n    return this.clientId;\n  }\n\n  /**\n   * @typedef {object} SignUpResult\n   * @property {CognitoUser} user New user.\n   * @property {bool} userConfirmed If the user is already confirmed.\n   */\n  /**\n   * method for signing up a user\n   * @param {string} username User's username.\n   * @param {string} password Plain-text initial password entered by user.\n   * @param {(AttributeArg[])=} userAttributes New user attributes.\n   * @param {(AttributeArg[])=} validationData Application metadata.\n   * @param {(AttributeArg[])=} clientMetadata Client metadata.\n   * @param {nodeCallback<SignUpResult>} callback Called on error or with the new user.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.signUp = function signUp(username, password, userAttributes, validationData, callback, clientMetadata) {\n    var _this = this;\n    var jsonReq = {\n      ClientId: this.clientId,\n      Username: username,\n      Password: password,\n      UserAttributes: userAttributes,\n      ValidationData: validationData,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData(username)) {\n      jsonReq.UserContextData = this.getUserContextData(username);\n    }\n    this.client.request('SignUp', jsonReq, function (err, data) {\n      if (err) {\n        return callback(err, null);\n      }\n      var cognitoUser = {\n        Username: username,\n        Pool: _this,\n        Storage: _this.storage\n      };\n      var returnData = {\n        user: new CognitoUser(cognitoUser),\n        userConfirmed: data.UserConfirmed,\n        userSub: data.UserSub,\n        codeDeliveryDetails: data.CodeDeliveryDetails\n      };\n      return callback(null, returnData);\n    });\n  }\n\n  /**\n   * method for getting the current user of the application from the local storage\n   *\n   * @returns {CognitoUser} the user retrieved from storage\n   */;\n  _proto.getCurrentUser = function getCurrentUser() {\n    var lastUserKey = \"CognitoIdentityServiceProvider.\" + this.clientId + \".LastAuthUser\";\n    var lastAuthUser = this.storage.getItem(lastUserKey);\n    if (lastAuthUser) {\n      var cognitoUser = {\n        Username: lastAuthUser,\n        Pool: this,\n        Storage: this.storage\n      };\n      return new CognitoUser(cognitoUser);\n    }\n    return null;\n  }\n\n  /**\n   * This method returns the encoded data string used for cognito advanced security feature.\n   * This would be generated only when developer has included the JS used for collecting the\n   * data on their client. Please refer to documentation to know more about using AdvancedSecurity\n   * features\n   * @param {string} username the username for the context data\n   * @returns {string} the user context data\n   **/;\n  _proto.getUserContextData = function getUserContextData(username) {\n    if (typeof AmazonCognitoAdvancedSecurityData === 'undefined') {\n      return undefined;\n    }\n    /* eslint-disable */\n    var amazonCognitoAdvancedSecurityDataConst = AmazonCognitoAdvancedSecurityData;\n    /* eslint-enable */\n\n    if (this.advancedSecurityDataCollectionFlag) {\n      var advancedSecurityData = amazonCognitoAdvancedSecurityDataConst.getData(username, this.userPoolId, this.clientId);\n      if (advancedSecurityData) {\n        var userContextData = {\n          EncodedData: advancedSecurityData\n        };\n        return userContextData;\n      }\n    }\n    return {};\n  };\n  return CognitoUserPool;\n}();\nexport { CognitoUserPool as default };","import * as Cookies from 'js-cookie';\n\n/** @class */\nvar CookieStorage = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CookieStorage object\n   * @param {object} data Creation options.\n   * @param {string} data.domain Cookies domain (mandatory).\n   * @param {string} data.path Cookies path (default: '/')\n   * @param {integer} data.expires Cookie expiration (in days, default: 365)\n   * @param {boolean} data.secure Cookie secure flag (default: true)\n   * @param {string} data.sameSite Cookie request behaviour (default: null)\n   */\n  function CookieStorage(data) {\n    if (data.domain) {\n      this.domain = data.domain;\n    } else {\n      throw new Error('The domain of cookieStorage can not be undefined.');\n    }\n    if (data.path) {\n      this.path = data.path;\n    } else {\n      this.path = '/';\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'expires')) {\n      this.expires = data.expires;\n    } else {\n      this.expires = 365;\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'secure')) {\n      this.secure = data.secure;\n    } else {\n      this.secure = true;\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'sameSite')) {\n      if (!['strict', 'lax', 'none'].includes(data.sameSite)) {\n        throw new Error('The sameSite value of cookieStorage must be \"lax\", \"strict\" or \"none\".');\n      }\n      if (data.sameSite === 'none' && !this.secure) {\n        throw new Error('sameSite = None requires the Secure attribute in latest browser versions.');\n      }\n      this.sameSite = data.sameSite;\n    } else {\n      this.sameSite = null;\n    }\n  }\n\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  var _proto = CookieStorage.prototype;\n  _proto.setItem = function setItem(key, value) {\n    var options = {\n      path: this.path,\n      expires: this.expires,\n      domain: this.domain,\n      secure: this.secure\n    };\n    if (this.sameSite) {\n      options.sameSite = this.sameSite;\n    }\n    Cookies.set(key, value, options);\n    return Cookies.get(key);\n  }\n\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */;\n  _proto.getItem = function getItem(key) {\n    return Cookies.get(key);\n  }\n\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {string} value - value that was deleted\n   */;\n  _proto.removeItem = function removeItem(key) {\n    var options = {\n      path: this.path,\n      expires: this.expires,\n      domain: this.domain,\n      secure: this.secure\n    };\n    if (this.sameSite) {\n      options.sameSite = this.sameSite;\n    }\n    return Cookies.remove(key, options);\n  }\n\n  /**\n   * This is used to clear the storage of optional\n   * items that were previously set\n   * @returns {} an empty object\n   */;\n  _proto.clear = function clear() {\n    var cookies = Cookies.get();\n    var numKeys = Object.keys(cookies).length;\n    for (var index = 0; index < numKeys; ++index) {\n      this.removeItem(Object.keys(cookies)[index]);\n    }\n    return {};\n  };\n  return CookieStorage;\n}();\nexport { CookieStorage as default };","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              var bitsCombined = bits1 | bits2;\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha256\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha256\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacSHA256;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Check if typed arrays are supported\n\t    if (typeof ArrayBuffer != 'function') {\n\t        return;\n\t    }\n\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\n\t    // Reference original init\n\t    var superInit = WordArray.init;\n\n\t    // Augment WordArray.init to handle typed arrays\n\t    var subInit = WordArray.init = function (typedArray) {\n\t        // Convert buffers to uint8\n\t        if (typedArray instanceof ArrayBuffer) {\n\t            typedArray = new Uint8Array(typedArray);\n\t        }\n\n\t        // Convert other array views to uint8\n\t        if (\n\t            typedArray instanceof Int8Array ||\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\n\t            typedArray instanceof Int16Array ||\n\t            typedArray instanceof Uint16Array ||\n\t            typedArray instanceof Int32Array ||\n\t            typedArray instanceof Uint32Array ||\n\t            typedArray instanceof Float32Array ||\n\t            typedArray instanceof Float64Array\n\t        ) {\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n\t        }\n\n\t        // Handle Uint8Array\n\t        if (typedArray instanceof Uint8Array) {\n\t            // Shortcut\n\t            var typedArrayByteLength = typedArray.byteLength;\n\n\t            // Extract bytes\n\t            var words = [];\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\n\t            }\n\n\t            // Initialize this word array\n\t            superInit.call(this, words, typedArrayByteLength);\n\t        } else {\n\t            // Else call normal init\n\t            superInit.apply(this, arguments);\n\t        }\n\t    };\n\n\t    subInit.prototype = WordArray;\n\t}());\n\n\n\treturn CryptoJS.lib.WordArray;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = self.fetch || (self.fetch = require('unfetch').default || require('unfetch'));\n","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","export default function(e,n){return n=n||{},new Promise(function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||\"get\",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+\",\"+t:t}),t(a())},s.onerror=r,s.withCredentials=\"include\"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)})}\n//# sourceMappingURL=unfetch.module.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(864);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","__importDefault","this","mod","__esModule","Object","defineProperty","value","SkapiError","Skapi","skapi_1","default","skapi_error_1","formResponse","utils_1","target","propertyKey","descriptor","fn","arg","form","option","handleResponse","response","code","HTMLFormElement","href","URL","action","response_key","sha256","timestamp","Date","now","toString","window","sessionStorage","setItem","JSON","stringify","searchParams","set","location","handleError","err","is_err","Error","onerror","bind","Promise","res","rej","then","r","catch","__decorate","decorators","key","desc","d","c","arguments","length","getOwnPropertyDescriptor","Reflect","decorate","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","next","e","rejected","result","done","apply","amazon_cognito_identity_js_1","decorators_1","constructor","service_id","service_owner","autoLogin","cognitoUser","__disabledAccount","__serviceHash","__pendingRequest","__cached_requests","__startKey_keys","__request_signup_confirmation","__index_number_range","__class_properties_has_been_cached","session","user","connection","host","hostDomain","userPool","regex","validateUserId","val","validateUrl","validatePhoneNumber","validateBirthdate","validateEmail","update_startKey_keys","_a","hashedParam","url","fetched","hasOwnProperty","startKey_string","startKey","includes","push","assign","startKey_list","_fetch","opt","responseType","fetch","status","received","text","parse","method","body","errCode","message","errMsg","split","splice","join","_get","params","keys","substring","query","map","k","encodeURIComponent","service","cdn_domain","sreg","admin_endpoint","blob","reader","FileReader","onloadend","readAsDataURL","data","atob","record_endpoint","__connection","skapi","restore","getItem","CognitoUserPool","UserPoolId","userpool_id","ClientId","userpool_client","process","updateConnection","authentication","updateSession","refreshToken","all","storeClassProperties","to_be_cached","addEventListener","static","currentUser","getCurrentUser","getSession","updateAttributes","sessionToMerge","isValid","getUserAttributes","attrErr","attributes","normalized_attributes","Name","Value","replace","Number","access_group","idToken","payload","user_id","sub","refreshSession","getRefreshToken","refreshErr","refreshedSession","createCognitoUser","email","hash","request_hash","CognitoUser","Username","Pool","cognitoUsername","authenticateUser","username","password","logout","initUser","authenticationDetails","AuthenticationDetails","Password","newPasswordRequired","userAttributes","requiredAttributes","onSuccess","logged","onFailure","error","cause","requireAdmin","_b","_c","_d","_e","_f","ignoreVerification","email_verified","throwError","getBlob","p","checkParams","v","request","auth","contentType","secureRequest","paramsStruct","sync","Array","isArray","getFormResponse","URLSearchParams","search","entries","stored","removeItem","options","_g","_h","_j","meta","bypassAwaitConnection","token","jwtToken","isExternalUrl","endpoint","dest","endpoints","admin","record","public","admin_public","private","admin_private","record_private","record_public","get_ep","getEndpoint","owner","required","fetchOptions","refresh","fetOpt","limit","ascending","metaData","extractFormMetaData","isForm","fileKeys","files","normalize_form","addRequired","_k","_l","isFormEl","FormData","undefined","Blob","type","formData","cb","requestKey","load_startKey_keys","headers","Authorization","_post","_m","_o","_p","list","endOfList","hashedParams","paramsHash","orderObjectKeys","obj","sortObject","sort","reduce","_obj","hashedParams_cached","list_of_startKeys","last_startKey_key","cache_hashedParams","postRecord","is_admin","record_id","table","subscription_group","reference","index","name","tags","config","reference_limit","allow_multiple_reference","private_access","param","u","checkWhiteSpaceAndSpecialChars","postData","normalize_record_data","getRecords","indexTypes","struct","subscription","group","tp","condition","range","s","tagFetch","getStartKey","t","params_copy","tag","fetchOpt","res_all","rec","getTable","convert","getIndex","order_by","iSplit","idx","resolved","number_of_records","cnt_rec","number_of_number_values","average_of_number_values","totl_numb","cnt_numb","number_of_boolean_values","average_of_boolean_values","totl_bool","cnt_bool","getTag","item","tSplit","deleteRecords","isAdmin","id","subscribeNewsletter","bypassWelcome","subscriptionGroupCheck","subscribe","unsubscribe","blockSubscriber","block","unblockSubscriber","unblock","getUserSubscriptions","getSubscriptions","subscriber","getUserSubscribers","subParams","_mapper","isNewsletterSub","isEmail","blocked","subSplit","parseInt","stmp","grp","getNewsletters","searchType","_params","searchFor","x","mails","remap","defaults","m","remapped","signup","validatePassword","address","gender","birthdate","phone_number","email_public","address_public","gender_public","birthdate_public","phone_number_public","email_subscription","confirmation","login","signOut","to_be_erased","resendSignupConfirmation","redirect","resend","recoverAccount","verifyAttribute","attribute","callback","inputVerificationCode","getAttributeVerificationCode","verifyEmail","verifyMobile","forgotPassword","resetPassword","new_password","confirmPassword","disableAccount","services","active","disable","updateUserSettings","attr","current_password","changePassword","connect","collision","customAttr","parseValue","toSet","CognitoUserAttribute","uploadUserData","getUsers","searchForTypes","checker","isSelfProfile","_what_public_see","public_keys","connectedService","prototype","super","ascii","rightRotate","amount","j","mathPow","Math","pow","maxWord","words","asciiBitLength","h","primeCounter","isComposite","candidate","charCodeAt","w","slice","oldHash","w15","w2","temp1","concat","b","appendData","append","totalFileSize","pair","File","round","size","FileList","inputs","querySelectorAll","textarea","checked","bypassCheck","_parentKey","isObjectWithKeys","errToThrow","isInvalid","structValue","defaultSetter","def","abs","match","charAt","isNaN","date_regex","RegExp","test","paramName","trim","toLowerCase","baseUrl","origin","pathname","_baseUrl","pop","check","cu","_url","protocol","output","base36timestamp","uploaded","rSplit","normalize_typed_string","updated","referenced_count","string","allowPeriods","allowWhiteSpace","checkStr","array","_ref","ValidationData","AuthParameters","ClientMetadata","validationData","authParameters","clientMetadata","_proto","getUsername","getPassword","getValidationData","getAuthParameters","getClientMetadata","crypto","msCrypto","g","cryptoSecureRandomInt","getRandomValues","Uint32Array","randomBytes","readInt32LE","WordArray","sigBytes","random","nBytes","wordArray","hexChars","bite","hexStringify","fromString","nbi","dbits","inBrowser","navigator","appName","am","n","xl","xh","l","floor","DB","DM","DV","FV","F1","F2","rr","vv","BI_RC","int2char","intAt","nbv","fromInt","nbits","Montgomery","mp","invDigit","mpl","mph","um","mt2","dlShiftTo","divRemTo","compareTo","ZERO","subTo","revert","copyTo","u0","clamp","drShiftTo","mulTo","y","multiplyTo","sqrTo","squareTo","mi","sh","max","lShiftTo","bs","cbs","bm","ds","rShiftTo","min","q","pm","pt","ts","ms","nsh","ys","y0","yt","d1","d2","ONE","qd","addTo","negate","km","bitLength","equals","add","subtract","multiply","divide","modPow","z","k1","g2","is1","r2","HEX_MSB_REGEX","AuthenticationHelper","PoolName","N","BigInteger","hexHash","padHex","smallAValue","generateRandomSmallA","getLargeAValue","infoBits","poolName","getSmallAValue","_this","largeAValue","calculateA","hexRandom","generateRandomString","getRandomPassword","randomPassword","getSaltDevices","SaltToHashDevices","getVerifierDevices","verifierDevices","generateHashDevice","deviceGroupKey","_this2","combinedString","hashedString","verifierDevicesNotPadded","_this3","A","calculateU","B","UHexHash","buf","str","hashHex","hexStr","computehkdf","ikm","salt","infoBitsWordArray","String","fromCharCode","ikmWordArray","saltWordArray","prk","hmac","getPasswordAuthenticationKey","serverBValue","_this4","UValue","usernamePassword","usernamePasswordHash","xValue","calculateS","sValue","hkdf","_this5","gModPowXN","err2","getNewPasswordRequiredChallengeUserAttributePrefix","bigInt","isNegative","invertedNibbles","invertedNibble","toUpperCase","startsWith","CognitoJwtToken","decodePayload","getJwtToken","getExpiration","exp","getIssuedAt","iat","_setPrototypeOf","o","setPrototypeOf","__proto__","CognitoAccessToken","_CognitoJwtToken","subClass","superClass","_temp","AccessToken","call","create","CognitoIdToken","IdToken","CognitoRefreshToken","RefreshToken","getToken","CognitoUserSession","ClockDrift","accessToken","clockDrift","calculateClockDrift","getIdToken","getAccessToken","getClockDrift","adjusted","monthNames","weekNames","DateHelper","getNowString","weekDay","getUTCDay","month","getUTCMonth","day","getUTCDate","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","getUTCFullYear","getValue","setValue","getName","setName","toJSON","dataMemory","MemoryStorage","clear","StorageHelper","storageWindow","localStorage","exception","getStorage","userAgent","pool","Session","client","signInUserSession","authenticationFlowType","storage","Storage","keyPrefix","getClientId","userDataKey","setSignInUserSession","clearCachedUserData","cacheTokens","getSignInUserSession","getAuthenticationFlowType","setAuthenticationFlowType","initiateAuth","authDetails","USERNAME","clientMetaData","jsonReq","AuthFlow","getUserContextData","UserContextData","challengeName","ChallengeName","challengeParameters","ChallengeParameters","customChallenge","getCognitoUserSession","AuthenticationResult","authenticateUserPlainUsernamePassword","authenticateUserDefaultAuth","authenticationHelper","getUserPoolName","dateHelper","deviceKey","DEVICE_KEY","errOnAValue","aValue","SRP_A","CHALLENGE_NAME","USER_ID_FOR_SRP","SRP_B","SALT","getCachedDeviceKeyAndPassword","errOnHkdf","dateNow","SECRET_BLOCK","signatureString","challengeResponses","PASSWORD_CLAIM_SECRET_BLOCK","TIMESTAMP","PASSWORD_CLAIM_SIGNATURE","jsonReqResp","ChallengeResponses","respondToAuthChallenge","challenge","challengeCallback","errChallenge","dataChallenge","indexOf","clearCachedDeviceKeyAndPassword","errAuthenticate","dataAuthenticate","authenticateUserInternal","PASSWORD","authResult","mfaRequired","selectMFAType","mfaSetup","totpRequired","rawRequiredAttributes","userAttributesPrefix","substr","getDeviceResponse","newDeviceMetadata","NewDeviceMetadata","DeviceGroupKey","DeviceKey","errGenHash","deviceSecretVerifierConfig","Salt","PasswordVerifier","DeviceSecretVerifierConfig","DeviceName","errConfirm","dataConfirm","cacheDeviceKeyAndPassword","UserConfirmationNecessary","completeNewPasswordChallenge","newPassword","requiredAttributeData","finalUserAttributes","forEach","NEW_PASSWORD","_this6","errAValue","errHkdf","confirmRegistration","confirmationCode","forceAliasCreation","ConfirmationCode","ForceAliasCreation","sendCustomChallengeAnswer","answerChallenge","_this7","ANSWER","sendMFACode","mfaType","_this8","SMS_MFA_CODE","mfaTypeSelection","SOFTWARE_TOKEN_MFA_CODE","oldUserPassword","newUserPassword","PreviousPassword","ProposedPassword","enableMFA","mfaOptions","DeliveryMedium","AttributeName","MFAOptions","setUserMfaPreference","smsMfaSettings","softwareTokenMfaSettings","SMSMfaSettings","SoftwareTokenMfaSettings","disableMFA","deleteUser","_this9","clearCachedUser","_this10","UserAttributes","getUserData","bypassCache","userData","attributeList","userAttribute","getMFAOptions","createGetUserRequest","promisifyRequest","refreshSessionIfPossible","_this11","_this12","getUserDataFromCache","isFetchUserDataAndTokenRequired","fetchUserData","_ref$bypassCache","_this13","cacheUserData","deleteAttributes","_this14","UserAttributeNames","resendConfirmationCode","idTokenKey","accessTokenKey","refreshTokenKey","clockDriftKey","cachedSession","_this15","wrappedCallback","wrapRefreshSessionCallback","REFRESH_TOKEN","lastUserKey","deviceKeyKey","authenticationResult","clearCachedTokens","randomPasswordKey","deviceGroupKeyKey","attributeName","Code","getDevice","forgetSpecificDevice","forgetDevice","_this16","setDeviceStatusRemembered","DeviceRememberedStatus","setDeviceStatusNotRemembered","listDevices","paginationToken","requestParams","Limit","PaginationToken","globalSignOut","_this17","revokeTokenCallback","_this18","_session","revokeTokens","cleanClientData","isSessionRevocable","revokeToken","origin_jti","_ref2","requestWithRetry","Token","sendMFASelectionAnswer","_this19","associateSoftwareToken","_this20","associateSecretCode","SecretCode","verifySoftwareToken","totpCode","friendlyDeviceName","_this21","UserCode","FriendlyDeviceName","errRespond","dataRespond","BASE_USER_AGENT","Platform","product","isReactNative","UserAgent","appendToCognitoUserAgent","content","_wrapNativeSuper","Class","_cache","Map","Function","TypeError","has","get","Wrapper","_construct","_getPrototypeOf","enumerable","writable","configurable","Parent","args","_isNativeReflectConstruct","construct","instance","sham","Proxy","Boolean","valueOf","getPrototypeOf","CognitoError","_Error","statusCode","Client","region","credentials","operation","maxDelayMs","MAX_DELAY_MS","retry","attempt","delay","jitteredBackoff","mode","cache","resp","json","ok","__type","Message","ex","functionToRetry","delayFn","retryIn","setTimeout","AdvancedSecurityDataCollectionFlag","userPoolId","clientId","advancedSecurityDataCollectionFlag","getUserPoolId","signUp","returnData","userConfirmed","UserConfirmed","userSub","UserSub","codeDeliveryDetails","CodeDeliveryDetails","lastAuthUser","AmazonCognitoAdvancedSecurityData","amazonCognitoAdvancedSecurityDataConst","advancedSecurityData","getData","EncodedData","CookieStorage","domain","path","expires","secure","sameSite","cookies","numKeys","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","arr","Arr","_byteLength","curByte","len","revLookup","fromByteArray","uint8","extraBytes","parts","maxChunkLength","len2","encodeChunk","lookup","Uint8Array","start","end","num","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","encodingOrOffset","allocUnsafe","from","ArrayBuffer","byteOffset","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","isBuffer","copy","buffer","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","foo","subarray","typedArraySupport","poolSize","_augment","Symbol","species","alloc","fill","allocUnsafeSlow","_isBuffer","compare","pos","swap16","swap32","swap64","inspect","thisStart","thisEnd","thisCopy","targetCopy","isFinite","_arr","ret","out","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","stringtrim","base64clean","src","dst","CryptoJS","globalThis","F","subtype","C","C_lib","lib","Base","extend","overrides","mixIn","init","$super","properties","propertyName","clone","encoder","Hex","thisWords","thatWords","thisSigBytes","thatSigBytes","thatByte","ceil","C_enc","enc","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","decodeURIComponent","escape","utf8Str","unescape","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","doFlush","processedWords","dataWords","dataSigBytes","blockSize","nBlocksReady","nWordsReady","_minBufferSize","nBytesReady","_doProcessBlock","C_algo","Hasher","cfg","_doReset","update","messageUpdate","finalize","_doFinalize","_createHelper","hasher","_createHmacHelper","HMAC","algo","Base64","_map","base64Chars","triplet","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","paddingIndex","bitsCombined","parseLoop","HmacSHA256","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","superInit","subInit","typedArray","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Float32Array","Float64Array","typedArrayByteLength","H","K","isPrime","sqrtN","sqrt","factor","getFractionalBits","nPrime","W","SHA256","_hash","M","f","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","t1","nBitsTotal","nBitsLeft","isLE","mLen","eLen","eMax","eBias","nBits","NaN","rt","log","LN2","decode","converter","api","document","toUTCString","stringifiedAttributes","cookie","jar","getJSON","remove","withConverter","XMLHttpRequest","statusText","responseURL","responseText","open","onload","getAllResponseHeaders","withCredentials","setRequestHeader","send","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","prop","toStringTag"],"sourceRoot":""}