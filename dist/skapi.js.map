{"version":3,"file":"skapi.js","mappings":"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","sources":["webpack://skapi-js/webpack/universalModuleDefinition","webpack://skapi-js/./js/Api.js","webpack://skapi-js/./js/decorators.js","webpack://skapi-js/./js/skapi.js","webpack://skapi-js/./js/skapi_error.js","webpack://skapi-js/./js/utils.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/AuthenticationDetails.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/utils/cryptoSecureRandomInt.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/utils/WordArray.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/BigInteger.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/AuthenticationHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoJwtToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoAccessToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoIdToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoRefreshToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserSession.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/DateHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserAttribute.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/StorageHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUser.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/Platform/index.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/UserAgent.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/Client.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserPool.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CookieStorage.js","webpack://skapi-js/./node_modules/base64-js/index.js","webpack://skapi-js/./node_modules/buffer/index.js","webpack://skapi-js/./node_modules/crypto-js/core.js","webpack://skapi-js/./node_modules/crypto-js/enc-base64.js","webpack://skapi-js/./node_modules/crypto-js/hmac-sha256.js","webpack://skapi-js/./node_modules/crypto-js/hmac.js","webpack://skapi-js/./node_modules/crypto-js/lib-typedarrays.js","webpack://skapi-js/./node_modules/crypto-js/sha256.js","webpack://skapi-js/./node_modules/ieee754/index.js","webpack://skapi-js/./node_modules/isarray/index.js","webpack://skapi-js/./node_modules/isomorphic-unfetch/browser.js","webpack://skapi-js/./node_modules/js-cookie/src/js.cookie.js","webpack://skapi-js/./node_modules/unfetch/dist/unfetch.module.js","webpack://skapi-js/webpack/bootstrap","webpack://skapi-js/webpack/runtime/compat get default export","webpack://skapi-js/webpack/runtime/define property getters","webpack://skapi-js/webpack/runtime/global","webpack://skapi-js/webpack/runtime/hasOwnProperty shorthand","webpack://skapi-js/webpack/runtime/make namespace object","webpack://skapi-js/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SkapiError = exports.Skapi = void 0;\nconst skapi_1 = __importDefault(require(\"./skapi\"));\nexports.Skapi = skapi_1.default;\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nexports.SkapiError = skapi_error_1.default;\n//# sourceMappingURL=Api.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formResponse = void 0;\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nfunction formResponse() {\n    return function (target, propertyKey, descriptor) {\n        const fn = descriptor.value;\n        descriptor.value = function (...arg) {\n            let form = arg[0];\n            let option = (arg === null || arg === void 0 ? void 0 : arg[1]) || {};\n            const handleResponse = (response) => {\n                if (option === null || option === void 0 ? void 0 : option.response) {\n                    if (typeof option.response === 'function') {\n                        option.response(response);\n                        return response;\n                    }\n                    else {\n                        throw new skapi_error_1.default('Callback \"response\" should be type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                if (!(form instanceof HTMLFormElement)) {\n                    return response;\n                }\n                let href = new URL(form.action);\n                let response_key = form.action;\n                let timestamp = Date.now().toString();\n                window.sessionStorage.setItem(response_key, JSON.stringify({ [timestamp]: response }));\n                href.searchParams.set(response_key, timestamp);\n                window.location.href = href.href;\n            };\n            let response;\n            function handleError(err) {\n                let is_err = err instanceof Error ? err : new skapi_error_1.default(err);\n                if (option === null || option === void 0 ? void 0 : option.onerror) {\n                    if (typeof option.onerror === 'function') {\n                        return option.onerror(is_err);\n                    }\n                    else {\n                        throw new skapi_error_1.default('Callback \"onerror\" should be type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                return is_err;\n            }\n            try {\n                response = fn.bind(this)(...arg);\n            }\n            catch (err) {\n                let is_err = handleError(err);\n                if (is_err instanceof Error) {\n                    throw is_err;\n                }\n                return is_err;\n            }\n            if (response instanceof Promise) {\n                return new Promise((res, rej) => {\n                    response\n                        .then((r) => {\n                        res(handleResponse(r));\n                    })\n                        .catch((err) => {\n                        err = handleError(err);\n                        if (err instanceof Error) {\n                            rej(err);\n                        }\n                        else {\n                            res(err);\n                        }\n                    });\n                });\n            }\n            else {\n                return handleResponse(response);\n            }\n        };\n    };\n}\nexports.formResponse = formResponse;\n//# sourceMappingURL=decorators.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst amazon_cognito_identity_js_1 = require(\"amazon-cognito-identity-js\");\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nconst decorators_1 = require(\"./decorators\");\nconst utils_1 = require(\"./utils\");\nclass Skapi {\n    get user() {\n        if (this.__user && Object.keys(this.__user).length) {\n            return JSON.parse(JSON.stringify(this.__user));\n        }\n        else {\n            return null;\n        }\n    }\n    set user(value) {\n    }\n    constructor(service_id, service_owner, autoLogin = false) {\n        this.cognitoUser = null;\n        this.__disabledAccount = null;\n        this.__serviceHash = {};\n        this.__pendingRequest = {};\n        this.__cached_requests = {};\n        this.__startKey_keys = {};\n        this.__request_signup_confirmation = null;\n        this.__index_number_range = 4503599627370496;\n        this.__class_properties_has_been_cached = false;\n        this.session = null;\n        this.__user = null;\n        this.connection = null;\n        this.host = 'skapi';\n        this.hostDomain = 'skapi.com';\n        this.userPool = null;\n        this.regex = {\n            validateUserId(val) {\n                try {\n                    (0, utils_1.validateUserId)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validateUrl(val) {\n                try {\n                    (0, utils_1.validateUrl)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validatePhoneNumber(val) {\n                try {\n                    (0, utils_1.validatePhoneNumber)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validateBirthdate(val) {\n                try {\n                    (0, utils_1.validateBirthdate)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validateEmail(val) {\n                try {\n                    (0, utils_1.validateEmail)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            }\n        };\n        this.update_startKey_keys = (option) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            let { hashedParam, url, response } = option;\n            let fetched = null;\n            if (response instanceof Promise) {\n                fetched = yield response;\n            }\n            else {\n                fetched = response;\n            }\n            if (typeof fetched !== 'object' ||\n                !fetched.hasOwnProperty('startKey') ||\n                !hashedParam ||\n                !url) {\n                return fetched;\n            }\n            if (!this.__startKey_keys.hasOwnProperty(url)) {\n                this.__startKey_keys[url] = {};\n            }\n            if (!((_a = this.__cached_requests) === null || _a === void 0 ? void 0 : _a[url])) {\n                this.__cached_requests[url] = {};\n            }\n            this.__cached_requests[url][hashedParam] = fetched;\n            if (!this.__startKey_keys[url].hasOwnProperty(hashedParam)) {\n                this.__startKey_keys[url][hashedParam] = [];\n            }\n            let startKey_string = JSON.stringify(fetched.startKey);\n            if (!this.__startKey_keys[url][hashedParam].includes(startKey_string)) {\n                this.__startKey_keys[url][hashedParam].push(startKey_string);\n            }\n            this.__cached_requests[url][hashedParam] = fetched;\n            return Object.assign({ startKey_list: this.__startKey_keys[url][hashedParam] }, fetched);\n        });\n        this._fetch = (url, opt, responseType) => __awaiter(this, void 0, void 0, function* () {\n            let response = yield fetch(url, opt);\n            if (responseType) {\n                if (response.status === 200) {\n                    return yield response[responseType]();\n                }\n                else {\n                    throw response;\n                }\n            }\n            let received = yield response.text();\n            try {\n                received = JSON.parse(received);\n            }\n            catch (err) {\n            }\n            if (response.status === 200) {\n                if (typeof received === 'object' && opt.method === 'GET' && received.hasOwnProperty('body')) {\n                    try {\n                        received = JSON.parse(received.body);\n                    }\n                    catch (err) { }\n                }\n                return received;\n            }\n            else {\n                let status = response === null || response === void 0 ? void 0 : response.status;\n                let errCode = [\n                    'INVALID_CORS',\n                    'INVALID_REQUEST',\n                    'SERVICE_DISABLED',\n                    'INVALID_PARAMETER',\n                    'ERROR',\n                    'EXISTS',\n                    'NOT_EXISTS'\n                ];\n                if (typeof received === 'object' && (received === null || received === void 0 ? void 0 : received.message)) {\n                    let code = ((status ? status.toString() : null) || 'ERROR');\n                    throw new skapi_error_1.default(received === null || received === void 0 ? void 0 : received.message, { code: code });\n                }\n                else if (typeof received === 'string') {\n                    let errMsg = received.split(':');\n                    let code = errMsg.splice(0, 1)[0];\n                    throw new skapi_error_1.default(errMsg.join(''), { code: (errCode.includes(code) ? code : 'ERROR') });\n                }\n                throw response;\n            }\n        });\n        this._get = (url, params, option) => __awaiter(this, void 0, void 0, function* () {\n            if (params && typeof params === 'object' && Object.keys(params).length) {\n                if (url.substring(url.length - 1) !== '?') {\n                    url = url + '?';\n                }\n                let query = Object.keys(params)\n                    .map(k => {\n                    let value = params[k];\n                    if (typeof value !== 'string') {\n                        value = JSON.stringify(value);\n                    }\n                    return encodeURIComponent(k) + '=' + encodeURIComponent(value);\n                })\n                    .join('&');\n                url += query;\n            }\n            let responseType = null;\n            if (option.hasOwnProperty('responseType')) {\n                responseType = option.responseType;\n                delete option.responseType;\n            }\n            let opt = Object.assign({\n                method: 'GET'\n            }, option);\n            return this._fetch(url, opt, responseType);\n        });\n        if (typeof service_id !== 'string' || typeof service_owner !== 'string') {\n            throw new skapi_error_1.default('\"service_id\" and \"service_owner\" should be type <string>.', { code: 'INVALID_PARAMETER' });\n        }\n        if (!service_id || !service_owner) {\n            throw new skapi_error_1.default('\"service_id\" and \"service_owner\" is required', { code: 'INVALID_PARAMETER' });\n        }\n        if (service_owner !== this.host) {\n            (0, utils_1.validateUserId)(service_owner, '\"service_owner\"');\n        }\n        this.service = service_id;\n        this.service_owner = service_owner;\n        const cdn_domain = 'https://dkls9pxkgz855.cloudfront.net';\n        let sreg = service_id.substring(0, 4);\n        this.admin_endpoint = fetch(`${cdn_domain}/${sreg}/admin.json`)\n            .then(response => response.blob())\n            .then(blob => new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }))\n            .then(data => typeof data === 'string' ? JSON.parse(window.atob(data.split(',')[1])) : null);\n        this.record_endpoint = fetch(`${cdn_domain}/${sreg}/record.json`)\n            .then(response => response.blob())\n            .then(blob => new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }))\n            .then(data => typeof data === 'string' ? JSON.parse(window.atob(data.split(',')[1])) : null);\n        this.__connection = ((skapi) => __awaiter(this, void 0, void 0, function* () {\n            if (!window.sessionStorage) {\n                throw new Error(`This browser does not support skapi.`);\n            }\n            const restore = JSON.parse(window.sessionStorage.getItem(`${service_id}#${service_owner}`) || 'null');\n            if (restore === null || restore === void 0 ? void 0 : restore.connection) {\n                for (let k in restore) {\n                    skapi[k] = restore[k];\n                }\n            }\n            const admin_endpoint = yield skapi.admin_endpoint;\n            skapi.userPool = new amazon_cognito_identity_js_1.CognitoUserPool({\n                UserPoolId: admin_endpoint.userpool_id,\n                ClientId: admin_endpoint.userpool_client\n            });\n            const process = [\n                skapi.updateConnection()\n            ];\n            if ((restore === null || restore === void 0 ? void 0 : restore.connection) || autoLogin) {\n                process.push(skapi.authentication().updateSession({ refreshToken: !!(restore === null || restore === void 0 ? void 0 : restore.connection) }).catch(err => {\n                    skapi.user = null;\n                }));\n            }\n            yield Promise.all(process);\n            const storeClassProperties = () => {\n                if (skapi.__class_properties_has_been_cached) {\n                    return;\n                }\n                let data = {};\n                const to_be_cached = [\n                    '__startKey_keys',\n                    '__cached_requests',\n                    '__request_signup_confirmation',\n                    'connection',\n                ];\n                if (skapi.connection) {\n                    for (let k of to_be_cached) {\n                        data[k] = skapi[k];\n                    }\n                    sessionStorage.setItem(`${service_id}#${service_owner}`, JSON.stringify(data));\n                    skapi.__class_properties_has_been_cached = true;\n                }\n            };\n            window.addEventListener('beforeunload', storeClassProperties);\n            window.addEventListener(\"visibilitychange\", storeClassProperties);\n            return skapi.connection;\n        }))(this).catch(err => { throw err; });\n    }\n    static connect(service_id, service_owner, autoLogin = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const skapi = new Skapi(service_id, service_owner, autoLogin);\n            yield skapi.__connection;\n            return skapi;\n        });\n    }\n    authentication() {\n        if (!this.userPool) {\n            throw new skapi_error_1.default('User pool is missing', { code: 'INVALID_REQUEST' });\n        }\n        const updateSession = (option) => {\n            let { refreshToken = false } = option || {};\n            return new Promise((res, rej) => {\n                var _a;\n                let currentUser = ((_a = this.userPool) === null || _a === void 0 ? void 0 : _a.getCurrentUser()) || null;\n                this.cognitoUser = currentUser;\n                if (currentUser === null) {\n                    rej(null);\n                }\n                currentUser.getSession((err, session) => {\n                    if (err) {\n                        rej(err);\n                    }\n                    const updateAttributes = (sessionToMerge) => __awaiter(this, void 0, void 0, function* () {\n                        if (sessionToMerge.isValid() && currentUser) {\n                            currentUser.getUserAttributes((attrErr, attributes) => {\n                                if (attrErr) {\n                                    rej(attrErr);\n                                }\n                                else {\n                                    let normalized_attributes = {};\n                                    let user = {};\n                                    for (let i of attributes) {\n                                        normalized_attributes[i.Name] = i.Value;\n                                        let key_1 = i.Name.replace('custom:', '');\n                                        user[key_1] = i.Value;\n                                        if (i.Name === 'custom:service' && normalized_attributes[i.Name] !== this.service) {\n                                            rej(new skapi_error_1.default('The user is not registered to the service.', { code: 'INVALID_REQUEST' }));\n                                        }\n                                    }\n                                    for (let k of [\n                                        'address_public',\n                                        'birthdate_public',\n                                        'email_public',\n                                        'email_subscription',\n                                        'gender_public',\n                                        'phone_number_public'\n                                    ]) {\n                                        if (k.includes('_public')) {\n                                            if (user.hasOwnProperty(k.split('_')[0])) {\n                                                user[k] = user.hasOwnProperty(k) ? Number(user[k]) : 0;\n                                            }\n                                            else {\n                                                delete user[k];\n                                            }\n                                        }\n                                        else {\n                                            user[k] = user.hasOwnProperty(k) ? Number(user[k]) : 0;\n                                        }\n                                    }\n                                    for (let k of [\n                                        'email_verified',\n                                        'phone_number_verified'\n                                    ]) {\n                                        if (user[k.split('_')[0]]) {\n                                            user[k] = user.hasOwnProperty(k) ? user[k] === 'true' : false;\n                                        }\n                                        else if (user.hasOwnProperty(k)) {\n                                            delete user[k];\n                                        }\n                                    }\n                                    sessionToMerge.attributes = normalized_attributes;\n                                    this.session = sessionToMerge;\n                                    user.access_group = Number(this.session.idToken.payload.access_group);\n                                    user.user_id = user.sub;\n                                    delete user.sub;\n                                    this.__user = user;\n                                    res(user);\n                                }\n                            });\n                        }\n                        else {\n                            rej(new skapi_error_1.default('Invalid session.', { code: 'INVALID_REQUEST' }));\n                        }\n                    });\n                    if (session) {\n                        if (refreshToken) {\n                            currentUser === null || currentUser === void 0 ? void 0 : currentUser.refreshSession(session.getRefreshToken(), (refreshErr, refreshedSession) => {\n                                if (refreshErr) {\n                                    rej(refreshErr);\n                                }\n                                updateAttributes(refreshedSession).catch(err => rej(err));\n                            });\n                        }\n                        else {\n                            updateAttributes(session).catch(err => rej(err));\n                        }\n                    }\n                    else {\n                        rej(new skapi_error_1.default('Current session does not exist.', { code: 'INVALID_REQUEST' }));\n                    }\n                });\n            });\n        };\n        const createCognitoUser = (email) => __awaiter(this, void 0, void 0, function* () {\n            let hash = null;\n            if (email) {\n                hash = this.__serviceHash[email] || (yield this.updateConnection({ request_hash: email })).hash;\n            }\n            else {\n                if (this.session) {\n                    hash = this.session.idToken.payload['cognito:username'];\n                }\n                else {\n                    throw new skapi_error_1.default('E-Mail is required.', { code: 'INVALID_PARAMETER' });\n                }\n            }\n            return {\n                cognitoUser: new amazon_cognito_identity_js_1.CognitoUser({\n                    Username: hash,\n                    Pool: this.userPool\n                }),\n                cognitoUsername: hash\n            };\n        });\n        const authenticateUser = (username, password) => {\n            return new Promise((res, rej) => __awaiter(this, void 0, void 0, function* () {\n                this.logout();\n                this.__request_signup_confirmation = null;\n                this.__disabledAccount = null;\n                let initUser = yield createCognitoUser(username);\n                this.cognitoUser = initUser.cognitoUser;\n                username = initUser.cognitoUsername;\n                let authenticationDetails = new amazon_cognito_identity_js_1.AuthenticationDetails({\n                    Username: username,\n                    Password: password\n                });\n                this.cognitoUser.authenticateUser(authenticationDetails, {\n                    newPasswordRequired: (userAttributes, requiredAttributes) => {\n                        this.__request_signup_confirmation = username;\n                        rej(new skapi_error_1.default(\"User's signup confirmation is required.\", { code: 'SIGNUP_CONFIRMATION_NEEDED' }));\n                    },\n                    onSuccess: (logged) => {\n                        updateSession().then(session => {\n                            res(session);\n                        });\n                    },\n                    onFailure: (err) => {\n                        let error = [err.message || 'Failed to authenticate user.', (err === null || err === void 0 ? void 0 : err.code) || 'INVALID_REQUEST'];\n                        if (err.code === \"NotAuthorizedException\") {\n                            if (err.message === \"User is disabled.\") {\n                                this.__disabledAccount = username;\n                                error = ['This account is disabled.', 'USER_IS_DISABLED'];\n                            }\n                            else {\n                                error = ['Incorrect username or password.', 'INCORRECT_USERNAME_OR_PASSWORD'];\n                            }\n                        }\n                        rej(new skapi_error_1.default(error[0], { code: error[1], cause: err }));\n                    }\n                });\n            }));\n        };\n        return { updateSession, authenticateUser, createCognitoUser };\n    }\n    requireAdmin(option) {\n        var _a, _b, _c, _d, _e, _f;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_b = (_a = this.session) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b['custom:service']) === this.service) {\n                if (((_d = (_c = this.session) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d['custom:service_owner']) === this.host) {\n                    if (!(option === null || option === void 0 ? void 0 : option.ignoreVerification) && !((_f = (_e = this.session) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.email_verified)) {\n                        throw new skapi_error_1.default('Email verification is required.', { code: 'INVALID_REQUEST' });\n                    }\n                    return true;\n                }\n                if (option === null || option === void 0 ? void 0 : option.throwError) {\n                    throw new skapi_error_1.default('Admin access is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            else {\n                this.logout();\n                if (option === null || option === void 0 ? void 0 : option.throwError) {\n                    throw new skapi_error_1.default('User login is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            return false;\n        });\n    }\n    getBlob(params, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let p = (0, utils_1.checkParams)(params, {\n                url: (v) => (0, utils_1.validateUrl)(v)\n            }, ['url']);\n            return yield this.request(p.url, option || null, { method: 'get', auth: p.url.includes('/auth/'), contentType: null, responseType: 'blob' });\n        });\n    }\n    mock(data, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.request('test-api', data, options);\n        });\n    }\n    secureRequest(request) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let paramsStruct = {\n                url: (v) => {\n                    return (0, utils_1.validateUrl)(v);\n                },\n                data: null,\n                sync: ['boolean', () => true]\n            };\n            if (Array.isArray(request)) {\n                for (let r of request) {\n                    r = (0, utils_1.checkParams)(r, paramsStruct);\n                }\n            }\n            else {\n                request = (0, utils_1.checkParams)(request, paramsStruct);\n            }\n            return yield this.request('post-secure', request, { auth: true });\n        });\n    }\n    getFormResponse() {\n        let params = new URLSearchParams(window.location.search);\n        for (let [key, val] of params.entries()) {\n            if (key.substring(0, 5) !== 'form-') {\n                continue;\n            }\n            let stored = window.sessionStorage.getItem(key);\n            if (stored) {\n                window.sessionStorage.removeItem(key);\n                try {\n                    stored = JSON.parse(stored);\n                }\n                catch (err) { }\n            }\n            if (typeof stored === 'object' && stored[val]) {\n                return stored[val];\n            }\n            else {\n                continue;\n            }\n        }\n        return null;\n    }\n    request(url, data = null, options = {}) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        return __awaiter(this, void 0, void 0, function* () {\n            let { auth = false, method = 'post', meta = null, bypassAwaitConnection = false } = options;\n            console.log('request');\n            let __connection = bypassAwaitConnection ? null : (yield this.__connection);\n            let token = auth ? (_b = (_a = this.session) === null || _a === void 0 ? void 0 : _a.idToken) === null || _b === void 0 ? void 0 : _b.jwtToken : null;\n            if (auth) {\n                if (!token) {\n                    this.logout();\n                    throw new skapi_error_1.default('User login is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            let isExternalUrl = '';\n            try {\n                isExternalUrl = (0, utils_1.validateUrl)(url);\n            }\n            catch (err) {\n            }\n            const getEndpoint = (dest, auth) => __awaiter(this, void 0, void 0, function* () {\n                const endpoints = yield Promise.all([\n                    this.admin_endpoint,\n                    this.record_endpoint\n                ]);\n                const admin = endpoints[0];\n                const record = endpoints[1];\n                const get_ep = () => {\n                    switch (dest) {\n                        case 'get-serviceletters':\n                        case 'delete-newsletter':\n                        case 'block-account':\n                        case 'register-service':\n                        case 'get-users':\n                        case 'post-userdata':\n                        case 'remove-account':\n                        case 'post-secure':\n                        case 'get-newsletters':\n                        case 'subscribe-newsletter':\n                        case 'signup':\n                        case 'confirm-signup':\n                        case 'recover-account':\n                        case 'test-api':\n                        case 'service':\n                            return {\n                                public: admin.admin_public,\n                                private: admin.admin_private\n                            };\n                        case 'post-record':\n                        case 'get-records':\n                        case 'subscription':\n                        case 'get-subscription':\n                        case 'del-records':\n                        case 'get-table':\n                        case 'get-tag':\n                        case 'get-index':\n                        case 'storage-info':\n                            return {\n                                private: record.record_private,\n                                public: record.record_public\n                            };\n                    }\n                };\n                return get_ep()[auth ? 'private' : 'public'] + dest;\n            });\n            let endpoint = isExternalUrl || (yield getEndpoint(url, !!auth));\n            let service = ((_d = (_c = this.session) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d['custom:service']) || (__connection === null || __connection === void 0 ? void 0 : __connection.service) || this.service;\n            let service_owner = ((_f = (_e = this.session) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f['custom:service_owner']) || (__connection === null || __connection === void 0 ? void 0 : __connection.owner) || this.service_owner;\n            if (meta) {\n                if (typeof meta === 'object' && !Array.isArray(meta)) {\n                    meta = JSON.parse(JSON.stringify(meta));\n                }\n                else {\n                    throw new skapi_error_1.default('Invalid meta data.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            if (Array.isArray(data) || data && typeof data !== 'object') {\n                throw new skapi_error_1.default('Request data should be a JSON Object | FormData | HTMLFormElement.', { code: 'INVALID_REQUEST' });\n            }\n            let required = { service, service_owner };\n            let fetchOptions = {};\n            let { refresh = false } = options.fetchOptions || {};\n            if (options.fetchOptions && Object.keys(options.fetchOptions).length) {\n                let fetOpt = (0, utils_1.checkParams)({\n                    limit: ((_g = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _g === void 0 ? void 0 : _g.limit) || 100,\n                    startKey: ((_h = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _h === void 0 ? void 0 : _h.startKey) || null,\n                    ascending: typeof ((_j = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _j === void 0 ? void 0 : _j.ascending) === 'boolean' ? options.fetchOptions.ascending : true\n                }, {\n                    limit: ['number', () => 100],\n                    startKey: null,\n                    ascending: ['boolean', () => true]\n                });\n                if (fetOpt.hasOwnProperty('limit') && typeof fetOpt.limit === 'number') {\n                    if (fetOpt.limit > 1000) {\n                        throw new skapi_error_1.default('Fetch limit should be below 1000.', { code: 'INVALID_REQUEST' });\n                    }\n                    Object.assign(fetchOptions, { limit: fetOpt.limit });\n                }\n                if (fetOpt.hasOwnProperty('startKey') && typeof fetOpt.startKey === 'object' && fetOpt.startKey && Object.keys(fetOpt.startKey)) {\n                    Object.assign(fetchOptions, { startKey: fetOpt.startKey });\n                }\n                if (fetOpt.hasOwnProperty('ascending') && typeof fetOpt.ascending === 'boolean') {\n                    Object.assign(fetchOptions, { ascending: fetOpt.ascending });\n                }\n            }\n            Object.assign(required, fetchOptions);\n            let metaData = (0, utils_1.extractFormMetaData)(data);\n            let isForm = metaData === null || metaData === void 0 ? void 0 : metaData.meta;\n            let fileKeys = (metaData === null || metaData === void 0 ? void 0 : metaData.files) || [];\n            let normalize_form = (data, isForm, addRequired = false) => __awaiter(this, void 0, void 0, function* () {\n                var _k, _l;\n                if (isForm === null) {\n                    return data;\n                }\n                let isFormEl = false;\n                if (data instanceof HTMLFormElement) {\n                    data = new FormData(data);\n                    isFormEl = true;\n                }\n                if (!(data instanceof FormData)) {\n                    return data;\n                }\n                if (addRequired) {\n                    for (let k in required) {\n                        if (required[k] !== undefined) {\n                            data.set(k, typeof required[k] === 'string' ? required[k] : new Blob([JSON.stringify(required[k])], {\n                                type: 'application/json'\n                            }));\n                        }\n                    }\n                }\n                for (let k in isForm) {\n                    if (isForm[k] !== undefined) {\n                        data[fileKeys.includes(k) ? \"append\" : \"set\"](k, typeof isForm[k] === 'string' ? isForm[k] : new Blob([JSON.stringify(isForm[k])], {\n                            type: 'application/json'\n                        }));\n                    }\n                }\n                if ((_k = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _k === void 0 ? void 0 : _k.formData) {\n                    if (typeof ((_l = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _l === void 0 ? void 0 : _l.formData) === 'function') {\n                        if (!isFormEl) {\n                            throw new skapi_error_1.default('Form data should be HTMLFormElement when formData() callback is used.', { code: 'INVALID_PARAMETER' });\n                        }\n                        let cb = options.fetchOptions.formData(data);\n                        if (cb instanceof Promise) {\n                            cb = yield cb;\n                        }\n                        if (cb instanceof FormData) {\n                            data = cb;\n                        }\n                        else {\n                            throw new skapi_error_1.default('Callback for extractFormData() should return FormData', { code: 'INVALID_PARAMETER' });\n                        }\n                    }\n                    else {\n                        throw new skapi_error_1.default('Callback \"formData\" should type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                return data;\n            });\n            if (meta) {\n                meta = Object.assign(required, meta);\n                data = yield normalize_form(data, isForm);\n            }\n            else {\n                if (!data && isForm === null) {\n                    data = required;\n                }\n                else {\n                    if (isForm) {\n                        data = yield normalize_form(data, isForm, true);\n                    }\n                    else {\n                        data = Object.assign(required, data);\n                    }\n                }\n            }\n            console.log('request2');\n            let requestKey = this.load_startKey_keys({\n                params: data,\n                url: isExternalUrl || url,\n                refresh: isForm ? true : refresh\n            });\n            console.log({ requestKey });\n            if (requestKey && typeof requestKey === 'object') {\n                return requestKey;\n            }\n            if (typeof requestKey === 'string') {\n                if (!(this.__pendingRequest[requestKey] instanceof Promise)) {\n                    let headers = {\n                        'Accept': '*/*'\n                    };\n                    if (token) {\n                        headers.Authorization = token;\n                    }\n                    if (meta) {\n                        headers[\"Content-Meta\"] = JSON.stringify(meta);\n                    }\n                    if (options.hasOwnProperty('contentType')) {\n                        if (options === null || options === void 0 ? void 0 : options.contentType) {\n                            headers[\"Content-Type\"] = options.contentType;\n                        }\n                    }\n                    else if (!(data instanceof FormData)) {\n                        headers[\"Content-Type\"] = 'application/json';\n                    }\n                    let opt = { headers };\n                    if (options === null || options === void 0 ? void 0 : options.responseType) {\n                        opt.responseType = options.responseType;\n                    }\n                    if (method === 'post') {\n                        this.__pendingRequest[requestKey] = this._post(endpoint, data, opt);\n                    }\n                    else if (method === 'get') {\n                        this.__pendingRequest[requestKey] = this._get(endpoint, data, opt);\n                    }\n                }\n                try {\n                    let response = yield this.__pendingRequest[requestKey];\n                    if (isForm) {\n                        return response;\n                    }\n                    else {\n                        return yield this.update_startKey_keys({\n                            hashedParam: requestKey,\n                            url,\n                            response\n                        });\n                    }\n                }\n                catch (err) {\n                    throw err;\n                }\n                finally {\n                    if (requestKey && this.__pendingRequest.hasOwnProperty(requestKey)) {\n                        delete this.__pendingRequest[requestKey];\n                    }\n                }\n            }\n        });\n    }\n    load_startKey_keys(option) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n        let { params = {}, url, refresh = false } = option || {};\n        console.log(option);\n        if (params.hasOwnProperty('startKey')) {\n            if (typeof params.startKey !== 'object' && !Object.keys(params.startKey).length ||\n                params.startKey !== 'end') {\n                throw new skapi_error_1.default(`\"${params.startKey}\" is invalid startKey key.`, { code: 'INVALID_PARAMETER' });\n            }\n            switch (params.startKey) {\n                case 'end':\n                    return {\n                        list: [],\n                        startKey: 'end',\n                        endOfList: true\n                    };\n                case 'start':\n                    delete params.startKey;\n            }\n        }\n        let hashedParams = (() => {\n            if (params && typeof params === 'object' && Object.keys(params).length) {\n                function orderObjectKeys(obj) {\n                    function sortObject(obj) {\n                        if (typeof obj === 'object' && obj) {\n                            return Object.keys(obj).sort().reduce((res, key) => (res[key] = obj[key], res), {});\n                        }\n                        return obj;\n                    }\n                    ;\n                    let _obj = sortObject(obj);\n                    for (let k in _obj) {\n                        if (_obj[k] && typeof _obj[k] === 'object') {\n                            _obj[k] = sortObject(obj[k]);\n                        }\n                    }\n                    return _obj;\n                }\n                return url + '/' + JSON.stringify(orderObjectKeys(params));\n            }\n            return url + '/' + this.service;\n        })();\n        console.log({ h: (0, utils_1.sha256)('yoyo') });\n        console.log({ hashedParams, st: (_a = this.__startKey_keys) === null || _a === void 0 ? void 0 : _a[url] });\n        if (refresh && ((_c = (_b = this.__startKey_keys) === null || _b === void 0 ? void 0 : _b[url]) === null || _c === void 0 ? void 0 : _c[hashedParams])) {\n            if (((_d = this.__cached_requests) === null || _d === void 0 ? void 0 : _d[url]) && ((_f = (_e = this.__cached_requests) === null || _e === void 0 ? void 0 : _e[url]) === null || _f === void 0 ? void 0 : _f[hashedParams])) {\n                delete this.__cached_requests[url][hashedParams];\n            }\n            if (Array.isArray(this.__startKey_keys[url][hashedParams]) && this.__startKey_keys[url][hashedParams].length) {\n                for (let p of this.__startKey_keys[url][hashedParams]) {\n                    let hashedParams_cached = hashedParams + '/' + JSON.stringify(p);\n                    if (((_g = this.__cached_requests) === null || _g === void 0 ? void 0 : _g[url]) && ((_j = (_h = this.__cached_requests) === null || _h === void 0 ? void 0 : _h[url]) === null || _j === void 0 ? void 0 : _j[hashedParams_cached])) {\n                        delete this.__cached_requests[url][hashedParams_cached];\n                    }\n                }\n            }\n            delete this.__startKey_keys[url][hashedParams];\n            return hashedParams;\n        }\n        if (!Array.isArray((_l = (_k = this.__startKey_keys) === null || _k === void 0 ? void 0 : _k[url]) === null || _l === void 0 ? void 0 : _l[hashedParams])) {\n            return hashedParams;\n        }\n        let list_of_startKeys = this.__startKey_keys[url][hashedParams];\n        let last_startKey_key = list_of_startKeys[list_of_startKeys.length - 1];\n        let cache_hashedParams = hashedParams;\n        if (last_startKey_key) {\n            if (last_startKey_key === '\"end\"') {\n                return {\n                    list: [],\n                    startKey: 'end',\n                    endOfList: true\n                };\n            }\n            else {\n                cache_hashedParams += ('/' + last_startKey_key);\n                params.startKey = JSON.parse(last_startKey_key);\n            }\n        }\n        if ((_o = (_m = this.__cached_requests) === null || _m === void 0 ? void 0 : _m[url]) === null || _o === void 0 ? void 0 : _o[cache_hashedParams]) {\n            return (_q = (_p = this.__cached_requests) === null || _p === void 0 ? void 0 : _p[url]) === null || _q === void 0 ? void 0 : _q[cache_hashedParams];\n        }\n        return hashedParams;\n    }\n    _post(url, params, option) {\n        let responseType = null;\n        if (option.hasOwnProperty('responseType')) {\n            responseType = option.responseType;\n            delete option.responseType;\n        }\n        let opt = Object.assign({\n            method: 'POST'\n        }, option, {\n            body: params instanceof FormData ? params : JSON.stringify(params)\n        });\n        return this._fetch(url, opt, responseType);\n    }\n    postRecord(form, option) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            let is_admin = yield this.requireAdmin({ ignoreVerification: true });\n            let { formData } = option;\n            let fetchOptions = {};\n            if (typeof formData === 'function') {\n                fetchOptions.formData = formData;\n            }\n            option = (0, utils_1.checkParams)(option || {}, {\n                record_id: 'string',\n                access_group: ['number', 'private'],\n                table: 'string',\n                subscription_group: 'number',\n                reference: ['string', null],\n                index: {\n                    name: 'string',\n                    value: ['string', 'number', 'boolean']\n                },\n                tags: (v) => {\n                    if (v === null) {\n                        return v;\n                    }\n                    if (typeof v === 'string') {\n                        return [v];\n                    }\n                    if (Array.isArray(v)) {\n                        for (let i of v) {\n                            if (typeof i !== 'string') {\n                                throw new skapi_error_1.default(`\"tags\" should be type: <string | string[]>`, { code: 'INVALID_PARAMETER' });\n                            }\n                        }\n                        return v;\n                    }\n                    throw new skapi_error_1.default(`\"tags\" should be type: <string | string[]>`, { code: 'INVALID_PARAMETER' });\n                },\n                config: {\n                    reference_limit: (v) => {\n                        if (v === null) {\n                            return null;\n                        }\n                        else if (typeof v === 'number') {\n                            if (0 > v) {\n                                throw new skapi_error_1.default(`\"reference_limit\" should be >= 0`, { code: 'INVALID_PARAMETER' });\n                            }\n                            if (v > 4503599627370546) {\n                                throw new skapi_error_1.default(`\"reference_limit\" should be <= 4503599627370546`, { code: 'INVALID_PARAMETER' });\n                            }\n                            return v;\n                        }\n                        throw new skapi_error_1.default(`\"reference_limit\" should be type: <number | null>`, { code: 'INVALID_PARAMETER' });\n                    },\n                    allow_multiple_reference: 'boolean',\n                    private_access: (v) => {\n                        let param = 'config.private_access';\n                        if (v === null) {\n                            return null;\n                        }\n                        if (v && typeof v === 'string') {\n                            v = [v];\n                        }\n                        if (Array.isArray(v)) {\n                            for (let u of v) {\n                                (0, utils_1.validateUserId)(u, `User ID in \"${param}\"`);\n                                if (this.__user && u === this.__user.user_id) {\n                                    throw new skapi_error_1.default(`\"${param}\" should not be the uploader's user ID.`, { code: 'INVALID_PARAMETER' });\n                                }\n                            }\n                        }\n                        else {\n                            throw new skapi_error_1.default(`\"${param}\" should be an array of user ID.`, { code: 'INVALID_PARAMETER' });\n                        }\n                        return v;\n                    }\n                }\n            }, [], ['response', 'formData', 'onerror']);\n            delete option.response;\n            delete option.formData;\n            delete option.onerror;\n            if (!(option === null || option === void 0 ? void 0 : option.table) && !(option === null || option === void 0 ? void 0 : option.record_id)) {\n                throw new skapi_error_1.default('Either \"record_id\" or \"table\" should have a value.', { code: 'INVALID_PARAMETER' });\n            }\n            if (option === null || option === void 0 ? void 0 : option.index) {\n                if (!((_a = option.index) === null || _a === void 0 ? void 0 : _a.name) || typeof ((_b = option.index) === null || _b === void 0 ? void 0 : _b.name) !== 'string') {\n                    throw new skapi_error_1.default('\"index.name\" is required. type: string.', { code: 'INVALID_PARAMETER' });\n                }\n                (0, utils_1.checkWhiteSpaceAndSpecialChars)(option.index.name, 'index name', true);\n                if (!option.index.hasOwnProperty('value')) {\n                    throw new skapi_error_1.default('\"index.value\" is required.', { code: 'INVALID_PARAMETER' });\n                }\n                if (typeof option.index.value === 'string') {\n                    (0, utils_1.checkWhiteSpaceAndSpecialChars)(option.index.value, 'index value', false, true);\n                }\n                else if (typeof option.index.value === 'number') {\n                    if (option.index.value > this.__index_number_range || option.index.value < -this.__index_number_range) {\n                        throw new skapi_error_1.default(`Number value should be within range -${this.__index_number_range} ~ +${this.__index_number_range}`, { code: 'INVALID_PARAMETER' });\n                    }\n                }\n            }\n            if (is_admin) {\n                if ((option === null || option === void 0 ? void 0 : option.access_group) === 'private') {\n                    throw new skapi_error_1.default('Service owner cannot write private records.', { code: 'INVALID_REQUEST' });\n                }\n                if (option.hasOwnProperty('subscription_group')) {\n                    throw new skapi_error_1.default('Service owner cannot write to subscription table.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            let options = { auth: true };\n            let postData = null;\n            if (form instanceof HTMLFormElement || form instanceof FormData) {\n                Object.assign(options, { meta: option });\n            }\n            else {\n                postData = Object.assign({ data: form }, option);\n            }\n            if (Object.keys(fetchOptions).length) {\n                Object.assign(options, { fetchOptions });\n            }\n            return (0, utils_1.normalize_record_data)(yield this.request('post-record', postData || form, options));\n        });\n    }\n    getRecords(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const indexTypes = {\n                '$record_id': 'string',\n                '$updated': 'number',\n                '$uploaded': 'number',\n                '$referenced_count': 'number'\n            };\n            const struct = {\n                table: 'string',\n                reference: 'string',\n                access_group: ['number', 'private'],\n                subscription: {\n                    user_id: (v) => (0, utils_1.validateUserId)(v, 'User ID in \"subscription.user_id\"'),\n                    group: 'number'\n                },\n                index: {\n                    name: (v) => {\n                        if (typeof v !== 'string') {\n                            throw new skapi_error_1.default('\"index.name\" should be type: string.', { code: 'INVALID_PARAMETER' });\n                        }\n                        if (indexTypes.hasOwnProperty(v)) {\n                            return v;\n                        }\n                        return (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index.name', true, false);\n                    },\n                    value: (v) => {\n                        var _a;\n                        if (((_a = params.index) === null || _a === void 0 ? void 0 : _a.name) && indexTypes.hasOwnProperty(params.index.name)) {\n                            let tp = indexTypes[params.index.name];\n                            if (typeof v === tp) {\n                                return v;\n                            }\n                            else {\n                                throw new skapi_error_1.default(`\"index.value\" should be type: ${tp}.`, { code: 'INVALID_PARAMETER' });\n                            }\n                        }\n                        if (typeof v === 'number') {\n                            if (v > this.__index_number_range || v < -this.__index_number_range) {\n                                throw new skapi_error_1.default(`Number value should be within range -${this.__index_number_range} ~ +${this.__index_number_range}`, { code: 'INVALID_PARAMETER' });\n                            }\n                            return v;\n                        }\n                        else if (typeof v === 'boolean') {\n                            return v;\n                        }\n                        else {\n                            return (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index.value', false, true);\n                        }\n                    },\n                    condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne'],\n                    range: (v) => {\n                        if (!('value' in params.index)) {\n                            throw new skapi_error_1.default('\"index.value\" is required.', { code: 'INVALID_PARAMETER' });\n                        }\n                        if (params.index.name === '$record_id') {\n                            throw new skapi_error_1.default(`Cannot do \"index.range\" on ${params.index.name}`, { code: 'INVALID_PARAMETER' });\n                        }\n                        if (typeof params.index.value !== typeof v) {\n                            throw new skapi_error_1.default('\"index.range\" type should match the type of \"index.value\".', { code: 'INVALID_PARAMETER' });\n                        }\n                        if (typeof v === 'string') {\n                            return (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index.value');\n                        }\n                        return v;\n                    }\n                },\n                tags: 'string'\n            };\n            params = (0, utils_1.checkParams)(params || {}, struct, ['table']);\n            if ((params === null || params === void 0 ? void 0 : params.subscription) && !this.session) {\n                throw new skapi_error_1.default('Requires login.', { code: 'INVALID_REQUEST' });\n            }\n            let result = yield this.request('get-records', params, Object.assign({ auth: params.hasOwnProperty('access_group') && (params.access_group === 'private' || params.access_group > 0) ? true : !!this.__user }, { fetchOptions }));\n            for (let i in result.list) {\n                result.list[i] = (0, utils_1.normalize_record_data)(result.list[i]);\n            }\n            ;\n            return result;\n        });\n    }\n    getTable(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let res = yield this.request('get-table', (0, utils_1.checkParams)(params || {}, {\n                table: 'string',\n                condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n            }), Object.assign({ auth: true }, { fetchOptions }));\n            let convert = {\n                'cnt_rec': 'number_of_records',\n                'tbl': 'table',\n                'srvc': 'service'\n            };\n            if (Array.isArray(res.list)) {\n                for (let t of res.list) {\n                    for (let k in convert) {\n                        if (t.hasOwnProperty(k)) {\n                            t[convert[k]] = t[k];\n                            delete t[k];\n                        }\n                    }\n                }\n            }\n            return res;\n        });\n    }\n    getIndex(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let p = (0, utils_1.checkParams)(params || {}, {\n                table: 'string',\n                index: (v) => (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index name', true, false),\n                order_by: {\n                    name: [\n                        'average_number',\n                        'total_number',\n                        'number_count',\n                        'average_bool',\n                        'total_bool',\n                        'bool_count',\n                        'string_count',\n                        'index_name'\n                    ],\n                    value: ['string', 'number', 'boolean'],\n                    condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n                }\n            }, ['table']);\n            if (p.hasOwnProperty('order_by')) {\n                if (p.order_by === 'index_name') {\n                    if (!p.hasOwnProperty('index')) {\n                        throw new skapi_error_1.default('\"index\" is required for ordered by \"index_name\".', { code: 'INVALID_PARAMETER' });\n                    }\n                    if (p.index.substring(p.index.length - 1) !== '.') {\n                        throw new skapi_error_1.default('\"index\" should be parent \"index name\".', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                if (p.order_by.hasOwnProperty('condition') && !p.order_by.hasOwnProperty('value')) {\n                    throw new skapi_error_1.default('\"value\" is required for \"condition\".', { code: 'INVALID_PARAMETER' });\n                }\n            }\n            let res = yield this.request('get-index', p, Object.assign({ auth: true }, { fetchOptions }));\n            let convert = {\n                'cnt_bool': 'boolean_count',\n                'cnt_numb': 'number_count',\n                'totl_numb': 'total_number',\n                'totl_bool': 'total_bool',\n                'avrg_numb': 'average_number',\n                'avrg_bool': 'average_bool',\n                'cnt_str': 'string_count'\n            };\n            if (Array.isArray(res.list)) {\n                res.list = res.list.map((i) => {\n                    let iSplit = i.idx.split('/');\n                    let resolved = {\n                        table: iSplit[1],\n                        index: iSplit[2],\n                        number_of_records: i.cnt_rec\n                    };\n                    for (let k in convert) {\n                        if (i === null || i === void 0 ? void 0 : i[k]) {\n                            resolved[convert[k]] = i[k];\n                        }\n                        if (resolved === null || resolved === void 0 ? void 0 : resolved.number_of_number_values) {\n                            resolved.average_of_number_values = i.totl_numb / i.cnt_numb;\n                        }\n                        if (resolved === null || resolved === void 0 ? void 0 : resolved.number_of_boolean_values) {\n                            resolved.average_of_boolean_values = i.totl_bool / i.cnt_bool;\n                        }\n                    }\n                    return resolved;\n                });\n            }\n            return res;\n        });\n    }\n    getTag(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let res = yield this.request('get-tag', (0, utils_1.checkParams)(params || {}, {\n                table: 'string',\n                tag: 'string',\n                condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n            }), Object.assign({ auth: true }, { fetchOptions }));\n            if (Array.isArray(res.list)) {\n                for (let i in res.list) {\n                    let item = res.list[i];\n                    let tSplit = item.tag.split('/');\n                    res.list[i] = {\n                        table: tSplit[1],\n                        tag: tSplit[0],\n                        number_of_records: item.cnt_rec\n                    };\n                }\n            }\n            return res;\n        });\n    }\n    deleteRecords(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isAdmin = yield this.requireAdmin();\n            if (isAdmin && !(params === null || params === void 0 ? void 0 : params.service)) {\n                throw new skapi_error_1.default('Service ID is required.', { code: 'INVALID_PARAMETER' });\n            }\n            if (!isAdmin && !(params === null || params === void 0 ? void 0 : params.table)) {\n                throw new skapi_error_1.default('\"table\" is required.', { code: 'INVALID_PARAMETER' });\n            }\n            if (params === null || params === void 0 ? void 0 : params.record_id) {\n                return yield this.request('del-records', {\n                    service: params.service,\n                    record_id: (v => {\n                        let id = (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'record_id', false);\n                        if (typeof id === 'string') {\n                            return [id];\n                        }\n                        return id;\n                    })(params.record_id)\n                }, { auth: true });\n            }\n            else {\n                if (!(params === null || params === void 0 ? void 0 : params.table)) {\n                    throw new skapi_error_1.default('Either \"table\" or \"record_id\" is required.', { code: 'INVALID_PARAMETER' });\n                }\n                let struct = {\n                    access_group: ['number', 'private'],\n                    table: {\n                        name: 'string',\n                        subscription: (v) => {\n                            if (isAdmin) {\n                                return (0, utils_1.validateUserId)(v, 'User ID in \"table.subscription\"');\n                            }\n                            throw new skapi_error_1.default('\"table.subscription\" is an invalid parameter key.', { code: 'INVALID_PARAMETER' });\n                        },\n                        subscription_group: (v) => {\n                            var _a;\n                            if (isAdmin && typeof ((_a = params === null || params === void 0 ? void 0 : params.table) === null || _a === void 0 ? void 0 : _a.subscription) !== 'string') {\n                                throw new skapi_error_1.default('\"table.subscription\" is required.', { code: 'INVALID_PARAMETER' });\n                            }\n                            if (typeof v === 'number') {\n                                if (v > 0 && v < 99) {\n                                    return v;\n                                }\n                            }\n                            throw new skapi_error_1.default('Subscription group should be between 0 ~ 99.', { code: 'INVALID_PARAMETER' });\n                        }\n                    }\n                };\n                params = (0, utils_1.checkParams)(params || {}, struct, isAdmin ? ['service'] : ['table', 'access_group']);\n            }\n            return yield this.request('del-records', params, { auth: true });\n        });\n    }\n    subscribeNewsletter(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let params = (0, utils_1.checkParams)(form || {}, {\n                email: (v) => (0, utils_1.validateEmail)(v),\n                bypassWelcome: ['boolean', () => true]\n            }, ['email']);\n            return yield this.request('subscribe-newsletter', params);\n        });\n    }\n    subscriptionGroupCheck(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            option = (0, utils_1.checkParams)(option, {\n                user_id: (v) => (0, utils_1.validateUserId)(v, '\"user_id\"'),\n                group: (v) => {\n                    if (v === '*') {\n                        return v;\n                    }\n                    if (typeof v !== 'number') {\n                        throw new skapi_error_1.default('\"group\" should be type: number.', { code: 'INVALID_PARAMETER' });\n                    }\n                    else if (v < 1 && v > 9) {\n                        throw new skapi_error_1.default('\"group\" should be within range 1 ~ 9.', { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                }\n            }, ['user_id', 'group']);\n            if (this.__user && option.user_id === this.__user.user_id) {\n                throw new skapi_error_1.default(`\"user_id\" cannot be the user's own ID.`, { code: 'INVALID_PARAMETER' });\n            }\n            return option;\n        });\n    }\n    subscribe(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            if (group === '*') {\n                throw new skapi_error_1.default('Cannot subscribe to all groups at once.', { code: 'INVALID_PARAMETER' });\n            }\n            return yield this.request('subscription', {\n                subscribe: user_id,\n                group\n            }, { auth: true });\n        });\n    }\n    unsubscribe(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            return yield this.request('subscription', {\n                unsubscribe: user_id,\n                group\n            }, { auth: true });\n        });\n    }\n    blockSubscriber(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            return yield this.request('subscription', { block: user_id, group }, { auth: true });\n        });\n    }\n    unblockSubscriber(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            return yield this.request('subscription', { unblock: user_id, group }, { auth: true });\n        });\n    }\n    getUserSubscriptions(option) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            option = (0, utils_1.checkParams)(option, {\n                user_id: (v) => {\n                    try {\n                        return (0, utils_1.validateUserId)(v, '\"user_id\"');\n                    }\n                    catch (err) {\n                    }\n                    try {\n                        return (0, utils_1.validateEmail)(v);\n                    }\n                    catch (err) {\n                    }\n                    throw new skapi_error_1.default('\"subscriber\" should be either valid user ID or E-Mail.', { code: 'INVALID_PARAMETER' });\n                },\n                group: 'number'\n            }) || {};\n            return this.getSubscriptions({\n                subscriber: option.user_id || ((_a = this.__user) === null || _a === void 0 ? void 0 : _a.user_id),\n                group: option.group\n            });\n        });\n    }\n    getUserSubscribers(option) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            option = (0, utils_1.checkParams)(option, {\n                user_id: (v) => (0, utils_1.validateUserId)(v, '\"user_id\"'),\n                group: 'number'\n            }) || {};\n            let subParams = {\n                subscription: option.user_id || ((_a = this.__user) === null || _a === void 0 ? void 0 : _a.user_id),\n                group: option.group\n            };\n            return this.getSubscriptions(subParams);\n        });\n    }\n    getSubscriptions(params, fetchOptions, _mapper) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isNewsletterSub = false;\n            params = (0, utils_1.checkParams)(params, {\n                subscriber: (v) => {\n                    try {\n                        return (0, utils_1.validateUserId)(v, 'User ID in \"subscriber\"');\n                    }\n                    catch (err) {\n                    }\n                    try {\n                        let isEmail = (0, utils_1.validateEmail)(v);\n                        isNewsletterSub = true;\n                        return isEmail;\n                    }\n                    catch (err) {\n                    }\n                    throw new skapi_error_1.default('\"subscriber\" should be either valid user ID or E-Mail.', { code: 'INVALID_PARAMETER' });\n                },\n                group: 'number',\n                subscription: (v) => {\n                    try {\n                        return (0, utils_1.validateUserId)(v, 'User ID in \"subscription\"');\n                    }\n                    catch (err) {\n                    }\n                    if (typeof v === 'string' && v.length === 14) {\n                        return v;\n                    }\n                    throw new skapi_error_1.default('\"subscriber\" should be either valid service ID or user ID.', { code: 'INVALID_PARAMETER' });\n                },\n                blocked: 'boolean'\n            });\n            if (isNewsletterSub && !(params === null || params === void 0 ? void 0 : params.subscription)) {\n                params.subscription = this.service;\n            }\n            if (!params.subscriber && !params.subscription) {\n                throw new skapi_error_1.default('At least either \"subscriber\" or \"subscription\" should have a value.', { code: 'INVALID_PARAMETER' });\n            }\n            let response = yield this.request('get-subscription', params, Object.assign({ auth: !isNewsletterSub }, { fetchOptions }));\n            response.list = response.list.map(_mapper || ((s) => {\n                let subscription = {};\n                let subSplit = s.sub.split('#');\n                subscription.subscriber = subSplit[2];\n                subscription.subscription = subSplit[0];\n                subscription.group = parseInt(subSplit[1]);\n                subscription.timestamp = s.stmp;\n                subscription.blocked = s.grp.substring(0, 1) === 'N';\n                return subscription;\n            }));\n            return response;\n        });\n    }\n    getNewsletters(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isAdmin = yield this.requireAdmin();\n            let searchType = {\n                'message_id': 'string',\n                'timestamp': 'number',\n                'read': 'number',\n                'complaint': 'number',\n                'subject': 'string'\n            };\n            if (!params) {\n                if (!fetchOptions) {\n                    fetchOptions = {};\n                }\n                fetchOptions.ascending = false;\n            }\n            let _params = params || {\n                searchFor: 'timestamp',\n                value: 0,\n                condition: '>'\n            };\n            params = (0, utils_1.checkParams)(_params, {\n                searchFor: ['message_id', 'timestamp', 'read', 'complaint', 'group', 'subject'],\n                value: (v) => {\n                    if (typeof v !== searchType[_params.searchFor]) {\n                        throw new skapi_error_1.default(`\"value\" type does not match the type of \"${_params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    else if (typeof v === 'string' && !v) {\n                        throw new skapi_error_1.default('\"value\" should not be empty string.', { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                },\n                range: (v) => {\n                    if (!_params.hasOwnProperty('value') || typeof v !== typeof _params.value) {\n                        throw new skapi_error_1.default('\"range\" should match type of \"value\".', { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                },\n                condition: ['>', '>=', '=', '<', '<=', 'gt', 'gte', 'eq', 'lt', 'lte', () => '='],\n                group: (x) => {\n                    if (x !== 'newsletter' && !this.session) {\n                        throw new skapi_error_1.default('User should be logged in.', { code: 'INVALID_REQUEST' });\n                    }\n                    if (typeof x === 'string' && x !== 'newsletter') {\n                        throw new skapi_error_1.default('Group should be either \"newsletter\" or access group number.', { code: 'INVALID_PARAMETER' });\n                    }\n                    if (!isAdmin && x > parseInt(this.session.idToken.payload.access_group)) {\n                        throw new skapi_error_1.default('User has no access.', { code: 'INVALID_REQUEST' });\n                    }\n                    if (x === 'newsletter') {\n                        return 0;\n                    }\n                    return x;\n                }\n            }, ['searchFor', 'value', 'group']);\n            let mails = yield this.request(params.group === 0 ? 'get-newsletters' : 'get-serviceletters', params, Object.assign({ method: 'get', auth: params.group !== 0 }, { fetchOptions }));\n            let remap = {\n                'message_id': 'mid',\n                'timestamp': 'stmp',\n                'complaint': 'cmpl',\n                'read': 'read',\n                'subject': 'subj',\n                'bounced': 'bnce',\n                'url': 'url'\n            };\n            let defaults = {\n                'message_id': '',\n                'timestamp': 0,\n                'complaint': 0,\n                'read': 0,\n                'subject': '',\n                'bounced': 0,\n                'url': ''\n            };\n            mails.list = mails.list.map(m => {\n                let remapped = {};\n                for (let k in remap) {\n                    remapped[k] = m[remap[k]] || defaults[remap[k]];\n                }\n                return remapped;\n            });\n            return mails;\n        });\n    }\n    signup(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.logout();\n            let params = (0, utils_1.checkParams)(form || {}, {\n                email: (v) => (0, utils_1.validateEmail)(v),\n                password: (v) => (0, utils_1.validatePassword)(v),\n                name: 'string',\n                address: 'string',\n                gender: 'string',\n                birthdate: (v) => (0, utils_1.validateBirthdate)(v),\n                phone_number: (v) => (0, utils_1.validatePhoneNumber)(v),\n                email_public: ['boolean', () => false],\n                address_public: ['boolean', () => false],\n                gender_public: ['boolean', () => false],\n                birthdate_public: ['boolean', () => false],\n                phone_number_public: ['boolean', () => false],\n                email_subscription: ['boolean', () => false]\n            }, ['email', 'password']);\n            option = (0, utils_1.checkParams)(option || {}, {\n                confirmation: (v) => {\n                    if (typeof v === 'string') {\n                        return (0, utils_1.validateUrl)(v);\n                    }\n                    else if (typeof v === 'boolean') {\n                        return v;\n                    }\n                    else {\n                        throw new skapi_error_1.default('\"option.confirmation\" should be type: <string | boolean>.', { code: 'INVALID_PARAMETER' });\n                    }\n                },\n                login: (v) => {\n                    if (typeof v === 'boolean') {\n                        if (option.confirmation && v) {\n                            throw new skapi_error_1.default('\"login\" is not allowed when \"option.confirmation\" is true.', { code: 'INVALID_PARAMETER' });\n                        }\n                        return v;\n                    }\n                    throw new skapi_error_1.default('\"option.login\" should be type: boolean.', { code: 'INVALID_PARAMETER' });\n                }\n            });\n            let { login = false, confirmation = false } = option || {};\n            if (!confirmation && params.email_public) {\n                throw new skapi_error_1.default('\"option.confirmation\" should be true if \"email_public\" is set to true.', { code: 'INVALID_PARAMETER' });\n            }\n            yield this.request(\"signup\", params, { meta: option });\n            if (confirmation) {\n                return \"SUCCESS: The account has been created. User's email confirmation is required.\";\n            }\n            else if (login) {\n                return yield this.login({ email: params.email, password: params.password });\n            }\n            else {\n                return 'SUCCESS: The account has been created.';\n            }\n        });\n    }\n    logout() {\n        if (this.cognitoUser) {\n            this.cognitoUser.signOut();\n        }\n        let to_be_erased = {\n            'session': null,\n            '__startKey_keys': {},\n            '__cached_requests': {},\n            'user': null\n        };\n        for (let k in to_be_erased) {\n            this[k] = to_be_erased[k];\n        }\n        return 'SUCCESS: The user has been logged out.';\n    }\n    resendSignupConfirmation(redirect) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.__request_signup_confirmation) {\n                throw new skapi_error_1.default('Least one login attempt is required.', { code: 'INVALID_REQUEST' });\n            }\n            if (redirect) {\n                (0, utils_1.validateUrl)(redirect);\n            }\n            let resend = yield this.request(\"confirm-signup\", {\n                username: this.__request_signup_confirmation,\n                redirect\n            });\n            this.__request_signup_confirmation = null;\n            return resend;\n        });\n    }\n    recoverAccount(redirect = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof redirect === 'string') {\n                (0, utils_1.validateUrl)(redirect);\n            }\n            else if (typeof redirect !== 'boolean') {\n                throw new skapi_error_1.default('Argument should be type: <boolean | string>.', { code: 'INVALID_REQUEST' });\n            }\n            if (!this.__disabledAccount) {\n                throw new skapi_error_1.default('Least one signin attempt of disabled account is required.', { code: 'INVALID_REQUEST' });\n            }\n            let resend = yield this.request(\"recover-account\", { username: this.__disabledAccount, redirect });\n            this.__disabledAccount = null;\n            return resend;\n        });\n    }\n    login(form, option) {\n        this.logout();\n        let params = (0, utils_1.checkParams)(form, {\n            email: (v) => (0, utils_1.validateEmail)(v),\n            password: (v) => (0, utils_1.validatePassword)(v)\n        }, ['email', 'password']);\n        return this.authentication().authenticateUser(params.email, params.password);\n    }\n    verifyAttribute(attribute, code) {\n        if (!this.cognitoUser) {\n            throw new skapi_error_1.default('The user has to be logged in.', { code: 'INVALID_REQUEST' });\n        }\n        return new Promise((res, rej) => {\n            var _a, _b;\n            let callback = {\n                onSuccess: (result) => {\n                    if (code) {\n                        this.authentication().updateSession({ refreshToken: true }).then(() => {\n                            if (this.__user) {\n                                this.__user[attribute + '_verified'] = true;\n                            }\n                            res(`SUCCESS: \"${attribute}\" is verified.`);\n                        }).catch(err => {\n                            rej(err);\n                        });\n                    }\n                    else {\n                        res('SUCCESS: Verification code has been sent.');\n                    }\n                },\n                onFailure: (err) => {\n                    rej(new skapi_error_1.default(err.message || 'Failed to request verification code.', {\n                        code: err === null || err === void 0 ? void 0 : err.code\n                    }));\n                },\n                inputVerificationCode: null\n            };\n            if (code) {\n                (_a = this.cognitoUser) === null || _a === void 0 ? void 0 : _a.verifyAttribute(attribute, code, callback);\n            }\n            else {\n                (_b = this.cognitoUser) === null || _b === void 0 ? void 0 : _b.getAttributeVerificationCode(attribute, callback);\n            }\n        });\n    }\n    verifyEmail(form, option) {\n        let code = (form ? (0, utils_1.checkParams)(form, {\n            code: ['number', 'string']\n        }) : {}).code || '';\n        return this.verifyAttribute('email', code.toString());\n    }\n    verifyMobile(form, option) {\n        let code = (form ? (0, utils_1.checkParams)(form, {\n            code: ['number', 'string']\n        }) : {}).code || null;\n        return this.verifyAttribute('phone_number', code.toString());\n    }\n    forgotPassword(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            let params = (0, utils_1.checkParams)(form, {\n                email: (v) => (0, utils_1.validateEmail)(v)\n            }, ['email']);\n            return new Promise((res, rej) => __awaiter(this, void 0, void 0, function* () {\n                let cognitoUser = (yield this.authentication().createCognitoUser(params.email)).cognitoUser;\n                cognitoUser.forgotPassword({\n                    onSuccess: result => {\n                        res(\"SUCCESS: Verification code has been sent.\");\n                    },\n                    onFailure: (err) => {\n                        rej(new skapi_error_1.default((err === null || err === void 0 ? void 0 : err.message) || 'Failed to send verification code.', { code: (err === null || err === void 0 ? void 0 : err.code) || 'ERROR' }));\n                    }\n                });\n            }));\n        });\n    }\n    resetPassword(form, option) {\n        let params = (0, utils_1.checkParams)(form, {\n            email: (v) => (0, utils_1.validateEmail)(v),\n            code: ['number', 'string'],\n            new_password: (v) => (0, utils_1.validatePassword)(v)\n        }, ['email', 'code', 'new_password']);\n        let code = params.code, new_password = params.new_password;\n        if (typeof code === 'number') {\n            code = code.toString();\n        }\n        return new Promise((res, rej) => __awaiter(this, void 0, void 0, function* () {\n            let cognitoUser = (yield this.authentication().createCognitoUser(params.email)).cognitoUser;\n            cognitoUser.confirmPassword(code, new_password, {\n                onSuccess: result => {\n                    res(\"SUCCESS: New password has been set.\");\n                },\n                onFailure: (err) => {\n                    rej(new skapi_error_1.default((err === null || err === void 0 ? void 0 : err.message) || 'Failed to reset password.', { code: err === null || err === void 0 ? void 0 : err.code }));\n                }\n            });\n        }));\n    }\n    disableAccount() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            if (this.__user && Array.isArray(this.__user.services)) {\n                for (let s of this.__user.services) {\n                    if (s.active) {\n                        throw new skapi_error_1.default('All services needs to be disabled.', { code: 'INVALID_REQUEST' });\n                    }\n                }\n            }\n            let result = yield this.request('remove-account', { disable: true }, { auth: true });\n            this.logout();\n            return result;\n        });\n    }\n    updateUserSettings(form, option) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            let attr = (_a = this.session) === null || _a === void 0 ? void 0 : _a.attributes;\n            if (!attr || !this.cognitoUser) {\n                throw new skapi_error_1.default('User has to be logged in.', { code: 'INVALID_REQUEST' });\n            }\n            let params = (0, utils_1.checkParams)(form || {}, {\n                email: (v) => (0, utils_1.validateEmail)(v),\n                name: 'string',\n                address: 'string',\n                gender: 'string',\n                birthdate: (v) => (0, utils_1.validateBirthdate)(v),\n                phone_number: (v) => (0, utils_1.validatePhoneNumber)(v),\n                email_public: 'boolean',\n                phone_number_public: 'boolean',\n                address_public: 'boolean',\n                gender_public: 'boolean',\n                birthdate_public: 'boolean',\n                email_subscription: 'boolean',\n                current_password: (v) => (0, utils_1.validatePassword)(v),\n                new_password: (v) => (0, utils_1.validatePassword)(v)\n            });\n            if (params && typeof params === 'object' && !Object.keys(params).length) {\n                return this.__user;\n            }\n            if (params.new_password || params.current_password) {\n                if (!params.current_password) {\n                    throw new skapi_error_1.default('\"current_password\" is needed to change the password.', { code: 'INVALID_PARAMETER' });\n                }\n                if (!params.new_password) {\n                    throw new skapi_error_1.default('\"new_password\" is needed to change password.', { code: 'INVALID_PARAMETER' });\n                }\n                if (params.new_password !== params.current_password) {\n                    yield new Promise((res, rej) => {\n                        this.cognitoUser.changePassword(params.current_password, params.new_password, (err, result) => {\n                            if (err) {\n                                rej(new skapi_error_1.default((err === null || err === void 0 ? void 0 : err.message) || 'Failed to change users password.', { code: (err === null || err === void 0 ? void 0 : err.code) || (err === null || err === void 0 ? void 0 : err.name) }));\n                            }\n                            res(result);\n                        });\n                    });\n                }\n                delete params.current_password;\n                delete params.new_password;\n            }\n            if (params.email) {\n                let connect = yield this.updateConnection({ request_hash: params.email });\n                params['preferred_username'] = connect.hash;\n            }\n            let collision = [\n                ['email_subscription', 'email_verified', \"User's E-Mail should be verified to set\"],\n                ['email_public', 'email_verified', \"User's E-Mail should be verified to set\"],\n                ['phone_number_public', 'phone_number_verified', \"User's phone number should be verified to set\"]\n            ];\n            if (this.__user) {\n                for (let c of collision) {\n                    if (params[c[0]] && !this.__user[c[1]]) {\n                        throw new skapi_error_1.default(`${c[2]} \"${c[0]}\" to true.`, { code: 'INVALID_REQUEST' });\n                    }\n                }\n            }\n            let customAttr = [\n                'email_public',\n                'phone_number_public',\n                'address_public',\n                'gender_public',\n                'birthdate_public',\n                'email_subscription'\n            ];\n            for (let k in params) {\n                if (params[k] === attr[k]) {\n                    delete params[k];\n                }\n                else if (customAttr.includes(k)) {\n                    let parseValue = params[k];\n                    if (typeof parseValue === 'boolean')\n                        parseValue = parseValue ? '1' : '0';\n                    params['custom:' + k] = parseValue;\n                    delete params[k];\n                }\n            }\n            if (params && typeof params === 'object' && Object.keys(params).length) {\n                let toSet = [];\n                for (let key in params) {\n                    toSet.push(new amazon_cognito_identity_js_1.CognitoUserAttribute({\n                        Name: key,\n                        Value: params[key]\n                    }));\n                }\n                yield new Promise((res, rej) => {\n                    var _a;\n                    (_a = this.cognitoUser) === null || _a === void 0 ? void 0 : _a.updateAttributes(toSet, (err, result) => {\n                        if (err) {\n                            rej([\n                                (err === null || err === void 0 ? void 0 : err.code) || (err === null || err === void 0 ? void 0 : err.name),\n                                (err === null || err === void 0 ? void 0 : err.message) || `Failed to update user settings.`\n                            ]);\n                        }\n                        res(result);\n                    });\n                });\n                yield this.authentication().updateSession({ refreshToken: true });\n            }\n            return this.__user;\n        });\n    }\n    uploadUserData(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            option = (0, utils_1.checkParams)(option || {}, {\n                private: 'array'\n            });\n            let opt = {\n                auth: true\n            };\n            if (option === null || option === void 0 ? void 0 : option.private) {\n                Object.assign(opt, { meta: { '__private__': option.private } });\n            }\n            yield this.request('post-userdata', form, opt);\n            yield this.authentication().updateSession();\n            return this.__user;\n        });\n    }\n    getUsers(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isAdmin = yield this.requireAdmin({\n                ignoreVerification: true\n            });\n            if (!params) {\n                if (!fetchOptions) {\n                    fetchOptions = {};\n                }\n                fetchOptions.ascending = false;\n            }\n            params = params || {\n                searchFor: 'timestamp',\n                condition: '>',\n                value: 0\n            };\n            const searchForTypes = {\n                'user_id': (v) => (0, utils_1.validateUserId)(v),\n                'name': 'string',\n                'email': (v) => (0, utils_1.validateEmail)(v),\n                'phone_number': (v) => (0, utils_1.validatePhoneNumber)(v),\n                'address': 'string',\n                'gender': 'string',\n                'birthdate': (v) => (0, utils_1.validateBirthdate)(v),\n                'locale': (v) => {\n                    if (typeof v !== 'string' || typeof v === 'string' && v.length > 5) {\n                        throw new skapi_error_1.default('Value of \"locale\" should be a country code.');\n                    }\n                    return v;\n                },\n                'subscribers': 'number',\n                'timestamp': 'number',\n                'group': 'number',\n                'email_subscription': (v) => {\n                    if (!isAdmin) {\n                        throw new skapi_error_1.default('Only admin is allowed to search \"email_subscription\".', { code: 'INVALID_REQUEST' });\n                    }\n                    return v;\n                },\n                'blocked': (v) => {\n                    if (v) {\n                        return 'by_admin:suspended';\n                    }\n                    else {\n                        return 'by_admin:approved';\n                    }\n                }\n            };\n            let required = ['searchFor', 'value'];\n            params = (0, utils_1.checkParams)(params, {\n                searchFor: [\n                    'user_id',\n                    'name',\n                    'email',\n                    'phone_number',\n                    'address',\n                    'gender',\n                    'birthdate',\n                    'locale',\n                    'subscribers',\n                    'timestamp',\n                    'group',\n                    'email_subscription',\n                    'blocked'\n                ],\n                condition: ['>', '>=', '=', '<', '<=', 'gt', 'gte', 'eq', 'lt', 'lte', () => '='],\n                value: (v) => {\n                    let checker = searchForTypes[params.searchFor];\n                    if (typeof checker === 'function') {\n                        return checker(v);\n                    }\n                    else if (typeof v !== checker) {\n                        throw new skapi_error_1.default(`Value does not match the type of \"${params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                },\n                range: (v) => {\n                    let checker = searchForTypes[params.searchFor];\n                    if (typeof checker === 'function') {\n                        return checker(v);\n                    }\n                    else if (typeof v !== checker) {\n                        throw new skapi_error_1.default(`Range does not match the type of \"${params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                }\n            }, required);\n            if ((params === null || params === void 0 ? void 0 : params.condition) && (params === null || params === void 0 ? void 0 : params.condition) !== '=' && params.hasOwnProperty('range')) {\n                throw new skapi_error_1.default('Conditions does not apply on range search.', { code: 'INVALID_PARAMETER' });\n            }\n            if (['user_id', 'blocked'].includes(params.searchFor) && params.condition !== '=') {\n                throw new skapi_error_1.default(`Condition is not allowed on \"${params.searchFor}\"`, { code: 'INVALID_PARAMETER' });\n            }\n            if (params.searchFor === 'blocked') {\n                params.searchFor = 'suspended';\n            }\n            if (typeof (params === null || params === void 0 ? void 0 : params.value) === 'string' && !(params === null || params === void 0 ? void 0 : params.value)) {\n                throw new skapi_error_1.default('Value should not be an empty string.', { code: 'INVALID_PARAMETER' });\n            }\n            if (typeof (params === null || params === void 0 ? void 0 : params.searchFor) === 'string' && !(params === null || params === void 0 ? void 0 : params.searchFor)) {\n                throw new skapi_error_1.default('\"searchFor\" should not be an empty string.', { code: 'INVALID_PARAMETER' });\n            }\n            let isSelfProfile = params.searchFor === 'user_id' && params.value === this.session.idToken.payload.sub;\n            if (isAdmin && !isSelfProfile && !params.service) {\n                throw new skapi_error_1.default('Service ID is required.', { code: 'INVALID_PARAMETER' });\n            }\n            let result = yield this.request('get-users', params, { auth: true, fetchOptions });\n            if (!result.list[0] || !isSelfProfile || result.list.length > 1) {\n                return result;\n            }\n            let user = result.list[0];\n            Object.assign(user, this.__user);\n            user._what_public_see = JSON.parse(JSON.stringify(user));\n            let public_keys = [\n                'service',\n                'user_id',\n                'name',\n                'locale',\n                'address',\n                'birthdate',\n                'phone_number',\n                'email',\n                'gender',\n                'subscribers',\n                'timestamp',\n                'group',\n                'log',\n                'user_data'\n            ];\n            for (let k in user._what_public_see) {\n                if (!public_keys.includes(k)) {\n                    delete user._what_public_see[k];\n                }\n            }\n            return user;\n        });\n    }\n    updateConnection(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let request = null;\n            let connectedService = {};\n            if (params === null || params === void 0 ? void 0 : params.request_hash) {\n                if (this.__serviceHash[params.request_hash]) {\n                    Object.assign(connectedService, { hash: this.__serviceHash[params.request_hash] });\n                }\n                else {\n                    request = {\n                        request_hash: (0, utils_1.validateEmail)(params.request_hash)\n                    };\n                }\n            }\n            if (!this.connection || this.connection.service !== this.service || request) {\n                if (request === null) {\n                    request = {};\n                }\n                Object.assign(request, {\n                    service: this.service,\n                    service_owner: this.service_owner\n                });\n            }\n            Object.assign(connectedService, (request ? yield this.request('service', request, { bypassAwaitConnection: true }) : this.connection));\n            if (params === null || params === void 0 ? void 0 : params.request_hash) {\n                this.__serviceHash[params.request_hash] = connectedService.hash;\n            }\n            let connection = JSON.parse(JSON.stringify(connectedService));\n            delete connection.hash;\n            this.connection = connection;\n            return connectedService;\n        });\n    }\n}\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"postRecord\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"subscribeNewsletter\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"subscribe\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"unsubscribe\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"blockSubscriber\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"unblockSubscriber\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"signup\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"login\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"verifyEmail\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"verifyMobile\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"forgotPassword\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"resetPassword\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"updateUserSettings\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"uploadUserData\", null);\nexports.default = Skapi;\n//# sourceMappingURL=skapi.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass SkapiError extends Error {\n    constructor(error, options) {\n        if (error instanceof Error) {\n            super(error.message || 'Something went wrong.');\n            this.cause = error;\n            this.name = error.name;\n            if (error.hasOwnProperty('code')) {\n                this.code = error.code;\n            }\n        }\n        else if (typeof error === 'string') {\n            super(error || 'Something went wrong.');\n            this.name = \"SkapiError\";\n            this.code = 'ERROR';\n            if (options) {\n                if (options.code) {\n                    this.code = options.code;\n                }\n                if (options.cause) {\n                    this.cause = options.cause;\n                }\n            }\n        }\n    }\n}\nexports.default = SkapiError;\n//# sourceMappingURL=skapi_error.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha256 = exports.validateUrl = exports.validatePhoneNumber = exports.validatePassword = exports.validateEmail = exports.validateBirthdate = exports.validateUserId = exports.extractFormMetaData = exports.checkParams = exports.normalize_record_data = exports.checkWhiteSpaceAndSpecialChars = void 0;\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nconst sha256 = function sha256(ascii) {\n    function rightRotate(value, amount) {\n        return (value >>> amount) | (value << (32 - amount));\n    }\n    ;\n    console.log('sha ran', ascii);\n    let mathPow = Math.pow;\n    let maxWord = mathPow(2, 32);\n    let lengthProperty = 'length';\n    let i, j;\n    let result = '';\n    let words = [];\n    let asciiBitLength = ascii[lengthProperty] * 8;\n    let hash = sha256.h = sha256.h || [];\n    let k = sha256.k = sha256.k || [];\n    let primeCounter = k[lengthProperty];\n    let isComposite = {};\n    for (let candidate = 2; primeCounter < 64; candidate++) {\n        if (!isComposite[candidate]) {\n            for (i = 0; i < 313; i += candidate) {\n                isComposite[i] = candidate;\n            }\n            hash[primeCounter] = (mathPow(candidate, .5) * maxWord) | 0;\n            k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n        }\n    }\n    ascii += '\\x80';\n    while (ascii[lengthProperty] % 64 - 56)\n        ascii += '\\x00';\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n        j = ascii.charCodeAt(i);\n        if (j >> 8) {\n            console.log({ j, ascii, i });\n            return;\n        }\n        words[i >> 2] |= j << ((3 - i) % 4) * 8;\n    }\n    words[words[lengthProperty]] = ((asciiBitLength / maxWord) | 0);\n    words[words[lengthProperty]] = (asciiBitLength);\n    for (j = 0; j < words[lengthProperty];) {\n        let w = words.slice(j, j += 16);\n        let oldHash = hash;\n        hash = hash.slice(0, 8);\n        for (i = 0; i < 64; i++) {\n            let i2 = i + j;\n            let w15 = w[i - 15], w2 = w[i - 2];\n            let a = hash[0], e = hash[4];\n            let temp1 = hash[7]\n                + (rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25))\n                + ((e & hash[5]) ^ ((~e) & hash[6]))\n                + k[i]\n                + (w[i] = (i < 16) ? w[i] : (w[i - 16]\n                    + (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))\n                    + w[i - 7]\n                    + (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))) | 0);\n            let temp2 = (rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22))\n                + ((a & hash[1]) ^ (a & hash[2]) ^ (hash[1] & hash[2]));\n            hash = [(temp1 + temp2) | 0].concat(hash);\n            hash[4] = (hash[4] + temp1) | 0;\n        }\n        for (i = 0; i < 8; i++) {\n            hash[i] = (hash[i] + oldHash[i]) | 0;\n        }\n    }\n    for (i = 0; i < 8; i++) {\n        for (j = 3; j + 1; j--) {\n            let b = (hash[i] >> (j * 8)) & 255;\n            result += ((b < 16) ? 0 : '') + b.toString(16);\n        }\n    }\n    console.log('sha ran end', { result });\n    return result;\n};\nexports.sha256 = sha256;\nfunction checkParams(params, struct, required = null, bypassCheck = [], _parentKey = null) {\n    var _a;\n    if (Array.isArray(bypassCheck)) {\n        bypassCheck = bypassCheck.concat([\n            'service',\n            'service_owner',\n        ]);\n    }\n    function isObjectWithKeys(obj) {\n        if (obj instanceof Promise) {\n            throw new skapi_error_1.default('Parameter should not be a promise', { code: 'INVALID_PARAMETER' });\n        }\n        return obj && typeof obj === 'object' && !Array.isArray(obj) && Object.keys(obj).length;\n    }\n    function isEmptyObject(obj) {\n        return obj && typeof obj === 'object' && !Array.isArray(obj) && !Object.keys(obj).length;\n    }\n    let _params = params;\n    let val;\n    let errToThrow = null;\n    let isInvalid = _parentKey ? ` in \"${_parentKey}\" is invalid.` : '. Parameter should be type <object>.';\n    if (_parentKey === null) {\n        if (isObjectWithKeys(_params)) {\n            if (_params instanceof HTMLFormElement || _params instanceof FormData) {\n                _params = (_a = extractFormMetaData(params)) === null || _a === void 0 ? void 0 : _a.meta;\n            }\n            else {\n                _params = JSON.parse(JSON.stringify(params));\n            }\n            for (let k in _params) {\n                if (!struct.hasOwnProperty(k) && Array.isArray(bypassCheck) && !bypassCheck.includes(k)) {\n                    throw new skapi_error_1.default(`Key name \"${k}\" is invalid in parameter.`, { code: 'INVALID_PARAMETER' });\n                }\n            }\n            if (Array.isArray(required) && required.length) {\n                for (let k of required) {\n                    if (!Object.keys(_params).includes(k)) {\n                        throw new skapi_error_1.default(`Key \"${k}\" is required in parameter.`, { code: 'INVALID_PARAMETER' });\n                    }\n                }\n            }\n        }\n        else if (isEmptyObject(_params) || typeof _params === 'undefined') {\n            let defaults = {};\n            for (let s in struct) {\n                let structValue = struct[s];\n                if (Array.isArray(structValue) && typeof structValue[structValue.length - 1] === 'function')\n                    defaults[s] = structValue[structValue.length - 1]();\n            }\n            return Object.keys(defaults).length ? defaults : _params;\n        }\n        if (_params === null) {\n            return null;\n        }\n    }\n    if (isObjectWithKeys(struct) && isObjectWithKeys(_params)) {\n        for (let s in struct) {\n            let structValue = struct[s];\n            if (_params.hasOwnProperty(s) && typeof _params[s] != 'undefined') {\n                _params[s] = checkParams(_params[s], structValue, null, null, s);\n            }\n            else {\n                let defaultSetter = Array.isArray(structValue) &&\n                    typeof structValue[structValue.length - 1] === 'function' ? structValue[structValue.length - 1] : null;\n                if (defaultSetter) {\n                    let def = defaultSetter();\n                    if (def !== undefined) {\n                        _params[s] = def;\n                    }\n                }\n            }\n        }\n        val = _params;\n    }\n    else if (Array.isArray(struct)) {\n        for (let s of struct) {\n            try {\n                if (typeof _params !== undefined && typeof s !== 'function') {\n                    val = checkParams(_params, s, null, null, _parentKey);\n                }\n                break;\n            }\n            catch (err) {\n                if (typeof err === 'string' && err.substring(0, 6) === 'BREAK:') {\n                    err = err.substring(6);\n                    let errMsg = err.split(':');\n                    errToThrow = new skapi_error_1.default(errMsg[1], { code: errMsg[0] });\n                    break;\n                }\n                else {\n                    errToThrow = err;\n                }\n            }\n        }\n    }\n    else if (typeof struct === 'function') {\n        return struct(_params);\n    }\n    else if (typeof struct === 'string') {\n        if (Array.isArray(_params)) {\n            if (struct !== 'array') {\n                throw new skapi_error_1.default(`Invalid type \"${typeof _params}\"${isInvalid}`, { code: 'INVALID_PARAMETER' });\n            }\n            for (let p of _params) {\n                if (!['number', 'string', 'boolean'].includes(typeof p) && p !== null) {\n                    throw new skapi_error_1.default(`Invalid type \"${typeof p}\" in \"${_parentKey}\" array value.`, { code: 'INVALID_PARAMETER' });\n                }\n            }\n            val = _params;\n        }\n        else if (!['number', 'string', 'boolean', 'array', 'function'].includes(struct)) {\n            if (_params === struct) {\n                val = _params;\n            }\n            else {\n                throw new skapi_error_1.default(`Value: ${_params}${isInvalid}`, { code: 'INVALID_PARAMETER' });\n            }\n        }\n        else if (typeof _params === struct) {\n            if (struct === 'number') {\n                if (Math.abs(_params) > 4503599627370496) {\n                    throw `BREAK:INVALID_PARAMETER:\"${_parentKey}\" integer value should be within -4503599627370496 ~ +4503599627370546.`;\n                }\n            }\n            val = _params;\n        }\n        else {\n            throw new skapi_error_1.default(`Value: ${_params}${isInvalid}`, { code: 'INVALID_PARAMETER' });\n        }\n    }\n    else if (struct === null) {\n        val = _params;\n    }\n    if (val === undefined && errToThrow) {\n        throw errToThrow;\n    }\n    return val;\n}\nexports.checkParams = checkParams;\nfunction extractFormMetaData(form) {\n    function appendData(meta, key, val, append = true) {\n        if (meta[key] && append) {\n            if (Array.isArray(meta)) {\n                meta[key].push(val);\n            }\n            else {\n                meta[key] = [meta[key], val];\n            }\n        }\n        else {\n            meta[key] = val;\n        }\n    }\n    if (form instanceof FormData) {\n        let meta = {};\n        let totalFileSize = 0;\n        let files = [];\n        for (let pair of form.entries()) {\n            let name = pair[0];\n            let v = pair[1];\n            if (v instanceof File) {\n                if (!files.includes(name)) {\n                    files.push(name);\n                }\n                totalFileSize += Math.round((v.size / 1024));\n            }\n            else if (v instanceof FileList) {\n                if (!files.includes(name)) {\n                    files.push(name);\n                }\n                if (v && v.length > 0) {\n                    for (let idx = 0; idx <= v.length - 1; idx++) {\n                        totalFileSize += Math.round((v.item(idx).size / 1024));\n                    }\n                }\n            }\n            else {\n                appendData(meta, name, v);\n            }\n        }\n        if (totalFileSize > 5120) {\n            throw new skapi_error_1.default('Files cannot exceed 5MB. Use skapi.uploadFiles(...) instead.', { code: 'INVALID_REQUEST' });\n        }\n        return { meta, files };\n    }\n    else if (form instanceof HTMLFormElement) {\n        let meta = {};\n        let files = [];\n        let totalFileSize = 0;\n        let inputs = form.querySelectorAll('input');\n        let textarea = form.querySelectorAll('textarea');\n        for (let i of textarea) {\n            if (i.name) {\n                appendData(meta, i.name, i.value);\n            }\n        }\n        for (let i of inputs) {\n            if (i.name) {\n                if (i.type === 'number' && i.value) {\n                    appendData(meta, i.name, Number(i.value));\n                }\n                else if (i.type === 'checkbox' || i.type === 'radio') {\n                    if (i.value === 'on' || i.value === 'true') {\n                        appendData(meta, i.name, i.checked, false);\n                    }\n                    else if (i.value === 'false') {\n                        appendData(meta, i.name, !i.checked, false);\n                    }\n                    else if (i.checked) {\n                        appendData(meta, i.name, i.value, false);\n                    }\n                }\n                else if (i.type === 'file') {\n                    if (!files.includes(i.name)) {\n                        files.push(i.name);\n                    }\n                    if (i.files && i.files.length > 0) {\n                        for (let idx = 0; idx <= i.files.length - 1; idx++) {\n                            totalFileSize += Math.round((i.files.item(idx).size / 1024));\n                        }\n                    }\n                }\n                else {\n                    appendData(meta, i.name, i.value);\n                }\n            }\n        }\n        if (totalFileSize > 5120) {\n            throw new skapi_error_1.default('Files cannot exceed 5MB. Use skapi.uploadFiles(...) instead.', { code: 'INVALID_REQUEST' });\n        }\n        return { meta, files };\n    }\n    return null;\n}\nexports.extractFormMetaData = extractFormMetaData;\nfunction validateUserId(id, param = 'User ID') {\n    let uuid_regex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    if (!id) {\n        throw new skapi_error_1.default(`${param} is empty.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (typeof id !== 'string') {\n        throw new skapi_error_1.default(`${param} should be type: string.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (!id.match(uuid_regex)) {\n        throw new skapi_error_1.default(`${param} is invalid.`, { code: 'INVALID_PARAMETER' });\n    }\n    return id;\n}\nexports.validateUserId = validateUserId;\nfunction validatePhoneNumber(value) {\n    if (typeof value !== 'string' || value.charAt(0) !== '+' || isNaN(Number(value.substring(1)))) {\n        throw new skapi_error_1.default('\"phone_number\" is invalid. The format should be \"+00123456789\". Type: string.', { code: 'INVALID_PARAMETER' });\n    }\n    return value;\n}\nexports.validatePhoneNumber = validatePhoneNumber;\nfunction validateBirthdate(birthdate) {\n    if (typeof birthdate !== 'string') {\n        throw new skapi_error_1.default('\"birthdate\" is invalid. The format should be \"yyyy-mm-dd\". Type: string.', { code: 'INVALID_PARAMETER' });\n    }\n    else {\n        let date_regex = new RegExp(/([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/);\n        if (birthdate.length !== 10 || birthdate.split('-').length !== 3 || !date_regex.test(birthdate)) {\n            throw new skapi_error_1.default('\"birthdate\" is invalid. The format should be \"yyyy-mm-dd\". Type: string.', { code: 'INVALID_PARAMETER' });\n        }\n    }\n    return birthdate;\n}\nexports.validateBirthdate = validateBirthdate;\nfunction validatePassword(password) {\n    if (!password) {\n        throw new skapi_error_1.default('\"password\" is empty.', { code: 'PASSWORD_REQUIRED' });\n    }\n    else if (typeof password !== 'string') {\n        throw new skapi_error_1.default('\"password\" should be type: string.', { code: 'INVALID_PASSWORD' });\n    }\n    else if (password.length < 6) {\n        throw new skapi_error_1.default('\"password\" should be at least 6 characters.', { code: 'INVALID_PASSWORD' });\n    }\n    else if (password.length > 60) {\n        throw new skapi_error_1.default('\"password\" can be up to 60 characters max.', { code: 'INVALID_PASSWORD' });\n    }\n    return password;\n}\nexports.validatePassword = validatePassword;\nfunction validateEmail(email, paramName = 'email') {\n    if (!email) {\n        throw new skapi_error_1.default(`\"${paramName}\" is empty.`, { code: 'EMAIL_REQUIRED' });\n    }\n    else if (typeof email !== 'string') {\n        throw new skapi_error_1.default(`\"${paramName}\"should be type: string.`, { code: 'INVALID_EMAIL' });\n    }\n    else if (email.length < 5 || email.length > 64) {\n        throw new skapi_error_1.default(`\"${paramName}\" should be at least 5 characters and max 64 characters.`, { code: 'INVALID_EMAIL' });\n    }\n    else if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email)) {\n        email = email.trim();\n        let splitAt = email.split('@');\n        let tld = splitAt[1].split('.');\n        if (tld.length >= 2) {\n            return email.toLowerCase();\n        }\n    }\n    throw new skapi_error_1.default(`\"${email}\" is an invalid email.`, { code: 'INVALID_EMAIL' });\n}\nexports.validateEmail = validateEmail;\nfunction validateUrl(url) {\n    const baseUrl = (() => {\n        var _a;\n        let baseUrl = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.origin) || null;\n        if (baseUrl === 'file://') {\n            baseUrl += window.location.pathname;\n            let _baseUrl = baseUrl.split('/');\n            _baseUrl.pop();\n            baseUrl = _baseUrl.join('/');\n        }\n        return baseUrl;\n    })();\n    let check = (c) => {\n        if (typeof c === 'string') {\n            if (c === '*') {\n                return '*';\n            }\n            else {\n                let cu = c.trim();\n                if (!cu.includes(' ') && !cu.includes(',')) {\n                    if (cu.substring(0, 1) === '/' && baseUrl) {\n                        cu = baseUrl + cu;\n                    }\n                    let _url = null;\n                    try {\n                        _url = new URL(cu);\n                    }\n                    catch (err) {\n                        throw new skapi_error_1.default(`\"${c}\" is an invalid url.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    if (_url.protocol) {\n                        let url = _url.href;\n                        if (url.charAt(url.length - 1) === '/')\n                            url = url.substring(0, url.length - 1);\n                        return url;\n                    }\n                }\n            }\n        }\n        throw new skapi_error_1.default(`\"${c}\" is an invalid url.`, { code: 'INVALID_PARAMETER' });\n    };\n    if (Array.isArray(url)) {\n        return url.map(u => check(u));\n    }\n    else {\n        return check(url);\n    }\n}\nexports.validateUrl = validateUrl;\nfunction normalize_record_data(record) {\n    const output = {};\n    const keys = {\n        'rec': (r) => {\n            if (!r)\n                return;\n            output.record_id = r;\n            let base36timestamp = r.substring(0, 8);\n            output.uploaded = parseInt(base36timestamp, 36);\n        },\n        'usr': (r) => {\n            if (!r)\n                return;\n            output.user_id = r;\n        },\n        'tbl': (r) => {\n            if (!r)\n                return;\n            let rSplit = r.split('/');\n            output.table = rSplit[0];\n            output.access_group = rSplit[2] == '@@' ? 'private' : parseInt(rSplit[2]);\n            if (rSplit === null || rSplit === void 0 ? void 0 : rSplit[3]) {\n                output.subscription = {\n                    user_id: rSplit[3],\n                    group: parseInt(rSplit[4])\n                };\n            }\n        },\n        'idx': (r) => {\n            if (!r)\n                return;\n            let rSplit = r.split('!');\n            let name = rSplit.splice(0, 1)[0];\n            let value = normalize_typed_string(rSplit.join('!'));\n            output.index = {\n                name,\n                value\n            };\n        },\n        'ref': (r) => {\n            if (!r)\n                return;\n            output.reference = r.split('/')[0];\n        },\n        'tags': (r) => {\n            if (!r)\n                return;\n            output.tags = r;\n        },\n        'upd': (r) => {\n            if (!r)\n                return;\n            output.updated = r;\n        },\n        'acpt_mrf': (r) => {\n            if (!r)\n                return;\n            if (!(output === null || output === void 0 ? void 0 : output.config))\n                output.config = {};\n            output.config.allow_multiple_reference = r;\n        },\n        'ref_limt': (r) => {\n            if (!r)\n                return;\n            if (!(output === null || output === void 0 ? void 0 : output.config))\n                output.config = {};\n            output.config.reference_limit = r;\n        },\n        'rfd': (r) => {\n            output.referenced_count = r;\n        },\n        'prv_acs': (r) => {\n            if (!r)\n                return;\n            if (!(output === null || output === void 0 ? void 0 : output.config))\n                output.config = {};\n            output.config.private_access = r;\n        },\n        'data': (r) => {\n            let data = r;\n            if (r === '!D%{}') {\n                data = {};\n            }\n            else if (r === '!L%[]') {\n                data = [];\n            }\n            output.data = data;\n        }\n    };\n    if (record.record_id) {\n        return record;\n    }\n    for (let k in keys) {\n        keys[k](record[k]);\n    }\n    return output;\n}\nexports.normalize_record_data = normalize_record_data;\nfunction normalize_typed_string(v) {\n    let value = v.substring(2);\n    let type = v.substring(0, 2);\n    switch (type) {\n        case \"S%\":\n            return value;\n        case \"N%\":\n            return Number(value) - 4503599627370496;\n        case \"B%\":\n            return value === '1';\n        case \"L%\":\n            try {\n                return JSON.parse(value);\n            }\n            catch (err) {\n                throw new skapi_error_1.default('Value parse error.', { code: 'PARSE_ERROR' });\n            }\n        default:\n            return v;\n    }\n}\nfunction checkWhiteSpaceAndSpecialChars(string, p = 'parameter', allowPeriods = false, allowWhiteSpace = false) {\n    let checkStr = (s, array = false) => {\n        if (typeof s !== 'string') {\n            throw new skapi_error_1.default(`${p} should be type: <string | string[]>.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (!allowWhiteSpace && string.includes(' ')) {\n            throw new skapi_error_1.default(`${p} should not have whitespace.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (!allowPeriods && string.includes('.')) {\n            throw new skapi_error_1.default(`${p} should not have periods.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (/[`!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,<>\\/?~]/.test(s)) {\n            throw new skapi_error_1.default(`${p} should not have special characters.`, { code: 'INVALID_PARAMETER' });\n        }\n    };\n    if (Array.isArray(string)) {\n        for (let s of string) {\n            checkStr(s, true);\n        }\n    }\n    else {\n        checkStr(string, false);\n    }\n    return string;\n}\nexports.checkWhiteSpaceAndSpecialChars = checkWhiteSpaceAndSpecialChars;\n//# sourceMappingURL=utils.js.map","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar AuthenticationDetails = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationDetails object\n   * @param {object=} data Creation options.\n   * @param {string} data.Username User being authenticated.\n   * @param {string} data.Password Plain-text password to authenticate with.\n   * @param {(AttributeArg[])?} data.ValidationData Application extra metadata.\n   * @param {(AttributeArg[])?} data.AuthParamaters Authentication paramaters for custom auth.\n   */\n  function AuthenticationDetails(data) {\n    var _ref = data || {},\n      ValidationData = _ref.ValidationData,\n      Username = _ref.Username,\n      Password = _ref.Password,\n      AuthParameters = _ref.AuthParameters,\n      ClientMetadata = _ref.ClientMetadata;\n    this.validationData = ValidationData || {};\n    this.authParameters = AuthParameters || {};\n    this.clientMetadata = ClientMetadata || {};\n    this.username = Username;\n    this.password = Password;\n  }\n\n  /**\n   * @returns {string} the record's username\n   */\n  var _proto = AuthenticationDetails.prototype;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {string} the record's password\n   */;\n  _proto.getPassword = function getPassword() {\n    return this.password;\n  }\n\n  /**\n   * @returns {Array} the record's validationData\n   */;\n  _proto.getValidationData = function getValidationData() {\n    return this.validationData;\n  }\n\n  /**\n   * @returns {Array} the record's authParameters\n   */;\n  _proto.getAuthParameters = function getAuthParameters() {\n    return this.authParameters;\n  }\n\n  /**\n   * @returns {ClientMetadata} the clientMetadata for a Lambda trigger\n   */;\n  _proto.getClientMetadata = function getClientMetadata() {\n    return this.clientMetadata;\n  };\n  return AuthenticationDetails;\n}();\nexport { AuthenticationDetails as default };","var crypto;\n\n// Native crypto from window (Browser)\nif (typeof window !== 'undefined' && window.crypto) {\n  crypto = window.crypto;\n}\n\n// Native (experimental IE 11) crypto from window (Browser)\nif (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n  crypto = window.msCrypto;\n}\n\n// Native crypto from global (NodeJS)\nif (!crypto && typeof global !== 'undefined' && global.crypto) {\n  crypto = global.crypto;\n}\n\n// Native crypto import via require (NodeJS)\nif (!crypto && typeof require === 'function') {\n  try {\n    crypto = require('crypto');\n  } catch (err) {}\n}\n\n/*\n * Cryptographically secure pseudorandom number generator\n * As Math.random() is cryptographically not safe to use\n */\nexport default function cryptoSecureRandomInt() {\n  if (crypto) {\n    // Use getRandomValues method (Browser)\n    if (typeof crypto.getRandomValues === 'function') {\n      try {\n        return crypto.getRandomValues(new Uint32Array(1))[0];\n      } catch (err) {}\n    }\n\n    // Use randomBytes method (NodeJS)\n    if (typeof crypto.randomBytes === 'function') {\n      try {\n        return crypto.randomBytes(4).readInt32LE();\n      } catch (err) {}\n    }\n  }\n  throw new Error('Native crypto module could not be used to get secure random number.');\n}","import cryptoSecureRandomInt from './cryptoSecureRandomInt';\n\n/**\n * Hex encoding strategy.\n * Converts a word array to a hex string.\n * @param {WordArray} wordArray The word array.\n * @return {string} The hex string.\n * @static\n */\nfunction hexStringify(wordArray) {\n  // Shortcuts\n  var words = wordArray.words;\n  var sigBytes = wordArray.sigBytes;\n\n  // Convert\n  var hexChars = [];\n  for (var i = 0; i < sigBytes; i++) {\n    var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 0xff;\n    hexChars.push((bite >>> 4).toString(16));\n    hexChars.push((bite & 0x0f).toString(16));\n  }\n  return hexChars.join('');\n}\nvar WordArray = /*#__PURE__*/function () {\n  function WordArray(words, sigBytes) {\n    words = this.words = words || [];\n    if (sigBytes != undefined) {\n      this.sigBytes = sigBytes;\n    } else {\n      this.sigBytes = words.length * 4;\n    }\n  }\n  var _proto = WordArray.prototype;\n  _proto.random = function random(nBytes) {\n    var words = [];\n    for (var i = 0; i < nBytes; i += 4) {\n      words.push(cryptoSecureRandomInt());\n    }\n    return new WordArray(words, nBytes);\n  };\n  _proto.toString = function toString() {\n    return hexStringify(this);\n  };\n  return WordArray;\n}();\nexport { WordArray as default };","// A small implementation of BigInteger based on http://www-cs-students.stanford.edu/~tjw/jsbn/\n//\n// All public methods have been removed except the following:\n//   new BigInteger(a, b) (only radix 2, 4, 8, 16 and 32 supported)\n//   toString (only radix 2, 4, 8, 16 and 32 supported)\n//   negate\n//   abs\n//   compareTo\n//   bitLength\n//   mod\n//   equals\n//   add\n//   subtract\n//   multiply\n//   divide\n//   modPow\n\nexport default BigInteger;\n\n/*\n * Copyright (c) 2003-2005  Tom Wu\n * All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS-IS\" AND WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY\n * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n *\n * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,\n * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER\n * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF\n * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT\n * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * In addition, the following condition applies:\n *\n * All redistributions must retain an intact copy of this copyright notice\n * and disclaimer.\n */\n\n// (public) Constructor\nfunction BigInteger(a, b) {\n  if (a != null) this.fromString(a, b);\n}\n\n// return new, unset BigInteger\nfunction nbi() {\n  return new BigInteger(null);\n}\n\n// Bits per digit\nvar dbits;\n\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = (canary & 0xffffff) == 0xefcafe;\n\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n) {\n  while (--n >= 0) {\n    var v = x * this[i++] + w[j] + c;\n    c = Math.floor(v / 0x4000000);\n    w[j++] = v & 0x3ffffff;\n  }\n  return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n) {\n  var xl = x & 0x7fff,\n    xh = x >> 15;\n  while (--n >= 0) {\n    var l = this[i] & 0x7fff;\n    var h = this[i++] >> 15;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n    c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n    w[j++] = l & 0x3fffffff;\n  }\n  return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n) {\n  var xl = x & 0x3fff,\n    xh = x >> 14;\n  while (--n >= 0) {\n    var l = this[i] & 0x3fff;\n    var h = this[i++] >> 14;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n    c = (l >> 28) + (m >> 14) + xh * h;\n    w[j++] = l & 0xfffffff;\n  }\n  return c;\n}\nvar inBrowser = typeof navigator !== 'undefined';\nif (inBrowser && j_lm && navigator.appName == 'Microsoft Internet Explorer') {\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n} else if (inBrowser && j_lm && navigator.appName != 'Netscape') {\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n} else {\n  // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = (1 << dbits) - 1;\nBigInteger.prototype.DV = 1 << dbits;\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n\n// Digit conversions\nvar BI_RM = '0123456789abcdefghijklmnopqrstuvwxyz';\nvar BI_RC = new Array();\nvar rr, vv;\nrr = '0'.charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) {\n  BI_RC[rr++] = vv;\n}\nrr = 'a'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n  BI_RC[rr++] = vv;\n}\nrr = 'A'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n  BI_RC[rr++] = vv;\n}\nfunction int2char(n) {\n  return BI_RM.charAt(n);\n}\nfunction intAt(s, i) {\n  var c = BI_RC[s.charCodeAt(i)];\n  return c == null ? -1 : c;\n}\n\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n  for (var i = this.t - 1; i >= 0; --i) {\n    r[i] = this[i];\n  }\n  r.t = this.t;\n  r.s = this.s;\n}\n\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n  this.t = 1;\n  this.s = x < 0 ? -1 : 0;\n  if (x > 0) this[0] = x;else if (x < -1) this[0] = x + this.DV;else this.t = 0;\n}\n\n// return bigint initialized to value\nfunction nbv(i) {\n  var r = nbi();\n  r.fromInt(i);\n  return r;\n}\n\n// (protected) set from string and radix\nfunction bnpFromString(s, b) {\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  this.t = 0;\n  this.s = 0;\n  var i = s.length,\n    mi = false,\n    sh = 0;\n  while (--i >= 0) {\n    var x = intAt(s, i);\n    if (x < 0) {\n      if (s.charAt(i) == '-') mi = true;\n      continue;\n    }\n    mi = false;\n    if (sh == 0) this[this.t++] = x;else if (sh + k > this.DB) {\n      this[this.t - 1] |= (x & (1 << this.DB - sh) - 1) << sh;\n      this[this.t++] = x >> this.DB - sh;\n    } else this[this.t - 1] |= x << sh;\n    sh += k;\n    if (sh >= this.DB) sh -= this.DB;\n  }\n  this.clamp();\n  if (mi) BigInteger.ZERO.subTo(this, this);\n}\n\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n  var c = this.s & this.DM;\n  while (this.t > 0 && this[this.t - 1] == c) {\n    --this.t;\n  }\n}\n\n// (public) return string representation in given radix\nfunction bnToString(b) {\n  if (this.s < 0) return '-' + this.negate().toString(b);\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  var km = (1 << k) - 1,\n    d,\n    m = false,\n    r = '',\n    i = this.t;\n  var p = this.DB - i * this.DB % k;\n  if (i-- > 0) {\n    if (p < this.DB && (d = this[i] >> p) > 0) {\n      m = true;\n      r = int2char(d);\n    }\n    while (i >= 0) {\n      if (p < k) {\n        d = (this[i] & (1 << p) - 1) << k - p;\n        d |= this[--i] >> (p += this.DB - k);\n      } else {\n        d = this[i] >> (p -= k) & km;\n        if (p <= 0) {\n          p += this.DB;\n          --i;\n        }\n      }\n      if (d > 0) m = true;\n      if (m) r += int2char(d);\n    }\n  }\n  return m ? r : '0';\n}\n\n// (public) -this\nfunction bnNegate() {\n  var r = nbi();\n  BigInteger.ZERO.subTo(this, r);\n  return r;\n}\n\n// (public) |this|\nfunction bnAbs() {\n  return this.s < 0 ? this.negate() : this;\n}\n\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n  var r = this.s - a.s;\n  if (r != 0) return r;\n  var i = this.t;\n  r = i - a.t;\n  if (r != 0) return this.s < 0 ? -r : r;\n  while (--i >= 0) {\n    if ((r = this[i] - a[i]) != 0) return r;\n  }\n  return 0;\n}\n\n// returns bit length of the integer x\nfunction nbits(x) {\n  var r = 1,\n    t;\n  if ((t = x >>> 16) != 0) {\n    x = t;\n    r += 16;\n  }\n  if ((t = x >> 8) != 0) {\n    x = t;\n    r += 8;\n  }\n  if ((t = x >> 4) != 0) {\n    x = t;\n    r += 4;\n  }\n  if ((t = x >> 2) != 0) {\n    x = t;\n    r += 2;\n  }\n  if ((t = x >> 1) != 0) {\n    x = t;\n    r += 1;\n  }\n  return r;\n}\n\n// (public) return the number of bits in \"this\"\nfunction bnBitLength() {\n  if (this.t <= 0) return 0;\n  return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s & this.DM);\n}\n\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n, r) {\n  var i;\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + n] = this[i];\n  }\n  for (i = n - 1; i >= 0; --i) {\n    r[i] = 0;\n  }\n  r.t = this.t + n;\n  r.s = this.s;\n}\n\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n, r) {\n  for (var i = n; i < this.t; ++i) {\n    r[i - n] = this[i];\n  }\n  r.t = Math.max(this.t - n, 0);\n  r.s = this.s;\n}\n\n// (protected) r = this << n\nfunction bnpLShiftTo(n, r) {\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << cbs) - 1;\n  var ds = Math.floor(n / this.DB),\n    c = this.s << bs & this.DM,\n    i;\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + ds + 1] = this[i] >> cbs | c;\n    c = (this[i] & bm) << bs;\n  }\n  for (i = ds - 1; i >= 0; --i) {\n    r[i] = 0;\n  }\n  r[ds] = c;\n  r.t = this.t + ds + 1;\n  r.s = this.s;\n  r.clamp();\n}\n\n// (protected) r = this >> n\nfunction bnpRShiftTo(n, r) {\n  r.s = this.s;\n  var ds = Math.floor(n / this.DB);\n  if (ds >= this.t) {\n    r.t = 0;\n    return;\n  }\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << bs) - 1;\n  r[0] = this[ds] >> bs;\n  for (var i = ds + 1; i < this.t; ++i) {\n    r[i - ds - 1] |= (this[i] & bm) << cbs;\n    r[i - ds] = this[i] >> bs;\n  }\n  if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\n  r.t = this.t - ds;\n  r.clamp();\n}\n\n// (protected) r = this - a\nfunction bnpSubTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] - a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c -= a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c -= a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c -= a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c < -1) r[i++] = this.DV + c;else if (c > 0) r[i++] = c;\n  r.t = i;\n  r.clamp();\n}\n\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a, r) {\n  var x = this.abs(),\n    y = a.abs();\n  var i = x.t;\n  r.t = i + y.t;\n  while (--i >= 0) {\n    r[i] = 0;\n  }\n  for (i = 0; i < y.t; ++i) {\n    r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n  }\n  r.s = 0;\n  r.clamp();\n  if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\n}\n\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n  var x = this.abs();\n  var i = r.t = 2 * x.t;\n  while (--i >= 0) {\n    r[i] = 0;\n  }\n  for (i = 0; i < x.t - 1; ++i) {\n    var c = x.am(i, x[i], r, 2 * i, 0, 1);\n    if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n      r[i + x.t] -= x.DV;\n      r[i + x.t + 1] = 1;\n    }\n  }\n  if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n  r.s = 0;\n  r.clamp();\n}\n\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m, q, r) {\n  var pm = m.abs();\n  if (pm.t <= 0) return;\n  var pt = this.abs();\n  if (pt.t < pm.t) {\n    if (q != null) q.fromInt(0);\n    if (r != null) this.copyTo(r);\n    return;\n  }\n  if (r == null) r = nbi();\n  var y = nbi(),\n    ts = this.s,\n    ms = m.s;\n  var nsh = this.DB - nbits(pm[pm.t - 1]);\n  // normalize modulus\n  if (nsh > 0) {\n    pm.lShiftTo(nsh, y);\n    pt.lShiftTo(nsh, r);\n  } else {\n    pm.copyTo(y);\n    pt.copyTo(r);\n  }\n  var ys = y.t;\n  var y0 = y[ys - 1];\n  if (y0 == 0) return;\n  var yt = y0 * (1 << this.F1) + (ys > 1 ? y[ys - 2] >> this.F2 : 0);\n  var d1 = this.FV / yt,\n    d2 = (1 << this.F1) / yt,\n    e = 1 << this.F2;\n  var i = r.t,\n    j = i - ys,\n    t = q == null ? nbi() : q;\n  y.dlShiftTo(j, t);\n  if (r.compareTo(t) >= 0) {\n    r[r.t++] = 1;\n    r.subTo(t, r);\n  }\n  BigInteger.ONE.dlShiftTo(ys, t);\n  t.subTo(y, y);\n  // \"negative\" y so we can replace sub with am later\n  while (y.t < ys) {\n    y[y.t++] = 0;\n  }\n  while (--j >= 0) {\n    // Estimate quotient digit\n    var qd = r[--i] == y0 ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n    if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {\n      // Try it out\n      y.dlShiftTo(j, t);\n      r.subTo(t, r);\n      while (r[i] < --qd) {\n        r.subTo(t, r);\n      }\n    }\n  }\n  if (q != null) {\n    r.drShiftTo(ys, q);\n    if (ts != ms) BigInteger.ZERO.subTo(q, q);\n  }\n  r.t = ys;\n  r.clamp();\n  if (nsh > 0) r.rShiftTo(nsh, r);\n  // Denormalize remainder\n  if (ts < 0) BigInteger.ZERO.subTo(r, r);\n}\n\n// (public) this mod a\nfunction bnMod(a) {\n  var r = nbi();\n  this.abs().divRemTo(a, null, r);\n  if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\n  return r;\n}\n\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n  if (this.t < 1) return 0;\n  var x = this[0];\n  if ((x & 1) == 0) return 0;\n  var y = x & 3;\n  // y == 1/x mod 2^2\n  y = y * (2 - (x & 0xf) * y) & 0xf;\n  // y == 1/x mod 2^4\n  y = y * (2 - (x & 0xff) * y) & 0xff;\n  // y == 1/x mod 2^8\n  y = y * (2 - ((x & 0xffff) * y & 0xffff)) & 0xffff;\n  // y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n  y = y * (2 - x * y % this.DV) % this.DV;\n  // y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n  return y > 0 ? this.DV - y : -y;\n}\nfunction bnEquals(a) {\n  return this.compareTo(a) == 0;\n}\n\n// (protected) r = this + a\nfunction bnpAddTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] + a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c += a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c += a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c > 0) r[i++] = c;else if (c < -1) r[i++] = this.DV + c;\n  r.t = i;\n  r.clamp();\n}\n\n// (public) this + a\nfunction bnAdd(a) {\n  var r = nbi();\n  this.addTo(a, r);\n  return r;\n}\n\n// (public) this - a\nfunction bnSubtract(a) {\n  var r = nbi();\n  this.subTo(a, r);\n  return r;\n}\n\n// (public) this * a\nfunction bnMultiply(a) {\n  var r = nbi();\n  this.multiplyTo(a, r);\n  return r;\n}\n\n// (public) this / a\nfunction bnDivide(a) {\n  var r = nbi();\n  this.divRemTo(a, r, null);\n  return r;\n}\n\n// Montgomery reduction\nfunction Montgomery(m) {\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp & 0x7fff;\n  this.mph = this.mp >> 15;\n  this.um = (1 << m.DB - 15) - 1;\n  this.mt2 = 2 * m.t;\n}\n\n// xR mod m\nfunction montConvert(x) {\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t, r);\n  r.divRemTo(this.m, null, r);\n  if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\n  return r;\n}\n\n// x/R mod m\nfunction montRevert(x) {\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n}\n\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n  while (x.t <= this.mt2) {\n    // pad x so am has enough room later\n    x[x.t++] = 0;\n  }\n  for (var i = 0; i < this.m.t; ++i) {\n    // faster way of calculating u0 = x[i]*mp mod DV\n    var j = x[i] & 0x7fff;\n    var u0 = j * this.mpl + ((j * this.mph + (x[i] >> 15) * this.mpl & this.um) << 15) & x.DM;\n    // use am to combine the multiply-shift-add into one call\n    j = i + this.m.t;\n    x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n    // propagate carry\n    while (x[j] >= x.DV) {\n      x[j] -= x.DV;\n      x[++j]++;\n    }\n  }\n  x.clamp();\n  x.drShiftTo(this.m.t, x);\n  if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x, r) {\n  x.squareTo(r);\n  this.reduce(r);\n}\n\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n\n// (public) this^e % m (HAC 14.85)\nfunction bnModPow(e, m, callback) {\n  var i = e.bitLength(),\n    k,\n    r = nbv(1),\n    z = new Montgomery(m);\n  if (i <= 0) return r;else if (i < 18) k = 1;else if (i < 48) k = 3;else if (i < 144) k = 4;else if (i < 768) k = 5;else k = 6;\n\n  // precomputation\n  var g = new Array(),\n    n = 3,\n    k1 = k - 1,\n    km = (1 << k) - 1;\n  g[1] = z.convert(this);\n  if (k > 1) {\n    var g2 = nbi();\n    z.sqrTo(g[1], g2);\n    while (n <= km) {\n      g[n] = nbi();\n      z.mulTo(g2, g[n - 2], g[n]);\n      n += 2;\n    }\n  }\n  var j = e.t - 1,\n    w,\n    is1 = true,\n    r2 = nbi(),\n    t;\n  i = nbits(e[j]) - 1;\n  while (j >= 0) {\n    if (i >= k1) w = e[j] >> i - k1 & km;else {\n      w = (e[j] & (1 << i + 1) - 1) << k1 - i;\n      if (j > 0) w |= e[j - 1] >> this.DB + i - k1;\n    }\n    n = k;\n    while ((w & 1) == 0) {\n      w >>= 1;\n      --n;\n    }\n    if ((i -= n) < 0) {\n      i += this.DB;\n      --j;\n    }\n    if (is1) {\n      // ret == 1, don't bother squaring or multiplying it\n      g[w].copyTo(r);\n      is1 = false;\n    } else {\n      while (n > 1) {\n        z.sqrTo(r, r2);\n        z.sqrTo(r2, r);\n        n -= 2;\n      }\n      if (n > 0) z.sqrTo(r, r2);else {\n        t = r;\n        r = r2;\n        r2 = t;\n      }\n      z.mulTo(r2, g[w], r);\n    }\n    while (j >= 0 && (e[j] & 1 << i) == 0) {\n      z.sqrTo(r, r2);\n      t = r;\n      r = r2;\n      r2 = t;\n      if (--i < 0) {\n        i = this.DB - 1;\n        --j;\n      }\n    }\n  }\n  var result = z.revert(r);\n  callback(null, result);\n  return result;\n}\n\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.addTo = bnpAddTo;\n\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.modPow = bnModPow;\n\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\nimport CryptoJS from 'crypto-js/core';\nimport 'crypto-js/lib-typedarrays'; // necessary for crypto js\nimport SHA256 from 'crypto-js/sha256';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport WordArray from './utils/WordArray';\n\n/**\n * Returns a Buffer with a sequence of random nBytes\n *\n * @param {number} nBytes\n * @returns {Buffer} fixed-length sequence of random bytes\n */\n\nfunction randomBytes(nBytes) {\n  return Buffer.from(new WordArray().random(nBytes).toString(), 'hex');\n}\nimport BigInteger from './BigInteger';\n\n/**\n * Tests if a hex string has it most significant bit set (case-insensitive regex)\n */\nvar HEX_MSB_REGEX = /^[89a-f]/i;\nvar initN = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1' + '29024E088A67CC74020BBEA63B139B22514A08798E3404DD' + 'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245' + 'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED' + 'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D' + 'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F' + '83655D23DCA3AD961C62F356208552BB9ED529077096966D' + '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B' + 'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9' + 'DE2BCBF6955817183995497CEA956AE515D2261898FA0510' + '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64' + 'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7' + 'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B' + 'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C' + 'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31' + '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';\nvar newPasswordRequiredChallengeUserAttributePrefix = 'userAttributes.';\n\n/** @class */\nvar AuthenticationHelper = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationHelper object\n   * @param {string} PoolName Cognito user pool name.\n   */\n  function AuthenticationHelper(PoolName) {\n    this.N = new BigInteger(initN, 16);\n    this.g = new BigInteger('2', 16);\n    this.k = new BigInteger(this.hexHash(\"\" + this.padHex(this.N) + this.padHex(this.g)), 16);\n    this.smallAValue = this.generateRandomSmallA();\n    this.getLargeAValue(function () {});\n    this.infoBits = Buffer.from('Caldera Derived Key', 'utf8');\n    this.poolName = PoolName;\n  }\n\n  /**\n   * @returns {BigInteger} small A, a random number\n   */\n  var _proto = AuthenticationHelper.prototype;\n  _proto.getSmallAValue = function getSmallAValue() {\n    return this.smallAValue;\n  }\n\n  /**\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   */;\n  _proto.getLargeAValue = function getLargeAValue(callback) {\n    var _this = this;\n    if (this.largeAValue) {\n      callback(null, this.largeAValue);\n    } else {\n      this.calculateA(this.smallAValue, function (err, largeAValue) {\n        if (err) {\n          callback(err, null);\n        }\n        _this.largeAValue = largeAValue;\n        callback(null, _this.largeAValue);\n      });\n    }\n  }\n\n  /**\n   * helper function to generate a random big integer\n   * @returns {BigInteger} a random value.\n   * @private\n   */;\n  _proto.generateRandomSmallA = function generateRandomSmallA() {\n    // This will be interpreted as a postive 128-bit integer\n    var hexRandom = randomBytes(128).toString('hex');\n    var randomBigInt = new BigInteger(hexRandom, 16);\n\n    // There is no need to do randomBigInt.mod(this.N - 1) as N (3072-bit) is > 128 bytes (1024-bit)\n\n    return randomBigInt;\n  }\n\n  /**\n   * helper function to generate a random string\n   * @returns {string} a random value.\n   * @private\n   */;\n  _proto.generateRandomString = function generateRandomString() {\n    return randomBytes(40).toString('base64');\n  }\n\n  /**\n   * @returns {string} Generated random value included in password hash.\n   */;\n  _proto.getRandomPassword = function getRandomPassword() {\n    return this.randomPassword;\n  }\n\n  /**\n   * @returns {string} Generated random value included in devices hash.\n   */;\n  _proto.getSaltDevices = function getSaltDevices() {\n    return this.SaltToHashDevices;\n  }\n\n  /**\n   * @returns {string} Value used to verify devices.\n   */;\n  _proto.getVerifierDevices = function getVerifierDevices() {\n    return this.verifierDevices;\n  }\n\n  /**\n   * Generate salts and compute verifier.\n   * @param {string} deviceGroupKey Devices to generate verifier for.\n   * @param {string} username User to generate verifier for.\n   * @param {nodeCallback<null>} callback Called with (err, null)\n   * @returns {void}\n   */;\n  _proto.generateHashDevice = function generateHashDevice(deviceGroupKey, username, callback) {\n    var _this2 = this;\n    this.randomPassword = this.generateRandomString();\n    var combinedString = \"\" + deviceGroupKey + username + \":\" + this.randomPassword;\n    var hashedString = this.hash(combinedString);\n    var hexRandom = randomBytes(16).toString('hex');\n\n    // The random hex will be unambiguously represented as a postive integer\n    this.SaltToHashDevices = this.padHex(new BigInteger(hexRandom, 16));\n    this.g.modPow(new BigInteger(this.hexHash(this.SaltToHashDevices + hashedString), 16), this.N, function (err, verifierDevicesNotPadded) {\n      if (err) {\n        callback(err, null);\n      }\n      _this2.verifierDevices = _this2.padHex(verifierDevicesNotPadded);\n      callback(null, null);\n    });\n  }\n\n  /**\n   * Calculate the client's public value A = g^a%N\n   * with the generated random number a\n   * @param {BigInteger} a Randomly generated small A.\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   * @private\n   */;\n  _proto.calculateA = function calculateA(a, callback) {\n    var _this3 = this;\n    this.g.modPow(a, this.N, function (err, A) {\n      if (err) {\n        callback(err, null);\n      }\n      if (A.mod(_this3.N).equals(BigInteger.ZERO)) {\n        callback(new Error('Illegal paramater. A mod N cannot be 0.'), null);\n      }\n      callback(null, A);\n    });\n  }\n\n  /**\n   * Calculate the client's value U which is the hash of A and B\n   * @param {BigInteger} A Large A value.\n   * @param {BigInteger} B Server B value.\n   * @returns {BigInteger} Computed U value.\n   * @private\n   */;\n  _proto.calculateU = function calculateU(A, B) {\n    this.UHexHash = this.hexHash(this.padHex(A) + this.padHex(B));\n    var finalU = new BigInteger(this.UHexHash, 16);\n    return finalU;\n  }\n\n  /**\n   * Calculate a hash from a bitArray\n   * @param {Buffer} buf Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hash = function hash(buf) {\n    var str = buf instanceof Buffer ? CryptoJS.lib.WordArray.create(buf) : buf;\n    var hashHex = SHA256(str).toString();\n    return new Array(64 - hashHex.length).join('0') + hashHex;\n  }\n\n  /**\n   * Calculate a hash from a hex string\n   * @param {String} hexStr Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hexHash = function hexHash(hexStr) {\n    return this.hash(Buffer.from(hexStr, 'hex'));\n  }\n\n  /**\n   * Standard hkdf algorithm\n   * @param {Buffer} ikm Input key material.\n   * @param {Buffer} salt Salt value.\n   * @returns {Buffer} Strong key material.\n   * @private\n   */;\n  _proto.computehkdf = function computehkdf(ikm, salt) {\n    var infoBitsWordArray = CryptoJS.lib.WordArray.create(Buffer.concat([this.infoBits, Buffer.from(String.fromCharCode(1), 'utf8')]));\n    var ikmWordArray = ikm instanceof Buffer ? CryptoJS.lib.WordArray.create(ikm) : ikm;\n    var saltWordArray = salt instanceof Buffer ? CryptoJS.lib.WordArray.create(salt) : salt;\n    var prk = HmacSHA256(ikmWordArray, saltWordArray);\n    var hmac = HmacSHA256(infoBitsWordArray, prk);\n    return Buffer.from(hmac.toString(), 'hex').slice(0, 16);\n  }\n\n  /**\n   * Calculates the final hkdf based on computed S value, and computed U value and the key\n   * @param {String} username Username.\n   * @param {String} password Password.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {BigInteger} salt Generated salt.\n   * @param {nodeCallback<Buffer>} callback Called with (err, hkdfValue)\n   * @returns {void}\n   */;\n  _proto.getPasswordAuthenticationKey = function getPasswordAuthenticationKey(username, password, serverBValue, salt, callback) {\n    var _this4 = this;\n    if (serverBValue.mod(this.N).equals(BigInteger.ZERO)) {\n      throw new Error('B cannot be zero.');\n    }\n    this.UValue = this.calculateU(this.largeAValue, serverBValue);\n    if (this.UValue.equals(BigInteger.ZERO)) {\n      throw new Error('U cannot be zero.');\n    }\n    var usernamePassword = \"\" + this.poolName + username + \":\" + password;\n    var usernamePasswordHash = this.hash(usernamePassword);\n    var xValue = new BigInteger(this.hexHash(this.padHex(salt) + usernamePasswordHash), 16);\n    this.calculateS(xValue, serverBValue, function (err, sValue) {\n      if (err) {\n        callback(err, null);\n      }\n      var hkdf = _this4.computehkdf(Buffer.from(_this4.padHex(sValue), 'hex'), Buffer.from(_this4.padHex(_this4.UValue), 'hex'));\n      callback(null, hkdf);\n    });\n  }\n\n  /**\n   * Calculates the S value used in getPasswordAuthenticationKey\n   * @param {BigInteger} xValue Salted password hash value.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.calculateS = function calculateS(xValue, serverBValue, callback) {\n    var _this5 = this;\n    this.g.modPow(xValue, this.N, function (err, gModPowXN) {\n      if (err) {\n        callback(err, null);\n      }\n      var intValue2 = serverBValue.subtract(_this5.k.multiply(gModPowXN));\n      intValue2.modPow(_this5.smallAValue.add(_this5.UValue.multiply(xValue)), _this5.N, function (err2, result) {\n        if (err2) {\n          callback(err2, null);\n        }\n        callback(null, result.mod(_this5.N));\n      });\n    });\n  }\n\n  /**\n   * Return constant newPasswordRequiredChallengeUserAttributePrefix\n   * @return {newPasswordRequiredChallengeUserAttributePrefix} constant prefix value\n   */;\n  _proto.getNewPasswordRequiredChallengeUserAttributePrefix = function getNewPasswordRequiredChallengeUserAttributePrefix() {\n    return newPasswordRequiredChallengeUserAttributePrefix;\n  }\n\n  /**\n   * Returns an unambiguous, even-length hex string of the two's complement encoding of an integer.\n   *\n   * It is compatible with the hex encoding of Java's BigInteger's toByteArray(), wich returns a\n   * byte array containing the two's-complement representation of a BigInteger. The array contains\n   * the minimum number of bytes required to represent the BigInteger, including at least one sign bit.\n   *\n   * Examples showing how ambiguity is avoided by left padding with:\n   * \t\"00\" (for positive values where the most-significant-bit is set)\n   *  \"FF\" (for negative values where the most-significant-bit is set)\n   *\n   * padHex(bigInteger.fromInt(-236))  === \"FF14\"\n   * padHex(bigInteger.fromInt(20))    === \"14\"\n   *\n   * padHex(bigInteger.fromInt(-200))  === \"FF38\"\n   * padHex(bigInteger.fromInt(56))    === \"38\"\n   *\n   * padHex(bigInteger.fromInt(-20))   === \"EC\"\n   * padHex(bigInteger.fromInt(236))   === \"00EC\"\n   *\n   * padHex(bigInteger.fromInt(-56))   === \"C8\"\n   * padHex(bigInteger.fromInt(200))   === \"00C8\"\n   *\n   * @param {BigInteger} bigInt Number to encode.\n   * @returns {String} even-length hex string of the two's complement encoding.\n   */;\n  _proto.padHex = function padHex(bigInt) {\n    if (!(bigInt instanceof BigInteger)) {\n      throw new Error('Not a BigInteger');\n    }\n    var isNegative = bigInt.compareTo(BigInteger.ZERO) < 0;\n\n    /* Get a hex string for abs(bigInt) */\n    var hexStr = bigInt.abs().toString(16);\n\n    /* Pad hex to even length if needed */\n    hexStr = hexStr.length % 2 !== 0 ? \"0\" + hexStr : hexStr;\n\n    /* Prepend \"00\" if the most significant bit is set */\n    hexStr = HEX_MSB_REGEX.test(hexStr) ? \"00\" + hexStr : hexStr;\n    if (isNegative) {\n      /* Flip the bits of the representation */\n      var invertedNibbles = hexStr.split('').map(function (x) {\n        var invertedNibble = ~parseInt(x, 16) & 0xf;\n        return '0123456789ABCDEF'.charAt(invertedNibble);\n      }).join('');\n\n      /* After flipping the bits, add one to get the 2's complement representation */\n      var flippedBitsBI = new BigInteger(invertedNibbles, 16).add(BigInteger.ONE);\n      hexStr = flippedBitsBI.toString(16);\n\n      /*\n      For hex strings starting with 'FF8', 'FF' can be dropped, e.g. 0xFFFF80=0xFF80=0x80=-128\n      \t\tAny sequence of '1' bits on the left can always be substituted with a single '1' bit\n      without changing the represented value.\n      \t\tThis only happens in the case when the input is 80...00\n      */\n      if (hexStr.toUpperCase().startsWith('FF8')) {\n        hexStr = hexStr.substring(2);\n      }\n    }\n    return hexStr;\n  };\n  return AuthenticationHelper;\n}();\nexport { AuthenticationHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\n\n/** @class */\nvar CognitoJwtToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoJwtToken object\n   * @param {string=} token The JWT token.\n   */\n  function CognitoJwtToken(token) {\n    // Assign object\n    this.jwtToken = token || '';\n    this.payload = this.decodePayload();\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoJwtToken.prototype;\n  _proto.getJwtToken = function getJwtToken() {\n    return this.jwtToken;\n  }\n\n  /**\n   * @returns {int} the token's expiration (exp member).\n   */;\n  _proto.getExpiration = function getExpiration() {\n    return this.payload.exp;\n  }\n\n  /**\n   * @returns {int} the token's \"issued at\" (iat member).\n   */;\n  _proto.getIssuedAt = function getIssuedAt() {\n    return this.payload.iat;\n  }\n\n  /**\n   * @returns {object} the token's payload.\n   */;\n  _proto.decodePayload = function decodePayload() {\n    var payload = this.jwtToken.split('.')[1];\n    try {\n      return JSON.parse(Buffer.from(payload, 'base64').toString('utf8'));\n    } catch (err) {\n      return {};\n    }\n  };\n  return CognitoJwtToken;\n}();\nexport { CognitoJwtToken as default };","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CognitoJwtToken from './CognitoJwtToken';\n\n/** @class */\nvar CognitoAccessToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoAccessToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoAccessToken object\n   * @param {string=} AccessToken The JWT access token.\n   */\n  function CognitoAccessToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      AccessToken = _ref.AccessToken;\n    return _CognitoJwtToken.call(this, AccessToken || '') || this;\n  }\n  return CognitoAccessToken;\n}(CognitoJwtToken);\nexport { CognitoAccessToken as default };","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CognitoJwtToken from './CognitoJwtToken';\n\n/** @class */\nvar CognitoIdToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoIdToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoIdToken object\n   * @param {string=} IdToken The JWT Id token\n   */\n  function CognitoIdToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken;\n    return _CognitoJwtToken.call(this, IdToken || '') || this;\n  }\n  return CognitoIdToken;\n}(CognitoJwtToken);\nexport { CognitoIdToken as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoRefreshToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoRefreshToken object\n   * @param {string=} RefreshToken The JWT refresh token.\n   */\n  function CognitoRefreshToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      RefreshToken = _ref.RefreshToken;\n    // Assign object\n    this.token = RefreshToken || '';\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoRefreshToken.prototype;\n  _proto.getToken = function getToken() {\n    return this.token;\n  };\n  return CognitoRefreshToken;\n}();\nexport { CognitoRefreshToken as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserSession = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserSession object\n   * @param {CognitoIdToken} IdToken The session's Id token.\n   * @param {CognitoRefreshToken=} RefreshToken The session's refresh token.\n   * @param {CognitoAccessToken} AccessToken The session's access token.\n   * @param {int} ClockDrift The saved computer's clock drift or undefined to force calculation.\n   */\n  function CognitoUserSession(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken,\n      RefreshToken = _ref.RefreshToken,\n      AccessToken = _ref.AccessToken,\n      ClockDrift = _ref.ClockDrift;\n    if (AccessToken == null || IdToken == null) {\n      throw new Error('Id token and Access Token must be present.');\n    }\n    this.idToken = IdToken;\n    this.refreshToken = RefreshToken;\n    this.accessToken = AccessToken;\n    this.clockDrift = ClockDrift === undefined ? this.calculateClockDrift() : ClockDrift;\n  }\n\n  /**\n   * @returns {CognitoIdToken} the session's Id token\n   */\n  var _proto = CognitoUserSession.prototype;\n  _proto.getIdToken = function getIdToken() {\n    return this.idToken;\n  }\n\n  /**\n   * @returns {CognitoRefreshToken} the session's refresh token\n   */;\n  _proto.getRefreshToken = function getRefreshToken() {\n    return this.refreshToken;\n  }\n\n  /**\n   * @returns {CognitoAccessToken} the session's access token\n   */;\n  _proto.getAccessToken = function getAccessToken() {\n    return this.accessToken;\n  }\n\n  /**\n   * @returns {int} the session's clock drift\n   */;\n  _proto.getClockDrift = function getClockDrift() {\n    return this.clockDrift;\n  }\n\n  /**\n   * @returns {int} the computer's clock drift\n   */;\n  _proto.calculateClockDrift = function calculateClockDrift() {\n    var now = Math.floor(new Date() / 1000);\n    var iat = Math.min(this.accessToken.getIssuedAt(), this.idToken.getIssuedAt());\n    return now - iat;\n  }\n\n  /**\n   * Checks to see if the session is still valid based on session expiry information found\n   * in tokens and the current time (adjusted with clock drift)\n   * @returns {boolean} if the session is still valid\n   */;\n  _proto.isValid = function isValid() {\n    var now = Math.floor(new Date() / 1000);\n    var adjusted = now - this.clockDrift;\n    return adjusted < this.accessToken.getExpiration() && adjusted < this.idToken.getExpiration();\n  };\n  return CognitoUserSession;\n}();\nexport { CognitoUserSession as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nvar weekNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n/** @class */\nvar DateHelper = /*#__PURE__*/function () {\n  function DateHelper() {}\n  var _proto = DateHelper.prototype;\n  /**\n   * @returns {string} The current time in \"ddd MMM D HH:mm:ss UTC YYYY\" format.\n   */\n  _proto.getNowString = function getNowString() {\n    var now = new Date();\n    var weekDay = weekNames[now.getUTCDay()];\n    var month = monthNames[now.getUTCMonth()];\n    var day = now.getUTCDate();\n    var hours = now.getUTCHours();\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n    var minutes = now.getUTCMinutes();\n    if (minutes < 10) {\n      minutes = \"0\" + minutes;\n    }\n    var seconds = now.getUTCSeconds();\n    if (seconds < 10) {\n      seconds = \"0\" + seconds;\n    }\n    var year = now.getUTCFullYear();\n\n    // ddd MMM D HH:mm:ss UTC YYYY\n    var dateNow = weekDay + \" \" + month + \" \" + day + \" \" + hours + \":\" + minutes + \":\" + seconds + \" UTC \" + year;\n    return dateNow;\n  };\n  return DateHelper;\n}();\nexport { DateHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserAttribute = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserAttribute object\n   * @param {string=} Name The record's name\n   * @param {string=} Value The record's value\n   */\n  function CognitoUserAttribute(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      Name = _ref.Name,\n      Value = _ref.Value;\n    this.Name = Name || '';\n    this.Value = Value || '';\n  }\n\n  /**\n   * @returns {string} the record's value.\n   */\n  var _proto = CognitoUserAttribute.prototype;\n  _proto.getValue = function getValue() {\n    return this.Value;\n  }\n\n  /**\n   * Sets the record's value.\n   * @param {string} value The new value.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setValue = function setValue(value) {\n    this.Value = value;\n    return this;\n  }\n\n  /**\n   * @returns {string} the record's name.\n   */;\n  _proto.getName = function getName() {\n    return this.Name;\n  }\n\n  /**\n   * Sets the record's name\n   * @param {string} name The new name.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setName = function setName(name) {\n    this.Name = name;\n    return this;\n  }\n\n  /**\n   * @returns {string} a string representation of the record.\n   */;\n  _proto.toString = function toString() {\n    return JSON.stringify(this);\n  }\n\n  /**\n   * @returns {object} a flat object representing the record.\n   */;\n  _proto.toJSON = function toJSON() {\n    return {\n      Name: this.Name,\n      Value: this.Value\n    };\n  };\n  return CognitoUserAttribute;\n}();\nexport { CognitoUserAttribute as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar dataMemory = {};\n\n/** @class */\nexport var MemoryStorage = /*#__PURE__*/function () {\n  function MemoryStorage() {}\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  MemoryStorage.setItem = function setItem(key, value) {\n    dataMemory[key] = value;\n    return dataMemory[key];\n  }\n\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */;\n  MemoryStorage.getItem = function getItem(key) {\n    return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : undefined;\n  }\n\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {boolean} return true\n   */;\n  MemoryStorage.removeItem = function removeItem(key) {\n    return delete dataMemory[key];\n  }\n\n  /**\n   * This is used to clear the storage\n   * @returns {string} nothing\n   */;\n  MemoryStorage.clear = function clear() {\n    dataMemory = {};\n    return dataMemory;\n  };\n  return MemoryStorage;\n}();\n\n/** @class */\nvar StorageHelper = /*#__PURE__*/function () {\n  /**\n   * This is used to get a storage object\n   * @returns {object} the storage\n   */\n  function StorageHelper() {\n    try {\n      this.storageWindow = window.localStorage;\n      this.storageWindow.setItem('aws.cognito.test-ls', 1);\n      this.storageWindow.removeItem('aws.cognito.test-ls');\n    } catch (exception) {\n      this.storageWindow = MemoryStorage;\n    }\n  }\n\n  /**\n   * This is used to return the storage\n   * @returns {object} the storage\n   */\n  var _proto = StorageHelper.prototype;\n  _proto.getStorage = function getStorage() {\n    return this.storageWindow;\n  };\n  return StorageHelper;\n}();\nexport { StorageHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\nimport CryptoJS from 'crypto-js/core';\nimport TypedArrays from 'crypto-js/lib-typedarrays'; // necessary for crypto js\nimport Base64 from 'crypto-js/enc-base64';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport BigInteger from './BigInteger';\nimport AuthenticationHelper from './AuthenticationHelper';\nimport CognitoAccessToken from './CognitoAccessToken';\nimport CognitoIdToken from './CognitoIdToken';\nimport CognitoRefreshToken from './CognitoRefreshToken';\nimport CognitoUserSession from './CognitoUserSession';\nimport DateHelper from './DateHelper';\nimport CognitoUserAttribute from './CognitoUserAttribute';\nimport StorageHelper from './StorageHelper';\n\n/**\n * @callback nodeCallback\n * @template T result\n * @param {*} err The operation failure reason, or null.\n * @param {T} result The operation result.\n */\n\n/**\n * @callback onFailure\n * @param {*} err Failure reason.\n */\n\n/**\n * @callback onSuccess\n * @template T result\n * @param {T} result The operation result.\n */\n\n/**\n * @callback mfaRequired\n * @param {*} details MFA challenge details.\n */\n\n/**\n * @callback customChallenge\n * @param {*} details Custom challenge details.\n */\n\n/**\n * @callback inputVerificationCode\n * @param {*} data Server response.\n */\n\n/**\n * @callback authSuccess\n * @param {CognitoUserSession} session The new session.\n * @param {bool=} userConfirmationNecessary User must be confirmed.\n */\n\nvar isBrowser = typeof navigator !== 'undefined';\nvar userAgent = isBrowser ? navigator.userAgent : 'nodejs';\n\n/** @class */\nvar CognitoUser = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUser object\n   * @param {object} data Creation options\n   * @param {string} data.Username The user's username.\n   * @param {CognitoUserPool} data.Pool Pool containing the user.\n   * @param {object} data.Storage Optional storage object.\n   */\n  function CognitoUser(data) {\n    if (data == null || data.Username == null || data.Pool == null) {\n      throw new Error('Username and Pool information are required.');\n    }\n    this.username = data.Username || '';\n    this.pool = data.Pool;\n    this.Session = null;\n    this.client = data.Pool.client;\n    this.signInUserSession = null;\n    this.authenticationFlowType = 'USER_SRP_AUTH';\n    this.storage = data.Storage || new StorageHelper().getStorage();\n    this.keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    this.userDataKey = this.keyPrefix + \".\" + this.username + \".userData\";\n  }\n\n  /**\n   * Sets the session for this user\n   * @param {CognitoUserSession} signInUserSession the session\n   * @returns {void}\n   */\n  var _proto = CognitoUser.prototype;\n  _proto.setSignInUserSession = function setSignInUserSession(signInUserSession) {\n    this.clearCachedUserData();\n    this.signInUserSession = signInUserSession;\n    this.cacheTokens();\n  }\n\n  /**\n   * @returns {CognitoUserSession} the current session for this user\n   */;\n  _proto.getSignInUserSession = function getSignInUserSession() {\n    return this.signInUserSession;\n  }\n\n  /**\n   * @returns {string} the user's username\n   */;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {String} the authentication flow type\n   */;\n  _proto.getAuthenticationFlowType = function getAuthenticationFlowType() {\n    return this.authenticationFlowType;\n  }\n\n  /**\n   * sets authentication flow type\n   * @param {string} authenticationFlowType New value.\n   * @returns {void}\n   */;\n  _proto.setAuthenticationFlowType = function setAuthenticationFlowType(authenticationFlowType) {\n    this.authenticationFlowType = authenticationFlowType;\n  }\n\n  /**\n   * This is used for authenticating the user through the custom authentication flow.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.initiateAuth = function initiateAuth(authDetails, callback) {\n    var _this = this;\n    var authParameters = authDetails.getAuthParameters();\n    authParameters.USERNAME = this.username;\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'CUSTOM_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = data.ChallengeName;\n      var challengeParameters = data.ChallengeParameters;\n      if (challengeName === 'CUSTOM_CHALLENGE') {\n        _this.Session = data.Session;\n        return callback.customChallenge(challengeParameters);\n      }\n      _this.signInUserSession = _this.getCognitoUserSession(data.AuthenticationResult);\n      _this.cacheTokens();\n      return callback.onSuccess(_this.signInUserSession);\n    });\n  }\n\n  /**\n   * This is used for authenticating the user.\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUser = function authenticateUser(authDetails, callback) {\n    if (this.authenticationFlowType === 'USER_PASSWORD_AUTH') {\n      return this.authenticateUserPlainUsernamePassword(authDetails, callback);\n    } else if (this.authenticationFlowType === 'USER_SRP_AUTH' || this.authenticationFlowType === 'CUSTOM_AUTH') {\n      return this.authenticateUserDefaultAuth(authDetails, callback);\n    }\n    return callback.onFailure(new Error('Authentication flow type is invalid.'));\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * It calls the AuthenticationHelper for SRP related\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserDefaultAuth = function authenticateUserDefaultAuth(authDetails, callback) {\n    var _this2 = this;\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    var dateHelper = new DateHelper();\n    var serverBValue;\n    var salt;\n    var authParameters = {};\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    authParameters.USERNAME = this.username;\n    authenticationHelper.getLargeAValue(function (errOnAValue, aValue) {\n      // getLargeAValue callback start\n      if (errOnAValue) {\n        callback.onFailure(errOnAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      if (_this2.authenticationFlowType === 'CUSTOM_AUTH') {\n        authParameters.CHALLENGE_NAME = 'SRP_A';\n      }\n      var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n      var jsonReq = {\n        AuthFlow: _this2.authenticationFlowType,\n        ClientId: _this2.pool.getClientId(),\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetaData\n      };\n      if (_this2.getUserContextData(_this2.username)) {\n        jsonReq.UserContextData = _this2.getUserContextData(_this2.username);\n      }\n      _this2.client.request('InitiateAuth', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        _this2.username = challengeParameters.USER_ID_FOR_SRP;\n        _this2.userDataKey = _this2.keyPrefix + \".\" + _this2.username + \".userData\";\n        serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        salt = new BigInteger(challengeParameters.SALT, 16);\n        _this2.getCachedDeviceKeyAndPassword();\n        authenticationHelper.getPasswordAuthenticationKey(_this2.username, authDetails.getPassword(), serverBValue, salt, function (errOnHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errOnHkdf) {\n            callback.onFailure(errOnHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this2.pool.getUserPoolName(), 'utf8'), Buffer.from(_this2.username, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this2.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          if (_this2.deviceKey != null) {\n            challengeResponses.DEVICE_KEY = _this2.deviceKey;\n          }\n          var respondToAuthChallenge = function respondToAuthChallenge(challenge, challengeCallback) {\n            return _this2.client.request('RespondToAuthChallenge', challenge, function (errChallenge, dataChallenge) {\n              if (errChallenge && errChallenge.code === 'ResourceNotFoundException' && errChallenge.message.toLowerCase().indexOf('device') !== -1) {\n                challengeResponses.DEVICE_KEY = null;\n                _this2.deviceKey = null;\n                _this2.randomPassword = null;\n                _this2.deviceGroupKey = null;\n                _this2.clearCachedDeviceKeyAndPassword();\n                return respondToAuthChallenge(challenge, challengeCallback);\n              }\n              return challengeCallback(errChallenge, dataChallenge);\n            });\n          };\n          var jsonReqResp = {\n            ChallengeName: 'PASSWORD_VERIFIER',\n            ClientId: _this2.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session,\n            ClientMetadata: clientMetaData\n          };\n          if (_this2.getUserContextData()) {\n            jsonReqResp.UserContextData = _this2.getUserContextData();\n          }\n          respondToAuthChallenge(jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            return _this2.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserPlainUsernamePassword = function authenticateUserPlainUsernamePassword(authDetails, callback) {\n    var _this3 = this;\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.PASSWORD = authDetails.getPassword();\n    if (!authParameters.PASSWORD) {\n      callback.onFailure(new Error('PASSWORD parameter is required'));\n      return;\n    }\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'USER_PASSWORD_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData(this.username)) {\n      jsonReq.UserContextData = this.getUserContextData(this.username);\n    }\n    // USER_PASSWORD_AUTH happens in a single round-trip: client sends userName and password,\n    // Cognito UserPools verifies password and returns tokens.\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this3.authenticateUserInternal(authResult, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {object} dataAuthenticate authentication data\n   * @param {object} authenticationHelper helper created\n   * @param {callback} callback passed on from caller\n   * @returns {void}\n   */;\n  _proto.authenticateUserInternal = function authenticateUserInternal(dataAuthenticate, authenticationHelper, callback) {\n    var _this4 = this;\n    var challengeName = dataAuthenticate.ChallengeName;\n    var challengeParameters = dataAuthenticate.ChallengeParameters;\n    if (challengeName === 'SMS_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SELECT_MFA_TYPE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.selectMFAType(challengeName, challengeParameters);\n    }\n    if (challengeName === 'MFA_SETUP') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaSetup(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SOFTWARE_TOKEN_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.totpRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'CUSTOM_CHALLENGE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.customChallenge(challengeParameters);\n    }\n    if (challengeName === 'NEW_PASSWORD_REQUIRED') {\n      this.Session = dataAuthenticate.Session;\n      var userAttributes = null;\n      var rawRequiredAttributes = null;\n      var requiredAttributes = [];\n      var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n      if (challengeParameters) {\n        userAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes);\n        rawRequiredAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes);\n      }\n      if (rawRequiredAttributes) {\n        for (var i = 0; i < rawRequiredAttributes.length; i++) {\n          requiredAttributes[i] = rawRequiredAttributes[i].substr(userAttributesPrefix.length);\n        }\n      }\n      return callback.newPasswordRequired(userAttributes, requiredAttributes);\n    }\n    if (challengeName === 'DEVICE_SRP_AUTH') {\n      this.Session = dataAuthenticate.Session;\n      this.getDeviceResponse(callback);\n      return undefined;\n    }\n    this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n    this.challengeName = challengeName;\n    this.cacheTokens();\n    var newDeviceMetadata = dataAuthenticate.AuthenticationResult.NewDeviceMetadata;\n    if (newDeviceMetadata == null) {\n      return callback.onSuccess(this.signInUserSession);\n    }\n    authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n      if (errGenHash) {\n        return callback.onFailure(errGenHash);\n      }\n      var deviceSecretVerifierConfig = {\n        Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n        PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n      };\n      _this4.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n      _this4.deviceGroupKey = newDeviceMetadata.DeviceGroupKey;\n      _this4.randomPassword = authenticationHelper.getRandomPassword();\n      _this4.client.request('ConfirmDevice', {\n        DeviceKey: newDeviceMetadata.DeviceKey,\n        AccessToken: _this4.signInUserSession.getAccessToken().getJwtToken(),\n        DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n        DeviceName: userAgent\n      }, function (errConfirm, dataConfirm) {\n        if (errConfirm) {\n          return callback.onFailure(errConfirm);\n        }\n        _this4.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n        _this4.cacheDeviceKeyAndPassword();\n        if (dataConfirm.UserConfirmationNecessary === true) {\n          return callback.onSuccess(_this4.signInUserSession, dataConfirm.UserConfirmationNecessary);\n        }\n        return callback.onSuccess(_this4.signInUserSession);\n      });\n      return undefined;\n    });\n    return undefined;\n  }\n\n  /**\n   * This method is user to complete the NEW_PASSWORD_REQUIRED challenge.\n   * Pass the new password with any new user attributes to be updated.\n   * User attribute keys must be of format userAttributes.<attribute_name>.\n   * @param {string} newPassword new password for this user\n   * @param {object} requiredAttributeData map with values for all required attributes\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *         response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.completeNewPasswordChallenge = function completeNewPasswordChallenge(newPassword, requiredAttributeData, callback, clientMetadata) {\n    var _this5 = this;\n    if (!newPassword) {\n      return callback.onFailure(new Error('New password is required.'));\n    }\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n    var finalUserAttributes = {};\n    if (requiredAttributeData) {\n      Object.keys(requiredAttributeData).forEach(function (key) {\n        finalUserAttributes[userAttributesPrefix + key] = requiredAttributeData[key];\n      });\n    }\n    finalUserAttributes.NEW_PASSWORD = newPassword;\n    finalUserAttributes.USERNAME = this.username;\n    var jsonReq = {\n      ChallengeName: 'NEW_PASSWORD_REQUIRED',\n      ClientId: this.pool.getClientId(),\n      ChallengeResponses: finalUserAttributes,\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (errAuthenticate, dataAuthenticate) {\n      if (errAuthenticate) {\n        return callback.onFailure(errAuthenticate);\n      }\n      return _this5.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get a session using device authentication. It is called at the end of user\n   * authentication\n   *\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   * @private\n   */;\n  _proto.getDeviceResponse = function getDeviceResponse(callback, clientMetadata) {\n    var _this6 = this;\n    var authenticationHelper = new AuthenticationHelper(this.deviceGroupKey);\n    var dateHelper = new DateHelper();\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.DEVICE_KEY = this.deviceKey;\n    authenticationHelper.getLargeAValue(function (errAValue, aValue) {\n      // getLargeAValue callback start\n      if (errAValue) {\n        callback.onFailure(errAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      var jsonReq = {\n        ChallengeName: 'DEVICE_SRP_AUTH',\n        ClientId: _this6.pool.getClientId(),\n        ChallengeResponses: authParameters,\n        ClientMetadata: clientMetadata,\n        Session: _this6.Session\n      };\n      if (_this6.getUserContextData()) {\n        jsonReq.UserContextData = _this6.getUserContextData();\n      }\n      _this6.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        var serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        var salt = new BigInteger(challengeParameters.SALT, 16);\n        authenticationHelper.getPasswordAuthenticationKey(_this6.deviceKey, _this6.randomPassword, serverBValue, salt, function (errHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errHkdf) {\n            return callback.onFailure(errHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this6.deviceGroupKey, 'utf8'), Buffer.from(_this6.deviceKey, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this6.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          challengeResponses.DEVICE_KEY = _this6.deviceKey;\n          var jsonReqResp = {\n            ChallengeName: 'DEVICE_PASSWORD_VERIFIER',\n            ClientId: _this6.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session\n          };\n          if (_this6.getUserContextData()) {\n            jsonReqResp.UserContextData = _this6.getUserContextData();\n          }\n          _this6.client.request('RespondToAuthChallenge', jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            _this6.signInUserSession = _this6.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n            _this6.cacheTokens();\n            return callback.onSuccess(_this6.signInUserSession);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * This is used for a certain user to confirm the registration by using a confirmation code\n   * @param {string} confirmationCode Code entered by user.\n   * @param {bool} forceAliasCreation Allow migrating from an existing email / phone number.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmRegistration = function confirmRegistration(confirmationCode, forceAliasCreation, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      ConfirmationCode: confirmationCode,\n      Username: this.username,\n      ForceAliasCreation: forceAliasCreation,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmSignUp', jsonReq, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n  }\n\n  /**\n   * This is used by the user once he has the responses to a custom challenge\n   * @param {string} answerChallenge The custom challenge answer.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge\n   *    Custom challenge response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendCustomChallengeAnswer = function sendCustomChallengeAnswer(answerChallenge, callback, clientMetadata) {\n    var _this7 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: 'CUSTOM_CHALLENGE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this7.authenticateUserInternal(data, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * This is used by the user once he has an MFA code\n   * @param {string} confirmationCode The MFA code entered by the user.\n   * @param {object} callback Result callback map.\n   * @param {string} mfaType The mfa we are replying to.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendMFACode = function sendMFACode(confirmationCode, callback, mfaType, clientMetadata) {\n    var _this8 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.SMS_MFA_CODE = confirmationCode;\n    var mfaTypeSelection = mfaType || 'SMS_MFA';\n    if (mfaTypeSelection === 'SOFTWARE_TOKEN_MFA') {\n      challengeResponses.SOFTWARE_TOKEN_MFA_CODE = confirmationCode;\n    }\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: mfaTypeSelection,\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, dataAuthenticate) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = dataAuthenticate.ChallengeName;\n      if (challengeName === 'DEVICE_SRP_AUTH') {\n        _this8.getDeviceResponse(callback);\n        return undefined;\n      }\n      _this8.signInUserSession = _this8.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n      _this8.cacheTokens();\n      if (dataAuthenticate.AuthenticationResult.NewDeviceMetadata == null) {\n        return callback.onSuccess(_this8.signInUserSession);\n      }\n      var authenticationHelper = new AuthenticationHelper(_this8.pool.getUserPoolName());\n      authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n        if (errGenHash) {\n          return callback.onFailure(errGenHash);\n        }\n        var deviceSecretVerifierConfig = {\n          Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n          PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n        };\n        _this8.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n        _this8.deviceGroupKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey;\n        _this8.randomPassword = authenticationHelper.getRandomPassword();\n        _this8.client.request('ConfirmDevice', {\n          DeviceKey: dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,\n          AccessToken: _this8.signInUserSession.getAccessToken().getJwtToken(),\n          DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n          DeviceName: userAgent\n        }, function (errConfirm, dataConfirm) {\n          if (errConfirm) {\n            return callback.onFailure(errConfirm);\n          }\n          _this8.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n          _this8.cacheDeviceKeyAndPassword();\n          if (dataConfirm.UserConfirmationNecessary === true) {\n            return callback.onSuccess(_this8.signInUserSession, dataConfirm.UserConfirmationNecessary);\n          }\n          return callback.onSuccess(_this8.signInUserSession);\n        });\n        return undefined;\n      });\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to change the current password\n   * @param {string} oldUserPassword The current password.\n   * @param {string} newUserPassword The requested new password.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.changePassword = function changePassword(oldUserPassword, newUserPassword, callback, clientMetadata) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('ChangePassword', {\n      PreviousPassword: oldUserPassword,\n      ProposedPassword: newUserPassword,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.enableMFA = function enableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    var mfaEnabled = {\n      DeliveryMedium: 'SMS',\n      AttributeName: 'phone_number'\n    };\n    mfaOptions.push(mfaEnabled);\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @param {IMfaSettings} smsMfaSettings the sms mfa settings\n   * @param {IMFASettings} softwareTokenMfaSettings the software token mfa settings\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.setUserMfaPreference = function setUserMfaPreference(smsMfaSettings, softwareTokenMfaSettings, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('SetUserMFAPreference', {\n      SMSMfaSettings: smsMfaSettings,\n      SoftwareTokenMfaSettings: softwareTokenMfaSettings,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to disable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.disableMFA = function disableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to delete itself\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.deleteUser = function deleteUser(callback, clientMetadata) {\n    var _this9 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      _this9.clearCachedUser();\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * @typedef {CognitoUserAttribute | { Name:string, Value:string }} AttributeArg\n   */\n  /**\n   * This is used by an authenticated user to change a list of attributes\n   * @param {AttributeArg[]} attributes A list of the new user attributes.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.updateAttributes = function updateAttributes(attributes, callback, clientMetadata) {\n    var _this10 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('UpdateUserAttributes', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      UserAttributes: attributes,\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this10.getUserData(function () {\n        return callback(null, 'SUCCESS');\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to get a list of attributes\n   * @param {nodeCallback<CognitoUserAttribute[]>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getUserAttributes = function getUserAttributes(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      var attributeList = [];\n      for (var i = 0; i < userData.UserAttributes.length; i++) {\n        var attribute = {\n          Name: userData.UserAttributes[i].Name,\n          Value: userData.UserAttributes[i].Value\n        };\n        var userAttribute = new CognitoUserAttribute(attribute);\n        attributeList.push(userAttribute);\n      }\n      return callback(null, attributeList);\n    });\n    return undefined;\n  }\n\n  /**\n   * This was previously used by an authenticated user to get MFAOptions,\n   * but no longer returns a meaningful response. Refer to the documentation for\n   * how to setup and use MFA: https://docs.amplify.aws/lib/auth/mfa/q/platform/js\n   * @deprecated\n   * @param {nodeCallback<MFAOptions>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getMFAOptions = function getMFAOptions(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, userData.MFAOptions);\n    });\n    return undefined;\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.createGetUserRequest = function createGetUserRequest() {\n    return this.client.promisifyRequest('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.refreshSessionIfPossible = function refreshSessionIfPossible(options) {\n    var _this11 = this;\n    if (options === void 0) {\n      options = {};\n    }\n    // best effort, if not possible\n    return new Promise(function (resolve) {\n      var refresh = _this11.signInUserSession.getRefreshToken();\n      if (refresh && refresh.getToken()) {\n        _this11.refreshSession(refresh, resolve, options.clientMetadata);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * @typedef {Object} GetUserDataOptions\n   * @property {boolean} bypassCache - force getting data from Cognito service\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used by an authenticated users to get the userData\n   * @param {nodeCallback<UserData>} callback Called on success or error.\n   * @param {GetUserDataOptions} params\n   * @returns {void}\n   */;\n  _proto.getUserData = function getUserData(callback, params) {\n    var _this12 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.clearCachedUserData();\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var userData = this.getUserDataFromCache();\n    if (!userData) {\n      this.fetchUserData().then(function (data) {\n        callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    if (this.isFetchUserDataAndTokenRequired(params)) {\n      this.fetchUserData().then(function (data) {\n        return _this12.refreshSessionIfPossible(params).then(function () {\n          return data;\n        });\n      }).then(function (data) {\n        return callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    try {\n      callback(null, JSON.parse(userData));\n      return;\n    } catch (err) {\n      this.clearCachedUserData();\n      callback(err, null);\n      return;\n    }\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.getUserDataFromCache = function getUserDataFromCache() {\n    var userData = this.storage.getItem(this.userDataKey);\n    return userData;\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.isFetchUserDataAndTokenRequired = function isFetchUserDataAndTokenRequired(params) {\n    var _ref = params || {},\n      _ref$bypassCache = _ref.bypassCache,\n      bypassCache = _ref$bypassCache === void 0 ? false : _ref$bypassCache;\n    return bypassCache;\n  }\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.fetchUserData = function fetchUserData() {\n    var _this13 = this;\n    return this.createGetUserRequest().then(function (data) {\n      _this13.cacheUserData(data);\n      return data;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to delete a list of attributes\n   * @param {string[]} attributeList Names of the attributes to delete.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.deleteAttributes = function deleteAttributes(attributeList, callback) {\n    var _this14 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUserAttributes', {\n      UserAttributeNames: attributeList,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this14.getUserData(function () {\n        return callback(null, 'SUCCESS');\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by a user to resend a confirmation code\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.resendConfirmationCode = function resendConfirmationCode(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    this.client.request('ResendConfirmationCode', jsonReq, function (err, result) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, result);\n    });\n  }\n\n  /**\n   * @typedef {Object} GetSessionOptions\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used to get a session, either from the session object\n   * or from  the local storage, or by using a refresh token\n   *\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {GetSessionOptions} options\n   * @returns {void}\n   */;\n  _proto.getSession = function getSession(callback, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (this.username == null) {\n      return callback(new Error('Username is null. Cannot retrieve a new session'), null);\n    }\n    if (this.signInUserSession != null && this.signInUserSession.isValid()) {\n      return callback(null, this.signInUserSession);\n    }\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var idTokenKey = keyPrefix + \".idToken\";\n    var accessTokenKey = keyPrefix + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".clockDrift\";\n    if (this.storage.getItem(idTokenKey)) {\n      var idToken = new CognitoIdToken({\n        IdToken: this.storage.getItem(idTokenKey)\n      });\n      var accessToken = new CognitoAccessToken({\n        AccessToken: this.storage.getItem(accessTokenKey)\n      });\n      var refreshToken = new CognitoRefreshToken({\n        RefreshToken: this.storage.getItem(refreshTokenKey)\n      });\n      var clockDrift = parseInt(this.storage.getItem(clockDriftKey), 0) || 0;\n      var sessionData = {\n        IdToken: idToken,\n        AccessToken: accessToken,\n        RefreshToken: refreshToken,\n        ClockDrift: clockDrift\n      };\n      var cachedSession = new CognitoUserSession(sessionData);\n      if (cachedSession.isValid()) {\n        this.signInUserSession = cachedSession;\n        return callback(null, this.signInUserSession);\n      }\n      if (!refreshToken.getToken()) {\n        return callback(new Error('Cannot retrieve a new session. Please authenticate.'), null);\n      }\n      this.refreshSession(refreshToken, callback, options.clientMetadata);\n    } else {\n      callback(new Error('Local storage is missing an ID Token, Please authenticate'), null);\n    }\n    return undefined;\n  }\n\n  /**\n   * This uses the refreshToken to retrieve a new session\n   * @param {CognitoRefreshToken} refreshToken A previous session's refresh token.\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.refreshSession = function refreshSession(refreshToken, callback, clientMetadata) {\n    var _this15 = this;\n    var wrappedCallback = this.pool.wrapRefreshSessionCallback ? this.pool.wrapRefreshSessionCallback(callback) : callback;\n    var authParameters = {};\n    authParameters.REFRESH_TOKEN = refreshToken.getToken();\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    if (this.storage.getItem(lastUserKey)) {\n      this.username = this.storage.getItem(lastUserKey);\n      var deviceKeyKey = keyPrefix + \".\" + this.username + \".deviceKey\";\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      AuthFlow: 'REFRESH_TOKEN_AUTH',\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        if (err.code === 'NotAuthorizedException') {\n          _this15.clearCachedUser();\n        }\n        return wrappedCallback(err, null);\n      }\n      if (authResult) {\n        var authenticationResult = authResult.AuthenticationResult;\n        if (!Object.prototype.hasOwnProperty.call(authenticationResult, 'RefreshToken')) {\n          authenticationResult.RefreshToken = refreshToken.getToken();\n        }\n        _this15.signInUserSession = _this15.getCognitoUserSession(authenticationResult);\n        _this15.cacheTokens();\n        return wrappedCallback(null, _this15.signInUserSession);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used to save the session tokens to local storage\n   * @returns {void}\n   */;\n  _proto.cacheTokens = function cacheTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    this.storage.setItem(idTokenKey, this.signInUserSession.getIdToken().getJwtToken());\n    this.storage.setItem(accessTokenKey, this.signInUserSession.getAccessToken().getJwtToken());\n    this.storage.setItem(refreshTokenKey, this.signInUserSession.getRefreshToken().getToken());\n    this.storage.setItem(clockDriftKey, \"\" + this.signInUserSession.getClockDrift());\n    this.storage.setItem(lastUserKey, this.username);\n  }\n\n  /**\n   * This is to cache user data\n   */;\n  _proto.cacheUserData = function cacheUserData(userData) {\n    this.storage.setItem(this.userDataKey, JSON.stringify(userData));\n  }\n\n  /**\n   * This is to remove cached user data\n   */;\n  _proto.clearCachedUserData = function clearCachedUserData() {\n    this.storage.removeItem(this.userDataKey);\n  };\n  _proto.clearCachedUser = function clearCachedUser() {\n    this.clearCachedTokens();\n    this.clearCachedUserData();\n  }\n\n  /**\n   * This is used to cache the device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.cacheDeviceKeyAndPassword = function cacheDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.setItem(deviceKeyKey, this.deviceKey);\n    this.storage.setItem(randomPasswordKey, this.randomPassword);\n    this.storage.setItem(deviceGroupKeyKey, this.deviceGroupKey);\n  }\n\n  /**\n   * This is used to get current device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.getCachedDeviceKeyAndPassword = function getCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    if (this.storage.getItem(deviceKeyKey)) {\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      this.randomPassword = this.storage.getItem(randomPasswordKey);\n      this.deviceGroupKey = this.storage.getItem(deviceGroupKeyKey);\n    }\n  }\n\n  /**\n   * This is used to clear the device key info from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedDeviceKeyAndPassword = function clearCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.removeItem(deviceKeyKey);\n    this.storage.removeItem(randomPasswordKey);\n    this.storage.removeItem(deviceGroupKeyKey);\n  }\n\n  /**\n   * This is used to clear the session tokens from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedTokens = function clearCachedTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    this.storage.removeItem(idTokenKey);\n    this.storage.removeItem(accessTokenKey);\n    this.storage.removeItem(refreshTokenKey);\n    this.storage.removeItem(lastUserKey);\n    this.storage.removeItem(clockDriftKey);\n  }\n\n  /**\n   * This is used to build a user session from tokens retrieved in the authentication result\n   * @param {object} authResult Successful auth response from server.\n   * @returns {CognitoUserSession} The new user session.\n   * @private\n   */;\n  _proto.getCognitoUserSession = function getCognitoUserSession(authResult) {\n    var idToken = new CognitoIdToken(authResult);\n    var accessToken = new CognitoAccessToken(authResult);\n    var refreshToken = new CognitoRefreshToken(authResult);\n    var sessionData = {\n      IdToken: idToken,\n      AccessToken: accessToken,\n      RefreshToken: refreshToken\n    };\n    return new CognitoUserSession(sessionData);\n  }\n\n  /**\n   * This is used to initiate a forgot password request\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode?} callback.inputVerificationCode\n   *    Optional callback raised instead of onSuccess with response data.\n   * @param {onSuccess} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.forgotPassword = function forgotPassword(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ForgotPassword', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess(data);\n    });\n  }\n\n  /**\n   * This is used to confirm a new password using a confirmationCode\n   * @param {string} confirmationCode Code entered by user.\n   * @param {string} newPassword Confirm new password.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<void>} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmPassword = function confirmPassword(confirmationCode, newPassword, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ConfirmationCode: confirmationCode,\n      Password: newPassword,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmForgotPassword', jsonReq, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n  }\n\n  /**\n   * This is used to initiate an attribute confirmation request\n   * @param {string} attributeName User attribute that needs confirmation.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode} callback.inputVerificationCode Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.getAttributeVerificationCode = function getAttributeVerificationCode(attributeName, callback, clientMetadata) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetUserAttributeVerificationCode', {\n      AttributeName: attributeName,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to confirm an attribute using a confirmation code\n   * @param {string} attributeName Attribute being confirmed.\n   * @param {string} confirmationCode Code entered by user.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.verifyAttribute = function verifyAttribute(attributeName, confirmationCode, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('VerifyUserAttribute', {\n      AttributeName: attributeName,\n      Code: confirmationCode,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get the device information using the current device key\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device data.\n   * @returns {void}\n   */;\n  _proto.getDevice = function getDevice(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget a specific device\n   * @param {string} deviceKey Device key.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetSpecificDevice = function forgetSpecificDevice(deviceKey, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('ForgetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: deviceKey\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget the current device\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetDevice = function forgetDevice(callback) {\n    var _this16 = this;\n    this.forgetSpecificDevice(this.deviceKey, {\n      onFailure: callback.onFailure,\n      onSuccess: function onSuccess(result) {\n        _this16.deviceKey = null;\n        _this16.deviceGroupKey = null;\n        _this16.randomPassword = null;\n        _this16.clearCachedDeviceKeyAndPassword();\n        return callback.onSuccess(result);\n      }\n    });\n  }\n\n  /**\n   * This is used to set the device status as remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusRemembered = function setDeviceStatusRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to set the device status as not remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusNotRemembered = function setDeviceStatusNotRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'not_remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to list all devices for a user\n   *\n   * @param {int} limit the number of devices returned in a call\n   * @param {string | null} paginationToken the pagination token in case any was returned before\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device list.\n   * @returns {void}\n   */;\n  _proto.listDevices = function listDevices(limit, paginationToken, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    var requestParams = {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      Limit: limit\n    };\n    if (paginationToken) {\n      requestParams.PaginationToken = paginationToken;\n    }\n    this.client.request('ListDevices', requestParams, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to globally revoke all tokens issued to a user\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.globalSignOut = function globalSignOut(callback) {\n    var _this17 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GlobalSignOut', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this17.clearCachedUser();\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used for the user to signOut of the application and clear the cached tokens.\n   * @returns {void}\n   */;\n  _proto.signOut = function signOut(revokeTokenCallback) {\n    var _this18 = this;\n    // If tokens won't be revoked, we just clean the client data.\n    if (!revokeTokenCallback || typeof revokeTokenCallback !== 'function') {\n      this.cleanClientData();\n      return;\n    }\n    this.getSession(function (error, _session) {\n      if (error) {\n        return revokeTokenCallback(error);\n      }\n      _this18.revokeTokens(function (err) {\n        _this18.cleanClientData();\n        revokeTokenCallback(err);\n      });\n    });\n  };\n  _proto.revokeTokens = function revokeTokens(revokeTokenCallback) {\n    if (revokeTokenCallback === void 0) {\n      revokeTokenCallback = function revokeTokenCallback() {};\n    }\n    if (typeof revokeTokenCallback !== 'function') {\n      throw new Error('Invalid revokeTokenCallback. It should be a function.');\n    }\n    var tokensToBeRevoked = [];\n    if (!this.signInUserSession) {\n      var error = new Error('User is not authenticated');\n      return revokeTokenCallback(error);\n    }\n    if (!this.signInUserSession.getAccessToken()) {\n      var _error = new Error('No Access token available');\n      return revokeTokenCallback(_error);\n    }\n    var refreshToken = this.signInUserSession.getRefreshToken().getToken();\n    var accessToken = this.signInUserSession.getAccessToken();\n    if (this.isSessionRevocable(accessToken)) {\n      if (refreshToken) {\n        return this.revokeToken({\n          token: refreshToken,\n          callback: revokeTokenCallback\n        });\n      }\n    }\n    revokeTokenCallback();\n  };\n  _proto.isSessionRevocable = function isSessionRevocable(token) {\n    if (token && typeof token.decodePayload === 'function') {\n      try {\n        var _token$decodePayload = token.decodePayload(),\n          origin_jti = _token$decodePayload.origin_jti;\n        return !!origin_jti;\n      } catch (err) {\n        // Nothing to do, token doesnt have origin_jti claim\n      }\n    }\n    return false;\n  };\n  _proto.cleanClientData = function cleanClientData() {\n    this.signInUserSession = null;\n    this.clearCachedUser();\n  };\n  _proto.revokeToken = function revokeToken(_ref2) {\n    var token = _ref2.token,\n      callback = _ref2.callback;\n    this.client.requestWithRetry('RevokeToken', {\n      Token: token,\n      ClientId: this.pool.getClientId()\n    }, function (err) {\n      if (err) {\n        return callback(err);\n      }\n      callback();\n    });\n  }\n\n  /**\n   * This is used by a user trying to select a given MFA\n   * @param {string} answerChallenge the mfa the user wants\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.sendMFASelectionAnswer = function sendMFASelectionAnswer(answerChallenge, callback) {\n    var _this19 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var jsonReq = {\n      ChallengeName: 'SELECT_MFA_TYPE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this19.Session = data.Session;\n      if (answerChallenge === 'SMS_MFA') {\n        return callback.mfaRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      if (answerChallenge === 'SOFTWARE_TOKEN_MFA') {\n        return callback.totpRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This returns the user context data for advanced security feature.\n   * @returns {string} the user context data from CognitoUserPool\n   */;\n  _proto.getUserContextData = function getUserContextData() {\n    var pool = this.pool;\n    return pool.getUserContextData(this.username);\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to associate a TOTP MFA\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.associateSoftwareToken = function associateSoftwareToken(callback) {\n    var _this20 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('AssociateSoftwareToken', {\n        Session: this.Session\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this20.Session = data.Session;\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    } else {\n      this.client.request('AssociateSoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    }\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to verify a TOTP MFA\n   * @param {string} totpCode The MFA code entered by the user.\n   * @param {string} friendlyDeviceName The device name we are assigning to the device.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.verifySoftwareToken = function verifySoftwareToken(totpCode, friendlyDeviceName, callback) {\n    var _this21 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('VerifySoftwareToken', {\n        Session: this.Session,\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this21.Session = data.Session;\n        var challengeResponses = {};\n        challengeResponses.USERNAME = _this21.username;\n        var jsonReq = {\n          ChallengeName: 'MFA_SETUP',\n          ClientId: _this21.pool.getClientId(),\n          ChallengeResponses: challengeResponses,\n          Session: _this21.Session\n        };\n        if (_this21.getUserContextData()) {\n          jsonReq.UserContextData = _this21.getUserContextData();\n        }\n        _this21.client.request('RespondToAuthChallenge', jsonReq, function (errRespond, dataRespond) {\n          if (errRespond) {\n            return callback.onFailure(errRespond);\n          }\n          _this21.signInUserSession = _this21.getCognitoUserSession(dataRespond.AuthenticationResult);\n          _this21.cacheTokens();\n          return callback.onSuccess(_this21.signInUserSession);\n        });\n        return undefined;\n      });\n    } else {\n      this.client.request('VerifySoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.onSuccess(data);\n      });\n    }\n  };\n  return CognitoUser;\n}();\nexport { CognitoUser as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { version } from './version';\nvar BASE_USER_AGENT = \"aws-amplify/\" + version;\nexport var Platform = {\n  userAgent: BASE_USER_AGENT + \" js\",\n  product: '',\n  navigator: null,\n  isReactNative: false\n};\nif (typeof navigator !== 'undefined' && navigator.product) {\n  Platform.product = navigator.product || '';\n  Platform.navigator = navigator || null;\n  switch (navigator.product) {\n    case 'ReactNative':\n      Platform.userAgent = BASE_USER_AGENT + \" react-native\";\n      Platform.isReactNative = true;\n      break;\n    default:\n      Platform.userAgent = BASE_USER_AGENT + \" js\";\n      Platform.isReactNative = false;\n      break;\n  }\n}\nexport var getUserAgent = function getUserAgent() {\n  return Platform.userAgent;\n};\n\n/**\n * @deprecated use named import\n */\nexport default Platform;","import { getUserAgent } from \"./Platform\";\n// constructor\nfunction UserAgent() {}\n// public\nUserAgent.prototype.userAgent = getUserAgent();\nexport var appendToCognitoUserAgent = function appendToCognitoUserAgent(content) {\n  if (!content) {\n    return;\n  }\n  if (UserAgent.prototype.userAgent && !UserAgent.prototype.userAgent.includes(content)) {\n    UserAgent.prototype.userAgent = UserAgent.prototype.userAgent.concat(' ', content);\n  }\n  if (!UserAgent.prototype.userAgent || UserAgent.prototype.userAgent === '') {\n    UserAgent.prototype.userAgent = content;\n  }\n};\n\n// class for defining the amzn user-agent\nexport default UserAgent;","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nimport 'isomorphic-unfetch';\nimport UserAgent from './UserAgent';\nvar CognitoError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(CognitoError, _Error);\n  function CognitoError(message, code, name, statusCode) {\n    var _this;\n    _this = _Error.call(this, message) || this;\n    _this.code = code;\n    _this.name = name;\n    _this.statusCode = statusCode;\n    return _this;\n  }\n  return CognitoError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n/** @class */\nvar Client = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AWS Cognito Identity Provider client object\n   * @param {string} region AWS region\n   * @param {string} endpoint endpoint\n   * @param {object} fetchOptions options for fetch API (only credentials is supported)\n   */\n  function Client(region, endpoint, fetchOptions) {\n    this.endpoint = endpoint || \"https://cognito-idp.\" + region + \".amazonaws.com/\";\n    var _ref = fetchOptions || {},\n      credentials = _ref.credentials;\n    this.fetchOptions = credentials ? {\n      credentials: credentials\n    } : {};\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @returns Promise<object>\n   */\n  var _proto = Client.prototype;\n  _proto.promisifyRequest = function promisifyRequest(operation, params) {\n    var _this2 = this;\n    return new Promise(function (resolve, reject) {\n      _this2.request(operation, params, function (err, data) {\n        if (err) {\n          reject(new CognitoError(err.message, err.code, err.name, err.statusCode));\n        } else {\n          resolve(data);\n        }\n      });\n    });\n  };\n  _proto.requestWithRetry = function requestWithRetry(operation, params, callback) {\n    var _this3 = this;\n    var MAX_DELAY_IN_MILLIS = 5 * 1000;\n    jitteredExponentialRetry(function (p) {\n      return new Promise(function (res, rej) {\n        _this3.request(operation, p, function (error, result) {\n          if (error) {\n            rej(error);\n          } else {\n            res(result);\n          }\n        });\n      });\n    }, [params], MAX_DELAY_IN_MILLIS).then(function (result) {\n      return callback(null, result);\n    })[\"catch\"](function (error) {\n      return callback(error);\n    });\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @param {function} callback Callback called when a response is returned\n   * @returns {void}\n   */;\n  _proto.request = function request(operation, params, callback) {\n    var headers = {\n      'Content-Type': 'application/x-amz-json-1.1',\n      'X-Amz-Target': \"AWSCognitoIdentityProviderService.\" + operation,\n      'X-Amz-User-Agent': UserAgent.prototype.userAgent\n    };\n    var options = Object.assign({}, this.fetchOptions, {\n      headers: headers,\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      body: JSON.stringify(params)\n    });\n    var response;\n    var responseJsonData;\n    fetch(this.endpoint, options).then(function (resp) {\n      response = resp;\n      return resp;\n    }, function (err) {\n      // If error happens here, the request failed\n      // if it is TypeError throw network error\n      if (err instanceof TypeError) {\n        throw new Error('Network error');\n      }\n      throw err;\n    }).then(function (resp) {\n      return resp.json()[\"catch\"](function () {\n        return {};\n      });\n    }).then(function (data) {\n      // return parsed body stream\n      if (response.ok) return callback(null, data);\n      responseJsonData = data;\n\n      // Taken from aws-sdk-js/lib/protocol/json.js\n      // eslint-disable-next-line no-underscore-dangle\n      var code = (data.__type || data.code).split('#').pop();\n      var error = new Error(data.message || data.Message || null);\n      error.name = code;\n      error.code = code;\n      return callback(error);\n    })[\"catch\"](function (err) {\n      // first check if we have a service error\n      if (response && response.headers && response.headers.get('x-amzn-errortype')) {\n        try {\n          var code = response.headers.get('x-amzn-errortype').split(':')[0];\n          var error = new Error(response.status ? response.status.toString() : null);\n          error.code = code;\n          error.name = code;\n          error.statusCode = response.status;\n          return callback(error);\n        } catch (ex) {\n          return callback(err);\n        }\n        // otherwise check if error is Network error\n      } else if (err instanceof Error && err.message === 'Network error') {\n        err.code = 'NetworkError';\n      }\n      return callback(err);\n    });\n  };\n  return Client;\n}();\nexport { Client as default };\nvar logger = {\n  debug: function debug() {\n    // Intentionally blank. This package doesn't have logging\n  }\n};\n\n/**\n * For now, all errors are retryable.\n */\nvar NonRetryableError = /*#__PURE__*/function (_Error2) {\n  _inheritsLoose(NonRetryableError, _Error2);\n  function NonRetryableError(message) {\n    var _this4;\n    _this4 = _Error2.call(this, message) || this;\n    _this4.nonRetryable = true;\n    return _this4;\n  }\n  return NonRetryableError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar isNonRetryableError = function isNonRetryableError(obj) {\n  var key = 'nonRetryable';\n  return obj && obj[key];\n};\nfunction retry(functionToRetry, args, delayFn, attempt) {\n  if (attempt === void 0) {\n    attempt = 1;\n  }\n  if (typeof functionToRetry !== 'function') {\n    throw Error('functionToRetry must be a function');\n  }\n  logger.debug(functionToRetry.name + \" attempt #\" + attempt + \" with args: \" + JSON.stringify(args));\n  return functionToRetry.apply(void 0, args)[\"catch\"](function (err) {\n    logger.debug(\"error on \" + functionToRetry.name, err);\n    if (isNonRetryableError(err)) {\n      logger.debug(functionToRetry.name + \" non retryable error\", err);\n      throw err;\n    }\n    var retryIn = delayFn(attempt, args, err);\n    logger.debug(functionToRetry.name + \" retrying in \" + retryIn + \" ms\");\n    if (retryIn !== false) {\n      return new Promise(function (res) {\n        return setTimeout(res, retryIn);\n      }).then(function () {\n        return retry(functionToRetry, args, delayFn, attempt + 1);\n      });\n    } else {\n      throw err;\n    }\n  });\n}\nfunction jitteredBackoff(maxDelayMs) {\n  var BASE_TIME_MS = 100;\n  var JITTER_FACTOR = 100;\n  return function (attempt) {\n    var delay = Math.pow(2, attempt) * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n    return delay > maxDelayMs ? false : delay;\n  };\n}\nvar MAX_DELAY_MS = 5 * 60 * 1000;\nfunction jitteredExponentialRetry(functionToRetry, args, maxDelayMs) {\n  if (maxDelayMs === void 0) {\n    maxDelayMs = MAX_DELAY_MS;\n  }\n  return retry(functionToRetry, args, jitteredBackoff(maxDelayMs));\n}\n;","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Client from './Client';\nimport CognitoUser from './CognitoUser';\nimport StorageHelper from './StorageHelper';\nvar USER_POOL_ID_MAX_LENGTH = 55;\n\n/** @class */\nvar CognitoUserPool = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserPool object\n   * @param {object} data Creation options.\n   * @param {string} data.UserPoolId Cognito user pool id.\n   * @param {string} data.ClientId User pool application client id.\n   * @param {string} data.endpoint Optional custom service endpoint.\n   * @param {object} data.fetchOptions Optional options for fetch API.\n   *        (only credentials option is supported)\n   * @param {object} data.Storage Optional storage object.\n   * @param {boolean} data.AdvancedSecurityDataCollectionFlag Optional:\n   *        boolean flag indicating if the data collection is enabled\n   *        to support cognito advanced security features. By default, this\n   *        flag is set to true.\n   */\n  function CognitoUserPool(data, wrapRefreshSessionCallback) {\n    var _ref = data || {},\n      UserPoolId = _ref.UserPoolId,\n      ClientId = _ref.ClientId,\n      endpoint = _ref.endpoint,\n      fetchOptions = _ref.fetchOptions,\n      AdvancedSecurityDataCollectionFlag = _ref.AdvancedSecurityDataCollectionFlag;\n    if (!UserPoolId || !ClientId) {\n      throw new Error('Both UserPoolId and ClientId are required.');\n    }\n    if (UserPoolId.length > USER_POOL_ID_MAX_LENGTH || !/^[\\w-]+_[0-9a-zA-Z]+$/.test(UserPoolId)) {\n      throw new Error('Invalid UserPoolId format.');\n    }\n    var region = UserPoolId.split('_')[0];\n    this.userPoolId = UserPoolId;\n    this.clientId = ClientId;\n    this.client = new Client(region, endpoint, fetchOptions);\n\n    /**\n     * By default, AdvancedSecurityDataCollectionFlag is set to true,\n     * if no input value is provided.\n     */\n    this.advancedSecurityDataCollectionFlag = AdvancedSecurityDataCollectionFlag !== false;\n    this.storage = data.Storage || new StorageHelper().getStorage();\n    if (wrapRefreshSessionCallback) {\n      this.wrapRefreshSessionCallback = wrapRefreshSessionCallback;\n    }\n  }\n\n  /**\n   * @returns {string} the user pool id\n   */\n  var _proto = CognitoUserPool.prototype;\n  _proto.getUserPoolId = function getUserPoolId() {\n    return this.userPoolId;\n  }\n\n  /**\n   * @returns {string} the user pool name\n   */;\n  _proto.getUserPoolName = function getUserPoolName() {\n    return this.getUserPoolId().split('_')[1];\n  }\n\n  /**\n   * @returns {string} the client id\n   */;\n  _proto.getClientId = function getClientId() {\n    return this.clientId;\n  }\n\n  /**\n   * @typedef {object} SignUpResult\n   * @property {CognitoUser} user New user.\n   * @property {bool} userConfirmed If the user is already confirmed.\n   */\n  /**\n   * method for signing up a user\n   * @param {string} username User's username.\n   * @param {string} password Plain-text initial password entered by user.\n   * @param {(AttributeArg[])=} userAttributes New user attributes.\n   * @param {(AttributeArg[])=} validationData Application metadata.\n   * @param {(AttributeArg[])=} clientMetadata Client metadata.\n   * @param {nodeCallback<SignUpResult>} callback Called on error or with the new user.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.signUp = function signUp(username, password, userAttributes, validationData, callback, clientMetadata) {\n    var _this = this;\n    var jsonReq = {\n      ClientId: this.clientId,\n      Username: username,\n      Password: password,\n      UserAttributes: userAttributes,\n      ValidationData: validationData,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData(username)) {\n      jsonReq.UserContextData = this.getUserContextData(username);\n    }\n    this.client.request('SignUp', jsonReq, function (err, data) {\n      if (err) {\n        return callback(err, null);\n      }\n      var cognitoUser = {\n        Username: username,\n        Pool: _this,\n        Storage: _this.storage\n      };\n      var returnData = {\n        user: new CognitoUser(cognitoUser),\n        userConfirmed: data.UserConfirmed,\n        userSub: data.UserSub,\n        codeDeliveryDetails: data.CodeDeliveryDetails\n      };\n      return callback(null, returnData);\n    });\n  }\n\n  /**\n   * method for getting the current user of the application from the local storage\n   *\n   * @returns {CognitoUser} the user retrieved from storage\n   */;\n  _proto.getCurrentUser = function getCurrentUser() {\n    var lastUserKey = \"CognitoIdentityServiceProvider.\" + this.clientId + \".LastAuthUser\";\n    var lastAuthUser = this.storage.getItem(lastUserKey);\n    if (lastAuthUser) {\n      var cognitoUser = {\n        Username: lastAuthUser,\n        Pool: this,\n        Storage: this.storage\n      };\n      return new CognitoUser(cognitoUser);\n    }\n    return null;\n  }\n\n  /**\n   * This method returns the encoded data string used for cognito advanced security feature.\n   * This would be generated only when developer has included the JS used for collecting the\n   * data on their client. Please refer to documentation to know more about using AdvancedSecurity\n   * features\n   * @param {string} username the username for the context data\n   * @returns {string} the user context data\n   **/;\n  _proto.getUserContextData = function getUserContextData(username) {\n    if (typeof AmazonCognitoAdvancedSecurityData === 'undefined') {\n      return undefined;\n    }\n    /* eslint-disable */\n    var amazonCognitoAdvancedSecurityDataConst = AmazonCognitoAdvancedSecurityData;\n    /* eslint-enable */\n\n    if (this.advancedSecurityDataCollectionFlag) {\n      var advancedSecurityData = amazonCognitoAdvancedSecurityDataConst.getData(username, this.userPoolId, this.clientId);\n      if (advancedSecurityData) {\n        var userContextData = {\n          EncodedData: advancedSecurityData\n        };\n        return userContextData;\n      }\n    }\n    return {};\n  };\n  return CognitoUserPool;\n}();\nexport { CognitoUserPool as default };","import * as Cookies from 'js-cookie';\n\n/** @class */\nvar CookieStorage = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CookieStorage object\n   * @param {object} data Creation options.\n   * @param {string} data.domain Cookies domain (mandatory).\n   * @param {string} data.path Cookies path (default: '/')\n   * @param {integer} data.expires Cookie expiration (in days, default: 365)\n   * @param {boolean} data.secure Cookie secure flag (default: true)\n   * @param {string} data.sameSite Cookie request behaviour (default: null)\n   */\n  function CookieStorage(data) {\n    if (data.domain) {\n      this.domain = data.domain;\n    } else {\n      throw new Error('The domain of cookieStorage can not be undefined.');\n    }\n    if (data.path) {\n      this.path = data.path;\n    } else {\n      this.path = '/';\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'expires')) {\n      this.expires = data.expires;\n    } else {\n      this.expires = 365;\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'secure')) {\n      this.secure = data.secure;\n    } else {\n      this.secure = true;\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'sameSite')) {\n      if (!['strict', 'lax', 'none'].includes(data.sameSite)) {\n        throw new Error('The sameSite value of cookieStorage must be \"lax\", \"strict\" or \"none\".');\n      }\n      if (data.sameSite === 'none' && !this.secure) {\n        throw new Error('sameSite = None requires the Secure attribute in latest browser versions.');\n      }\n      this.sameSite = data.sameSite;\n    } else {\n      this.sameSite = null;\n    }\n  }\n\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  var _proto = CookieStorage.prototype;\n  _proto.setItem = function setItem(key, value) {\n    var options = {\n      path: this.path,\n      expires: this.expires,\n      domain: this.domain,\n      secure: this.secure\n    };\n    if (this.sameSite) {\n      options.sameSite = this.sameSite;\n    }\n    Cookies.set(key, value, options);\n    return Cookies.get(key);\n  }\n\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */;\n  _proto.getItem = function getItem(key) {\n    return Cookies.get(key);\n  }\n\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {string} value - value that was deleted\n   */;\n  _proto.removeItem = function removeItem(key) {\n    var options = {\n      path: this.path,\n      expires: this.expires,\n      domain: this.domain,\n      secure: this.secure\n    };\n    if (this.sameSite) {\n      options.sameSite = this.sameSite;\n    }\n    return Cookies.remove(key, options);\n  }\n\n  /**\n   * This is used to clear the storage of optional\n   * items that were previously set\n   * @returns {} an empty object\n   */;\n  _proto.clear = function clear() {\n    var cookies = Cookies.get();\n    var numKeys = Object.keys(cookies).length;\n    for (var index = 0; index < numKeys; ++index) {\n      this.removeItem(Object.keys(cookies)[index]);\n    }\n    return {};\n  };\n  return CookieStorage;\n}();\nexport { CookieStorage as default };","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              var bitsCombined = bits1 | bits2;\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha256\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha256\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacSHA256;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Check if typed arrays are supported\n\t    if (typeof ArrayBuffer != 'function') {\n\t        return;\n\t    }\n\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\n\t    // Reference original init\n\t    var superInit = WordArray.init;\n\n\t    // Augment WordArray.init to handle typed arrays\n\t    var subInit = WordArray.init = function (typedArray) {\n\t        // Convert buffers to uint8\n\t        if (typedArray instanceof ArrayBuffer) {\n\t            typedArray = new Uint8Array(typedArray);\n\t        }\n\n\t        // Convert other array views to uint8\n\t        if (\n\t            typedArray instanceof Int8Array ||\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\n\t            typedArray instanceof Int16Array ||\n\t            typedArray instanceof Uint16Array ||\n\t            typedArray instanceof Int32Array ||\n\t            typedArray instanceof Uint32Array ||\n\t            typedArray instanceof Float32Array ||\n\t            typedArray instanceof Float64Array\n\t        ) {\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n\t        }\n\n\t        // Handle Uint8Array\n\t        if (typedArray instanceof Uint8Array) {\n\t            // Shortcut\n\t            var typedArrayByteLength = typedArray.byteLength;\n\n\t            // Extract bytes\n\t            var words = [];\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\n\t            }\n\n\t            // Initialize this word array\n\t            superInit.call(this, words, typedArrayByteLength);\n\t        } else {\n\t            // Else call normal init\n\t            superInit.apply(this, arguments);\n\t        }\n\t    };\n\n\t    subInit.prototype = WordArray;\n\t}());\n\n\n\treturn CryptoJS.lib.WordArray;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = self.fetch || (self.fetch = require('unfetch').default || require('unfetch'));\n","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","export default function(e,n){return n=n||{},new Promise(function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||\"get\",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+\",\"+t:t}),t(a())},s.onerror=r,s.withCredentials=\"include\"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)})}\n//# sourceMappingURL=unfetch.module.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(864);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","__importDefault","this","mod","__esModule","Object","defineProperty","value","SkapiError","Skapi","skapi_1","default","skapi_error_1","formResponse","target","propertyKey","descriptor","fn","arg","form","option","handleResponse","response","code","HTMLFormElement","href","URL","action","response_key","timestamp","Date","now","toString","window","sessionStorage","setItem","JSON","stringify","searchParams","set","location","handleError","err","is_err","Error","onerror","bind","Promise","res","rej","then","r","catch","__decorate","decorators","key","desc","d","c","arguments","length","getOwnPropertyDescriptor","Reflect","decorate","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","next","e","rejected","result","done","apply","amazon_cognito_identity_js_1","decorators_1","utils_1","user","__user","keys","parse","constructor","service_id","service_owner","autoLogin","cognitoUser","__disabledAccount","__serviceHash","__pendingRequest","__cached_requests","__startKey_keys","__request_signup_confirmation","__index_number_range","__class_properties_has_been_cached","session","connection","host","hostDomain","userPool","regex","validateUserId","val","validateUrl","validatePhoneNumber","validateBirthdate","validateEmail","update_startKey_keys","_a","hashedParam","url","fetched","hasOwnProperty","startKey_string","startKey","includes","push","assign","startKey_list","_fetch","opt","responseType","fetch","status","received","text","method","body","errCode","message","errMsg","split","splice","join","_get","params","substring","query","map","k","encodeURIComponent","service","cdn_domain","sreg","admin_endpoint","blob","reader","FileReader","onloadend","readAsDataURL","data","atob","record_endpoint","__connection","skapi","restore","getItem","CognitoUserPool","UserPoolId","userpool_id","ClientId","userpool_client","process","updateConnection","authentication","updateSession","refreshToken","all","storeClassProperties","to_be_cached","addEventListener","static","currentUser","getCurrentUser","getSession","updateAttributes","sessionToMerge","isValid","getUserAttributes","attrErr","attributes","normalized_attributes","Name","Value","replace","Number","access_group","idToken","payload","user_id","sub","refreshSession","getRefreshToken","refreshErr","refreshedSession","createCognitoUser","email","hash","request_hash","CognitoUser","Username","Pool","cognitoUsername","authenticateUser","username","password","logout","initUser","authenticationDetails","AuthenticationDetails","Password","newPasswordRequired","userAttributes","requiredAttributes","onSuccess","logged","onFailure","error","cause","requireAdmin","_b","_c","_d","_e","_f","ignoreVerification","email_verified","throwError","getBlob","p","checkParams","v","request","auth","contentType","mock","options","secureRequest","paramsStruct","sync","Array","isArray","getFormResponse","URLSearchParams","search","entries","stored","removeItem","_g","_h","_j","meta","bypassAwaitConnection","console","log","token","jwtToken","isExternalUrl","endpoint","dest","endpoints","admin","record","public","admin_public","private","admin_private","record_private","record_public","get_ep","getEndpoint","owner","required","fetchOptions","refresh","fetOpt","limit","ascending","metaData","extractFormMetaData","isForm","fileKeys","files","normalize_form","addRequired","_k","_l","isFormEl","FormData","undefined","Blob","type","formData","cb","requestKey","load_startKey_keys","headers","Authorization","_post","_m","_o","_p","_q","list","endOfList","hashedParams","orderObjectKeys","obj","sortObject","sort","reduce","_obj","h","sha256","st","hashedParams_cached","list_of_startKeys","last_startKey_key","cache_hashedParams","postRecord","is_admin","record_id","table","subscription_group","reference","index","name","tags","config","reference_limit","allow_multiple_reference","private_access","param","u","checkWhiteSpaceAndSpecialChars","postData","normalize_record_data","getRecords","indexTypes","struct","subscription","group","tp","condition","range","getTable","convert","t","getIndex","order_by","iSplit","idx","resolved","number_of_records","cnt_rec","number_of_number_values","average_of_number_values","totl_numb","cnt_numb","number_of_boolean_values","average_of_boolean_values","totl_bool","cnt_bool","getTag","tag","item","tSplit","deleteRecords","isAdmin","id","subscribeNewsletter","bypassWelcome","subscriptionGroupCheck","subscribe","unsubscribe","blockSubscriber","block","unblockSubscriber","unblock","getUserSubscriptions","getSubscriptions","subscriber","getUserSubscribers","subParams","_mapper","isNewsletterSub","isEmail","blocked","s","subSplit","parseInt","stmp","grp","getNewsletters","searchType","_params","searchFor","x","mails","remap","defaults","m","remapped","signup","validatePassword","address","gender","birthdate","phone_number","email_public","address_public","gender_public","birthdate_public","phone_number_public","email_subscription","confirmation","login","signOut","to_be_erased","resendSignupConfirmation","redirect","resend","recoverAccount","verifyAttribute","attribute","callback","inputVerificationCode","getAttributeVerificationCode","verifyEmail","verifyMobile","forgotPassword","resetPassword","new_password","confirmPassword","disableAccount","services","active","disable","updateUserSettings","attr","current_password","changePassword","connect","collision","customAttr","parseValue","toSet","CognitoUserAttribute","uploadUserData","getUsers","searchForTypes","checker","isSelfProfile","_what_public_see","public_keys","connectedService","prototype","super","appendData","append","totalFileSize","pair","File","Math","round","size","FileList","inputs","querySelectorAll","textarea","checked","ascii","rightRotate","amount","j","mathPow","pow","maxWord","words","asciiBitLength","primeCounter","isComposite","candidate","charCodeAt","w","slice","oldHash","w15","w2","temp1","concat","b","bypassCheck","_parentKey","isObjectWithKeys","errToThrow","isInvalid","structValue","defaultSetter","def","abs","match","charAt","isNaN","date_regex","RegExp","test","paramName","trim","toLowerCase","baseUrl","origin","pathname","_baseUrl","pop","check","cu","_url","protocol","output","base36timestamp","uploaded","rSplit","normalize_typed_string","updated","referenced_count","string","allowPeriods","allowWhiteSpace","checkStr","array","_ref","ValidationData","AuthParameters","ClientMetadata","validationData","authParameters","clientMetadata","_proto","getUsername","getPassword","getValidationData","getAuthParameters","getClientMetadata","crypto","msCrypto","g","cryptoSecureRandomInt","getRandomValues","Uint32Array","randomBytes","readInt32LE","WordArray","sigBytes","random","nBytes","wordArray","hexChars","bite","hexStringify","fromString","nbi","dbits","inBrowser","navigator","appName","am","n","xl","xh","l","floor","DB","DM","DV","FV","F1","F2","rr","vv","BI_RC","int2char","intAt","nbv","fromInt","nbits","Montgomery","mp","invDigit","mpl","mph","um","mt2","dlShiftTo","divRemTo","compareTo","ZERO","subTo","revert","copyTo","u0","clamp","drShiftTo","mulTo","y","multiplyTo","sqrTo","squareTo","mi","sh","max","lShiftTo","bs","cbs","bm","ds","rShiftTo","min","q","pm","pt","ts","ms","nsh","ys","y0","yt","d1","d2","ONE","qd","addTo","negate","km","bitLength","equals","add","subtract","multiply","divide","modPow","z","k1","g2","is1","r2","HEX_MSB_REGEX","AuthenticationHelper","PoolName","N","BigInteger","hexHash","padHex","smallAValue","generateRandomSmallA","getLargeAValue","infoBits","poolName","getSmallAValue","_this","largeAValue","calculateA","hexRandom","generateRandomString","getRandomPassword","randomPassword","getSaltDevices","SaltToHashDevices","getVerifierDevices","verifierDevices","generateHashDevice","deviceGroupKey","_this2","combinedString","hashedString","verifierDevicesNotPadded","_this3","A","calculateU","B","UHexHash","buf","str","hashHex","hexStr","computehkdf","ikm","salt","infoBitsWordArray","String","fromCharCode","ikmWordArray","saltWordArray","prk","hmac","getPasswordAuthenticationKey","serverBValue","_this4","UValue","usernamePassword","usernamePasswordHash","xValue","calculateS","sValue","hkdf","_this5","gModPowXN","err2","getNewPasswordRequiredChallengeUserAttributePrefix","bigInt","isNegative","invertedNibbles","invertedNibble","toUpperCase","startsWith","CognitoJwtToken","decodePayload","getJwtToken","getExpiration","exp","getIssuedAt","iat","_setPrototypeOf","o","setPrototypeOf","__proto__","CognitoAccessToken","_CognitoJwtToken","subClass","superClass","_temp","AccessToken","call","create","CognitoIdToken","IdToken","CognitoRefreshToken","RefreshToken","getToken","CognitoUserSession","ClockDrift","accessToken","clockDrift","calculateClockDrift","getIdToken","getAccessToken","getClockDrift","adjusted","monthNames","weekNames","DateHelper","getNowString","weekDay","getUTCDay","month","getUTCMonth","day","getUTCDate","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","getUTCFullYear","getValue","setValue","getName","setName","toJSON","dataMemory","MemoryStorage","clear","StorageHelper","storageWindow","localStorage","exception","getStorage","userAgent","pool","Session","client","signInUserSession","authenticationFlowType","storage","Storage","keyPrefix","getClientId","userDataKey","setSignInUserSession","clearCachedUserData","cacheTokens","getSignInUserSession","getAuthenticationFlowType","setAuthenticationFlowType","initiateAuth","authDetails","USERNAME","clientMetaData","jsonReq","AuthFlow","getUserContextData","UserContextData","challengeName","ChallengeName","challengeParameters","ChallengeParameters","customChallenge","getCognitoUserSession","AuthenticationResult","authenticateUserPlainUsernamePassword","authenticateUserDefaultAuth","authenticationHelper","getUserPoolName","dateHelper","deviceKey","DEVICE_KEY","errOnAValue","aValue","SRP_A","CHALLENGE_NAME","USER_ID_FOR_SRP","SRP_B","SALT","getCachedDeviceKeyAndPassword","errOnHkdf","dateNow","SECRET_BLOCK","signatureString","challengeResponses","PASSWORD_CLAIM_SECRET_BLOCK","TIMESTAMP","PASSWORD_CLAIM_SIGNATURE","jsonReqResp","ChallengeResponses","respondToAuthChallenge","challenge","challengeCallback","errChallenge","dataChallenge","indexOf","clearCachedDeviceKeyAndPassword","errAuthenticate","dataAuthenticate","authenticateUserInternal","PASSWORD","authResult","mfaRequired","selectMFAType","mfaSetup","totpRequired","rawRequiredAttributes","userAttributesPrefix","substr","getDeviceResponse","newDeviceMetadata","NewDeviceMetadata","DeviceGroupKey","DeviceKey","errGenHash","deviceSecretVerifierConfig","Salt","PasswordVerifier","DeviceSecretVerifierConfig","DeviceName","errConfirm","dataConfirm","cacheDeviceKeyAndPassword","UserConfirmationNecessary","completeNewPasswordChallenge","newPassword","requiredAttributeData","finalUserAttributes","forEach","NEW_PASSWORD","_this6","errAValue","errHkdf","confirmRegistration","confirmationCode","forceAliasCreation","ConfirmationCode","ForceAliasCreation","sendCustomChallengeAnswer","answerChallenge","_this7","ANSWER","sendMFACode","mfaType","_this8","SMS_MFA_CODE","mfaTypeSelection","SOFTWARE_TOKEN_MFA_CODE","oldUserPassword","newUserPassword","PreviousPassword","ProposedPassword","enableMFA","mfaOptions","DeliveryMedium","AttributeName","MFAOptions","setUserMfaPreference","smsMfaSettings","softwareTokenMfaSettings","SMSMfaSettings","SoftwareTokenMfaSettings","disableMFA","deleteUser","_this9","clearCachedUser","_this10","UserAttributes","getUserData","bypassCache","userData","attributeList","userAttribute","getMFAOptions","createGetUserRequest","promisifyRequest","refreshSessionIfPossible","_this11","_this12","getUserDataFromCache","isFetchUserDataAndTokenRequired","fetchUserData","_ref$bypassCache","_this13","cacheUserData","deleteAttributes","_this14","UserAttributeNames","resendConfirmationCode","idTokenKey","accessTokenKey","refreshTokenKey","clockDriftKey","cachedSession","_this15","wrappedCallback","wrapRefreshSessionCallback","REFRESH_TOKEN","lastUserKey","deviceKeyKey","authenticationResult","clearCachedTokens","randomPasswordKey","deviceGroupKeyKey","attributeName","Code","getDevice","forgetSpecificDevice","forgetDevice","_this16","setDeviceStatusRemembered","DeviceRememberedStatus","setDeviceStatusNotRemembered","listDevices","paginationToken","requestParams","Limit","PaginationToken","globalSignOut","_this17","revokeTokenCallback","_this18","_session","revokeTokens","cleanClientData","isSessionRevocable","revokeToken","origin_jti","_ref2","requestWithRetry","Token","sendMFASelectionAnswer","_this19","associateSoftwareToken","_this20","associateSecretCode","SecretCode","verifySoftwareToken","totpCode","friendlyDeviceName","_this21","UserCode","FriendlyDeviceName","errRespond","dataRespond","BASE_USER_AGENT","Platform","product","isReactNative","UserAgent","appendToCognitoUserAgent","content","_wrapNativeSuper","Class","_cache","Map","Function","TypeError","has","get","Wrapper","_construct","_getPrototypeOf","enumerable","writable","configurable","Parent","args","_isNativeReflectConstruct","construct","instance","sham","Proxy","Boolean","valueOf","getPrototypeOf","CognitoError","_Error","statusCode","Client","region","credentials","operation","maxDelayMs","MAX_DELAY_MS","retry","attempt","delay","jitteredBackoff","mode","cache","resp","json","ok","__type","Message","ex","functionToRetry","delayFn","retryIn","setTimeout","AdvancedSecurityDataCollectionFlag","userPoolId","clientId","advancedSecurityDataCollectionFlag","getUserPoolId","signUp","returnData","userConfirmed","UserConfirmed","userSub","UserSub","codeDeliveryDetails","CodeDeliveryDetails","lastAuthUser","AmazonCognitoAdvancedSecurityData","amazonCognitoAdvancedSecurityDataConst","advancedSecurityData","getData","EncodedData","CookieStorage","domain","path","expires","secure","sameSite","cookies","numKeys","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","arr","Arr","_byteLength","curByte","len","revLookup","fromByteArray","uint8","extraBytes","parts","maxChunkLength","len2","encodeChunk","lookup","Uint8Array","start","end","num","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","encodingOrOffset","allocUnsafe","from","ArrayBuffer","byteOffset","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","isBuffer","copy","buffer","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","foo","subarray","typedArraySupport","poolSize","_augment","Symbol","species","alloc","fill","allocUnsafeSlow","_isBuffer","compare","pos","swap16","swap32","swap64","inspect","thisStart","thisEnd","thisCopy","targetCopy","isFinite","_arr","ret","out","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","stringtrim","base64clean","src","dst","CryptoJS","globalThis","F","subtype","C","C_lib","lib","Base","extend","overrides","mixIn","init","$super","properties","propertyName","clone","encoder","Hex","thisWords","thatWords","thisSigBytes","thatSigBytes","thatByte","ceil","C_enc","enc","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","decodeURIComponent","escape","utf8Str","unescape","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","doFlush","processedWords","dataWords","dataSigBytes","blockSize","nBlocksReady","nWordsReady","_minBufferSize","nBytesReady","_doProcessBlock","C_algo","Hasher","cfg","_doReset","update","messageUpdate","finalize","_doFinalize","_createHelper","hasher","_createHmacHelper","HMAC","algo","Base64","_map","base64Chars","triplet","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","paddingIndex","bitsCombined","parseLoop","HmacSHA256","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","superInit","subInit","typedArray","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Float32Array","Float64Array","typedArrayByteLength","H","K","isPrime","sqrtN","sqrt","factor","getFractionalBits","nPrime","W","SHA256","_hash","M","f","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","t1","nBitsTotal","nBitsLeft","isLE","mLen","eLen","eMax","eBias","nBits","NaN","rt","LN2","decode","converter","api","document","toUTCString","stringifiedAttributes","cookie","jar","getJSON","remove","withConverter","XMLHttpRequest","statusText","responseURL","responseText","open","onload","getAllResponseHeaders","withCredentials","setRequestHeader","send","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","prop","toStringTag"],"sourceRoot":""}