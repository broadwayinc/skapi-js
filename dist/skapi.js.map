{"version":3,"file":"skapi.js","mappings":";CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,SACb,GAAqB,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,OACP,CACJ,IAAIK,EAAIL,IACR,IAAI,IAAIM,KAAKD,GAAuB,iBAAZJ,QAAuBA,QAAUF,GAAMO,GAAKD,EAAEC,EACvE,CACA,CATD,CASGC,MAAM,kDCRT,IAAIC,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,EACxD,EACAE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQc,WAAad,EAAQe,WAAQ,EACrC,MAAMC,EAAUT,EAAgB,EAAQ,MACxCP,EAAQe,MAAQC,EAAQC,QACxB,MAAMC,EAAgBX,EAAgB,EAAQ,MAC9CP,EAAQc,WAAaI,EAAcD,0CCRnC,IAAIV,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,EACxD,EACAE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQmB,kBAAe,EACvB,MAAMD,EAAgBX,EAAgB,EAAQ,MAyE9CP,EAAQmB,aAxER,WACI,OAAO,SAAUC,EAAQC,EAAaC,GAClC,MAAMC,EAAKD,EAAWT,MACtBS,EAAWT,MAAQ,YAAaW,GAC5B,IAAIC,EAAOD,EAAI,GACXE,GAAUF,aAAiC,EAASA,EAAI,KAAO,CAAC,EACpE,MAAMG,EAAkBC,IACpB,GAAIF,aAAuC,EAASA,EAAOE,SAAU,CACjE,GAA+B,mBAApBF,EAAOE,SAEd,OADAF,EAAOE,SAASA,GACTA,EAGP,MAAM,IAAIV,EAAcD,QAAQ,gDAAiD,CAAEY,KAAM,qBAEjG,CACA,KAAMJ,aAAgBK,iBAClB,OAAOF,EAEX,IAAIG,EAAO,IAAIC,IAAIP,EAAKQ,QACpBC,EAAeT,EAAKQ,OACpBE,EAAYC,KAAKC,MAAMC,WAC3BC,OAAOC,eAAeC,QAAQP,EAAcQ,KAAKC,UAAU,CAAE,CAACR,GAAYP,KAC1EG,EAAKa,aAAaC,IAAIX,EAAcC,GACpCI,OAAOO,SAASf,KAAOA,EAAKA,IAAI,EAEpC,IAAIH,EACJ,SAASmB,EAAYC,GACjB,IAAIC,EAASD,aAAeE,MAAQF,EAAM,IAAI9B,EAAcD,QAAQ+B,GACpE,GAAItB,aAAuC,EAASA,EAAOyB,QAAS,CAChE,GAA8B,mBAAnBzB,EAAOyB,QACd,OAAOzB,EAAOyB,QAAQF,GAGtB,MAAM,IAAI/B,EAAcD,QAAQ,+CAAgD,CAAEY,KAAM,qBAEhG,CACA,OAAOoB,CACX,CACA,IACIrB,EAAWL,EAAG6B,KAAK5C,KAARe,IAAiBC,EAQhC,CANA,MAAOwB,GACH,IAAIC,EAASF,EAAYC,GACzB,GAAIC,aAAkBC,MAClB,MAAMD,EAEV,OAAOA,CACX,CACA,OAAIrB,aAAoByB,QACb,IAAIA,SAAQ,CAACC,EAAKC,KACrB3B,EACK4B,MAAMC,IACPH,EAAI3B,EAAe8B,GAAG,IAErBC,OAAOV,KACRA,EAAMD,EAAYC,cACCE,MACfK,EAAIP,GAGJM,EAAIN,EACR,GACF,IAICrB,EAAeC,EAE9B,CACJ,CACJ,oCC7EA,IAAI+B,EAAcnD,MAAQA,KAAKmD,YAAe,SAAUC,EAAYxC,EAAQyC,EAAKC,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAUC,OAAQT,EAAIO,EAAI,EAAI5C,EAAkB,OAAT0C,EAAgBA,EAAOnD,OAAOwD,yBAAyB/C,EAAQyC,GAAOC,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBZ,EAAIW,QAAQC,SAAST,EAAYxC,EAAQyC,EAAKC,QACpH,IAAK,IAAIzD,EAAIuD,EAAWM,OAAS,EAAG7D,GAAK,EAAGA,KAAS0D,EAAIH,EAAWvD,MAAIoD,GAAKO,EAAI,EAAID,EAAEN,GAAKO,EAAI,EAAID,EAAE3C,EAAQyC,EAAKJ,GAAKM,EAAE3C,EAAQyC,KAASJ,GAChJ,OAAOO,EAAI,GAAKP,GAAK9C,OAAOC,eAAeQ,EAAQyC,EAAKJ,GAAIA,CAChE,EACIa,EAAa9D,MAAQA,KAAK8D,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIpB,WAAU,SAAUsB,EAASC,GAC/C,SAASC,EAAUhE,GAAS,IAAMiE,EAAKJ,EAAUK,KAAKlE,GAAkC,CAAvB,MAAOmE,GAAKJ,EAAOI,EAAI,CAAE,CAC1F,SAASC,EAASpE,GAAS,IAAMiE,EAAKJ,EAAiB,MAAE7D,GAAkC,CAAvB,MAAOmE,GAAKJ,EAAOI,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAerE,EAIaqE,EAAOC,KAAOR,EAAQO,EAAOrE,QAJ1CA,EAIyDqE,EAAOrE,MAJhDA,aAAiB4D,EAAI5D,EAAQ,IAAI4D,GAAE,SAAUE,GAAWA,EAAQ9D,EAAQ,KAIjB2C,KAAKqB,EAAWI,EAAW,CAC7GH,GAAMJ,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKO,OAClE,GACJ,EACIxE,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,EACxD,EACAE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtD,MAAMwE,EAA+B,EAAQ,KACvCnE,EAAgBX,EAAgB,EAAQ,MACxC+E,EAAe,EAAQ,KACvBC,EAAU,EAAQ,KACxB,MAAMxE,EACFyE,YAAYC,EAAYC,EAAeC,GAAY,GA0K/C,GAzKAnF,KAAKoF,YAAc,KACnBpF,KAAKqF,kBAAoB,KACzBrF,KAAKsF,cAAgB,CAAC,EACtBtF,KAAKuF,iBAAmB,CAAC,EACzBvF,KAAKwF,kBAAoB,CAAC,EAC1BxF,KAAKyF,gBAAkB,CAAC,EACxBzF,KAAK0F,8BAAgC,KACrC1F,KAAK2F,qBAAuB,iBAC5B3F,KAAK4F,oCAAqC,EAC1C5F,KAAK6F,QAAU,KACf7F,KAAK8F,OAAS,KACd9F,KAAK+F,WAAa,KAClB/F,KAAKgG,KAAO,QACZhG,KAAKiG,WAAa,YAClBjG,KAAKkG,SAAW,KAChBlG,KAAKmG,MAAQ,CACTC,eAAeC,GACX,IAEI,OADA,EAAItB,EAAQqB,gBAAgBC,IACrB,CAIX,CAFA,MAAO7D,GACH,OAAO,CACX,CACJ,EACA8D,YAAYD,GACR,IAEI,OADA,EAAItB,EAAQuB,aAAaD,IAClB,CAIX,CAFA,MAAO7D,GACH,OAAO,CACX,CACJ,EACA+D,oBAAoBF,GAChB,IAEI,OADA,EAAItB,EAAQwB,qBAAqBF,IAC1B,CAIX,CAFA,MAAO7D,GACH,OAAO,CACX,CACJ,EACAgE,kBAAkBH,GACd,IAEI,OADA,EAAItB,EAAQyB,mBAAmBH,IACxB,CAIX,CAFA,MAAO7D,GACH,OAAO,CACX,CACJ,EACAiE,cAAcJ,GACV,IAEI,OADA,EAAItB,EAAQ0B,eAAeJ,IACpB,CAIX,CAFA,MAAO7D,GACH,OAAO,CACX,CACJ,GAEJxC,KAAK0G,qBAAwBxF,GAAW4C,EAAU9D,UAAM,OAAQ,GAAQ,YACpE,IAAI2G,EACJ,IAAI,YAAEC,EAAW,IAAEC,EAAG,SAAEzF,GAAaF,EACjC4F,EAAU,KAOd,GALIA,EADA1F,aAAoByB,cACJzB,EAGNA,EAES,iBAAZ0F,IACNA,EAAQC,eAAe,cACvBH,IACAC,EACD,OAAOC,EAEN9G,KAAKyF,gBAAgBsB,eAAeF,KACrC7G,KAAKyF,gBAAgBoB,GAAO,CAAC,IAEO,QAAjCF,EAAK3G,KAAKwF,yBAAsC,IAAPmB,OAAgB,EAASA,EAAGE,MACxE7G,KAAKwF,kBAAkBqB,GAAO,CAAC,GAEnC7G,KAAKwF,kBAAkBqB,GAAKD,GAAeE,EACtC9G,KAAKyF,gBAAgBoB,GAAKE,eAAeH,KAC1C5G,KAAKyF,gBAAgBoB,GAAKD,GAAe,IAE7C,IAAII,EAAkB9E,KAAKC,UAAU2E,EAAQG,UAK7C,OAJKjH,KAAKyF,gBAAgBoB,GAAKD,GAAaM,SAASF,IACjDhH,KAAKyF,gBAAgBoB,GAAKD,GAAaO,KAAKH,GAEhDhH,KAAKwF,kBAAkBqB,GAAKD,GAAeE,EACpC3G,OAAOiH,OAAO,CAAEC,cAAerH,KAAKyF,gBAAgBoB,GAAKD,IAAgBE,EACpF,IACA9G,KAAKsH,OAAS,CAACT,EAAKU,EAAKC,IAAiB1D,EAAU9D,UAAM,OAAQ,GAAQ,YACtE,IAAIoB,QAAiBqG,MAAMZ,EAAKU,GAChC,GAAIC,EAAc,CACd,GAAwB,MAApBpG,EAASsG,OACT,aAAatG,EAASoG,KAGtB,MAAMpG,CAEd,CACA,IAAIuG,QAAiBvG,EAASwG,OAC9B,IACID,EAAWzF,KAAK2F,MAAMF,EAG1B,CADA,MAAOnF,GACP,CACA,GAAwB,MAApBpB,EAASsG,OAAgB,CACzB,GAAwB,iBAAbC,GAAwC,QAAfJ,EAAIO,QAAoBH,EAASZ,eAAe,QAChF,IACIY,EAAWzF,KAAK2F,MAAMF,EAASI,KAErB,CAAd,MAAOvF,GAAO,CAElB,OAAOmF,CACX,CACK,CACD,IAAID,EAAStG,aAA2C,EAASA,EAASsG,OACtEM,EAAU,CACV,eACA,kBACA,mBACA,oBACA,QACA,SACA,cAEJ,GAAwB,iBAAbL,IAA0BA,aAA2C,EAASA,EAASM,SAAU,CACxG,IAAI5G,GAASqG,EAASA,EAAO5F,WAAa,OAAS,QACnD,MAAM,IAAIpB,EAAcD,QAAQkH,aAA2C,EAASA,EAASM,QAAS,CAAE5G,KAAMA,GAClH,CACK,GAAwB,iBAAbsG,EAAuB,CACnC,IAAIO,EAASP,EAASQ,MAAM,KACxB9G,EAAO6G,EAAOE,OAAO,EAAG,GAAG,GAC/B,MAAM,IAAI1H,EAAcD,QAAQyH,EAAOG,KAAK,IAAK,CAAEhH,KAAO2G,EAAQd,SAAS7F,GAAQA,EAAO,SAC9F,CACA,MAAMD,CACV,CACJ,IACApB,KAAKsI,KAAO,CAACzB,EAAK0B,EAAQrH,IAAW4C,EAAU9D,UAAM,OAAQ,GAAQ,YACjE,GAAIuI,GAA4B,iBAAXA,GAAuBpI,OAAOqI,KAAKD,GAAQ7E,OAAQ,CAC9B,MAAlCmD,EAAI4B,UAAU5B,EAAInD,OAAS,KAC3BmD,GAAY,KAEhB,IAAI6B,EAAQvI,OAAOqI,KAAKD,GACnBI,KAAIC,IACL,IAAIvI,EAAQkI,EAAOK,GAInB,MAHqB,iBAAVvI,IACPA,EAAQ6B,KAAKC,UAAU9B,IAEpBwI,mBAAmBD,GAAK,IAAMC,mBAAmBxI,EAAM,IAE7DgI,KAAK,KACVxB,GAAO6B,CACX,CACA,IAAIlB,EAAe,KACftG,EAAO6F,eAAe,kBACtBS,EAAetG,EAAOsG,oBACftG,EAAOsG,cAElB,IAAID,EAAMpH,OAAOiH,OAAO,CACpBU,OAAQ,OACT5G,GACH,OAAOlB,KAAKsH,OAAOT,EAAKU,EAAKC,EACjC,IAC0B,iBAAfvC,GAAoD,iBAAlBC,EACzC,MAAM,IAAIxE,EAAcD,QAAQ,4DAA6D,CAAEY,KAAM,sBAEzG,IAAK4D,IAAeC,EAChB,MAAM,IAAIxE,EAAcD,QAAQ,+CAAgD,CAAEY,KAAM,sBAExF6D,IAAkBlF,KAAKgG,OACvB,EAAIjB,EAAQqB,gBAAgBlB,EAAe,mBAE/ClF,KAAK8I,QAAU7D,EACfjF,KAAKkF,cAAgBA,EACrB,MAAM6D,EAAa,uCACnB,IAAIC,EAAO/D,EAAWwD,UAAU,EAAG,GACnCzI,KAAKiJ,eAAiBxB,MAAM,GAAGsB,KAAcC,gBACxChG,MAAK5B,GAAYA,EAAS8H,SAC1BlG,MAAKkG,GAAQ,IAAIrG,SAAQ,CAACsB,EAASC,KACpC,MAAM+E,EAAS,IAAIC,WACnBD,EAAOE,UAAY,IAAMlF,EAAQgF,EAAOzE,QACxCyE,EAAOxG,QAAUyB,EACjB+E,EAAOG,cAAcJ,EAAK,MAEzBlG,MAAKuG,GAAwB,iBAATA,EAAoBrH,KAAK2F,MAAM9F,OAAOyH,KAAKD,EAAKpB,MAAM,KAAK,KAAO,OAC3FnI,KAAKyJ,gBAAkBhC,MAAM,GAAGsB,KAAcC,iBACzChG,MAAK5B,GAAYA,EAAS8H,SAC1BlG,MAAKkG,GAAQ,IAAIrG,SAAQ,CAACsB,EAASC,KACpC,MAAM+E,EAAS,IAAIC,WACnBD,EAAOE,UAAY,IAAMlF,EAAQgF,EAAOzE,QACxCyE,EAAOxG,QAAUyB,EACjB+E,EAAOG,cAAcJ,EAAK,MAEzBlG,MAAKuG,GAAwB,iBAATA,EAAoBrH,KAAK2F,MAAM9F,OAAOyH,KAAKD,EAAKpB,MAAM,KAAK,KAAO,OAC3FnI,KAAK0J,aAAe,CAAEC,GAAU7F,EAAU9D,UAAM,OAAQ,GAAQ,YAC5D,IAAK+B,OAAOC,eACR,MAAM,IAAIU,MAAM,wCAEpB,MAAMkH,EAAU1H,KAAK2F,MAAM9F,OAAOC,eAAe6H,QAAQ,GAAG5E,KAAcC,MAAoB,QAC9F,GAAI0E,aAAyC,EAASA,EAAQ7D,WAC1D,IAAK,IAAI6C,KAAKgB,EACVD,EAAMf,GAAKgB,EAAQhB,GAG3B,MAAMK,QAAuBU,EAAMV,eACnCU,EAAMzD,SAAW,IAAIrB,EAA6BiF,gBAAgB,CAC9DC,WAAYd,EAAee,YAC3BC,SAAUhB,EAAeiB,kBAE7B,MAAMC,EAAU,CACZR,EAAMS,sBAELR,aAAyC,EAASA,EAAQ7D,aAAeZ,IAC1EgF,EAAQhD,KAAKwC,EAAMU,iBAAiBC,cAAc,CAAEC,gBAAiBX,aAAyC,EAASA,EAAQ7D,cAAe7C,OAAMV,IAChJmH,EAAMa,KAAO,IAAI,WAGnB3H,QAAQ4H,IAAIN,GAClB,MAAMO,EAAuB,KACzB,GAAIf,EAAM/D,mCACN,OAEJ,IAAI2D,EAAO,CAAC,EACZ,MAAMoB,EAAe,CACjB,kBACA,oBACA,gCACA,cAEJ,GAAIhB,EAAM5D,WAAY,CAClB,IAAK,IAAI6C,KAAK+B,EACVpB,EAAKX,GAAKe,EAAMf,GAEpB5G,eAAeC,QAAQ,GAAGgD,KAAcC,IAAiBhD,KAAKC,UAAUoH,IACxEI,EAAM/D,oCAAqC,CAC/C,GAIJ,OAFA7D,OAAO6I,iBAAiB,eAAgBF,GACxC3I,OAAO6I,iBAAiB,mBAAoBF,GACrCf,EAAM5D,UACjB,IA9CoB,CA8ChB/F,MAAMkD,OAAMV,IAAS,MAAMA,CAAG,GACtC,CACIgI,WACA,OAAIxK,KAAK8F,QAAU3F,OAAOqI,KAAKxI,KAAK8F,QAAQpC,OACjCxB,KAAK2F,MAAM3F,KAAKC,UAAUnC,KAAK8F,SAG/B,IAEf,CACI0E,SAAKnK,GACT,CACAwK,eAAe5F,EAAYC,EAAeC,GAAY,GAClD,OAAOrB,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,MAAM2J,EAAQ,IAAIpJ,EAAM0E,EAAYC,EAAeC,GAEnD,aADMwE,EAAMD,aACLC,CACX,GACJ,CACAU,iBACI,IAAKrK,KAAKkG,SACN,MAAM,IAAIxF,EAAcD,QAAQ,uBAAwB,CAAEY,KAAM,oBAEpE,MAAMiJ,EAAiBpJ,IACnB,IAAI,aAAEqJ,GAAe,GAAUrJ,GAAU,CAAC,EAC1C,OAAO,IAAI2B,SAAQ,CAACC,EAAKC,KACrB,IAAI4D,EACJ,IAAImE,GAAwC,QAAxBnE,EAAK3G,KAAKkG,gBAA6B,IAAPS,OAAgB,EAASA,EAAGoE,mBAAqB,KACrG/K,KAAKoF,YAAc0F,EACC,OAAhBA,GACA/H,EAAI,MAER+H,EAAYE,YAAW,CAACxI,EAAKqD,KACrBrD,GACAO,EAAIP,GAER,MAAMyI,EAAoBC,GAAmBpH,EAAU9D,UAAM,OAAQ,GAAQ,YACrEkL,EAAeC,WAAaL,EAC5BA,EAAYM,mBAAkB,CAACC,EAASC,KACpC,GAAID,EACAtI,EAAIsI,OAEH,CACD,IAAIE,EAAwB,CAAC,EACzBf,EAAO,CAAC,EACZ,IAAK,IAAI3K,KAAKyL,EACVC,EAAsB1L,EAAE2L,MAAQ3L,EAAE4L,MAElCjB,EADY3K,EAAE2L,KAAKE,QAAQ,UAAW,KACxB7L,EAAE4L,MACD,mBAAX5L,EAAE2L,MAA6BD,EAAsB1L,EAAE2L,QAAUxL,KAAK8I,SACtE/F,EAAI,IAAIrC,EAAcD,QAAQ,6CAA8C,CAAEY,KAAM,qBAG5F,IAAK,IAAIuH,IAAK,CACV,iBACA,mBACA,eACA,qBACA,gBACA,uBAEIA,EAAE1B,SAAS,WACPsD,EAAKzD,eAAe6B,EAAET,MAAM,KAAK,IACjCqC,EAAK5B,GAAK4B,EAAKzD,eAAe6B,GAAK+C,OAAOnB,EAAK5B,IAAM,SAG9C4B,EAAK5B,GAIhB4B,EAAK5B,GAAK4B,EAAKzD,eAAe6B,GAAK+C,OAAOnB,EAAK5B,IAAM,EAG7D,IAAK,IAAIA,IAAK,CACV,iBACA,yBAEI4B,EAAK5B,EAAET,MAAM,KAAK,IAClBqC,EAAK5B,KAAK4B,EAAKzD,eAAe6B,IAAiB,SAAZ4B,EAAK5B,GAEnC4B,EAAKzD,eAAe6B,WAClB4B,EAAK5B,GAGpBsC,EAAeI,WAAaC,EAC5BvL,KAAK6F,QAAUqF,EACfV,EAAKoB,aAAeD,OAAO3L,KAAK6F,QAAQgG,QAAQC,QAAQF,cACxDpB,EAAKuB,QAAUvB,EAAKwB,WACbxB,EAAKwB,IACZhM,KAAK8F,OAAS0E,EACd1H,EAAI0H,EACR,KAIJzH,EAAI,IAAIrC,EAAcD,QAAQ,mBAAoB,CAAEY,KAAM,oBAElE,IACIwE,EACI0E,EACAO,SAA0DA,EAAYmB,eAAepG,EAAQqG,mBAAmB,CAACC,EAAYC,KACrHD,GACApJ,EAAIoJ,GAERlB,EAAiBmB,GAAkBlJ,OAAMV,GAAOO,EAAIP,IAAK,IAI7DyI,EAAiBpF,GAAS3C,OAAMV,GAAOO,EAAIP,KAI/CO,EAAI,IAAIrC,EAAcD,QAAQ,kCAAmC,CAAEY,KAAM,oBAC7E,GACF,GACJ,EAEAgL,EAAqBC,GAAUxI,EAAU9D,UAAM,OAAQ,GAAQ,YACjE,IAAIuM,EAAO,KACX,GAAID,EACAC,EAAOvM,KAAKsF,cAAcgH,WAAiBtM,KAAKoK,iBAAiB,CAAEoC,aAAcF,KAAUC,SAE1F,CACD,IAAIvM,KAAK6F,QAIL,MAAM,IAAInF,EAAcD,QAAQ,sBAAuB,CAAEY,KAAM,sBAH/DkL,EAAOvM,KAAK6F,QAAQgG,QAAQC,QAAQ,mBAK5C,CACA,MAAO,CACH1G,YAAa,IAAIP,EAA6B4H,YAAY,CACtDC,SAAUH,EACVI,KAAM3M,KAAKkG,WAEf0G,gBAAiBL,EAEzB,IAuCA,MAAO,CAAEjC,gBAAeuC,iBAtCC,CAACC,EAAUC,IACzB,IAAIlK,SAAQ,CAACC,EAAKC,IAAQe,EAAU9D,UAAM,OAAQ,GAAQ,YAC7DA,KAAKgN,SACLhN,KAAK0F,8BAAgC,KACrC1F,KAAKqF,kBAAoB,KACzB,IAAI4H,QAAiBZ,EAAkBS,GACvC9M,KAAKoF,YAAc6H,EAAS7H,YAC5B0H,EAAWG,EAASL,gBACpB,IAAIM,EAAwB,IAAIrI,EAA6BsI,sBAAsB,CAC/ET,SAAUI,EACVM,SAAUL,IAEd/M,KAAKoF,YAAYyH,iBAAiBK,EAAuB,CACrDG,oBAAqB,CAACC,EAAgBC,KAClCvN,KAAK0F,8BAAgCoH,EACrC/J,EAAI,IAAIrC,EAAcD,QAAQ,0CAA2C,CAAEY,KAAM,+BAAgC,EAErHmM,UAAYC,IACRnD,IAAgBtH,MAAK6C,IACjB/C,EAAI+C,EAAQ,GACd,EAEN6H,UAAYlL,IACR,IAAImL,EAAQ,CAACnL,EAAIyF,SAAW,gCAAiCzF,aAAiC,EAASA,EAAInB,OAAS,mBACnG,2BAAbmB,EAAInB,OACgB,sBAAhBmB,EAAIyF,SACJjI,KAAKqF,kBAAoByH,EACzBa,EAAQ,CAAC,4BAA6B,qBAGtCA,EAAQ,CAAC,kCAAmC,mCAGpD5K,EAAI,IAAIrC,EAAcD,QAAQkN,EAAM,GAAI,CAAEtM,KAAMsM,EAAM,GAAIC,MAAOpL,IAAO,GAGpF,MAEsC6J,oBAC9C,CACAwB,aAAa3M,GACT,IAAIyF,EAAImH,EAAIC,EAAIC,EAAIC,EAAIC,EACxB,OAAOpK,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAuF,QAAjF8N,EAA6B,QAAvBnH,EAAK3G,KAAK6F,eAA4B,IAAPc,OAAgB,EAASA,EAAG2E,kBAA+B,IAAPwC,OAAgB,EAASA,EAAG,qBAAuB9N,KAAK8I,QAAS,CAC5J,IAAuF,QAAjFkF,EAA6B,QAAvBD,EAAK/N,KAAK6F,eAA4B,IAAPkI,OAAgB,EAASA,EAAGzC,kBAA+B,IAAP0C,OAAgB,EAASA,EAAG,2BAA6BhO,KAAKgG,KAAM,CAC/J,KAAM9E,aAAuC,EAASA,EAAOiN,uBAA2G,QAAjFD,EAA6B,QAAvBD,EAAKjO,KAAK6F,eAA4B,IAAPoI,OAAgB,EAASA,EAAG3C,kBAA+B,IAAP4C,OAAgB,EAASA,EAAGE,gBACxM,MAAM,IAAI1N,EAAcD,QAAQ,kCAAmC,CAAEY,KAAM,oBAE/E,OAAO,CACX,CACA,GAAIH,aAAuC,EAASA,EAAOmN,WACvD,MAAM,IAAI3N,EAAcD,QAAQ,4BAA6B,CAAEY,KAAM,mBAE7E,MAGI,GADArB,KAAKgN,SACD9L,aAAuC,EAASA,EAAOmN,WACvD,MAAM,IAAI3N,EAAcD,QAAQ,0BAA2B,CAAEY,KAAM,oBAG3E,OAAO,CACX,GACJ,CACAiN,QAAQ/F,EAAQrH,GACZ,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAIuO,GAAI,EAAIxJ,EAAQyJ,aAAajG,EAAQ,CACrC1B,IAAM4H,IAAM,EAAI1J,EAAQuB,aAAamI,IACtC,CAAC,QACJ,aAAazO,KAAK0O,QAAQH,EAAE1H,IAAK3F,GAAU,KAAM,CAAE4G,OAAQ,MAAO6G,KAAMJ,EAAE1H,IAAIK,SAAS,UAAW0H,YAAa,KAAMpH,aAAc,QACvI,GACJ,CACAqH,KAAKtF,EAAMuF,GACP,OAAOhL,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,OAAOA,KAAK0O,QAAQ,WAAYnF,EAAMuF,EAC1C,GACJ,CACAC,cAAcL,GACV,OAAO5K,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAIgP,EAAe,CACfnI,IAAM4H,IACK,EAAI1J,EAAQuB,aAAamI,GAEpClF,KAAM,KACN0F,KAAM,CAAC,UAAW,KAAM,IAE5B,GAAIC,MAAMC,QAAQT,GACd,IAAK,IAAIzL,KAAKyL,EACVzL,GAAI,EAAI8B,EAAQyJ,aAAavL,EAAG+L,QAIpCN,GAAU,EAAI3J,EAAQyJ,aAAaE,EAASM,GAEhD,aAAahP,KAAK0O,QAAQ,cAAeA,EAAS,CAAEC,MAAM,GAC9D,GACJ,CACAS,kBACI,IAAI7G,EAAS,IAAI8G,gBAAgBtN,OAAOO,SAASgN,QACjD,IAAK,IAAKjM,EAAKgD,KAAQkC,EAAOgH,UAAW,CACrC,GAA4B,UAAxBlM,EAAIoF,UAAU,EAAG,GACjB,SAEJ,IAAI+G,EAASzN,OAAOC,eAAe6H,QAAQxG,GAC3C,GAAImM,EAAQ,CACRzN,OAAOC,eAAeyN,WAAWpM,GACjC,IACImM,EAAStN,KAAK2F,MAAM2H,EAEV,CAAd,MAAOhN,GAAO,CAClB,CACA,GAAsB,iBAAXgN,GAAuBA,EAAOnJ,GACrC,OAAOmJ,EAAOnJ,EAKtB,CACA,OAAO,IACX,CACAqI,QAAQ7H,EAAK0C,EAAO,KAAMuF,EAAU,CAAC,GACjC,IAAInI,EAAImH,EAAIC,EAAIC,EAAIC,EAAIC,EAAIwB,EAAIC,EAAIC,EACpC,OAAO9L,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI,KAAE2O,GAAO,EAAK,OAAE7G,EAAS,OAAM,KAAE+H,EAAO,KAAI,sBAAEC,GAAwB,GAAUhB,EAChFpF,EAAeoG,EAAwB,WAAc9P,KAAK0J,aAC1DqG,EAAQpB,EAAsF,QAA9Eb,EAA6B,QAAvBnH,EAAK3G,KAAK6F,eAA4B,IAAPc,OAAgB,EAASA,EAAGkF,eAA4B,IAAPiC,OAAgB,EAASA,EAAGkC,SAAW,KACjJ,GAAIrB,IACKoB,EAED,MADA/P,KAAKgN,SACC,IAAItM,EAAcD,QAAQ,0BAA2B,CAAEY,KAAM,oBAG3E,IAAI4O,EAAgB,GACpB,IACIA,GAAgB,EAAIlL,EAAQuB,aAAaO,EAG7C,CADA,MAAOrE,GACP,CA8CA,IAAI0N,EAAWD,SA7CK,EAACE,EAAMxB,IAAS7K,EAAU9D,UAAM,OAAQ,GAAQ,YAChE,MAAMoQ,QAAkBvN,QAAQ4H,IAAI,CAChCzK,KAAKiJ,eACLjJ,KAAKyJ,kBAEH4G,EAAQD,EAAU,GAClBE,EAASF,EAAU,GAqCzB,MApCe,MACX,OAAQD,GACJ,IAAK,qBACL,IAAK,oBACL,IAAK,gBACL,IAAK,mBACL,IAAK,YACL,IAAK,gBACL,IAAK,iBACL,IAAK,cACL,IAAK,kBACL,IAAK,uBACL,IAAK,SACL,IAAK,iBACL,IAAK,kBACL,IAAK,WACL,IAAK,UACD,MAAO,CACHI,OAAQF,EAAMG,aACdC,QAASJ,EAAMK,eAEvB,IAAK,cACL,IAAK,cACL,IAAK,eACL,IAAK,mBACL,IAAK,cACL,IAAK,YACL,IAAK,UACL,IAAK,YACL,IAAK,eACD,MAAO,CACHD,QAASH,EAAOK,eAChBJ,OAAQD,EAAOM,eAE3B,EAEGC,GAASlC,EAAO,UAAY,UAAYwB,CACnD,IACuCW,CAAYjK,IAAO8H,IACtD7F,GAA6F,QAAjFkF,EAA6B,QAAvBD,EAAK/N,KAAK6F,eAA4B,IAAPkI,OAAgB,EAASA,EAAGzC,kBAA+B,IAAP0C,OAAgB,EAASA,EAAG,qBAAuBtE,aAAmD,EAASA,EAAaZ,UAAY9I,KAAK8I,QAClP5D,GAAmG,QAAjFgJ,EAA6B,QAAvBD,EAAKjO,KAAK6F,eAA4B,IAAPoI,OAAgB,EAASA,EAAG3C,kBAA+B,IAAP4C,OAAgB,EAASA,EAAG,2BAA6BxE,aAAmD,EAASA,EAAaqH,QAAU/Q,KAAKkF,cAChQ,GAAI2K,EAAM,CACN,GAAoB,iBAATA,GAAsBX,MAAMC,QAAQU,GAI3C,MAAM,IAAInP,EAAcD,QAAQ,qBAAsB,CAAEY,KAAM,oBAH9DwO,EAAO3N,KAAK2F,MAAM3F,KAAKC,UAAU0N,GAKzC,CACA,GAAIX,MAAMC,QAAQ5F,IAASA,GAAwB,iBAATA,EACtC,MAAM,IAAI7I,EAAcD,QAAQ,qEAAsE,CAAEY,KAAM,oBAElH,IAAI2P,EAAW,CAAElI,UAAS5D,iBACtB+L,EAAe,CAAC,GAChB,QAAEC,GAAU,GAAUpC,EAAQmC,cAAgB,CAAC,EACnD,GAAInC,EAAQmC,cAAgB9Q,OAAOqI,KAAKsG,EAAQmC,cAAcvN,OAAQ,CAClE,IAAIyN,GAAS,EAAIpM,EAAQyJ,aAAa,CAClC4C,OAA0F,QAAjF1B,EAAKZ,aAAyC,EAASA,EAAQmC,oBAAiC,IAAPvB,OAAgB,EAASA,EAAG0B,QAAU,IACxInK,UAA6F,QAAjF0I,EAAKb,aAAyC,EAASA,EAAQmC,oBAAiC,IAAPtB,OAAgB,EAASA,EAAG1I,WAAa,KAC9IoK,UAAwJ,kBAAnD,QAAjFzB,EAAKd,aAAyC,EAASA,EAAQmC,oBAAiC,IAAPrB,OAAgB,EAASA,EAAGyB,YAA2BvC,EAAQmC,aAAaI,WAC1L,CACCD,MAAO,CAAC,SAAU,IAAM,KACxBnK,SAAU,KACVoK,UAAW,CAAC,UAAW,KAAM,KAEjC,GAAIF,EAAOpK,eAAe,UAAoC,iBAAjBoK,EAAOC,MAAoB,CACpE,GAAID,EAAOC,MAAQ,IACf,MAAM,IAAI1Q,EAAcD,QAAQ,oCAAqC,CAAEY,KAAM,oBAEjFlB,OAAOiH,OAAO6J,EAAc,CAAEG,MAAOD,EAAOC,OAChD,CACID,EAAOpK,eAAe,aAA0C,iBAApBoK,EAAOlK,UAAyBkK,EAAOlK,UAAY9G,OAAOqI,KAAK2I,EAAOlK,WAClH9G,OAAOiH,OAAO6J,EAAc,CAAEhK,SAAUkK,EAAOlK,WAE/CkK,EAAOpK,eAAe,cAA4C,kBAArBoK,EAAOE,WACpDlR,OAAOiH,OAAO6J,EAAc,CAAEI,UAAWF,EAAOE,WAExD,CACAlR,OAAOiH,OAAO4J,EAAUC,GACxB,IAAIK,GAAW,EAAIvM,EAAQwM,qBAAqBhI,GAC5CiI,EAASF,aAA2C,EAASA,EAASzB,KACtE4B,GAAYH,aAA2C,EAASA,EAASI,QAAU,GACnFC,EAAiB,CAACpI,EAAMiI,EAAQI,GAAc,IAAU9N,EAAU9D,UAAM,OAAQ,GAAQ,YACxF,IAAI6R,EAAIC,EACR,GAAe,OAAXN,EACA,OAAOjI,EAEX,IAAIwI,GAAW,EAKf,GAJIxI,aAAgBjI,kBAChBiI,EAAO,IAAIyI,SAASzI,GACpBwI,GAAW,KAETxI,aAAgByI,UAClB,OAAOzI,EAEX,GAAIqI,EACA,IAAK,IAAIhJ,KAAKoI,OACUiB,IAAhBjB,EAASpI,IACTW,EAAKlH,IAAIuG,EAA0B,iBAAhBoI,EAASpI,GAAkBoI,EAASpI,GAAK,IAAIsJ,KAAK,CAAChQ,KAAKC,UAAU6O,EAASpI,KAAM,CAChGuJ,KAAM,sBAKtB,IAAK,IAAIvJ,KAAK4I,OACQS,IAAdT,EAAO5I,IACPW,EAAKkI,EAASvK,SAAS0B,GAAK,SAAW,OAAOA,EAAwB,iBAAd4I,EAAO5I,GAAkB4I,EAAO5I,GAAK,IAAIsJ,KAAK,CAAChQ,KAAKC,UAAUqP,EAAO5I,KAAM,CAC/HuJ,KAAM,sBAIlB,GAAsF,QAAjFN,EAAK/C,aAAyC,EAASA,EAAQmC,oBAAiC,IAAPY,OAAgB,EAASA,EAAGO,SAAU,CAChI,GAAgJ,mBAAlD,QAAjFN,EAAKhD,aAAyC,EAASA,EAAQmC,oBAAiC,IAAPa,OAAgB,EAASA,EAAGM,UAgB9H,MAAM,IAAI1R,EAAcD,QAAQ,6CAA8C,CAAEY,KAAM,sBAhBkE,CACxJ,IAAK0Q,EACD,MAAM,IAAIrR,EAAcD,QAAQ,wEAAyE,CAAEY,KAAM,sBAErH,IAAIgR,EAAKvD,EAAQmC,aAAamB,SAAS7I,GAIvC,GAHI8I,aAAcxP,UACdwP,QAAWA,KAEXA,aAAcL,UAId,MAAM,IAAItR,EAAcD,QAAQ,wDAAyD,CAAEY,KAAM,sBAHjGkI,EAAO8I,CAKf,CAIJ,CACA,OAAO9I,CACX,IACIsG,GACAA,EAAO1P,OAAOiH,OAAO4J,EAAUnB,GAC/BtG,QAAaoI,EAAepI,EAAMiI,IAQ1BjI,EALHA,GAAmB,OAAXiI,EAILA,QACaG,EAAepI,EAAMiI,GAAQ,GAGnCrR,OAAOiH,OAAO4J,EAAUzH,GAP5ByH,EAWf,IAAIsB,EAAatS,KAAKuS,mBAAmB,CACrChK,OAAQgB,EACR1C,IAAKoJ,GAAiBpJ,EACtBqK,UAASM,GAAgBN,IAE7B,GAAIoB,GAAoC,iBAAfA,EACrB,OAAOA,EAEX,GAA0B,iBAAfA,EAAyB,CAChC,KAAMtS,KAAKuF,iBAAiB+M,aAAuBzP,SAAU,CACzD,IAAI2P,EAAU,CACV,OAAU,OAEVzC,IACAyC,EAAQC,cAAgB1C,GAExBF,IACA2C,EAAQ,gBAAkBtQ,KAAKC,UAAU0N,IAEzCf,EAAQ/H,eAAe,gBACnB+H,aAAyC,EAASA,EAAQF,eAC1D4D,EAAQ,gBAAkB1D,EAAQF,aAG/BrF,aAAgByI,WACvBQ,EAAQ,gBAAkB,oBAE9B,IAAIjL,EAAM,CAAEiL,YACR1D,aAAyC,EAASA,EAAQtH,gBAC1DD,EAAIC,aAAesH,EAAQtH,cAEhB,SAAXM,EACA9H,KAAKuF,iBAAiB+M,GAActS,KAAK0S,MAAMxC,EAAU3G,EAAMhC,GAE/C,QAAXO,IACL9H,KAAKuF,iBAAiB+M,GAActS,KAAKsI,KAAK4H,EAAU3G,EAAMhC,GAEtE,CACA,IACI,IAAInG,QAAiBpB,KAAKuF,iBAAiB+M,GAC3C,OAAId,EACOpQ,QAGMpB,KAAK0G,qBAAqB,CACnCE,YAAa0L,EACbzL,MACAzF,YAWZ,CAPA,MAAOoB,GACH,MAAMA,CACV,CACA,QACQ8P,GAActS,KAAKuF,iBAAiBwB,eAAeuL,WAC5CtS,KAAKuF,iBAAiB+M,EAErC,CACJ,CACJ,GACJ,CACAC,mBAAmBrR,GACf,IAAIyF,EAAImH,EAAIC,EAAIC,EAAIC,EAAIC,EAAIwB,EAAIC,EAAIC,EAAIiC,EAAIC,EAAIa,EAAIC,EAAIC,EACxD,IAAI,OAAEtK,EAAS,CAAC,EAAC,IAAE1B,EAAG,QAAEqK,GAAU,GAAUhQ,GAAU,CAAC,EACvD,GAAIqH,EAAOxB,eAAe,YAAa,CACnC,GAA+B,iBAApBwB,EAAOtB,WAA0B9G,OAAOqI,KAAKD,EAAOtB,UAAUvD,QACjD,QAApB6E,EAAOtB,SACP,MAAM,IAAIvG,EAAcD,QAAQ,IAAI8H,EAAOtB,qCAAsC,CAAE5F,KAAM,sBAE7F,OAAQkH,EAAOtB,UACX,IAAK,MACD,MAAO,CACH6L,KAAM,GACN7L,SAAU,MACV8L,WAAW,GAEnB,IAAK,eACMxK,EAAOtB,SAE1B,CACA,IAAI+L,EAAe,MACf,GAAIzK,GAA4B,iBAAXA,GAAuBpI,OAAOqI,KAAKD,GAAQ7E,OAAQ,CACpE,SAASuP,EAAgBC,GACrB,SAASC,EAAWD,GAChB,MAAmB,iBAARA,GAAoBA,EACpB/S,OAAOqI,KAAK0K,GAAKE,OAAOC,QAAO,CAACvQ,EAAKO,KAASP,EAAIO,GAAO6P,EAAI7P,GAAMP,IAAM,CAAC,GAE9EoQ,CACX,CAEA,IAAII,EAAOH,EAAWD,GACtB,IAAK,IAAItK,KAAK0K,EACNA,EAAK1K,IAAyB,iBAAZ0K,EAAK1K,KACvB0K,EAAK1K,GAAKuK,EAAWD,EAAItK,KAGjC,OAAO0K,CACX,CACA,OAAOzM,EAAM,IAAM3E,KAAKC,UAAU8Q,EAAgB1K,GACtD,CACA,OAAO1B,EAAM,IAAM7G,KAAK8I,OAC3B,EArBkB,GAsBnB,GAAIoI,IAAgG,QAAnFpD,EAAqC,QAA/BnH,EAAK3G,KAAKyF,uBAAoC,IAAPkB,OAAgB,EAASA,EAAGE,UAAyB,IAAPiH,OAAgB,EAASA,EAAGkF,IAAgB,CAIpJ,IAHuC,QAAjCjF,EAAK/N,KAAKwF,yBAAsC,IAAPuI,OAAgB,EAASA,EAAGlH,MAAgG,QAArFoH,EAAuC,QAAjCD,EAAKhO,KAAKwF,yBAAsC,IAAPwI,OAAgB,EAASA,EAAGnH,UAAyB,IAAPoH,OAAgB,EAASA,EAAG+E,YACpMhT,KAAKwF,kBAAkBqB,GAAKmM,GAEnC9D,MAAMC,QAAQnP,KAAKyF,gBAAgBoB,GAAKmM,KAAkBhT,KAAKyF,gBAAgBoB,GAAKmM,GAActP,OAClG,IAAK,IAAI6K,KAAKvO,KAAKyF,gBAAgBoB,GAAKmM,GAAe,CACnD,IAAIO,EAAsBP,EAAe,IAAM9Q,KAAKC,UAAUoM,IACvB,QAAjCL,EAAKlO,KAAKwF,yBAAsC,IAAP0I,OAAgB,EAASA,EAAGrH,MAAgG,QAArF8I,EAAuC,QAAjCD,EAAK1P,KAAKwF,yBAAsC,IAAPkK,OAAgB,EAASA,EAAG7I,UAAyB,IAAP8I,OAAgB,EAASA,EAAG4D,YACpMvT,KAAKwF,kBAAkBqB,GAAK0M,EAE3C,CAGJ,cADOvT,KAAKyF,gBAAgBoB,GAAKmM,GAC1BA,CACX,CACA,IAAK9D,MAAMC,QAA4F,QAAnF0C,EAAqC,QAA/BjC,EAAK5P,KAAKyF,uBAAoC,IAAPmK,OAAgB,EAASA,EAAG/I,UAAyB,IAAPgL,OAAgB,EAASA,EAAGmB,IACvI,OAAOA,EAEX,IAAIQ,EAAoBxT,KAAKyF,gBAAgBoB,GAAKmM,GAC9CS,EAAoBD,EAAkBA,EAAkB9P,OAAS,GACjEgQ,EAAqBV,EACzB,GAAIS,EAAmB,CACnB,GAA0B,UAAtBA,EACA,MAAO,CACHX,KAAM,GACN7L,SAAU,MACV8L,WAAW,GAIfW,GAAuB,IAAMD,EAC7BlL,EAAOtB,SAAW/E,KAAK2F,MAAM4L,EAErC,CACA,OAA0F,QAArFd,EAAuC,QAAjCb,EAAK9R,KAAKwF,yBAAsC,IAAPsM,OAAgB,EAASA,EAAGjL,UAAyB,IAAP8L,OAAgB,EAASA,EAAGe,IAC7B,QAArFb,EAAuC,QAAjCD,EAAK5S,KAAKwF,yBAAsC,IAAPoN,OAAgB,EAASA,EAAG/L,UAAyB,IAAPgM,OAAgB,EAASA,EAAGa,GAE9HV,CACX,CACAN,MAAM7L,EAAK0B,EAAQrH,GACf,IAAIsG,EAAe,KACftG,EAAO6F,eAAe,kBACtBS,EAAetG,EAAOsG,oBACftG,EAAOsG,cAElB,IAAID,EAAMpH,OAAOiH,OAAO,CACpBU,OAAQ,QACT5G,EAAQ,CACP6G,KAAMQ,aAAkByJ,SAAWzJ,EAASrG,KAAKC,UAAUoG,KAE/D,OAAOvI,KAAKsH,OAAOT,EAAKU,EAAKC,EACjC,CACAmM,WAAW1S,EAAMC,GACb,IAAIyF,EAAImH,EACR,OAAOhK,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI4T,QAAiB5T,KAAK6N,aAAa,CAAEM,oBAAoB,KACzD,SAAEiE,GAAalR,EACf+P,EAAe,CAAC,EA0EpB,GAzEwB,mBAAbmB,IACPnB,EAAamB,SAAWA,UAE5BlR,GAAS,EAAI6D,EAAQyJ,aAAatN,GAAU,CAAC,EAAG,CAC5C2S,UAAW,SACXjI,aAAc,CAAC,SAAU,WACzBkI,MAAO,SACPC,mBAAoB,SACpBC,UAAW,CAAC,SAAU,MACtBC,MAAO,CACHC,KAAM,SACN7T,MAAO,CAAC,SAAU,SAAU,YAEhC8T,KAAO1F,IACH,GAAU,OAANA,EACA,OAAOA,EAEX,GAAiB,iBAANA,EACP,MAAO,CAACA,GAEZ,GAAIS,MAAMC,QAAQV,GAAI,CAClB,IAAK,IAAI5O,KAAK4O,EACV,GAAiB,iBAAN5O,EACP,MAAM,IAAIa,EAAcD,QAAQ,6CAA8C,CAAEY,KAAM,sBAG9F,OAAOoN,CACX,CACA,MAAM,IAAI/N,EAAcD,QAAQ,6CAA8C,CAAEY,KAAM,qBAAsB,EAEhH+S,OAAQ,CACJC,gBAAkB5F,IACd,GAAU,OAANA,EACA,OAAO,KAEN,GAAiB,iBAANA,EAAgB,CAC5B,GAAI,EAAIA,EACJ,MAAM,IAAI/N,EAAcD,QAAQ,mCAAoC,CAAEY,KAAM,sBAEhF,GAAIoN,EAAI,iBACJ,MAAM,IAAI/N,EAAcD,QAAQ,kDAAmD,CAAEY,KAAM,sBAE/F,OAAOoN,CACX,CACA,MAAM,IAAI/N,EAAcD,QAAQ,oDAAqD,CAAEY,KAAM,qBAAsB,EAEvHiT,yBAA0B,UAC1BC,eAAiB9F,IACb,IAAI+F,EAAQ,wBACZ,GAAU,OAAN/F,EACA,OAAO,KAKX,GAHIA,GAAkB,iBAANA,IACZA,EAAI,CAACA,KAELS,MAAMC,QAAQV,GASd,MAAM,IAAI/N,EAAcD,QAAQ,IAAI+T,oCAAyC,CAAEnT,KAAM,sBARrF,IAAK,IAAIoT,KAAKhG,EAEV,IADA,EAAI1J,EAAQqB,gBAAgBqO,EAAG,eAAeD,MAC1CxU,KAAK8F,QAAU2O,IAAMzU,KAAK8F,OAAOiG,QACjC,MAAM,IAAIrL,EAAcD,QAAQ,IAAI+T,2CAAgD,CAAEnT,KAAM,sBAOxG,OAAOoN,CAAC,IAGjB,GAAI,CAAC,WAAY,WAAY,aAClBrN,gBACPF,EAAOkR,gBACPlR,EAAOyB,UACRzB,aAAuC,EAASA,EAAO4S,UAAY5S,aAAuC,EAASA,EAAO2S,WAC5H,MAAM,IAAInT,EAAcD,QAAQ,qDAAsD,CAAEY,KAAM,sBAElG,GAAIH,aAAuC,EAASA,EAAO+S,MAAO,CAC9D,KAA8B,QAAvBtN,EAAKzF,EAAO+S,aAA0B,IAAPtN,OAAgB,EAASA,EAAGuN,OAAuF,iBAA9C,QAAvBpG,EAAK5M,EAAO+S,aAA0B,IAAPnG,OAAgB,EAASA,EAAGoG,MAC3I,MAAM,IAAIxT,EAAcD,QAAQ,0CAA2C,CAAEY,KAAM,sBAGvF,IADA,EAAI0D,EAAQ2P,gCAAgCxT,EAAO+S,MAAMC,KAAM,cAAc,IACxEhT,EAAO+S,MAAMlN,eAAe,SAC7B,MAAM,IAAIrG,EAAcD,QAAQ,6BAA8B,CAAEY,KAAM,sBAE1E,GAAkC,iBAAvBH,EAAO+S,MAAM5T,OACpB,EAAI0E,EAAQ2P,gCAAgCxT,EAAO+S,MAAM5T,MAAO,eAAe,GAAO,QAErF,GAAkC,iBAAvBa,EAAO+S,MAAM5T,QACrBa,EAAO+S,MAAM5T,MAAQL,KAAK2F,sBAAwBzE,EAAO+S,MAAM5T,OAASL,KAAK2F,sBAC7E,MAAM,IAAIjF,EAAcD,QAAQ,wCAAwCT,KAAK2F,2BAA2B3F,KAAK2F,uBAAwB,CAAEtE,KAAM,qBAGzJ,CACA,GAAIuS,EAAU,CACV,GAA8E,aAAzE1S,aAAuC,EAASA,EAAO0K,cACxD,MAAM,IAAIlL,EAAcD,QAAQ,8CAA+C,CAAEY,KAAM,oBAE3F,GAAIH,EAAO6F,eAAe,sBACtB,MAAM,IAAIrG,EAAcD,QAAQ,oDAAqD,CAAEY,KAAM,mBAErG,CACA,IAAIyN,EAAU,CAAEH,MAAM,GAClBgG,EAAW,KAUf,OATI1T,aAAgBK,iBAAmBL,aAAgB+Q,SACnD7R,OAAOiH,OAAO0H,EAAS,CAAEe,KAAM3O,IAG/ByT,EAAWxU,OAAOiH,OAAO,CAAEmC,KAAMtI,GAAQC,GAEzCf,OAAOqI,KAAKyI,GAAcvN,QAC1BvD,OAAOiH,OAAO0H,EAAS,CAAEmC,kBAEtB,EAAIlM,EAAQ6P,6BAA6B5U,KAAK0O,QAAQ,cAAeiG,GAAY1T,EAAM6N,GAClG,GACJ,CACA+F,WAAWtM,EAAQ0I,GACf,OAAOnN,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,MAAM8U,EAAa,CACf,WAAc,SACd,SAAY,SACZ,UAAa,SACb,kBAAqB,UAEnBC,EAAS,CACXjB,MAAO,SACPE,UAAW,SACXpI,aAAc,CAAC,SAAU,WACzBoJ,aAAc,CACVjJ,QAAU0C,IAAM,EAAI1J,EAAQqB,gBAAgBqI,EAAG,qCAC/CwG,MAAO,UAEXhB,MAAO,CACHC,KAAOzF,IACH,GAAiB,iBAANA,EACP,MAAM,IAAI/N,EAAcD,QAAQ,uCAAwC,CAAEY,KAAM,sBAEpF,OAAIyT,EAAW/N,eAAe0H,GACnBA,GAEJ,EAAI1J,EAAQ2P,gCAAgCjG,EAAG,cAAc,GAAM,EAAM,EAEpFpO,MAAQoO,IACJ,IAAI9H,EACJ,IAA6B,QAAvBA,EAAK4B,EAAO0L,aAA0B,IAAPtN,OAAgB,EAASA,EAAGuN,OAASY,EAAW/N,eAAewB,EAAO0L,MAAMC,MAAO,CACpH,IAAIgB,EAAKJ,EAAWvM,EAAO0L,MAAMC,MACjC,UAAWzF,IAAMyG,EACb,OAAOzG,EAGP,MAAM,IAAI/N,EAAcD,QAAQ,iCAAiCyU,KAAO,CAAE7T,KAAM,qBAExF,CACA,GAAiB,iBAANoN,EAAgB,CACvB,GAAIA,EAAIzO,KAAK2F,sBAAwB8I,GAAKzO,KAAK2F,qBAC3C,MAAM,IAAIjF,EAAcD,QAAQ,wCAAwCT,KAAK2F,2BAA2B3F,KAAK2F,uBAAwB,CAAEtE,KAAM,sBAEjJ,OAAOoN,CACX,CACK,MAAiB,kBAANA,EACLA,GAGA,EAAI1J,EAAQ2P,gCAAgCjG,EAAG,eAAe,GAAO,EAChF,EAEJ0G,UAAW,CAAC,KAAM,MAAO,KAAM,MAAO,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KAAM,MAC7EC,MAAQ3G,IACJ,KAAM,UAAWlG,EAAO0L,OACpB,MAAM,IAAIvT,EAAcD,QAAQ,6BAA8B,CAAEY,KAAM,sBAE1E,GAA0B,eAAtBkH,EAAO0L,MAAMC,KACb,MAAM,IAAIxT,EAAcD,QAAQ,8BAA8B8H,EAAO0L,MAAMC,OAAQ,CAAE7S,KAAM,sBAE/F,UAAWkH,EAAO0L,MAAM5T,cAAiBoO,EACrC,MAAM,IAAI/N,EAAcD,QAAQ,6DAA8D,CAAEY,KAAM,sBAE1G,MAAiB,iBAANoN,GACA,EAAI1J,EAAQ2P,gCAAgCjG,EAAG,eAEnDA,CAAC,GAGhB0F,KAAM,UAGV,IAAK5L,OADLA,GAAS,EAAIxD,EAAQyJ,aAAajG,GAAU,CAAC,EAAGwM,EAAQ,CAAC,gBACb,EAASxM,EAAOyM,gBAAkBhV,KAAK6F,QAC/E,MAAM,IAAInF,EAAcD,QAAQ,kBAAmB,CAAEY,KAAM,oBAE/D,IAAIqD,QAAe1E,KAAK0O,QAAQ,cAAenG,EAAQpI,OAAOiH,OAAO,CAAEuH,QAAMpG,EAAOxB,eAAe,mBAA4C,YAAxBwB,EAAOqD,cAA8BrD,EAAOqD,aAAe,OAAc5L,KAAK8F,QAAU,CAAEmL,kBACjN,IAAK,IAAIpR,KAAK6E,EAAOoO,KACjBpO,EAAOoO,KAAKjT,IAAK,EAAIkF,EAAQ6P,uBAAuBlQ,EAAOoO,KAAKjT,IAGpE,OAAO6E,CACX,GACJ,CACA2Q,SAAS9M,EAAQ0I,GACb,OAAOnN,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI8C,QAAY9C,KAAK0O,QAAQ,aAAa,EAAI3J,EAAQyJ,aAAajG,GAAU,CAAC,EAAG,CAC7EuL,MAAO,SACPqB,UAAW,CAAC,KAAM,MAAO,KAAM,MAAO,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KAAM,QAC7EhV,OAAOiH,OAAO,CAAEuH,MAAM,GAAQ,CAAEsC,kBAChCqE,EAAU,CACV,QAAW,oBACX,IAAO,QACP,KAAQ,WAEZ,GAAIpG,MAAMC,QAAQrM,EAAIgQ,MAClB,IAAK,IAAIyC,KAAKzS,EAAIgQ,KACd,IAAK,IAAIlK,KAAK0M,EACNC,EAAExO,eAAe6B,KACjB2M,EAAED,EAAQ1M,IAAM2M,EAAE3M,UACX2M,EAAE3M,IAKzB,OAAO9F,CACX,GACJ,CACA0S,SAASjN,EAAQ0I,GACb,OAAOnN,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAIuO,GAAI,EAAIxJ,EAAQyJ,aAAajG,GAAU,CAAC,EAAG,CAC3CuL,MAAO,SACPG,MAAQxF,IAAM,EAAI1J,EAAQ2P,gCAAgCjG,EAAG,cAAc,GAAM,GACjFgH,SAAU,CACNvB,KAAM,CACF,iBACA,eACA,eACA,eACA,aACA,aACA,eACA,cAEJ7T,MAAO,CAAC,SAAU,SAAU,WAC5B8U,UAAW,CAAC,KAAM,MAAO,KAAM,MAAO,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KAAM,QAElF,CAAC,UACJ,GAAI5G,EAAExH,eAAe,YAAa,CAC9B,GAAmB,eAAfwH,EAAEkH,SAA2B,CAC7B,IAAKlH,EAAExH,eAAe,SAClB,MAAM,IAAIrG,EAAcD,QAAQ,mDAAoD,CAAEY,KAAM,sBAEhG,GAA8C,MAA1CkN,EAAE0F,MAAMxL,UAAU8F,EAAE0F,MAAMvQ,OAAS,GACnC,MAAM,IAAIhD,EAAcD,QAAQ,yCAA0C,CAAEY,KAAM,qBAE1F,CACA,GAAIkN,EAAEkH,SAAS1O,eAAe,eAAiBwH,EAAEkH,SAAS1O,eAAe,SACrE,MAAM,IAAIrG,EAAcD,QAAQ,uCAAwC,CAAEY,KAAM,qBAExF,CACA,IAAIyB,QAAY9C,KAAK0O,QAAQ,YAAaH,EAAGpO,OAAOiH,OAAO,CAAEuH,MAAM,GAAQ,CAAEsC,kBACzEqE,EAAU,CACV,SAAY,gBACZ,SAAY,eACZ,UAAa,eACb,UAAa,aACb,UAAa,iBACb,UAAa,eACb,QAAW,gBAwBf,OAtBIpG,MAAMC,QAAQrM,EAAIgQ,QAClBhQ,EAAIgQ,KAAOhQ,EAAIgQ,KAAKnK,KAAK9I,IACrB,IAAI6V,EAAS7V,EAAE8V,IAAIxN,MAAM,KACrByN,EAAW,CACX9B,MAAO4B,EAAO,GACdzB,MAAOyB,EAAO,GACdG,kBAAmBhW,EAAEiW,SAEzB,IAAK,IAAIlN,KAAK0M,GACNzV,aAA6B,EAASA,EAAE+I,MACxCgN,EAASN,EAAQ1M,IAAM/I,EAAE+I,KAEzBgN,aAA2C,EAASA,EAASG,2BAC7DH,EAASI,yBAA2BnW,EAAEoW,UAAYpW,EAAEqW,WAEpDN,aAA2C,EAASA,EAASO,4BAC7DP,EAASQ,0BAA4BvW,EAAEwW,UAAYxW,EAAEyW,UAG7D,OAAOV,CAAQ,KAGhB9S,CACX,GACJ,CACAyT,OAAOhO,EAAQ0I,GACX,OAAOnN,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI8C,QAAY9C,KAAK0O,QAAQ,WAAW,EAAI3J,EAAQyJ,aAAajG,GAAU,CAAC,EAAG,CAC3EuL,MAAO,SACP0C,IAAK,SACLrB,UAAW,CAAC,KAAM,MAAO,KAAM,MAAO,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KAAM,QAC7EhV,OAAOiH,OAAO,CAAEuH,MAAM,GAAQ,CAAEsC,kBACpC,GAAI/B,MAAMC,QAAQrM,EAAIgQ,MAClB,IAAK,IAAIjT,KAAKiD,EAAIgQ,KAAM,CACpB,IAAI2D,EAAO3T,EAAIgQ,KAAKjT,GAChB6W,EAASD,EAAKD,IAAIrO,MAAM,KAC5BrF,EAAIgQ,KAAKjT,GAAK,CACViU,MAAO4C,EAAO,GACdF,IAAKE,EAAO,GACZb,kBAAmBY,EAAKX,QAEhC,CAEJ,OAAOhT,CACX,GACJ,CACA6T,cAAcpO,GACV,OAAOzE,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI4W,QAAgB5W,KAAK6N,eACzB,GAAI+I,KAAarO,aAAuC,EAASA,EAAOO,SACpE,MAAM,IAAIpI,EAAcD,QAAQ,0BAA2B,CAAEY,KAAM,sBAEvE,IAAKuV,KAAarO,aAAuC,EAASA,EAAOuL,OACrE,MAAM,IAAIpT,EAAcD,QAAQ,uBAAwB,CAAEY,KAAM,sBAEpE,GAAIkH,aAAuC,EAASA,EAAOsL,UACvD,aAAa7T,KAAK0O,QAAQ,cAAe,CACrC5F,QAASP,EAAOO,QAChB+K,UAAW,CAACpF,IACR,IAAIoI,GAAK,EAAI9R,EAAQ2P,gCAAgCjG,EAAG,aAAa,GACrE,MAAkB,iBAAPoI,EACA,CAACA,GAELA,CACV,EANU,CAMRtO,EAAOsL,YACX,CAAElF,MAAM,IAEV,CACD,KAAMpG,aAAuC,EAASA,EAAOuL,OACzD,MAAM,IAAIpT,EAAcD,QAAQ,6CAA8C,CAAEY,KAAM,sBAE1F,IAAI0T,EAAS,CACTnJ,aAAc,CAAC,SAAU,WACzBkI,MAAO,CACHI,KAAM,SACNc,aAAevG,IACX,GAAImI,EACA,OAAO,EAAI7R,EAAQqB,gBAAgBqI,EAAG,mCAE1C,MAAM,IAAI/N,EAAcD,QAAQ,oDAAqD,CAAEY,KAAM,qBAAsB,EAEvH0S,mBAAqBtF,IACjB,IAAI9H,EACJ,GAAIiQ,GAAiJ,iBAAtD,QAAvEjQ,EAAK4B,aAAuC,EAASA,EAAOuL,aAA0B,IAAPnN,OAAgB,EAASA,EAAGqO,cAC/H,MAAM,IAAItU,EAAcD,QAAQ,oCAAqC,CAAEY,KAAM,sBAEjF,GAAiB,iBAANoN,GACHA,EAAI,GAAKA,EAAI,GACb,OAAOA,EAGf,MAAM,IAAI/N,EAAcD,QAAQ,+CAAgD,CAAEY,KAAM,qBAAsB,IAI1HkH,GAAS,EAAIxD,EAAQyJ,aAAajG,GAAU,CAAC,EAAGwM,EAAQ6B,EAAU,CAAC,WAAa,CAAC,QAAS,gBAC9F,CACA,aAAa5W,KAAK0O,QAAQ,cAAenG,EAAQ,CAAEoG,MAAM,GAC7D,GACJ,CACAmI,oBAAoB7V,EAAMC,GACtB,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAIuI,GAAS,EAAIxD,EAAQyJ,aAAavN,GAAQ,CAAC,EAAG,CAC9CqL,MAAQmC,IAAM,EAAI1J,EAAQ0B,eAAegI,GACzCsI,cAAe,CAAC,UAAW,KAAM,IAClC,CAAC,UACJ,aAAa/W,KAAK0O,QAAQ,uBAAwBnG,EACtD,GACJ,CACAyO,uBAAuB9V,GACnB,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,YAiBnC,SAhBMA,KAAK0J,aACXxI,GAAS,EAAI6D,EAAQyJ,aAAatN,EAAQ,CACtC6K,QAAU0C,IAAM,EAAI1J,EAAQqB,gBAAgBqI,EAAG,aAC/CwG,MAAQxG,IACJ,GAAU,MAANA,EACA,OAAOA,EAEX,GAAiB,iBAANA,EACP,MAAM,IAAI/N,EAAcD,QAAQ,kCAAmC,CAAEY,KAAM,sBAE1E,GAAIoN,EAAI,GAAKA,EAAI,EAClB,MAAM,IAAI/N,EAAcD,QAAQ,wCAAyC,CAAEY,KAAM,sBAErF,OAAOoN,CAAC,GAEb,CAAC,UAAW,UACXzO,KAAK8F,QAAU5E,EAAO6K,UAAY/L,KAAK8F,OAAOiG,QAC9C,MAAM,IAAIrL,EAAcD,QAAQ,0CAA0C,CAAEY,KAAM,sBAEtF,OAAOH,CACX,GACJ,CACA+V,UAAU/V,GACN,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI,QAAE+L,EAAO,MAAEkJ,SAAgBjV,KAAKgX,uBAAuB9V,GAC3D,GAAc,MAAV+T,EACA,MAAM,IAAIvU,EAAcD,QAAQ,0CAA2C,CAAEY,KAAM,sBAEvF,aAAarB,KAAK0O,QAAQ,eAAgB,CACtCuI,UAAWlL,EACXkJ,SACD,CAAEtG,MAAM,GACf,GACJ,CACAuI,YAAYhW,GACR,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI,QAAE+L,EAAO,MAAEkJ,SAAgBjV,KAAKgX,uBAAuB9V,GAC3D,aAAalB,KAAK0O,QAAQ,eAAgB,CACtCwI,YAAanL,EACbkJ,SACD,CAAEtG,MAAM,GACf,GACJ,CACAwI,gBAAgBjW,GACZ,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI,QAAE+L,EAAO,MAAEkJ,SAAgBjV,KAAKgX,uBAAuB9V,GAC3D,aAAalB,KAAK0O,QAAQ,eAAgB,CAAE0I,MAAOrL,EAASkJ,SAAS,CAAEtG,MAAM,GACjF,GACJ,CACA0I,kBAAkBnW,GACd,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI,QAAE+L,EAAO,MAAEkJ,SAAgBjV,KAAKgX,uBAAuB9V,GAC3D,aAAalB,KAAK0O,QAAQ,eAAgB,CAAE4I,QAASvL,EAASkJ,SAAS,CAAEtG,MAAM,GACnF,GACJ,CACA4I,qBAAqBrW,GACjB,IAAIyF,EACJ,OAAO7C,EAAU9D,UAAM,OAAQ,GAAQ,YAkBnC,aAjBMA,KAAK0J,aACXxI,GAAS,EAAI6D,EAAQyJ,aAAatN,EAAQ,CACtC6K,QAAU0C,IACN,IACI,OAAO,EAAI1J,EAAQqB,gBAAgBqI,EAAG,YAG1C,CADA,MAAOjM,GACP,CACA,IACI,OAAO,EAAIuC,EAAQ0B,eAAegI,EAGtC,CADA,MAAOjM,GACP,CACA,MAAM,IAAI9B,EAAcD,QAAQ,yDAA0D,CAAEY,KAAM,qBAAsB,EAE5H4T,MAAO,YACL,CAAC,EACAjV,KAAKwX,iBAAiB,CACzBC,WAAYvW,EAAO6K,UAAmC,QAAtBpF,EAAK3G,KAAK8F,cAA2B,IAAPa,OAAgB,EAASA,EAAGoF,SAC1FkJ,MAAO/T,EAAO+T,OAEtB,GACJ,CACAyC,mBAAmBxW,GACf,IAAIyF,EACJ,OAAO7C,EAAU9D,UAAM,OAAQ,GAAQ,kBAC7BA,KAAK0J,aAKX,IAAIiO,EAAY,CACZ3C,cALJ9T,GAAS,EAAI6D,EAAQyJ,aAAatN,EAAQ,CACtC6K,QAAU0C,IAAM,EAAI1J,EAAQqB,gBAAgBqI,EAAG,aAC/CwG,MAAO,YACL,CAAC,GAEkBlJ,UAAmC,QAAtBpF,EAAK3G,KAAK8F,cAA2B,IAAPa,OAAgB,EAASA,EAAGoF,SAC5FkJ,MAAO/T,EAAO+T,OAElB,OAAOjV,KAAKwX,iBAAiBG,EACjC,GACJ,CACAH,iBAAiBjP,EAAQ0I,EAAc2G,GACnC,OAAO9T,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI6X,GAAkB,EAkCtB,GAjCAtP,GAAS,EAAIxD,EAAQyJ,aAAajG,EAAQ,CACtCkP,WAAahJ,IACT,IACI,OAAO,EAAI1J,EAAQqB,gBAAgBqI,EAAG,0BAG1C,CADA,MAAOjM,GACP,CACA,IACI,IAAIsV,GAAU,EAAI/S,EAAQ0B,eAAegI,GAEzC,OADAoJ,GAAkB,EACXC,CAGX,CADA,MAAOtV,GACP,CACA,MAAM,IAAI9B,EAAcD,QAAQ,yDAA0D,CAAEY,KAAM,qBAAsB,EAE5H4T,MAAO,SACPD,aAAevG,IACX,IACI,OAAO,EAAI1J,EAAQqB,gBAAgBqI,EAAG,4BAG1C,CADA,MAAOjM,GACP,CACA,GAAiB,iBAANiM,GAA+B,KAAbA,EAAE/K,OAC3B,OAAO+K,EAEX,MAAM,IAAI/N,EAAcD,QAAQ,6DAA8D,CAAEY,KAAM,qBAAsB,EAEhI0W,QAAS,YAETF,KAAqBtP,aAAuC,EAASA,EAAOyM,gBAC5EzM,EAAOyM,aAAehV,KAAK8I,UAE1BP,EAAOkP,aAAelP,EAAOyM,aAC9B,MAAM,IAAItU,EAAcD,QAAQ,sEAAuE,CAAEY,KAAM,sBAEnH,IAAID,QAAiBpB,KAAK0O,QAAQ,mBAAoBnG,EAAQpI,OAAOiH,OAAO,CAAEuH,MAAOkJ,GAAmB,CAAE5G,kBAW1G,OAVA7P,EAAS0R,KAAO1R,EAAS0R,KAAKnK,IAAIiP,GAAW,CAAEI,IAC3C,IAAIhD,EAAe,CAAC,EAChBiD,EAAWD,EAAEhM,IAAI7D,MAAM,KAM3B,OALA6M,EAAayC,WAAaQ,EAAS,GACnCjD,EAAaA,aAAeiD,EAAS,GACrCjD,EAAaC,MAAQiD,SAASD,EAAS,IACvCjD,EAAarT,UAAYqW,EAAEG,KAC3BnD,EAAa+C,QAAoC,MAA1BC,EAAEI,IAAI3P,UAAU,EAAG,GACnCuM,CACV,IACM5T,CACX,GACJ,CACAiX,eAAe9P,EAAQ0I,GACnB,OAAOnN,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI4W,QAAgB5W,KAAK6N,eACrByK,EAAa,CACb,WAAc,SACd,UAAa,SACb,KAAQ,SACR,UAAa,SACb,QAAW,UAEV/P,IACI0I,IACDA,EAAe,CAAC,GAEpBA,EAAaI,WAAY,GAE7B,IAAIkH,EAAUhQ,GAAU,CACpBiQ,UAAW,YACXnY,MAAO,EACP8U,UAAW,KAEf5M,GAAS,EAAIxD,EAAQyJ,aAAa+J,EAAS,CACvCC,UAAW,CAAC,aAAc,YAAa,OAAQ,YAAa,QAAS,WACrEnY,MAAQoO,IACJ,UAAWA,IAAM6J,EAAWC,EAAQC,WAChC,MAAM,IAAI9X,EAAcD,QAAQ,4CAA4C8X,EAAQC,oBAAqB,CAAEnX,KAAM,sBAEhH,GAAiB,iBAANoN,IAAmBA,EAC/B,MAAM,IAAI/N,EAAcD,QAAQ,sCAAuC,CAAEY,KAAM,sBAEnF,OAAOoN,CAAC,EAEZ2G,MAAQ3G,IACJ,IAAK8J,EAAQxR,eAAe,iBAAmB0H,UAAa8J,EAAQlY,MAChE,MAAM,IAAIK,EAAcD,QAAQ,wCAAyC,CAAEY,KAAM,sBAErF,OAAOoN,CAAC,EAEZ0G,UAAW,CAAC,IAAK,KAAM,IAAK,IAAK,KAAM,KAAM,MAAO,KAAM,KAAM,MAAO,IAAM,KAC7EF,MAAQwD,IACJ,GAAU,eAANA,IAAuBzY,KAAK6F,QAC5B,MAAM,IAAInF,EAAcD,QAAQ,4BAA6B,CAAEY,KAAM,oBAEzE,GAAiB,iBAANoX,GAAwB,eAANA,EACzB,MAAM,IAAI/X,EAAcD,QAAQ,8DAA+D,CAAEY,KAAM,sBAE3G,IAAKuV,GAAW6B,EAAIP,SAASlY,KAAK6F,QAAQgG,QAAQC,QAAQF,cACtD,MAAM,IAAIlL,EAAcD,QAAQ,sBAAuB,CAAEY,KAAM,oBAEnE,MAAU,eAANoX,EACO,EAEJA,CAAC,GAEb,CAAC,YAAa,QAAS,UAC1B,IAAIC,QAAc1Y,KAAK0O,QAAyB,IAAjBnG,EAAO0M,MAAc,kBAAoB,qBAAsB1M,EAAQpI,OAAOiH,OAAO,CAAEU,OAAQ,MAAO6G,KAAuB,IAAjBpG,EAAO0M,OAAe,CAAEhE,kBAC/J0H,EAAQ,CACR,WAAc,MACd,UAAa,OACb,UAAa,OACb,KAAQ,OACR,QAAW,OACX,QAAW,OACX,IAAO,OAEPC,EAAW,CACX,WAAc,GACd,UAAa,EACb,UAAa,EACb,KAAQ,EACR,QAAW,GACX,QAAW,EACX,IAAO,IASX,OAPAF,EAAM5F,KAAO4F,EAAM5F,KAAKnK,KAAIkQ,IACxB,IAAIC,EAAW,CAAC,EAChB,IAAK,IAAIlQ,KAAK+P,EACVG,EAASlQ,GAAKiQ,EAAEF,EAAM/P,KAAOgQ,EAASD,EAAM/P,IAEhD,OAAOkQ,CAAQ,IAEZJ,CACX,GACJ,CACAK,OAAO9X,EAAMC,GACT,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,YACnCA,KAAKgN,SACL,IAAIzE,GAAS,EAAIxD,EAAQyJ,aAAavN,GAAQ,CAAC,EAAG,CAC9CqL,MAAQmC,IAAM,EAAI1J,EAAQ0B,eAAegI,GACzC1B,SAAW0B,IAAM,EAAI1J,EAAQiU,kBAAkBvK,GAC/CyF,KAAM,SACN+E,QAAS,SACTC,OAAQ,SACRC,UAAY1K,IAAM,EAAI1J,EAAQyB,mBAAmBiI,GACjD2K,aAAe3K,IAAM,EAAI1J,EAAQwB,qBAAqBkI,GACtD4K,aAAc,CAAC,UAAW,KAAM,GAChCC,eAAgB,CAAC,UAAW,KAAM,GAClCC,cAAe,CAAC,UAAW,KAAM,GACjCC,iBAAkB,CAAC,UAAW,KAAM,GACpCC,oBAAqB,CAAC,UAAW,KAAM,GACvCC,mBAAoB,CAAC,UAAW,KAAM,IACvC,CAAC,QAAS,aACbxY,GAAS,EAAI6D,EAAQyJ,aAAatN,GAAU,CAAC,EAAG,CAC5CyY,aAAelL,IACX,GAAiB,iBAANA,EACP,OAAO,EAAI1J,EAAQuB,aAAamI,GAE/B,GAAiB,kBAANA,EACZ,OAAOA,EAGP,MAAM,IAAI/N,EAAcD,QAAQ,4DAA6D,CAAEY,KAAM,qBACzG,EAEJuY,MAAQnL,IACJ,GAAiB,kBAANA,EAAiB,CACxB,GAAIvN,EAAOyY,cAAgBlL,EACvB,MAAM,IAAI/N,EAAcD,QAAQ,6DAA8D,CAAEY,KAAM,sBAE1G,OAAOoN,CACX,CACA,MAAM,IAAI/N,EAAcD,QAAQ,0CAA2C,CAAEY,KAAM,qBAAsB,IAGjH,IAAI,MAAEuY,GAAQ,EAAK,aAAED,GAAe,GAAUzY,GAAU,CAAC,EACzD,IAAKyY,GAAgBpR,EAAO8Q,aACxB,MAAM,IAAI3Y,EAAcD,QAAQ,yEAA0E,CAAEY,KAAM,sBAGtH,aADMrB,KAAK0O,QAAQ,SAAUnG,EAAQ,CAAEsH,KAAM3O,IACzCyY,EACO,gFAEFC,QACQ5Z,KAAK4Z,MAAM,CAAEtN,MAAO/D,EAAO+D,MAAOS,SAAUxE,EAAOwE,WAGzD,wCAEf,GACJ,CACAC,SACQhN,KAAKoF,aACLpF,KAAKoF,YAAYyU,UAErB,IAAIC,EAAe,CACf,QAAW,KACX,gBAAmB,CAAC,EACpB,kBAAqB,CAAC,EACtB,KAAQ,MAEZ,IAAK,IAAIlR,KAAKkR,EACV9Z,KAAK4I,GAAKkR,EAAalR,GAE3B,MAAO,wCACX,CACAmR,yBAAyBC,GACrB,OAAOlW,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAKA,KAAK0F,8BACN,MAAM,IAAIhF,EAAcD,QAAQ,uCAAwC,CAAEY,KAAM,oBAEhF2Y,IACA,EAAIjV,EAAQuB,aAAa0T,GAE7B,IAAIC,QAAeja,KAAK0O,QAAQ,iBAAkB,CAC9C5B,SAAU9M,KAAK0F,8BACfsU,aAGJ,OADAha,KAAK0F,8BAAgC,KAC9BuU,CACX,GACJ,CACAC,eAAeF,GAAW,GACtB,OAAOlW,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,GAAwB,iBAAbga,GACP,EAAIjV,EAAQuB,aAAa0T,QAExB,GAAwB,kBAAbA,EACZ,MAAM,IAAItZ,EAAcD,QAAQ,+CAAgD,CAAEY,KAAM,oBAE5F,IAAKrB,KAAKqF,kBACN,MAAM,IAAI3E,EAAcD,QAAQ,4DAA6D,CAAEY,KAAM,oBAEzG,IAAI4Y,QAAeja,KAAK0O,QAAQ,kBAAmB,CAAE5B,SAAU9M,KAAKqF,kBAAmB2U,aAEvF,OADAha,KAAKqF,kBAAoB,KAClB4U,CACX,GACJ,CACAL,MAAM3Y,EAAMC,GACRlB,KAAKgN,SACL,IAAIzE,GAAS,EAAIxD,EAAQyJ,aAAavN,EAAM,CACxCqL,MAAQmC,IAAM,EAAI1J,EAAQ0B,eAAegI,GACzC1B,SAAW0B,IAAM,EAAI1J,EAAQiU,kBAAkBvK,IAChD,CAAC,QAAS,aACb,OAAOzO,KAAKqK,iBAAiBwC,iBAAiBtE,EAAO+D,MAAO/D,EAAOwE,SACvE,CACAoN,gBAAgBC,EAAW/Y,GACvB,IAAKrB,KAAKoF,YACN,MAAM,IAAI1E,EAAcD,QAAQ,gCAAiC,CAAEY,KAAM,oBAE7E,OAAO,IAAIwB,SAAQ,CAACC,EAAKC,KACrB,IAAI4D,EAAImH,EACR,IAAIuM,EAAW,CACX7M,UAAY9I,IACJrD,EACArB,KAAKqK,iBAAiBC,cAAc,CAAEC,cAAc,IAAQvH,MAAK,KACzDhD,KAAK8F,SACL9F,KAAK8F,OAAOsU,EAAY,cAAe,GAE3CtX,EAAI,aAAasX,kBAA0B,IAC5ClX,OAAMV,IACLO,EAAIP,EAAI,IAIZM,EAAI,4CACR,EAEJ4K,UAAYlL,IACRO,EAAI,IAAIrC,EAAcD,QAAQ+B,EAAIyF,SAAW,uCAAwC,CACjF5G,KAAMmB,aAAiC,EAASA,EAAInB,OACrD,EAEPiZ,sBAAuB,MAEvBjZ,EAC4B,QAA3BsF,EAAK3G,KAAKoF,mBAAgC,IAAPuB,GAAyBA,EAAGwT,gBAAgBC,EAAW/Y,EAAMgZ,GAGrE,QAA3BvM,EAAK9N,KAAKoF,mBAAgC,IAAP0I,GAAyBA,EAAGyM,6BAA6BH,EAAWC,EAC5G,GAER,CACAG,YAAYvZ,EAAMC,GACd,IAAIG,GAAQJ,GAAO,EAAI8D,EAAQyJ,aAAavN,EAAM,CAC9CI,KAAM,CAAC,SAAU,YAChB,CAAC,GAAGA,MAAQ,GACjB,OAAOrB,KAAKma,gBAAgB,QAAS9Y,EAAKS,WAC9C,CACA2Y,aAAaxZ,EAAMC,GACf,IAAIG,GAAQJ,GAAO,EAAI8D,EAAQyJ,aAAavN,EAAM,CAC9CI,KAAM,CAAC,SAAU,YAChB,CAAC,GAAGA,MAAQ,KACjB,OAAOrB,KAAKma,gBAAgB,eAAgB9Y,EAAKS,WACrD,CACA4Y,eAAezZ,EAAMC,GACjB,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,kBAC7BA,KAAK0J,aACX,IAAInB,GAAS,EAAIxD,EAAQyJ,aAAavN,EAAM,CACxCqL,MAAQmC,IAAM,EAAI1J,EAAQ0B,eAAegI,IAC1C,CAAC,UACJ,OAAO,IAAI5L,SAAQ,CAACC,EAAKC,IAAQe,EAAU9D,UAAM,OAAQ,GAAQ,mBACpCA,KAAKqK,iBAAiBgC,kBAAkB9D,EAAO+D,QAAQlH,YACpEsV,eAAe,CACvBlN,UAAW9I,IACP5B,EAAI,4CAA4C,EAEpD4K,UAAYlL,IACRO,EAAI,IAAIrC,EAAcD,SAAS+B,aAAiC,EAASA,EAAIyF,UAAY,oCAAqC,CAAE5G,MAAOmB,aAAiC,EAASA,EAAInB,OAAS,UAAW,GAGrN,KACJ,GACJ,CACAsZ,cAAc1Z,EAAMC,GAChB,IAAIqH,GAAS,EAAIxD,EAAQyJ,aAAavN,EAAM,CACxCqL,MAAQmC,IAAM,EAAI1J,EAAQ0B,eAAegI,GACzCpN,KAAM,CAAC,SAAU,UACjBuZ,aAAenM,IAAM,EAAI1J,EAAQiU,kBAAkBvK,IACpD,CAAC,QAAS,OAAQ,iBACjBpN,EAAOkH,EAAOlH,KAAMuZ,EAAerS,EAAOqS,aAI9C,MAHoB,iBAATvZ,IACPA,EAAOA,EAAKS,YAET,IAAIe,SAAQ,CAACC,EAAKC,IAAQe,EAAU9D,UAAM,OAAQ,GAAQ,mBACpCA,KAAKqK,iBAAiBgC,kBAAkB9D,EAAO+D,QAAQlH,YACpEyV,gBAAgBxZ,EAAMuZ,EAAc,CAC5CpN,UAAW9I,IACP5B,EAAI,sCAAsC,EAE9C4K,UAAYlL,IACRO,EAAI,IAAIrC,EAAcD,SAAS+B,aAAiC,EAASA,EAAIyF,UAAY,4BAA6B,CAAE5G,KAAMmB,aAAiC,EAASA,EAAInB,OAAQ,GAGhM,KACJ,CACAyZ,iBACI,OAAOhX,EAAU9D,UAAM,OAAQ,GAAQ,YAEnC,SADMA,KAAK0J,aACP1J,KAAK8F,QAAUoJ,MAAMC,QAAQnP,KAAK8F,OAAOiV,UACzC,IAAK,IAAI/C,KAAKhY,KAAK8F,OAAOiV,SACtB,GAAI/C,EAAEgD,OACF,MAAM,IAAIta,EAAcD,QAAQ,qCAAsC,CAAEY,KAAM,oBAI1F,IAAIqD,QAAe1E,KAAK0O,QAAQ,iBAAkB,CAAEuM,SAAS,GAAQ,CAAEtM,MAAM,IAE7E,OADA3O,KAAKgN,SACEtI,CACX,GACJ,CACAwW,mBAAmBja,EAAMC,GACrB,IAAIyF,EACJ,OAAO7C,EAAU9D,UAAM,OAAQ,GAAQ,kBAC7BA,KAAK0J,aACX,IAAIyR,EAA+B,QAAvBxU,EAAK3G,KAAK6F,eAA4B,IAAPc,OAAgB,EAASA,EAAG2E,WACvE,IAAK6P,IAASnb,KAAKoF,YACf,MAAM,IAAI1E,EAAcD,QAAQ,4BAA6B,CAAEY,KAAM,oBAEzE,IAAIkH,GAAS,EAAIxD,EAAQyJ,aAAavN,GAAQ,CAAC,EAAG,CAC9CqL,MAAQmC,IAAM,EAAI1J,EAAQ0B,eAAegI,GACzCyF,KAAM,SACN+E,QAAS,SACTC,OAAQ,SACRC,UAAY1K,IAAM,EAAI1J,EAAQyB,mBAAmBiI,GACjD2K,aAAe3K,IAAM,EAAI1J,EAAQwB,qBAAqBkI,GACtD4K,aAAc,UACdI,oBAAqB,UACrBH,eAAgB,UAChBC,cAAe,UACfC,iBAAkB,UAClBE,mBAAoB,UACpB0B,iBAAmB3M,IAAM,EAAI1J,EAAQiU,kBAAkBvK,GACvDmM,aAAenM,IAAM,EAAI1J,EAAQiU,kBAAkBvK,KAEvD,GAAIlG,GAA4B,iBAAXA,IAAwBpI,OAAOqI,KAAKD,GAAQ7E,OAC7D,OAAO1D,KAAK8F,OAEhB,GAAIyC,EAAOqS,cAAgBrS,EAAO6S,iBAAkB,CAChD,IAAK7S,EAAO6S,iBACR,MAAM,IAAI1a,EAAcD,QAAQ,uDAAwD,CAAEY,KAAM,sBAEpG,IAAKkH,EAAOqS,aACR,MAAM,IAAIla,EAAcD,QAAQ,+CAAgD,CAAEY,KAAM,sBAExFkH,EAAOqS,eAAiBrS,EAAO6S,yBACzB,IAAIvY,SAAQ,CAACC,EAAKC,KACpB/C,KAAKoF,YAAYiW,eAAe9S,EAAO6S,iBAAkB7S,EAAOqS,cAAc,CAACpY,EAAKkC,KAC5ElC,GACAO,EAAI,IAAIrC,EAAcD,SAAS+B,aAAiC,EAASA,EAAIyF,UAAY,mCAAoC,CAAE5G,MAAOmB,aAAiC,EAASA,EAAInB,QAAUmB,aAAiC,EAASA,EAAI0R,SAEhPpR,EAAI4B,EAAO,GACb,YAGH6D,EAAO6S,wBACP7S,EAAOqS,YAClB,CACA,GAAIrS,EAAO+D,MAAO,CACd,IAAIgP,QAAgBtb,KAAKoK,iBAAiB,CAAEoC,aAAcjE,EAAO+D,QACjE/D,EAA2B,mBAAI+S,EAAQ/O,IAC3C,CACA,IAAIgP,EAAY,CACZ,CAAC,qBAAsB,iBAAkB,2CACzC,CAAC,eAAgB,iBAAkB,2CACnC,CAAC,sBAAuB,wBAAyB,kDAErD,GAAIvb,KAAK8F,OACL,IAAK,IAAItC,KAAK+X,EACV,GAAIhT,EAAO/E,EAAE,MAAQxD,KAAK8F,OAAOtC,EAAE,IAC/B,MAAM,IAAI9C,EAAcD,QAAQ,GAAG+C,EAAE,OAAOA,EAAE,eAAgB,CAAEnC,KAAM,oBAIlF,IAAIma,EAAa,CACb,eACA,sBACA,iBACA,gBACA,mBACA,sBAEJ,IAAK,IAAI5S,KAAKL,EACV,GAAIA,EAAOK,KAAOuS,EAAKvS,UACZL,EAAOK,QAEb,GAAI4S,EAAWtU,SAAS0B,GAAI,CAC7B,IAAI6S,EAAalT,EAAOK,GACE,kBAAf6S,IACPA,EAAaA,EAAa,IAAM,KACpClT,EAAO,UAAYK,GAAK6S,SACjBlT,EAAOK,EAClB,CAEJ,GAAIL,GAA4B,iBAAXA,GAAuBpI,OAAOqI,KAAKD,GAAQ7E,OAAQ,CACpE,IAAIgY,EAAQ,GACZ,IAAK,IAAIrY,KAAOkF,EACZmT,EAAMvU,KAAK,IAAItC,EAA6B8W,qBAAqB,CAC7DnQ,KAAMnI,EACNoI,MAAOlD,EAAOlF,YAGhB,IAAIR,SAAQ,CAACC,EAAKC,KACpB,IAAI4D,EACwB,QAA3BA,EAAK3G,KAAKoF,mBAAgC,IAAPuB,GAAyBA,EAAGsE,iBAAiByQ,GAAO,CAAClZ,EAAKkC,KACtFlC,GACAO,EAAI,EACCP,aAAiC,EAASA,EAAInB,QAAUmB,aAAiC,EAASA,EAAI0R,OACtG1R,aAAiC,EAASA,EAAIyF,UAAY,oCAGnEnF,EAAI4B,EAAO,GACb,UAEA1E,KAAKqK,iBAAiBC,cAAc,CAAEC,cAAc,GAC9D,CACA,OAAOvK,KAAK8F,MAChB,GACJ,CACA8V,eAAe3a,EAAMC,GACjB,OAAO4C,EAAU9D,UAAM,OAAQ,GAAQ,YAInC,IAAIuH,EAAM,CACNoH,MAAM,GAOV,OALIzN,OANJA,GAAS,EAAI6D,EAAQyJ,aAAatN,GAAU,CAAC,EAAG,CAC5CuP,QAAS,gBAK8B,EAASvP,EAAOuP,UACvDtQ,OAAOiH,OAAOG,EAAK,CAAEsI,KAAM,CAAE,YAAe3O,EAAOuP,iBAEjDzQ,KAAK0O,QAAQ,gBAAiBzN,EAAMsG,SACpCvH,KAAKqK,iBAAiBC,gBACrBtK,KAAK8F,MAChB,GACJ,CACA+V,SAAStT,EAAQ0I,GACb,OAAOnN,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI4W,QAAgB5W,KAAK6N,aAAa,CAClCM,oBAAoB,IAEnB5F,IACI0I,IACDA,EAAe,CAAC,GAEpBA,EAAaI,WAAY,GAE7B9I,EAASA,GAAU,CACfiQ,UAAW,YACXrD,UAAW,IACX9U,MAAO,GAEX,MAAMyb,EAAiB,CACnB,QAAYrN,IAAM,EAAI1J,EAAQqB,gBAAgBqI,GAC9C,KAAQ,SACR,MAAUA,IAAM,EAAI1J,EAAQ0B,eAAegI,GAC3C,aAAiBA,IAAM,EAAI1J,EAAQwB,qBAAqBkI,GACxD,QAAW,SACX,OAAU,SACV,UAAcA,IAAM,EAAI1J,EAAQyB,mBAAmBiI,GACnD,OAAWA,IACP,GAAiB,iBAANA,GAA+B,iBAANA,GAAkBA,EAAE/K,OAAS,EAC7D,MAAM,IAAIhD,EAAcD,QAAQ,+CAEpC,OAAOgO,CAAC,EAEZ,YAAe,SACf,UAAa,SACb,MAAS,SACT,mBAAuBA,IACnB,IAAKmI,EACD,MAAM,IAAIlW,EAAcD,QAAQ,wDAAyD,CAAEY,KAAM,oBAErG,OAAOoN,CAAC,EAEZ,QAAYA,GACJA,EACO,qBAGA,qBA2CnB,IAAKlG,OAtCLA,GAAS,EAAIxD,EAAQyJ,aAAajG,EAAQ,CACtCiQ,UAAW,CACP,UACA,OACA,QACA,eACA,UACA,SACA,YACA,SACA,cACA,YACA,QACA,qBACA,WAEJrD,UAAW,CAAC,IAAK,KAAM,IAAK,IAAK,KAAM,KAAM,MAAO,KAAM,KAAM,MAAO,IAAM,KAC7E9U,MAAQoO,IACJ,IAAIsN,EAAUD,EAAevT,EAAOiQ,WACpC,GAAuB,mBAAZuD,EACP,OAAOA,EAAQtN,GAEd,UAAWA,IAAMsN,EAClB,MAAM,IAAIrb,EAAcD,QAAQ,qCAAqC8H,EAAOiQ,oBAAqB,CAAEnX,KAAM,sBAE7G,OAAOoN,CAAC,EAEZ2G,MAAQ3G,IACJ,IAAIsN,EAAUD,EAAevT,EAAOiQ,WACpC,GAAuB,mBAAZuD,EACP,OAAOA,EAAQtN,GAEd,UAAWA,IAAMsN,EAClB,MAAM,IAAIrb,EAAcD,QAAQ,qCAAqC8H,EAAOiQ,oBAAqB,CAAEnX,KAAM,sBAE7G,OAAOoN,CAAC,GApCD,CAAC,YAAa,gBAuCe,EAASlG,EAAO4M,YAAqF,OAAtE5M,aAAuC,EAASA,EAAO4M,YAAsB5M,EAAOxB,eAAe,SAC1K,MAAM,IAAIrG,EAAcD,QAAQ,6CAA8C,CAAEY,KAAM,sBAE1F,GAAI,CAAC,UAAW,WAAW6F,SAASqB,EAAOiQ,YAAmC,MAArBjQ,EAAO4M,UAC5D,MAAM,IAAIzU,EAAcD,QAAQ,gCAAgC8H,EAAOiQ,aAAc,CAAEnX,KAAM,sBAKjG,GAHyB,YAArBkH,EAAOiQ,YACPjQ,EAAOiQ,UAAY,aAEuD,iBAAlEjQ,aAAuC,EAASA,EAAOlI,UAAyBkI,aAAuC,EAASA,EAAOlI,OAC/I,MAAM,IAAIK,EAAcD,QAAQ,uCAAwC,CAAEY,KAAM,sBAEpF,GAAkF,iBAAtEkH,aAAuC,EAASA,EAAOiQ,cAA6BjQ,aAAuC,EAASA,EAAOiQ,WACnJ,MAAM,IAAI9X,EAAcD,QAAQ,6CAA8C,CAAEY,KAAM,sBAE1F,IAAI2a,EAAqC,YAArBzT,EAAOiQ,WAA2BjQ,EAAOlI,QAAUL,KAAK6F,QAAQgG,QAAQC,QAAQE,IACpG,GAAI4K,IAAYoF,IAAkBzT,EAAOO,QACrC,MAAM,IAAIpI,EAAcD,QAAQ,0BAA2B,CAAEY,KAAM,sBAEvE,IAAIqD,QAAe1E,KAAK0O,QAAQ,YAAanG,EAAQ,CAAEoG,MAAM,EAAMsC,iBACnE,IAAKvM,EAAOoO,KAAK,KAAOkJ,GAAiBtX,EAAOoO,KAAKpP,OAAS,EAC1D,OAAOgB,EAEX,IAAI8F,EAAO9F,EAAOoO,KAAK,GACvB3S,OAAOiH,OAAOoD,EAAMxK,KAAK8F,QACzB0E,EAAKyR,iBAAmB/Z,KAAK2F,MAAM3F,KAAKC,UAAUqI,IAClD,IAAI0R,EAAc,CACd,UACA,UACA,OACA,SACA,UACA,YACA,eACA,QACA,SACA,cACA,YACA,QACA,MACA,aAEJ,IAAK,IAAItT,KAAK4B,EAAKyR,iBACVC,EAAYhV,SAAS0B,WACf4B,EAAKyR,iBAAiBrT,GAGrC,OAAO4B,CACX,GACJ,CACAJ,iBAAiB7B,GACb,OAAOzE,EAAU9D,UAAM,OAAQ,GAAQ,YACnC,IAAI0O,EAAU,KACVyN,EAAmB,CAAC,GACpB5T,aAAuC,EAASA,EAAOiE,gBACnDxM,KAAKsF,cAAciD,EAAOiE,cAC1BrM,OAAOiH,OAAO+U,EAAkB,CAAE5P,KAAMvM,KAAKsF,cAAciD,EAAOiE,gBAGlEkC,EAAU,CACNlC,cAAc,EAAIzH,EAAQ0B,eAAe8B,EAAOiE,gBAIvDxM,KAAK+F,YAAc/F,KAAK+F,WAAW+C,UAAY9I,KAAK8I,UAAW4F,IAChD,OAAZA,IACAA,EAAU,CAAC,GAEfvO,OAAOiH,OAAOsH,EAAS,CACnB5F,QAAS9I,KAAK8I,QACd5D,cAAelF,KAAKkF,iBAG5B/E,OAAOiH,OAAO+U,EAAmBzN,QAAgB1O,KAAK0O,QAAQ,UAAWA,EAAS,CAAEoB,uBAAuB,IAAU9P,KAAK+F,aACtHwC,aAAuC,EAASA,EAAOiE,gBACvDxM,KAAKsF,cAAciD,EAAOiE,cAAgB2P,EAAiB5P,MAE/D,IAAIxG,EAAa7D,KAAK2F,MAAM3F,KAAKC,UAAUga,IAG3C,cAFOpW,EAAWwG,KAClBvM,KAAK+F,WAAaA,EACXoW,CACX,GACJ,EAEJhZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,aAAc,MAClCjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,sBAAuB,MAC3CjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,YAAa,MACjCjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,cAAe,MACnCjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,kBAAmB,MACvCjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,oBAAqB,MACzCjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,SAAU,MAC9BjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,QAAS,MAC7BjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,cAAe,MACnCjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,eAAgB,MACpCjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,iBAAkB,MACtCjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,gBAAiB,MACrCjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,qBAAsB,MAC1CjZ,EAAW,EACP,EAAI2B,EAAanE,iBAClBJ,EAAM6b,UAAW,iBAAkB,MACtC5c,EAAA,QAAkBe,4BCx+DlBJ,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtD,MAAMC,UAAmBoC,MACrBsC,YAAY2I,EAAOmB,GACXnB,aAAiBjL,OACjB2Z,MAAM1O,EAAM1F,SAAW,yBACvBjI,KAAK4N,MAAQD,EACb3N,KAAKkU,KAAOvG,EAAMuG,KACdvG,EAAM5G,eAAe,UACrB/G,KAAKqB,KAAOsM,EAAMtM,OAGA,iBAAVsM,IACZ0O,MAAM1O,GAAS,yBACf3N,KAAKkU,KAAO,aACZlU,KAAKqB,KAAO,QACRyN,IACIA,EAAQzN,OACRrB,KAAKqB,KAAOyN,EAAQzN,MAEpByN,EAAQlB,QACR5N,KAAK4N,MAAQkB,EAAQlB,QAIrC,EAEJpO,EAAA,QAAkBc,oCC1BlB,IAAIP,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,EACxD,EACAE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQ8c,OAAS9c,EAAQ8G,YAAc9G,EAAQ+G,oBAAsB/G,EAAQwZ,iBAAmBxZ,EAAQiH,cAAgBjH,EAAQgH,kBAAoBhH,EAAQ4G,eAAiB5G,EAAQ+R,oBAAsB/R,EAAQgP,YAAchP,EAAQoV,sBAAwBpV,EAAQkV,oCAAiC,EAC1S,MAAMhU,EAAgBX,EAAgB,EAAQ,MAmN9C,SAASwR,EAAoBtQ,GACzB,SAASsb,EAAW1M,EAAMxM,EAAKgD,EAAKmW,GAAS,GACrC3M,EAAKxM,IAAQmZ,EACTtN,MAAMC,QAAQU,GACdA,EAAKxM,GAAK8D,KAAKd,GAGfwJ,EAAKxM,GAAO,CAACwM,EAAKxM,GAAMgD,GAI5BwJ,EAAKxM,GAAOgD,CAEpB,CACA,GAAIpF,aAAgB+Q,SAAU,CAC1B,IAAInC,EAAO,CAAC,EACR4M,EAAgB,EAChB/K,EAAQ,GACZ,IAAK,IAAIgL,KAAQzb,EAAKsO,UAAW,CAC7B,IAAI2E,EAAOwI,EAAK,GACZjO,EAAIiO,EAAK,GACb,GAAIjO,aAAakO,KACRjL,EAAMxK,SAASgN,IAChBxC,EAAMvK,KAAK+M,GAEfuI,GAAiBG,KAAKC,MAAOpO,EAAEqO,KAAO,WAErC,GAAIrO,aAAasO,UAIlB,GAHKrL,EAAMxK,SAASgN,IAChBxC,EAAMvK,KAAK+M,GAEXzF,GAAKA,EAAE/K,OAAS,EAChB,IAAK,IAAIiS,EAAM,EAAGA,GAAOlH,EAAE/K,OAAS,EAAGiS,IACnC8G,GAAiBG,KAAKC,MAAOpO,EAAEgI,KAAKd,GAAKmH,KAAO,WAKxDP,EAAW1M,EAAMqE,EAAMzF,EAE/B,CACA,GAAIgO,EAAgB,KAChB,MAAM,IAAI/b,EAAcD,QAAQ,+DAAgE,CAAEY,KAAM,oBAE5G,MAAO,CAAEwO,OAAM6B,QACnB,CACK,GAAIzQ,aAAgBK,gBAAiB,CACtC,IAAIuO,EAAO,CAAC,EACR6B,EAAQ,GACR+K,EAAgB,EAChBO,EAAS/b,EAAKgc,iBAAiB,SAC/BC,EAAWjc,EAAKgc,iBAAiB,YACrC,IAAK,IAAIpd,KAAKqd,EACNrd,EAAEqU,MACFqI,EAAW1M,EAAMhQ,EAAEqU,KAAMrU,EAAEQ,OAGnC,IAAK,IAAIR,KAAKmd,EACV,GAAInd,EAAEqU,KACF,GAAe,WAAXrU,EAAEsS,MAAqBtS,EAAEQ,MACzBkc,EAAW1M,EAAMhQ,EAAEqU,KAAMvI,OAAO9L,EAAEQ,aAEjC,GAAe,aAAXR,EAAEsS,MAAkC,UAAXtS,EAAEsS,KAChB,OAAZtS,EAAEQ,OAA8B,SAAZR,EAAEQ,MACtBkc,EAAW1M,EAAMhQ,EAAEqU,KAAMrU,EAAEsd,SAAS,GAEnB,UAAZtd,EAAEQ,MACPkc,EAAW1M,EAAMhQ,EAAEqU,MAAOrU,EAAEsd,SAAS,GAEhCtd,EAAEsd,SACPZ,EAAW1M,EAAMhQ,EAAEqU,KAAMrU,EAAEQ,OAAO,QAGrC,GAAe,SAAXR,EAAEsS,MAIP,GAHKT,EAAMxK,SAASrH,EAAEqU,OAClBxC,EAAMvK,KAAKtH,EAAEqU,MAEbrU,EAAE6R,OAAS7R,EAAE6R,MAAMhO,OAAS,EAC5B,IAAK,IAAIiS,EAAM,EAAGA,GAAO9V,EAAE6R,MAAMhO,OAAS,EAAGiS,IACzC8G,GAAiBG,KAAKC,MAAOhd,EAAE6R,MAAM+E,KAAKd,GAAKmH,KAAO,WAK9DP,EAAW1M,EAAMhQ,EAAEqU,KAAMrU,EAAEQ,OAIvC,GAAIoc,EAAgB,KAChB,MAAM,IAAI/b,EAAcD,QAAQ,+DAAgE,CAAEY,KAAM,oBAE5G,MAAO,CAAEwO,OAAM6B,QACnB,CACA,OAAO,IACX,CA1OAlS,EAAQ8c,OAtEO,SAASA,EAAOc,GAC3B,SAASC,EAAYhd,EAAOid,GACxB,OAAQjd,IAAUid,EAAWjd,GAAU,GAAKid,CAChD,CAEA,IAGIzd,EAAG0d,EAHHC,EAAUZ,KAAKa,IACfC,EAAUF,EAAQ,EAAG,IAGrB9Y,EAAS,GACTiZ,EAAQ,GACRC,EAAyC,EAAxBR,EAAoB,OACrC7Q,EAAO+P,EAAOuB,EAAIvB,EAAOuB,GAAK,GAC9BjV,EAAI0T,EAAO1T,EAAI0T,EAAO1T,GAAK,GAC3BkV,EAAelV,EAAgB,OAC/BmV,EAAc,CAAC,EACnB,IAAK,IAAIC,EAAY,EAAGF,EAAe,GAAIE,IACvC,IAAKD,EAAYC,GAAY,CACzB,IAAKne,EAAI,EAAGA,EAAI,IAAKA,GAAKme,EACtBD,EAAYle,GAAKme,EAErBzR,EAAKuR,GAAiBN,EAAQQ,EAAW,IAAMN,EAAW,EAC1D9U,EAAEkV,KAAmBN,EAAQQ,EAAW,EAAI,GAAKN,EAAW,CAChE,CAGJ,IADAN,GAAS,IACFA,EAAoB,OAAI,GAAK,IAChCA,GAAS,KACb,IAAKvd,EAAI,EAAGA,EAAIud,EAAoB,OAAGvd,IAAK,CAExC,GADA0d,EAAIH,EAAMa,WAAWpe,GACjB0d,GAAK,EACL,OAEJI,EAAM9d,GAAK,IAAM0d,IAAO,EAAI1d,GAAK,EAAK,CAC1C,CAGA,IAFA8d,EAAMA,EAAoB,QAAOC,EAAiBF,EAAW,EAC7DC,EAAMA,EAAoB,QAAK,EAC1BJ,EAAI,EAAGA,EAAII,EAAoB,QAAI,CACpC,IAAIO,EAAIP,EAAMQ,MAAMZ,EAAGA,GAAK,IACxBa,EAAU7R,EAEd,IADAA,EAAOA,EAAK4R,MAAM,EAAG,GAChBte,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACrB,IACIwe,EAAMH,EAAEre,EAAI,IAAKye,EAAKJ,EAAEre,EAAI,GAC5BD,EAAI2M,EAAK,GAAI/H,EAAI+H,EAAK,GACtBgS,EAAQhS,EAAK,IACV8Q,EAAY7Y,EAAG,GAAK6Y,EAAY7Y,EAAG,IAAM6Y,EAAY7Y,EAAG,MACvDA,EAAI+H,EAAK,IAAS/H,EAAK+H,EAAK,IAC9B3D,EAAE/I,IACDqe,EAAEre,GAAMA,EAAI,GAAMqe,EAAEre,GAAMqe,EAAEre,EAAI,KAC5Bwd,EAAYgB,EAAK,GAAKhB,EAAYgB,EAAK,IAAOA,IAAQ,GACvDH,EAAEre,EAAI,IACLwd,EAAYiB,EAAI,IAAMjB,EAAYiB,EAAI,IAAOA,IAAO,IAAQ,GAGvE/R,EAAO,CAAEgS,IAFIlB,EAAYzd,EAAG,GAAKyd,EAAYzd,EAAG,IAAMyd,EAAYzd,EAAG,MAC7DA,EAAI2M,EAAK,GAAO3M,EAAI2M,EAAK,GAAOA,EAAK,GAAKA,EAAK,KAC7B,GAAGiS,OAAOjS,GACpCA,EAAK,GAAMA,EAAK,GAAKgS,EAAS,CAClC,CACA,IAAK1e,EAAI,EAAGA,EAAI,EAAGA,IACf0M,EAAK1M,GAAM0M,EAAK1M,GAAKue,EAAQve,GAAM,CAE3C,CACA,IAAKA,EAAI,EAAGA,EAAI,EAAGA,IACf,IAAK0d,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACpB,IAAIkB,EAAKlS,EAAK1M,IAAW,EAAJ0d,EAAU,IAC/B7Y,IAAY+Z,EAAI,GAAM,EAAI,IAAMA,EAAE3c,SAAS,GAC/C,CAEJ,OAAO4C,CACX,EA4IAlF,EAAQgP,YA1IR,SAASA,EAAYjG,EAAQwM,EAAQ/D,EAAW,KAAM0N,EAAc,GAAIC,EAAa,MACjF,IAAIhY,EAOJ,SAASiY,EAAiB1L,GACtB,GAAIA,aAAerQ,QACf,MAAM,IAAInC,EAAcD,QAAQ,oCAAqC,CAAEY,KAAM,sBAEjF,OAAO6R,GAAsB,iBAARA,IAAqBhE,MAAMC,QAAQ+D,IAAQ/S,OAAOqI,KAAK0K,GAAKxP,MACrF,CAXIwL,MAAMC,QAAQuP,KACdA,EAAcA,EAAYF,OAAO,CAC7B,UACA,mBAYR,IACInY,EADAkS,EAAUhQ,EAEVsW,EAAa,KACbC,EAAYH,EAAa,QAAQA,iBAA4B,uCACjE,GAAmB,OAAfA,EAAqB,CACrB,GAAIC,EAAiBrG,GAAU,CAEvBA,EADAA,aAAmBjX,iBAAmBiX,aAAmBvG,SACR,QAAtCrL,EAAK4K,EAAoBhJ,UAA4B,IAAP5B,OAAgB,EAASA,EAAGkJ,KAG3E3N,KAAK2F,MAAM3F,KAAKC,UAAUoG,IAExC,IAAK,IAAIK,KAAK2P,EACV,IAAKxD,EAAOhO,eAAe6B,IAAMsG,MAAMC,QAAQuP,KAAiBA,EAAYxX,SAAS0B,GACjF,MAAM,IAAIlI,EAAcD,QAAQ,aAAamI,8BAA+B,CAAEvH,KAAM,sBAG5F,GAAI6N,MAAMC,QAAQ6B,IAAaA,EAAStN,OACpC,IAAK,IAAIkF,KAAKoI,EACV,IAAK7Q,OAAOqI,KAAK+P,GAASrR,SAAS0B,GAC/B,MAAM,IAAIlI,EAAcD,QAAQ,QAAQmI,+BAAgC,CAAEvH,KAAM,qBAIhG,MACK,IA5Bc6R,EA4BIqF,IA3BM,iBAARrF,IAAqBhE,MAAMC,QAAQ+D,KAAS/S,OAAOqI,KAAK0K,GAAKxP,aA2B5B,IAAZ6U,EAAyB,CAC/D,IAAIK,EAAW,CAAC,EAChB,IAAK,IAAIZ,KAAKjD,EAAQ,CAClB,IAAIgK,EAAchK,EAAOiD,GACrB9I,MAAMC,QAAQ4P,IAA+D,mBAAxCA,EAAYA,EAAYrb,OAAS,KACtEkV,EAASZ,GAAK+G,EAAYA,EAAYrb,OAAS,KACvD,CACA,OAAOvD,OAAOqI,KAAKoQ,GAAUlV,OAASkV,EAAWL,CACrD,CACA,GAAgB,OAAZA,EACA,OAAO,IAEf,CAxCA,IAAuBrF,EAyCvB,GAAI0L,EAAiB7J,IAAW6J,EAAiBrG,GAAU,CACvD,IAAK,IAAIP,KAAKjD,EAAQ,CAClB,IAAIgK,EAAchK,EAAOiD,GACzB,GAAIO,EAAQxR,eAAeiR,SAA2B,IAAdO,EAAQP,GAC5CO,EAAQP,GAAKxJ,EAAY+J,EAAQP,GAAI+G,EAAa,KAAM,KAAM/G,OAE7D,CACD,IAAIgH,EAAgB9P,MAAMC,QAAQ4P,IACiB,mBAAxCA,EAAYA,EAAYrb,OAAS,GAAoBqb,EAAYA,EAAYrb,OAAS,GAAK,KACtG,GAAIsb,EAAe,CACf,IAAIC,EAAMD,SACE/M,IAARgN,IACA1G,EAAQP,GAAKiH,EAErB,CACJ,CACJ,CACA5Y,EAAMkS,CACV,MACK,GAAIrJ,MAAMC,QAAQ4F,GACnB,IAAK,IAAIiD,KAAKjD,EACV,SAC2B9C,WAAZsG,GAAsC,mBAANP,IACvC3R,EAAMmI,EAAY+J,EAASP,EAAG,KAAM,KAAM2G,IAE9C,KAYJ,CAVA,MAAOnc,GACH,GAAmB,iBAARA,GAA4C,WAAxBA,EAAIiG,UAAU,EAAG,GAAiB,CAE7D,IAAIP,GADJ1F,EAAMA,EAAIiG,UAAU,IACHN,MAAM,KACvB0W,EAAa,IAAIne,EAAcD,QAAQyH,EAAO,GAAI,CAAE7G,KAAM6G,EAAO,KACjE,KACJ,CAEI2W,EAAarc,CAErB,KAGH,IAAsB,mBAAXuS,EACZ,OAAOA,EAAOwD,GAEb,GAAsB,iBAAXxD,EACZ,GAAI7F,MAAMC,QAAQoJ,GAAU,CACxB,GAAe,UAAXxD,EACA,MAAM,IAAIrU,EAAcD,QAAQ,wBAAwB8X,KAAWuG,IAAa,CAAEzd,KAAM,sBAE5F,IAAK,IAAIkN,KAAKgK,EACV,IAAK,CAAC,SAAU,SAAU,WAAWrR,gBAAgBqH,IAAY,OAANA,EACvD,MAAM,IAAI7N,EAAcD,QAAQ,wBAAwB8N,UAAUoQ,kBAA4B,CAAEtd,KAAM,sBAG9GgF,EAAMkS,CACV,MACK,GAAK,CAAC,SAAU,SAAU,UAAW,QAAS,YAAYrR,SAAS6N,GAQnE,WAAWwD,IAAYxD,EASxB,MAAM,IAAIrU,EAAcD,QAAQ,UAAU8X,IAAUuG,IAAa,CAAEzd,KAAM,sBARzE,GAAe,WAAX0T,GACI6H,KAAKsC,IAAI3G,GAAW,iBACpB,KAAM,4BAA4BoG,2EAG1CtY,EAAMkS,CAIV,KAlBiF,CAC7E,GAAIA,IAAYxD,EAIZ,MAAM,IAAIrU,EAAcD,QAAQ,UAAU8X,IAAUuG,IAAa,CAAEzd,KAAM,sBAHzEgF,EAAMkS,CAKd,MAagB,OAAXxD,IACL1O,EAAMkS,EACV,CACA,QAAYtG,IAAR5L,GAAqBwY,EACrB,MAAMA,EAEV,OAAOxY,CACX,EAiGA7G,EAAQ+R,oBAAsBA,EAc9B/R,EAAQ4G,eAbR,SAAwByQ,EAAIrC,EAAQ,WAEhC,IAAKqC,EACD,MAAM,IAAInW,EAAcD,QAAQ,GAAG+T,cAAmB,CAAEnT,KAAM,sBAE7D,GAAkB,iBAAPwV,EACZ,MAAM,IAAInW,EAAcD,QAAQ,GAAG+T,4BAAiC,CAAEnT,KAAM,sBAE3E,IAAKwV,EAAGsI,MAPI,+EAQb,MAAM,IAAIze,EAAcD,QAAQ,GAAG+T,gBAAqB,CAAEnT,KAAM,sBAEpE,OAAOwV,CACX,EAQArX,EAAQ+G,oBANR,SAA6BlG,GACzB,GAAqB,iBAAVA,GAA0C,MAApBA,EAAM+e,OAAO,IAAcC,MAAM1T,OAAOtL,EAAMoI,UAAU,KACrF,MAAM,IAAI/H,EAAcD,QAAQ,gFAAiF,CAAEY,KAAM,sBAE7H,OAAOhB,CACX,EAcAb,EAAQgH,kBAZR,SAA2B2S,GACvB,GAAyB,iBAAdA,EACP,MAAM,IAAIzY,EAAcD,QAAQ,2EAA4E,CAAEY,KAAM,sBAEnH,CACD,IAAIie,EAAa,IAAIC,OAAO,qDAC5B,GAAyB,KAArBpG,EAAUzV,QAAiD,IAAhCyV,EAAUhR,MAAM,KAAKzE,SAAiB4b,EAAWE,KAAKrG,GACjF,MAAM,IAAIzY,EAAcD,QAAQ,2EAA4E,CAAEY,KAAM,qBAE5H,CACA,OAAO8X,CACX,EAiBA3Z,EAAQwZ,iBAfR,SAA0BjM,GACtB,IAAKA,EACD,MAAM,IAAIrM,EAAcD,QAAQ,uBAAwB,CAAEY,KAAM,sBAE/D,GAAwB,iBAAb0L,EACZ,MAAM,IAAIrM,EAAcD,QAAQ,qCAAsC,CAAEY,KAAM,qBAE7E,GAAI0L,EAASrJ,OAAS,EACvB,MAAM,IAAIhD,EAAcD,QAAQ,8CAA+C,CAAEY,KAAM,qBAEtF,GAAI0L,EAASrJ,OAAS,GACvB,MAAM,IAAIhD,EAAcD,QAAQ,6CAA8C,CAAEY,KAAM,qBAE1F,OAAO0L,CACX,EAsBAvN,EAAQiH,cApBR,SAAuB6F,EAAOmT,EAAY,SACtC,IAAKnT,EACD,MAAM,IAAI5L,EAAcD,QAAQ,IAAIgf,eAAwB,CAAEpe,KAAM,mBAEnE,GAAqB,iBAAViL,EACZ,MAAM,IAAI5L,EAAcD,QAAQ,IAAIgf,4BAAqC,CAAEpe,KAAM,kBAEhF,GAAIiL,EAAM5I,OAAS,GAAK4I,EAAM5I,OAAS,GACxC,MAAM,IAAIhD,EAAcD,QAAQ,IAAIgf,4DAAqE,CAAEpe,KAAM,kBAEhH,GAAI,uEAAuEme,KAAKlT,KACjFA,EAAQA,EAAMoT,QACMvX,MAAM,KACR,GAAGA,MAAM,KACnBzE,QAAU,EACd,OAAO4I,EAAMqT,cAGrB,MAAM,IAAIjf,EAAcD,QAAQ,IAAI6L,0BAA+B,CAAEjL,KAAM,iBAC/E,EAkDA7B,EAAQ8G,YAhDR,SAAqBO,GACjB,MAAM+Y,EAAU,MACZ,IAAIjZ,EACJ,IAAIiZ,GAAsF,QAA1EjZ,EAAgB,OAAX5E,aAA8B,IAAXA,YAAoB,EAASA,OAAOO,gBAA6B,IAAPqE,OAAgB,EAASA,EAAGkZ,SAAW,KACzI,GAAgB,YAAZD,EAAuB,CACvBA,GAAW7d,OAAOO,SAASwd,SAC3B,IAAIC,EAAWH,EAAQzX,MAAM,KAC7B4X,EAASC,MACTJ,EAAUG,EAAS1X,KAAK,IAC5B,CACA,OAAOuX,CACV,EAVe,GAWhB,IAAIK,EAASzc,IACT,GAAiB,iBAANA,EAAgB,CACvB,GAAU,MAANA,EACA,MAAO,IAEN,CACD,IAAI0c,EAAK1c,EAAEkc,OACX,IAAKQ,EAAGhZ,SAAS,OAASgZ,EAAGhZ,SAAS,KAAM,CACb,MAAvBgZ,EAAGzX,UAAU,EAAG,IAAcmX,IAC9BM,EAAKN,EAAUM,GAEnB,IAAIC,EAAO,KACX,IACIA,EAAO,IAAI3e,IAAI0e,EAInB,CAFA,MAAO1d,GACH,MAAM,IAAI9B,EAAcD,QAAQ,IAAI+C,wBAAyB,CAAEnC,KAAM,qBACzE,CACA,GAAI8e,EAAKC,SAAU,CACf,IAAIvZ,EAAMsZ,EAAK5e,KAGf,MAFmC,MAA/BsF,EAAIuY,OAAOvY,EAAInD,OAAS,KACxBmD,EAAMA,EAAI4B,UAAU,EAAG5B,EAAInD,OAAS,IACjCmD,CACX,CACJ,CACJ,CACJ,CACA,MAAM,IAAInG,EAAcD,QAAQ,IAAI+C,wBAAyB,CAAEnC,KAAM,qBAAsB,EAE/F,OAAI6N,MAAMC,QAAQtI,GACPA,EAAI8B,KAAI8L,GAAKwL,EAAMxL,KAGnBwL,EAAMpZ,EAErB,EAmGArH,EAAQoV,sBAjGR,SAA+BtE,GAC3B,MAAM+P,EAAS,CAAC,EACV7X,EAAO,CACT,IAAQvF,IACJ,IAAKA,EACD,OACJod,EAAOxM,UAAY5Q,EACnB,IAAIqd,EAAkBrd,EAAEwF,UAAU,EAAG,GACrC4X,EAAOE,SAAWrI,SAASoI,EAAiB,GAAG,EAEnD,IAAQrd,IACCA,IAELod,EAAOtU,QAAU9I,EAAC,EAEtB,IAAQA,IACJ,IAAKA,EACD,OACJ,IAAIud,EAASvd,EAAEkF,MAAM,KACrBkY,EAAOvM,MAAQ0M,EAAO,GACtBH,EAAOzU,aAA4B,MAAb4U,EAAO,GAAa,UAAYtI,SAASsI,EAAO,KAClEA,aAAuC,EAASA,EAAO,MACvDH,EAAOrL,aAAe,CAClBjJ,QAASyU,EAAO,GAChBvL,MAAOiD,SAASsI,EAAO,KAE/B,EAEJ,IAAQvd,IACJ,IAAKA,EACD,OACJ,IAAIud,EAASvd,EAAEkF,MAAM,KACjB+L,EAAOsM,EAAOpY,OAAO,EAAG,GAAG,GAC3B/H,EAiEhB,SAAgCoO,GAC5B,IAAIpO,EAAQoO,EAAEhG,UAAU,GAExB,OADWgG,EAAEhG,UAAU,EAAG,IAEtB,IAAK,KACD,OAAOpI,EACX,IAAK,KACD,OAAOsL,OAAOtL,GAAS,iBAC3B,IAAK,KACD,MAAiB,MAAVA,EACX,IAAK,KACD,IACI,OAAO6B,KAAK2F,MAAMxH,EAItB,CAFA,MAAOmC,GACH,MAAM,IAAI9B,EAAcD,QAAQ,qBAAsB,CAAEY,KAAM,eAClE,CACJ,QACI,OAAOoN,EAEnB,CArFwBgS,CAAuBD,EAAOnY,KAAK,MAC/CgY,EAAOpM,MAAQ,CACXC,OACA7T,QACH,EAEL,IAAQ4C,IACCA,IAELod,EAAOrM,UAAY/Q,EAAEkF,MAAM,KAAK,GAAE,EAEtC,KAASlF,IACAA,IAELod,EAAOlM,KAAOlR,EAAC,EAEnB,IAAQA,IACCA,IAELod,EAAOK,QAAUzd,EAAC,EAEtB,SAAaA,IACJA,KAECod,aAAuC,EAASA,EAAOjM,UACzDiM,EAAOjM,OAAS,CAAC,GACrBiM,EAAOjM,OAAOE,yBAA2BrR,EAAC,EAE9C,SAAaA,IACJA,KAECod,aAAuC,EAASA,EAAOjM,UACzDiM,EAAOjM,OAAS,CAAC,GACrBiM,EAAOjM,OAAOC,gBAAkBpR,EAAC,EAErC,IAAQA,IACJod,EAAOM,iBAAmB1d,CAAC,EAE/B,QAAYA,IACHA,KAECod,aAAuC,EAASA,EAAOjM,UACzDiM,EAAOjM,OAAS,CAAC,GACrBiM,EAAOjM,OAAOG,eAAiBtR,EAAC,EAEpC,KAASA,IACL,IAAIsG,EAAOtG,EACD,UAANA,EACAsG,EAAO,CAAC,EAEG,UAANtG,IACLsG,EAAO,IAEX8W,EAAO9W,KAAOA,CAAI,GAG1B,GAAI+G,EAAOuD,UACP,OAAOvD,EAEX,IAAK,IAAI1H,KAAKJ,EACVA,EAAKI,GAAG0H,EAAO1H,IAEnB,OAAOyX,CACX,EAgDA7gB,EAAQkV,+BAzBR,SAAwCkM,EAAQrS,EAAI,YAAasS,GAAe,EAAOC,GAAkB,GACrG,IAAIC,EAAW,CAAC/I,EAAGgJ,GAAQ,KACvB,GAAiB,iBAANhJ,EACP,MAAM,IAAItX,EAAcD,QAAQ,GAAG8N,yCAA0C,CAAElN,KAAM,sBAEzF,IAAKyf,GAAmBF,EAAO1Z,SAAS,KACpC,MAAM,IAAIxG,EAAcD,QAAQ,GAAG8N,gCAAiC,CAAElN,KAAM,sBAEhF,IAAKwf,GAAgBD,EAAO1Z,SAAS,KACjC,MAAM,IAAIxG,EAAcD,QAAQ,GAAG8N,6BAA8B,CAAElN,KAAM,sBAE7E,GAAI,yCAAyCme,KAAKxH,GAC9C,MAAM,IAAItX,EAAcD,QAAQ,GAAG8N,wCAAyC,CAAElN,KAAM,qBACxF,EAEJ,GAAI6N,MAAMC,QAAQyR,GACd,IAAK,IAAI5I,KAAK4I,EACVG,EAAS/I,GAAG,QAIhB+I,EAASH,GAAQ,GAErB,OAAOA,CACX,+VC3jBA,ICLI,EDKAzT,EAAqC,WASvC,SAASA,EAAsB5D,GAC7B,IAAI0X,EAAO1X,GAAQ,CAAC,EAClB2X,EAAiBD,EAAKC,eACtBxU,EAAWuU,EAAKvU,SAChBU,EAAW6T,EAAK7T,SAChB+T,EAAiBF,EAAKE,eACtBC,EAAiBH,EAAKG,eACxBphB,KAAKqhB,eAAiBH,GAAkB,CAAC,EACzClhB,KAAKshB,eAAiBH,GAAkB,CAAC,EACzCnhB,KAAKuhB,eAAiBH,GAAkB,CAAC,EACzCphB,KAAK8M,SAAWJ,EAChB1M,KAAK+M,SAAWK,CAClB,CAKA,IAAIoU,EAASrU,EAAsBiP,UAgCnC,OA/BAoF,EAAOC,YAAc,WACnB,OAAOzhB,KAAK8M,QACd,EAKA0U,EAAOE,YAAc,WACnB,OAAO1hB,KAAK+M,QACd,EAKAyU,EAAOG,kBAAoB,WACzB,OAAO3hB,KAAKqhB,cACd,EAKAG,EAAOI,kBAAoB,WACzB,OAAO5hB,KAAKshB,cACd,EAKAE,EAAOK,kBAAoB,WACzB,OAAO7hB,KAAKuhB,cACd,EACOpU,CACT,CA3DyC,0ECazC,GAfsB,oBAAXpL,QAA0BA,OAAO+f,SAC1C,EAAS/f,OAAO+f,SAIb,GAA4B,oBAAX/f,QAA0BA,OAAOggB,WACrD,EAAShgB,OAAOggB,WAIb,QAA4B,IAAX,EAAAC,GAA0B,EAAAA,EAAOF,SACrD,EAAS,EAAAE,EAAOF,SAIb,EACH,IACE,EAAS,EAAQ,IACJ,CAAb,MAAOtf,GAAM,CAOF,SAASyf,IACtB,GAAI,EAAQ,CAEV,GAAsC,mBAA3B,EAAOC,gBAChB,IACE,OAAO,EAAOA,gBAAgB,IAAIC,YAAY,IAAI,EACrC,CAAb,MAAO3f,GAAM,CAIjB,GAAkC,mBAAvB,EAAO4f,YAChB,IACE,OAAO,EAAOA,YAAY,GAAGC,aAChB,CAAb,MAAO7f,GAAM,CAEnB,CACA,MAAM,IAAIE,MAAM,sEAClB,CCtBA,IAAI4f,EAAyB,WAC3B,SAASA,EAAU3E,EAAO4E,GACxB5E,EAAQ3d,KAAK2d,MAAQA,GAAS,GAE5B3d,KAAKuiB,SADStQ,MAAZsQ,EACcA,EAEe,EAAf5E,EAAMja,MAE1B,CACA,IAAI8d,EAASc,EAAUlG,UAWvB,OAVAoF,EAAOgB,OAAS,SAAgBC,GAE9B,IADA,IAAI9E,EAAQ,GACH9d,EAAI,EAAGA,EAAI4iB,EAAQ5iB,GAAK,EAC/B8d,EAAMxW,KAAK8a,KAEb,OAAO,IAAIK,EAAU3E,EAAO8E,EAC9B,EACAjB,EAAO1f,SAAW,WAChB,OAhCJ,SAAsB4gB,GAOpB,IALA,IAAI/E,EAAQ+E,EAAU/E,MAClB4E,EAAWG,EAAUH,SAGrBI,EAAW,GACN9iB,EAAI,EAAGA,EAAI0iB,EAAU1iB,IAAK,CACjC,IAAI+iB,EAAOjF,EAAM9d,IAAM,KAAO,GAAKA,EAAI,EAAI,EAAI,IAC/C8iB,EAASxb,MAAMyb,IAAS,GAAG9gB,SAAS,KACpC6gB,EAASxb,MAAa,GAAPyb,GAAa9gB,SAAS,IACvC,CACA,OAAO6gB,EAASta,KAAK,GACvB,CAmBWwa,CAAa7iB,KACtB,EACOsiB,CACT,CArB6B,GCN7B,UAkCA,SAAS,EAAW1iB,EAAG6e,GACZ,MAAL7e,GAAWI,KAAK8iB,WAAWljB,EAAG6e,EACpC,CAGA,SAASsE,IACP,OAAO,IAAI,EAAW,KACxB,CAGA,IAAIC,EAqDAC,EAAiC,oBAAdC,UACnBD,GAA0C,+BAArBC,UAAUC,SACjC,EAAW/G,UAAUgH,GA9BvB,SAAavjB,EAAG4Y,EAAGyF,EAAGX,EAAG/Z,EAAG6f,GAG1B,IAFA,IAAIC,EAAS,MAAJ7K,EACP8K,EAAK9K,GAAK,KACH4K,GAAK,GAAG,CACf,IAAIG,EAAc,MAAVxjB,KAAKH,GACTge,EAAI7d,KAAKH,MAAQ,GACjBgZ,EAAI0K,EAAKC,EAAI3F,EAAIyF,EAErB9f,IADAggB,EAAIF,EAAKE,IAAU,MAAJ3K,IAAe,IAAMqF,EAAEX,IAAU,WAAJ/Z,MACjC,KAAOqV,IAAM,IAAM0K,EAAK1F,GAAKra,IAAM,IAC9C0a,EAAEX,KAAW,WAAJiG,CACX,CACA,OAAOhgB,CACT,EAmBEwf,EAAQ,IACCC,GAA0C,YAArBC,UAAUC,SACxC,EAAW/G,UAAUgH,GA5CvB,SAAavjB,EAAG4Y,EAAGyF,EAAGX,EAAG/Z,EAAG6f,GAC1B,OAASA,GAAK,GAAG,CACf,IAAI5U,EAAIgK,EAAIzY,KAAKH,KAAOqe,EAAEX,GAAK/Z,EAC/BA,EAAIoZ,KAAK6G,MAAMhV,EAAI,UACnByP,EAAEX,KAAW,SAAJ9O,CACX,CACA,OAAOjL,CACT,EAsCEwf,EAAQ,KAGR,EAAW5G,UAAUgH,GAtBvB,SAAavjB,EAAG4Y,EAAGyF,EAAGX,EAAG/Z,EAAG6f,GAG1B,IAFA,IAAIC,EAAS,MAAJ7K,EACP8K,EAAK9K,GAAK,KACH4K,GAAK,GAAG,CACf,IAAIG,EAAc,MAAVxjB,KAAKH,GACTge,EAAI7d,KAAKH,MAAQ,GACjBgZ,EAAI0K,EAAKC,EAAI3F,EAAIyF,EAErB9f,IADAggB,EAAIF,EAAKE,IAAU,MAAJ3K,IAAe,IAAMqF,EAAEX,GAAK/Z,IACjC,KAAOqV,GAAK,IAAM0K,EAAK1F,EACjCK,EAAEX,KAAW,UAAJiG,CACX,CACA,OAAOhgB,CACT,EAWEwf,EAAQ,IAEV,EAAW5G,UAAUsH,GAAKV,EAC1B,EAAW5G,UAAUuH,IAAM,GAAKX,GAAS,EACzC,EAAW5G,UAAUwH,GAAK,GAAKZ,EAE/B,EAAW5G,UAAUyH,GAAKjH,KAAKa,IAAI,EADvB,IAEZ,EAAWrB,UAAU0H,GAFT,GAEsBd,EAClC,EAAW5G,UAAU2H,GAAK,EAAIf,EAHlB,GAMZ,IAEIgB,EAAIC,EADJC,EAAQ,IAAIhV,MAGhB,IADA8U,EAAK,IAAI/F,WAAW,GACfgG,EAAK,EAAGA,GAAM,IAAKA,EACtBC,EAAMF,KAAQC,EAGhB,IADAD,EAAK,IAAI/F,WAAW,GACfgG,EAAK,GAAIA,EAAK,KAAMA,EACvBC,EAAMF,KAAQC,EAGhB,IADAD,EAAK,IAAI/F,WAAW,GACfgG,EAAK,GAAIA,EAAK,KAAMA,EACvBC,EAAMF,KAAQC,EAEhB,SAASE,EAASd,GAChB,MAhBU,uCAgBGjE,OAAOiE,EACtB,CACA,SAASe,EAAMpM,EAAGnY,GAChB,IAAI2D,EAAI0gB,EAAMlM,EAAEiG,WAAWpe,IAC3B,OAAY,MAAL2D,GAAa,EAAIA,CAC1B,CAmBA,SAAS6gB,EAAIxkB,GACX,IAAIoD,EAAI8f,IAER,OADA9f,EAAEqhB,QAAQzkB,GACHoD,CACT,CAiGA,SAASshB,EAAM9L,GACb,IACElD,EADEtS,EAAI,EAsBR,OApBsB,IAAjBsS,EAAIkD,IAAM,MACbA,EAAIlD,EACJtS,GAAK,IAEa,IAAfsS,EAAIkD,GAAK,KACZA,EAAIlD,EACJtS,GAAK,GAEa,IAAfsS,EAAIkD,GAAK,KACZA,EAAIlD,EACJtS,GAAK,GAEa,IAAfsS,EAAIkD,GAAK,KACZA,EAAIlD,EACJtS,GAAK,GAEa,IAAfsS,EAAIkD,GAAK,KACZA,EAAIlD,EACJtS,GAAK,GAEAA,CACT,CAyTA,SAASuhB,EAAW3L,GAClB7Y,KAAK6Y,EAAIA,EACT7Y,KAAKykB,GAAK5L,EAAE6L,WACZ1kB,KAAK2kB,IAAgB,MAAV3kB,KAAKykB,GAChBzkB,KAAK4kB,IAAM5kB,KAAKykB,IAAM,GACtBzkB,KAAK6kB,IAAM,GAAKhM,EAAE6K,GAAK,IAAM,EAC7B1jB,KAAK8kB,IAAM,EAAIjM,EAAEtD,CACnB,CCzlBA,SAAS6M,EAAYK,GACnB,OAAO,WAAY,IAAIH,GAAYE,OAAOC,GAAQ3gB,WAAY,MAChE,CD6oBA0iB,EAAWpI,UAAU9G,QAnDrB,SAAqBmD,GACnB,IAAIxV,EAAI8f,IAIR,OAHAtK,EAAEyG,MAAM6F,UAAU/kB,KAAK6Y,EAAEtD,EAAGtS,GAC5BA,EAAE+hB,SAAShlB,KAAK6Y,EAAG,KAAM5V,GACrBwV,EAAET,EAAI,GAAK/U,EAAEgiB,UAAU,EAAWC,MAAQ,GAAGllB,KAAK6Y,EAAEsM,MAAMliB,EAAGA,GAC1DA,CACT,EA8CAuhB,EAAWpI,UAAUgJ,OA3CrB,SAAoB3M,GAClB,IAAIxV,EAAI8f,IAGR,OAFAtK,EAAE4M,OAAOpiB,GACTjD,KAAKqT,OAAOpQ,GACLA,CACT,EAuCAuhB,EAAWpI,UAAU/I,OApCrB,SAAoBoF,GAClB,KAAOA,EAAElD,GAAKvV,KAAK8kB,KAEjBrM,EAAEA,EAAElD,KAAO,EAEb,IAAK,IAAI1V,EAAI,EAAGA,EAAIG,KAAK6Y,EAAEtD,IAAK1V,EAAG,CAEjC,IAAI0d,EAAW,MAAP9E,EAAE5Y,GACNylB,EAAK/H,EAAIvd,KAAK2kB,MAAQpH,EAAIvd,KAAK4kB,KAAOnM,EAAE5Y,IAAM,IAAMG,KAAK2kB,IAAM3kB,KAAK6kB,KAAO,IAAMpM,EAAEkL,GAKvF,IAFAlL,EADA8E,EAAI1d,EAAIG,KAAK6Y,EAAEtD,IACPvV,KAAK6Y,EAAEuK,GAAG,EAAGkC,EAAI7M,EAAG5Y,EAAG,EAAGG,KAAK6Y,EAAEtD,GAElCkD,EAAE8E,IAAM9E,EAAEmL,IACfnL,EAAE8E,IAAM9E,EAAEmL,GACVnL,IAAI8E,IAER,CACA9E,EAAE8M,QACF9M,EAAE+M,UAAUxlB,KAAK6Y,EAAEtD,EAAGkD,GAClBA,EAAEwM,UAAUjlB,KAAK6Y,IAAM,GAAGJ,EAAE0M,MAAMnlB,KAAK6Y,EAAGJ,EAChD,EAgBA+L,EAAWpI,UAAUqJ,MAPrB,SAAmBhN,EAAGiN,EAAGziB,GACvBwV,EAAEkN,WAAWD,EAAGziB,GAChBjD,KAAKqT,OAAOpQ,EACd,EAKAuhB,EAAWpI,UAAUwJ,MAdrB,SAAmBnN,EAAGxV,GACpBwV,EAAEoN,SAAS5iB,GACXjD,KAAKqT,OAAOpQ,EACd,EA0FA,EAAWmZ,UAAUiJ,OAtlBrB,SAAmBpiB,GACjB,IAAK,IAAIpD,EAAIG,KAAKuV,EAAI,EAAG1V,GAAK,IAAKA,EACjCoD,EAAEpD,GAAKG,KAAKH,GAEdoD,EAAEsS,EAAIvV,KAAKuV,EACXtS,EAAE+U,EAAIhY,KAAKgY,CACb,EAilBA,EAAWoE,UAAUkI,QA9kBrB,SAAoB7L,GAClBzY,KAAKuV,EAAI,EACTvV,KAAKgY,EAAIS,EAAI,GAAK,EAAI,EAClBA,EAAI,EAAGzY,KAAK,GAAKyY,EAAWA,GAAK,EAAGzY,KAAK,GAAKyY,EAAIzY,KAAK4jB,GAAQ5jB,KAAKuV,EAAI,CAC9E,EA2kBA,EAAW6G,UAAU0G,WAjkBrB,SAAuB9K,EAAGyG,GACxB,IAAI7V,EACJ,GAAS,IAAL6V,EAAS7V,EAAI,OAAO,GAAS,GAAL6V,EAAQ7V,EAAI,OAAO,GAAS,GAAL6V,EAAQ7V,EAAI,OAAO,GAAS,IAAL6V,EAAS7V,EAAI,MAAO,IAAS,GAAL6V,EAAmB,MAAM,IAAI/b,MAAM,4CAA3BkG,EAAI,CAAkE,CAChL5I,KAAKuV,EAAI,EACTvV,KAAKgY,EAAI,EAIT,IAHA,IAAInY,EAAImY,EAAEtU,OACRoiB,GAAK,EACLC,EAAK,IACElmB,GAAK,GAAG,CACf,IAAI4Y,EAAI2L,EAAMpM,EAAGnY,GACb4Y,EAAI,EACa,KAAfT,EAAEoH,OAAOvf,KAAWimB,GAAK,IAG/BA,GAAK,EACK,GAANC,EAAS/lB,KAAKA,KAAKuV,KAAOkD,EAAWsN,EAAKnd,EAAI5I,KAAK0jB,IACrD1jB,KAAKA,KAAKuV,EAAI,KAAOkD,GAAK,GAAKzY,KAAK0jB,GAAKqC,GAAM,IAAMA,EACrD/lB,KAAKA,KAAKuV,KAAOkD,GAAKzY,KAAK0jB,GAAKqC,GAC3B/lB,KAAKA,KAAKuV,EAAI,IAAMkD,GAAKsN,GAChCA,GAAMnd,IACI5I,KAAK0jB,KAAIqC,GAAM/lB,KAAK0jB,IAChC,CACA1jB,KAAKulB,QACDO,GAAI,EAAWZ,KAAKC,MAAMnlB,KAAMA,KACtC,EA0iBA,EAAWoc,UAAUmJ,MAviBrB,WAEE,IADA,IAAI/hB,EAAIxD,KAAKgY,EAAIhY,KAAK2jB,GACf3jB,KAAKuV,EAAI,GAAKvV,KAAKA,KAAKuV,EAAI,IAAM/R,KACrCxD,KAAKuV,CAEX,EAmiBA,EAAW6G,UAAU2I,UApcrB,SAAsB1B,EAAGpgB,GACvB,IAAIpD,EACJ,IAAKA,EAAIG,KAAKuV,EAAI,EAAG1V,GAAK,IAAKA,EAC7BoD,EAAEpD,EAAIwjB,GAAKrjB,KAAKH,GAElB,IAAKA,EAAIwjB,EAAI,EAAGxjB,GAAK,IAAKA,EACxBoD,EAAEpD,GAAK,EAEToD,EAAEsS,EAAIvV,KAAKuV,EAAI8N,EACfpgB,EAAE+U,EAAIhY,KAAKgY,CACb,EA2bA,EAAWoE,UAAUoJ,UAxbrB,SAAsBnC,EAAGpgB,GACvB,IAAK,IAAIpD,EAAIwjB,EAAGxjB,EAAIG,KAAKuV,IAAK1V,EAC5BoD,EAAEpD,EAAIwjB,GAAKrjB,KAAKH,GAElBoD,EAAEsS,EAAIqH,KAAKoJ,IAAIhmB,KAAKuV,EAAI8N,EAAG,GAC3BpgB,EAAE+U,EAAIhY,KAAKgY,CACb,EAmbA,EAAWoE,UAAU6J,SAhbrB,SAAqB5C,EAAGpgB,GACtB,IAKEpD,EALEqmB,EAAK7C,EAAIrjB,KAAK0jB,GACdyC,EAAMnmB,KAAK0jB,GAAKwC,EAChBE,GAAM,GAAKD,GAAO,EAClBE,EAAKzJ,KAAK6G,MAAMJ,EAAIrjB,KAAK0jB,IAC3BlgB,EAAIxD,KAAKgY,GAAKkO,EAAKlmB,KAAK2jB,GAE1B,IAAK9jB,EAAIG,KAAKuV,EAAI,EAAG1V,GAAK,IAAKA,EAC7BoD,EAAEpD,EAAIwmB,EAAK,GAAKrmB,KAAKH,IAAMsmB,EAAM3iB,EACjCA,GAAKxD,KAAKH,GAAKumB,IAAOF,EAExB,IAAKrmB,EAAIwmB,EAAK,EAAGxmB,GAAK,IAAKA,EACzBoD,EAAEpD,GAAK,EAEToD,EAAEojB,GAAM7iB,EACRP,EAAEsS,EAAIvV,KAAKuV,EAAI8Q,EAAK,EACpBpjB,EAAE+U,EAAIhY,KAAKgY,EACX/U,EAAEsiB,OACJ,EA+ZA,EAAWnJ,UAAUkK,SA5ZrB,SAAqBjD,EAAGpgB,GACtBA,EAAE+U,EAAIhY,KAAKgY,EACX,IAAIqO,EAAKzJ,KAAK6G,MAAMJ,EAAIrjB,KAAK0jB,IAC7B,GAAI2C,GAAMrmB,KAAKuV,EACbtS,EAAEsS,EAAI,MADR,CAIA,IAAI2Q,EAAK7C,EAAIrjB,KAAK0jB,GACdyC,EAAMnmB,KAAK0jB,GAAKwC,EAChBE,GAAM,GAAKF,GAAM,EACrBjjB,EAAE,GAAKjD,KAAKqmB,IAAOH,EACnB,IAAK,IAAIrmB,EAAIwmB,EAAK,EAAGxmB,EAAIG,KAAKuV,IAAK1V,EACjCoD,EAAEpD,EAAIwmB,EAAK,KAAOrmB,KAAKH,GAAKumB,IAAOD,EACnCljB,EAAEpD,EAAIwmB,GAAMrmB,KAAKH,IAAMqmB,EAErBA,EAAK,IAAGjjB,EAAEjD,KAAKuV,EAAI8Q,EAAK,KAAOrmB,KAAKgY,EAAIoO,IAAOD,GACnDljB,EAAEsS,EAAIvV,KAAKuV,EAAI8Q,EACfpjB,EAAEsiB,OAXF,CAYF,EA2YA,EAAWnJ,UAAU+I,MAxYrB,SAAkBvlB,EAAGqD,GAInB,IAHA,IAAIpD,EAAI,EACN2D,EAAI,EACJqV,EAAI+D,KAAK2J,IAAI3mB,EAAE2V,EAAGvV,KAAKuV,GAClB1V,EAAIgZ,GACTrV,GAAKxD,KAAKH,GAAKD,EAAEC,GACjBoD,EAAEpD,KAAO2D,EAAIxD,KAAK2jB,GAClBngB,IAAMxD,KAAK0jB,GAEb,GAAI9jB,EAAE2V,EAAIvV,KAAKuV,EAAG,CAEhB,IADA/R,GAAK5D,EAAEoY,EACAnY,EAAIG,KAAKuV,GACd/R,GAAKxD,KAAKH,GACVoD,EAAEpD,KAAO2D,EAAIxD,KAAK2jB,GAClBngB,IAAMxD,KAAK0jB,GAEblgB,GAAKxD,KAAKgY,CACZ,KAAO,CAEL,IADAxU,GAAKxD,KAAKgY,EACHnY,EAAID,EAAE2V,GACX/R,GAAK5D,EAAEC,GACPoD,EAAEpD,KAAO2D,EAAIxD,KAAK2jB,GAClBngB,IAAMxD,KAAK0jB,GAEblgB,GAAK5D,EAAEoY,CACT,CACA/U,EAAE+U,EAAIxU,EAAI,GAAK,EAAI,EACfA,GAAK,EAAGP,EAAEpD,KAAOG,KAAK4jB,GAAKpgB,EAAWA,EAAI,IAAGP,EAAEpD,KAAO2D,GAC1DP,EAAEsS,EAAI1V,EACNoD,EAAEsiB,OACJ,EA2WA,EAAWnJ,UAAUuJ,WAvWrB,SAAuB/lB,EAAGqD,GACxB,IAAIwV,EAAIzY,KAAKkf,MACXwG,EAAI9lB,EAAEsf,MACJrf,EAAI4Y,EAAElD,EAEV,IADAtS,EAAEsS,EAAI1V,EAAI6lB,EAAEnQ,IACH1V,GAAK,GACZoD,EAAEpD,GAAK,EAET,IAAKA,EAAI,EAAGA,EAAI6lB,EAAEnQ,IAAK1V,EACrBoD,EAAEpD,EAAI4Y,EAAElD,GAAKkD,EAAE2K,GAAG,EAAGsC,EAAE7lB,GAAIoD,EAAGpD,EAAG,EAAG4Y,EAAElD,GAExCtS,EAAE+U,EAAI,EACN/U,EAAEsiB,QACEvlB,KAAKgY,GAAKpY,EAAEoY,GAAG,EAAWkN,KAAKC,MAAMliB,EAAGA,EAC9C,EA0VA,EAAWmZ,UAAUyJ,SAvVrB,SAAqB5iB,GAGnB,IAFA,IAAIwV,EAAIzY,KAAKkf,MACTrf,EAAIoD,EAAEsS,EAAI,EAAIkD,EAAElD,IACX1V,GAAK,GACZoD,EAAEpD,GAAK,EAET,IAAKA,EAAI,EAAGA,EAAI4Y,EAAElD,EAAI,IAAK1V,EAAG,CAC5B,IAAI2D,EAAIiV,EAAE2K,GAAGvjB,EAAG4Y,EAAE5Y,GAAIoD,EAAG,EAAIpD,EAAG,EAAG,IAC9BoD,EAAEpD,EAAI4Y,EAAElD,IAAMkD,EAAE2K,GAAGvjB,EAAI,EAAG,EAAI4Y,EAAE5Y,GAAIoD,EAAG,EAAIpD,EAAI,EAAG2D,EAAGiV,EAAElD,EAAI1V,EAAI,KAAO4Y,EAAEmL,KAC3E3gB,EAAEpD,EAAI4Y,EAAElD,IAAMkD,EAAEmL,GAChB3gB,EAAEpD,EAAI4Y,EAAElD,EAAI,GAAK,EAErB,CACItS,EAAEsS,EAAI,IAAGtS,EAAEA,EAAEsS,EAAI,IAAMkD,EAAE2K,GAAGvjB,EAAG4Y,EAAE5Y,GAAIoD,EAAG,EAAIpD,EAAG,EAAG,IACtDoD,EAAE+U,EAAI,EACN/U,EAAEsiB,OACJ,EAwUA,EAAWnJ,UAAU4I,SApUrB,SAAqBnM,EAAG2N,EAAGvjB,GACzB,IAAIwjB,EAAK5N,EAAEqG,MACX,KAAIuH,EAAGlR,GAAK,GAAZ,CACA,IAAImR,EAAK1mB,KAAKkf,MACd,GAAIwH,EAAGnR,EAAIkR,EAAGlR,EAGZ,OAFS,MAALiR,GAAWA,EAAElC,QAAQ,QAChB,MAALrhB,GAAWjD,KAAKqlB,OAAOpiB,IAGpB,MAALA,IAAWA,EAAI8f,KACnB,IAAI2C,EAAI3C,IACN4D,EAAK3mB,KAAKgY,EACV4O,EAAK/N,EAAEb,EACL6O,EAAM7mB,KAAK0jB,GAAKa,EAAMkC,EAAGA,EAAGlR,EAAI,IAEhCsR,EAAM,GACRJ,EAAGR,SAASY,EAAKnB,GACjBgB,EAAGT,SAASY,EAAK5jB,KAEjBwjB,EAAGpB,OAAOK,GACVgB,EAAGrB,OAAOpiB,IAEZ,IAAI6jB,EAAKpB,EAAEnQ,EACPwR,EAAKrB,EAAEoB,EAAK,GAChB,GAAU,GAANC,EAAJ,CACA,IAAIC,EAAKD,GAAM,GAAK/mB,KAAK8jB,KAAOgD,EAAK,EAAIpB,EAAEoB,EAAK,IAAM9mB,KAAK+jB,GAAK,GAC5DkD,EAAKjnB,KAAK6jB,GAAKmD,EACjBE,GAAM,GAAKlnB,KAAK8jB,IAAMkD,EACtBxiB,EAAI,GAAKxE,KAAK+jB,GACZlkB,EAAIoD,EAAEsS,EACRgI,EAAI1d,EAAIinB,EACRvR,EAAS,MAALiR,EAAYzD,IAAQyD,EAS1B,IARAd,EAAEX,UAAUxH,EAAGhI,GACXtS,EAAEgiB,UAAU1P,IAAM,IACpBtS,EAAEA,EAAEsS,KAAO,EACXtS,EAAEkiB,MAAM5P,EAAGtS,IAEb,EAAWkkB,IAAIpC,UAAU+B,EAAIvR,GAC7BA,EAAE4P,MAAMO,EAAGA,GAEJA,EAAEnQ,EAAIuR,GACXpB,EAAEA,EAAEnQ,KAAO,EAEb,OAASgI,GAAK,GAAG,CAEf,IAAI6J,EAAKnkB,IAAIpD,IAAMknB,EAAK/mB,KAAK2jB,GAAK/G,KAAK6G,MAAMxgB,EAAEpD,GAAKonB,GAAMhkB,EAAEpD,EAAI,GAAK2E,GAAK0iB,GAC1E,IAAKjkB,EAAEpD,IAAM6lB,EAAEtC,GAAG,EAAGgE,EAAInkB,EAAGsa,EAAG,EAAGuJ,IAAOM,EAIvC,IAFA1B,EAAEX,UAAUxH,EAAGhI,GACftS,EAAEkiB,MAAM5P,EAAGtS,GACJA,EAAEpD,KAAOunB,GACdnkB,EAAEkiB,MAAM5P,EAAGtS,EAGjB,CACS,MAALujB,IACFvjB,EAAEuiB,UAAUsB,EAAIN,GACZG,GAAMC,GAAI,EAAW1B,KAAKC,MAAMqB,EAAGA,IAEzCvjB,EAAEsS,EAAIuR,EACN7jB,EAAEsiB,QACEsB,EAAM,GAAG5jB,EAAEqjB,SAASO,EAAK5jB,GAEzB0jB,EAAK,GAAG,EAAWzB,KAAKC,MAAMliB,EAAGA,EAvClB,CAtBE,CA8DvB,EAqQA,EAAWmZ,UAAUsI,SAjPrB,WACE,GAAI1kB,KAAKuV,EAAI,EAAG,OAAO,EACvB,IAAIkD,EAAIzY,KAAK,GACb,GAAe,IAAN,EAAJyY,GAAa,OAAO,EACzB,IAAIiN,EAAQ,EAAJjN,EAaR,OAHAiN,GAJAA,GAFAA,GAFAA,EAAIA,GAAK,GAAS,GAAJjN,GAAWiN,GAAK,KAErB,GAAS,IAAJjN,GAAYiN,GAAK,MAEtB,IAAU,MAAJjN,GAAciN,EAAI,QAAW,QAInC,EAAIjN,EAAIiN,EAAI1lB,KAAK4jB,IAAM5jB,KAAK4jB,IAG1B,EAAI5jB,KAAK4jB,GAAK8B,GAAKA,CAChC,EAgOA,EAAWtJ,UAAUiL,MA1NrB,SAAkBznB,EAAGqD,GAInB,IAHA,IAAIpD,EAAI,EACN2D,EAAI,EACJqV,EAAI+D,KAAK2J,IAAI3mB,EAAE2V,EAAGvV,KAAKuV,GAClB1V,EAAIgZ,GACTrV,GAAKxD,KAAKH,GAAKD,EAAEC,GACjBoD,EAAEpD,KAAO2D,EAAIxD,KAAK2jB,GAClBngB,IAAMxD,KAAK0jB,GAEb,GAAI9jB,EAAE2V,EAAIvV,KAAKuV,EAAG,CAEhB,IADA/R,GAAK5D,EAAEoY,EACAnY,EAAIG,KAAKuV,GACd/R,GAAKxD,KAAKH,GACVoD,EAAEpD,KAAO2D,EAAIxD,KAAK2jB,GAClBngB,IAAMxD,KAAK0jB,GAEblgB,GAAKxD,KAAKgY,CACZ,KAAO,CAEL,IADAxU,GAAKxD,KAAKgY,EACHnY,EAAID,EAAE2V,GACX/R,GAAK5D,EAAEC,GACPoD,EAAEpD,KAAO2D,EAAIxD,KAAK2jB,GAClBngB,IAAMxD,KAAK0jB,GAEblgB,GAAK5D,EAAEoY,CACT,CACA/U,EAAE+U,EAAIxU,EAAI,GAAK,EAAI,EACfA,EAAI,EAAGP,EAAEpD,KAAO2D,EAAWA,GAAK,IAAGP,EAAEpD,KAAOG,KAAK4jB,GAAKpgB,GAC1DP,EAAEsS,EAAI1V,EACNoD,EAAEsiB,OACJ,EA+LA,EAAWnJ,UAAUta,SA5iBrB,SAAoB2c,GAClB,GAAIze,KAAKgY,EAAI,EAAG,MAAO,IAAMhY,KAAKsnB,SAASxlB,SAAS2c,GACpD,IAAI7V,EACJ,GAAS,IAAL6V,EAAS7V,EAAI,OAAO,GAAS,GAAL6V,EAAQ7V,EAAI,OAAO,GAAS,GAAL6V,EAAQ7V,EAAI,OAAO,GAAS,IAAL6V,EAAS7V,EAAI,MAAO,IAAS,GAAL6V,EAAmB,MAAM,IAAI/b,MAAM,4CAA3BkG,EAAI,CAAkE,CAChL,IACErF,EADEgkB,GAAM,GAAK3e,GAAK,EAElBiQ,GAAI,EACJ5V,EAAI,GACJpD,EAAIG,KAAKuV,EACPhH,EAAIvO,KAAK0jB,GAAK7jB,EAAIG,KAAK0jB,GAAK9a,EAChC,GAAI/I,KAAM,EAKR,IAJI0O,EAAIvO,KAAK0jB,KAAOngB,EAAIvD,KAAKH,IAAM0O,GAAK,IACtCsK,GAAI,EACJ5V,EAAIkhB,EAAS5gB,IAER1D,GAAK,GACN0O,EAAI3F,GACNrF,GAAKvD,KAAKH,IAAM,GAAK0O,GAAK,IAAM3F,EAAI2F,EACpChL,GAAKvD,OAAOH,KAAO0O,GAAKvO,KAAK0jB,GAAK9a,KAElCrF,EAAIvD,KAAKH,KAAO0O,GAAK3F,GAAK2e,EACtBhZ,GAAK,IACPA,GAAKvO,KAAK0jB,KACR7jB,IAGF0D,EAAI,IAAGsV,GAAI,GACXA,IAAG5V,GAAKkhB,EAAS5gB,IAGzB,OAAOsV,EAAI5V,EAAI,GACjB,EA8gBA,EAAWmZ,UAAUkL,OA3gBrB,WACE,IAAIrkB,EAAI8f,IAER,OADA,EAAWmC,KAAKC,MAAMnlB,KAAMiD,GACrBA,CACT,EAwgBA,EAAWmZ,UAAU8C,IArgBrB,WACE,OAAOlf,KAAKgY,EAAI,EAAIhY,KAAKsnB,SAAWtnB,IACtC,EAogBA,EAAWoc,UAAU6I,UAjgBrB,SAAqBrlB,GACnB,IAAIqD,EAAIjD,KAAKgY,EAAIpY,EAAEoY,EACnB,GAAS,GAAL/U,EAAQ,OAAOA,EACnB,IAAIpD,EAAIG,KAAKuV,EAEb,GAAS,IADTtS,EAAIpD,EAAID,EAAE2V,GACE,OAAOvV,KAAKgY,EAAI,GAAK/U,EAAIA,EACrC,OAASpD,GAAK,GACZ,GAA4B,IAAvBoD,EAAIjD,KAAKH,GAAKD,EAAEC,IAAU,OAAOoD,EAExC,OAAO,CACT,EAwfA,EAAWmZ,UAAUoL,UA1drB,WACE,OAAIxnB,KAAKuV,GAAK,EAAU,EACjBvV,KAAK0jB,IAAM1jB,KAAKuV,EAAI,GAAKgP,EAAMvkB,KAAKA,KAAKuV,EAAI,GAAKvV,KAAKgY,EAAIhY,KAAK2jB,GACzE,EAwdA,EAAWvH,UAAUnc,IA3QrB,SAAeL,GACb,IAAIqD,EAAI8f,IAGR,OAFA/iB,KAAKkf,MAAM8F,SAASplB,EAAG,KAAMqD,GACzBjD,KAAKgY,EAAI,GAAK/U,EAAEgiB,UAAU,EAAWC,MAAQ,GAAGtlB,EAAEulB,MAAMliB,EAAGA,GACxDA,CACT,EAuQA,EAAWmZ,UAAUqL,OAxOrB,SAAkB7nB,GAChB,OAA4B,GAArBI,KAAKilB,UAAUrlB,EACxB,EAuOA,EAAWwc,UAAUsL,IAnMrB,SAAe9nB,GACb,IAAIqD,EAAI8f,IAER,OADA/iB,KAAKqnB,MAAMznB,EAAGqD,GACPA,CACT,EAgMA,EAAWmZ,UAAUuL,SA7LrB,SAAoB/nB,GAClB,IAAIqD,EAAI8f,IAER,OADA/iB,KAAKmlB,MAAMvlB,EAAGqD,GACPA,CACT,EA0LA,EAAWmZ,UAAUwL,SAvLrB,SAAoBhoB,GAClB,IAAIqD,EAAI8f,IAER,OADA/iB,KAAK2lB,WAAW/lB,EAAGqD,GACZA,CACT,EAoLA,EAAWmZ,UAAUyL,OAjLrB,SAAkBjoB,GAChB,IAAIqD,EAAI8f,IAER,OADA/iB,KAAKglB,SAASplB,EAAGqD,EAAG,MACbA,CACT,EA8KA,EAAWmZ,UAAU0L,OAvGrB,SAAkBtjB,EAAGqU,EAAGwB,GACtB,IACEzR,EADE/I,EAAI2E,EAAEgjB,YAERvkB,EAAIohB,EAAI,GACR0D,EAAI,IAAIvD,EAAW3L,GACrB,GAAIhZ,GAAK,EAAG,OAAOoD,EAAmB2F,EAAR/I,EAAI,GAAQ,EAAWA,EAAI,GAAQ,EAAWA,EAAI,IAAS,EAAWA,EAAI,IAAS,EAAW,EAG5H,IAAImiB,EAAI,IAAI9S,MACVmU,EAAI,EACJ2E,EAAKpf,EAAI,EACT2e,GAAM,GAAK3e,GAAK,EAElB,GADAoZ,EAAE,GAAK+F,EAAEzS,QAAQtV,MACb4I,EAAI,EAAG,CACT,IAAIqf,EAAKlF,IAET,IADAgF,EAAEnC,MAAM5D,EAAE,GAAIiG,GACP5E,GAAKkE,GACVvF,EAAEqB,GAAKN,IACPgF,EAAEtC,MAAMwC,EAAIjG,EAAEqB,EAAI,GAAIrB,EAAEqB,IACxBA,GAAK,CAET,CACA,IACEnF,EAGA3I,EAJEgI,EAAI/Y,EAAE+Q,EAAI,EAEZ2S,GAAM,EACNC,EAAKpF,IAGP,IADAljB,EAAI0kB,EAAM/f,EAAE+Y,IAAM,EACXA,GAAK,GAAG,CAMb,IALI1d,GAAKmoB,EAAI9J,EAAI1Z,EAAE+Y,IAAM1d,EAAImoB,EAAKT,GAChCrJ,GAAK1Z,EAAE+Y,IAAM,GAAK1d,EAAI,GAAK,IAAMmoB,EAAKnoB,EAClC0d,EAAI,IAAGW,GAAK1Z,EAAE+Y,EAAI,IAAMvd,KAAK0jB,GAAK7jB,EAAImoB,IAE5C3E,EAAIza,EACc,IAAN,EAAJsV,IACNA,IAAM,IACJmF,EAMJ,IAJKxjB,GAAKwjB,GAAK,IACbxjB,GAAKG,KAAK0jB,KACRnG,GAEA2K,EAEFlG,EAAE9D,GAAGmH,OAAOpiB,GACZilB,GAAM,MACD,CACL,KAAO7E,EAAI,GACT0E,EAAEnC,MAAM3iB,EAAGklB,GACXJ,EAAEnC,MAAMuC,EAAIllB,GACZogB,GAAK,EAEHA,EAAI,EAAG0E,EAAEnC,MAAM3iB,EAAGklB,IACpB5S,EAAItS,EACJA,EAAIklB,EACJA,EAAK5S,GAEPwS,EAAEtC,MAAM0C,EAAInG,EAAE9D,GAAIjb,EACpB,CACA,KAAOsa,GAAK,GAAwB,IAAlB/Y,EAAE+Y,GAAK,GAAK1d,IAC5BkoB,EAAEnC,MAAM3iB,EAAGklB,GACX5S,EAAItS,EACJA,EAAIklB,EACJA,EAAK5S,IACC1V,EAAI,IACRA,EAAIG,KAAK0jB,GAAK,IACZnG,EAGR,CACA,IAAI7Y,EAASqjB,EAAE3C,OAAOniB,GAEtB,OADAoX,EAAS,KAAM3V,GACRA,CACT,EAiCA,EAAWwgB,KAAOb,EAAI,GACtB,EAAW8C,IAAM9C,EAAI,GCzvBrB,IAAI+D,EAAgB,YAKhBC,EAAoC,WAKtC,SAASA,EAAqBC,GAC5BtoB,KAAKuoB,EAAI,IAAIC,EAVL,mwBAUuB,IAC/BxoB,KAAKgiB,EAAI,IAAIwG,EAAW,IAAK,IAC7BxoB,KAAK4I,EAAI,IAAI4f,EAAWxoB,KAAKyoB,QAAQ,GAAKzoB,KAAK0oB,OAAO1oB,KAAKuoB,GAAKvoB,KAAK0oB,OAAO1oB,KAAKgiB,IAAK,IACtFhiB,KAAK2oB,YAAc3oB,KAAK4oB,uBACxB5oB,KAAK6oB,gBAAe,WAAa,IACjC7oB,KAAK8oB,SAAW,UAAY,sBAAuB,QACnD9oB,KAAK+oB,SAAWT,CAClB,CAKA,IAAI9G,EAAS6G,EAAqBjM,UAkSlC,OAjSAoF,EAAOwH,eAAiB,WACtB,OAAOhpB,KAAK2oB,WACd,EAMAnH,EAAOqH,eAAiB,SAAwBxO,GAC9C,IAAI4O,EAAQjpB,KACRA,KAAKkpB,YACP7O,EAAS,KAAMra,KAAKkpB,aAEpBlpB,KAAKmpB,WAAWnpB,KAAK2oB,aAAa,SAAUnmB,EAAK0mB,GAC3C1mB,GACF6X,EAAS7X,EAAK,MAEhBymB,EAAMC,YAAcA,EACpB7O,EAAS,KAAM4O,EAAMC,YACvB,GAEJ,EAOA1H,EAAOoH,qBAAuB,WAE5B,IAAIQ,EAAYhH,EAAY,KAAKtgB,SAAS,OAK1C,OAJmB,IAAI0mB,EAAWY,EAAW,GAK/C,EAOA5H,EAAO6H,qBAAuB,WAC5B,OAAOjH,EAAY,IAAItgB,SAAS,SAClC,EAKA0f,EAAO8H,kBAAoB,WACzB,OAAOtpB,KAAKupB,cACd,EAKA/H,EAAOgI,eAAiB,WACtB,OAAOxpB,KAAKypB,iBACd,EAKAjI,EAAOkI,mBAAqB,WAC1B,OAAO1pB,KAAK2pB,eACd,EASAnI,EAAOoI,mBAAqB,SAA4BC,EAAgB/c,EAAUuN,GAChF,IAAIyP,EAAS9pB,KACbA,KAAKupB,eAAiBvpB,KAAKqpB,uBAC3B,IAAIU,EAAiB,GAAKF,EAAiB/c,EAAW,IAAM9M,KAAKupB,eAC7DS,EAAehqB,KAAKuM,KAAKwd,GACzBX,EAAYhH,EAAY,IAAItgB,SAAS,OAGzC9B,KAAKypB,kBAAoBzpB,KAAK0oB,OAAO,IAAIF,EAAWY,EAAW,KAC/DppB,KAAKgiB,EAAE8F,OAAO,IAAIU,EAAWxoB,KAAKyoB,QAAQzoB,KAAKypB,kBAAoBO,GAAe,IAAKhqB,KAAKuoB,GAAG,SAAU/lB,EAAKynB,GACxGznB,GACF6X,EAAS7X,EAAK,MAEhBsnB,EAAOH,gBAAkBG,EAAOpB,OAAOuB,GACvC5P,EAAS,KAAM,KACjB,GACF,EAUAmH,EAAO2H,WAAa,SAAoBvpB,EAAGya,GACzC,IAAI6P,EAASlqB,KACbA,KAAKgiB,EAAE8F,OAAOloB,EAAGI,KAAKuoB,GAAG,SAAU/lB,EAAK2nB,GAClC3nB,GACF6X,EAAS7X,EAAK,MAEZ2nB,EAAElqB,IAAIiqB,EAAO3B,GAAGd,OAAOe,EAAWtD,OACpC7K,EAAS,IAAI3X,MAAM,2CAA4C,MAEjE2X,EAAS,KAAM8P,EACjB,GACF,EASA3I,EAAO4I,WAAa,SAAoBD,EAAGE,GAGzC,OAFArqB,KAAKsqB,SAAWtqB,KAAKyoB,QAAQzoB,KAAK0oB,OAAOyB,GAAKnqB,KAAK0oB,OAAO2B,IAC7C,IAAI7B,EAAWxoB,KAAKsqB,SAAU,GAE7C,EAQA9I,EAAOjV,KAAO,SAAcge,GAC1B,IAAIC,EAAMD,aAAe,KAAS,yBAA8BA,GAAOA,EACnEE,EAAU,IAAOD,GAAK1oB,WAC1B,OAAO,IAAIoN,MAAM,GAAKub,EAAQ/mB,QAAQ2E,KAAK,KAAOoiB,CACpD,EAQAjJ,EAAOiH,QAAU,SAAiBiC,GAChC,OAAO1qB,KAAKuM,KAAK,UAAYme,EAAQ,OACvC,EASAlJ,EAAOmJ,YAAc,SAAqBC,EAAKC,GAC7C,IAAIC,EAAoB,yBAA8B,YAAc,CAAC9qB,KAAK8oB,SAAU,UAAYiC,OAAOC,aAAa,GAAI,WACpHC,EAAeL,aAAe,KAAS,yBAA8BA,GAAOA,EAC5EM,EAAgBL,aAAgB,KAAS,yBAA8BA,GAAQA,EAC/EM,EAAM,IAAWF,EAAcC,GAC/BE,EAAO,IAAWN,EAAmBK,GACzC,OAAO,UAAYC,EAAKtpB,WAAY,OAAOqc,MAAM,EAAG,GACtD,EAWAqD,EAAO6J,6BAA+B,SAAsCve,EAAUC,EAAUue,EAAcT,EAAMxQ,GAClH,IAAIkR,EAASvrB,KACb,GAAIsrB,EAAarrB,IAAID,KAAKuoB,GAAGd,OAAOe,EAAWtD,MAC7C,MAAM,IAAIxiB,MAAM,qBAGlB,GADA1C,KAAKwrB,OAASxrB,KAAKoqB,WAAWpqB,KAAKkpB,YAAaoC,GAC5CtrB,KAAKwrB,OAAO/D,OAAOe,EAAWtD,MAChC,MAAM,IAAIxiB,MAAM,qBAElB,IAAI+oB,EAAmB,GAAKzrB,KAAK+oB,SAAWjc,EAAW,IAAMC,EACzD2e,EAAuB1rB,KAAKuM,KAAKkf,GACjCE,EAAS,IAAInD,EAAWxoB,KAAKyoB,QAAQzoB,KAAK0oB,OAAOmC,GAAQa,GAAuB,IACpF1rB,KAAK4rB,WAAWD,EAAQL,GAAc,SAAU9oB,EAAKqpB,GAC/CrpB,GACF6X,EAAS7X,EAAK,MAEhB,IAAIspB,EAAOP,EAAOZ,YAAY,UAAYY,EAAO7C,OAAOmD,GAAS,OAAQ,UAAYN,EAAO7C,OAAO6C,EAAOC,QAAS,QACnHnR,EAAS,KAAMyR,EACjB,GACF,EASAtK,EAAOoK,WAAa,SAAoBD,EAAQL,EAAcjR,GAC5D,IAAI0R,EAAS/rB,KACbA,KAAKgiB,EAAE8F,OAAO6D,EAAQ3rB,KAAKuoB,GAAG,SAAU/lB,EAAKwpB,GACvCxpB,GACF6X,EAAS7X,EAAK,MAEA8oB,EAAa3D,SAASoE,EAAOnjB,EAAEgf,SAASoE,IAC9ClE,OAAOiE,EAAOpD,YAAYjB,IAAIqE,EAAOP,OAAO5D,SAAS+D,IAAUI,EAAOxD,GAAG,SAAU0D,EAAMvnB,GAC7FunB,GACF5R,EAAS4R,EAAM,MAEjB5R,EAAS,KAAM3V,EAAOzE,IAAI8rB,EAAOxD,GACnC,GACF,GACF,EAMA/G,EAAO0K,mDAAqD,WAC1D,MArPkD,iBAsPpD,EA4BA1K,EAAOkH,OAAS,SAAgByD,GAC9B,KAAMA,aAAkB3D,GACtB,MAAM,IAAI9lB,MAAM,oBAElB,IAAI0pB,EAAaD,EAAOlH,UAAUuD,EAAWtD,MAAQ,EAGjDwF,EAASyB,EAAOjN,MAAMpd,SAAS,IAOnC,GAJA4oB,EAASA,EAAOhnB,OAAS,GAAM,EAAI,IAAMgnB,EAASA,EAGlDA,EAAStC,EAAc5I,KAAKkL,GAAU,KAAOA,EAASA,EAClD0B,EAAY,CAEd,IAAIC,EAAkB3B,EAAOviB,MAAM,IAAIQ,KAAI,SAAU8P,GACnD,IAAI6T,EAAoC,IAAlBpU,SAASO,EAAG,IAClC,MAAO,mBAAmB2G,OAAOkN,EACnC,IAAGjkB,KAAK,KAIRqiB,EADoB,IAAIlC,EAAW6D,EAAiB,IAAI3E,IAAIc,EAAWrB,KAChDrlB,SAAS,KAQrByqB,cAAcC,WAAW,SAClC9B,EAASA,EAAOjiB,UAAU,GAE9B,CACA,OAAOiiB,CACT,EACOrC,CACT,CArTwC,GCxBpCoE,EAA+B,WAKjC,SAASA,EAAgB1c,GAEvB/P,KAAKgQ,SAAWD,GAAS,GACzB/P,KAAK8L,QAAU9L,KAAK0sB,eACtB,CAKA,IAAIlL,EAASiL,EAAgBrQ,UA8B7B,OA7BAoF,EAAOmL,YAAc,WACnB,OAAO3sB,KAAKgQ,QACd,EAKAwR,EAAOoL,cAAgB,WACrB,OAAO5sB,KAAK8L,QAAQ+gB,GACtB,EAKArL,EAAOsL,YAAc,WACnB,OAAO9sB,KAAK8L,QAAQihB,GACtB,EAKAvL,EAAOkL,cAAgB,WACrB,IAAI5gB,EAAU9L,KAAKgQ,SAAS7H,MAAM,KAAK,GACvC,IACE,OAAOjG,KAAK2F,MAAM,UAAYiE,EAAS,UAAUhK,SAAS,QAG5D,CAFE,MAAOU,GACP,MAAO,CAAC,CACV,CACF,EACOiqB,CACT,CA7CmC,GCPnC,SAASO,EAAgBC,EAAG1e,GAA6I,OAAxIye,EAAkB7sB,OAAO+sB,eAAiB/sB,OAAO+sB,eAAetqB,OAAS,SAAyBqqB,EAAG1e,GAAsB,OAAjB0e,EAAEE,UAAY5e,EAAU0e,CAAG,EAAUD,EAAgBC,EAAG1e,EAAI,CASvM,IAAI6e,EAAkC,SAAUC,GAVhD,IAAwBC,EAAUC,EAgBhC,SAASH,EAAmBI,GAC1B,IACEC,QADmB,IAAVD,EAAmB,CAAC,EAAIA,GACdC,YACrB,OAAOJ,EAAiBK,KAAK1tB,KAAMytB,GAAe,KAAOztB,IAC3D,CACA,OArBgCutB,EAWGF,GAXbC,EAWPF,GAXwChR,UAAYjc,OAAOwtB,OAAOJ,EAAWnR,WAAYkR,EAASlR,UAAUpX,YAAcsoB,EAAUN,EAAgBM,EAAUC,GAqBtKH,CACT,CAZsC,CAYpCX,GCrBF,SAAS,EAAgBQ,EAAG1e,GAA6I,OAAxI,EAAkBpO,OAAO+sB,eAAiB/sB,OAAO+sB,eAAetqB,OAAS,SAAyBqqB,EAAG1e,GAAsB,OAAjB0e,EAAEE,UAAY5e,EAAU0e,CAAG,EAAU,EAAgBA,EAAG1e,EAAI,CASvM,IAAIqf,EAA8B,SAAUP,GAV5C,IAAwBC,EAAUC,EAgBhC,SAASK,EAAeJ,GACtB,IACEK,QADmB,IAAVL,EAAmB,CAAC,EAAIA,GAClBK,QACjB,OAAOR,EAAiBK,KAAK1tB,KAAM6tB,GAAW,KAAO7tB,IACvD,CACA,OArBgCutB,EAWDF,GAXTC,EAWPM,GAXwCxR,UAAYjc,OAAOwtB,OAAOJ,EAAWnR,WAAYkR,EAASlR,UAAUpX,YAAcsoB,EAAU,EAAgBA,EAAUC,GAqBtKK,CACT,CAZkC,CAYhCnB,GCjBEqB,EAAmC,WAKrC,SAASA,EAAoBN,GAC3B,IACEO,QADmB,IAAVP,EAAmB,CAAC,EAAIA,GACbO,aAEtB/tB,KAAK+P,MAAQge,GAAgB,EAC/B,CASA,OAJaD,EAAoB1R,UAC1B4R,SAAW,WAChB,OAAOhuB,KAAK+P,KACd,EACO+d,CACT,CApBuC,qBCAnCG,EAAkC,WAQpC,SAASA,EAAmBT,GAC1B,IAAIvM,OAAiB,IAAVuM,EAAmB,CAAC,EAAIA,EACjCK,EAAU5M,EAAK4M,QACfE,EAAe9M,EAAK8M,aACpBN,EAAcxM,EAAKwM,YACnBS,EAAajN,EAAKiN,WACpB,GAAmB,MAAfT,GAAkC,MAAXI,EACzB,MAAM,IAAInrB,MAAM,8CAElB1C,KAAK6L,QAAUgiB,EACf7tB,KAAKuK,aAAewjB,EACpB/tB,KAAKmuB,YAAcV,EACnBztB,KAAKouB,gBAA4Bnc,IAAfic,EAA2BluB,KAAKquB,sBAAwBH,CAC5E,CAKA,IAAI1M,EAASyM,EAAmB7R,UA6ChC,OA5CAoF,EAAO8M,WAAa,WAClB,OAAOtuB,KAAK6L,OACd,EAKA2V,EAAOtV,gBAAkB,WACvB,OAAOlM,KAAKuK,YACd,EAKAiX,EAAO+M,eAAiB,WACtB,OAAOvuB,KAAKmuB,WACd,EAKA3M,EAAOgN,cAAgB,WACrB,OAAOxuB,KAAKouB,UACd,EAKA5M,EAAO6M,oBAAsB,WAG3B,OAFUzR,KAAK6G,MAAM,IAAI7hB,KAAS,KACxBgb,KAAK2J,IAAIvmB,KAAKmuB,YAAYrB,cAAe9sB,KAAK6L,QAAQihB,cAElE,EAOAtL,EAAOrW,QAAU,WACf,IACIsjB,EADM7R,KAAK6G,MAAM,IAAI7hB,KAAS,KACb5B,KAAKouB,WAC1B,OAAOK,EAAWzuB,KAAKmuB,YAAYvB,iBAAmB6B,EAAWzuB,KAAK6L,QAAQ+gB,eAChF,EACOqB,CACT,CAxEsC,GCAlCS,EAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3FC,EAAY,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAGvDC,EAA0B,WAC5B,SAASA,IAAc,CA4BvB,OA3BaA,EAAWxS,UAIjByS,aAAe,WACpB,IAAIhtB,EAAM,IAAID,KACVktB,EAAUH,EAAU9sB,EAAIktB,aACxBC,EAAQN,EAAW7sB,EAAIotB,eACvBC,EAAMrtB,EAAIstB,aACVC,EAAQvtB,EAAIwtB,cACZD,EAAQ,KACVA,EAAQ,IAAMA,GAEhB,IAAIE,EAAUztB,EAAI0tB,gBACdD,EAAU,KACZA,EAAU,IAAMA,GAElB,IAAIE,EAAU3tB,EAAI4tB,gBAQlB,OAPID,EAAU,KACZA,EAAU,IAAMA,GAKJV,EAAU,IAAME,EAAQ,IAAME,EAAM,IAAME,EAAQ,IAAME,EAAU,IAAME,EAAU,QAHrF3tB,EAAI6tB,gBAKjB,EACOd,CACT,CA9B8B,GCJ1BjT,EAAoC,WAMtC,SAASA,EAAqB6R,GAC5B,IAAIvM,OAAiB,IAAVuM,EAAmB,CAAC,EAAIA,EACjChiB,EAAOyV,EAAKzV,KACZC,EAAQwV,EAAKxV,MACfzL,KAAKwL,KAAOA,GAAQ,GACpBxL,KAAKyL,MAAQA,GAAS,EACxB,CAKA,IAAI+V,EAAS7F,EAAqBS,UAgDlC,OA/CAoF,EAAOmO,SAAW,WAChB,OAAO3vB,KAAKyL,KACd,EAOA+V,EAAOoO,SAAW,SAAkBvvB,GAElC,OADAL,KAAKyL,MAAQpL,EACNL,IACT,EAKAwhB,EAAOqO,QAAU,WACf,OAAO7vB,KAAKwL,IACd,EAOAgW,EAAOsO,QAAU,SAAiB5b,GAEhC,OADAlU,KAAKwL,KAAO0I,EACLlU,IACT,EAKAwhB,EAAO1f,SAAW,WAChB,OAAOI,KAAKC,UAAUnC,KACxB,EAKAwhB,EAAOuO,OAAS,WACd,MAAO,CACLvkB,KAAMxL,KAAKwL,KACXC,MAAOzL,KAAKyL,MAEhB,EACOkQ,CACT,CAlEwC,GCApCqU,EAAa,CAAC,EAGPC,EAA6B,WACtC,SAASA,IAAiB,CAuC1B,OAhCAA,EAAchuB,QAAU,SAAiBoB,EAAKhD,GAE5C,OADA2vB,EAAW3sB,GAAOhD,EACX2vB,EAAW3sB,EACpB,EAQA4sB,EAAcpmB,QAAU,SAAiBxG,GACvC,OAAOlD,OAAOic,UAAUrV,eAAe2mB,KAAKsC,EAAY3sB,GAAO2sB,EAAW3sB,QAAO4O,CACnF,EAOAge,EAAcxgB,WAAa,SAAoBpM,GAC7C,cAAc2sB,EAAW3sB,EAC3B,EAMA4sB,EAAcC,MAAQ,WAEpB,OADAF,EAAa,CAAC,CAEhB,EACOC,CACT,CAzCwC,GA4CpCE,EAA6B,WAK/B,SAASA,IACP,IACEnwB,KAAKowB,cAAgBruB,OAAOsuB,aAC5BrwB,KAAKowB,cAAcnuB,QAAQ,sBAAuB,GAClDjC,KAAKowB,cAAc3gB,WAAW,sBAGhC,CAFE,MAAO6gB,GACPtwB,KAAKowB,cAAgBH,CACvB,CACF,CAUA,OAJaE,EAAc/T,UACpBmU,WAAa,WAClB,OAAOvwB,KAAKowB,aACd,EACOD,CACT,CAxBiC,GCQ7BK,EADiC,oBAAdtN,UACKA,UAAUsN,UAAY,SAG9C/jB,EAA2B,WAQ7B,SAASA,EAAYlD,GACnB,GAAY,MAARA,GAAiC,MAAjBA,EAAKmD,UAAiC,MAAbnD,EAAKoD,KAChD,MAAM,IAAIjK,MAAM,+CAElB1C,KAAK8M,SAAWvD,EAAKmD,UAAY,GACjC1M,KAAKywB,KAAOlnB,EAAKoD,KACjB3M,KAAK0wB,QAAU,KACf1wB,KAAK2wB,OAASpnB,EAAKoD,KAAKgkB,OACxB3wB,KAAK4wB,kBAAoB,KACzB5wB,KAAK6wB,uBAAyB,gBAC9B7wB,KAAK8wB,QAAUvnB,EAAKwnB,UAAW,IAAIZ,GAAgBI,aACnDvwB,KAAKgxB,UAAY,kCAAoChxB,KAAKywB,KAAKQ,cAC/DjxB,KAAKkxB,YAAclxB,KAAKgxB,UAAY,IAAMhxB,KAAK8M,SAAW,WAC5D,CAOA,IAAI0U,EAAS/U,EAAY2P,UAirDzB,OAhrDAoF,EAAO2P,qBAAuB,SAA8BP,GAC1D5wB,KAAKoxB,sBACLpxB,KAAK4wB,kBAAoBA,EACzB5wB,KAAKqxB,aACP,EAKA7P,EAAO8P,qBAAuB,WAC5B,OAAOtxB,KAAK4wB,iBACd,EAKApP,EAAOC,YAAc,WACnB,OAAOzhB,KAAK8M,QACd,EAKA0U,EAAO+P,0BAA4B,WACjC,OAAOvxB,KAAK6wB,sBACd,EAOArP,EAAOgQ,0BAA4B,SAAmCX,GACpE7wB,KAAK6wB,uBAAyBA,CAChC,EAYArP,EAAOiQ,aAAe,SAAsBC,EAAarX,GACvD,IAAI4O,EAAQjpB,KACRshB,EAAiBoQ,EAAY9P,oBACjCN,EAAeqQ,SAAW3xB,KAAK8M,SAC/B,IAAI8kB,EAAyE,IAAxDzxB,OAAOqI,KAAKkpB,EAAY/P,qBAAqBje,OAAeguB,EAAY/P,oBAAsB+P,EAAY7P,oBAC3HgQ,EAAU,CACZC,SAAU,cACV7nB,SAAUjK,KAAKywB,KAAKQ,cACpB9P,eAAgBG,EAChBF,eAAgBwQ,GAEd5xB,KAAK+xB,uBACPF,EAAQG,gBAAkBhyB,KAAK+xB,sBAEjC/xB,KAAK2wB,OAAOjiB,QAAQ,eAAgBmjB,GAAS,SAAUrvB,EAAK+G,GAC1D,GAAI/G,EACF,OAAO6X,EAAS3M,UAAUlL,GAE5B,IAAIyvB,EAAgB1oB,EAAK2oB,cACrBC,EAAsB5oB,EAAK6oB,oBAC/B,MAAsB,qBAAlBH,GACFhJ,EAAMyH,QAAUnnB,EAAKmnB,QACdrW,EAASgY,gBAAgBF,KAElClJ,EAAM2H,kBAAoB3H,EAAMqJ,sBAAsB/oB,EAAKgpB,sBAC3DtJ,EAAMoI,cACChX,EAAS7M,UAAUyb,EAAM2H,mBAClC,GACF,EAiBApP,EAAO3U,iBAAmB,SAA0B6kB,EAAarX,GAC/D,MAAoC,uBAAhCra,KAAK6wB,uBACA7wB,KAAKwyB,sCAAsCd,EAAarX,GACtB,kBAAhCra,KAAK6wB,wBAA8E,gBAAhC7wB,KAAK6wB,uBAC1D7wB,KAAKyyB,4BAA4Bf,EAAarX,GAEhDA,EAAS3M,UAAU,IAAIhL,MAAM,wCACtC,EAmBA8e,EAAOiR,4BAA8B,SAAqCf,EAAarX,GACrF,IAGIiR,EACAT,EAJAf,EAAS9pB,KACT0yB,EAAuB,IAAIrK,EAAqBroB,KAAKywB,KAAKkC,mBAC1DC,EAAa,IAAIhE,EAGjBtN,EAAiB,CAAC,EACA,MAAlBthB,KAAK6yB,YACPvR,EAAewR,WAAa9yB,KAAK6yB,WAEnCvR,EAAeqQ,SAAW3xB,KAAK8M,SAC/B4lB,EAAqB7J,gBAAe,SAAUkK,EAAaC,GAErDD,GACF1Y,EAAS3M,UAAUqlB,GAErBzR,EAAe2R,MAAQD,EAAOlxB,SAAS,IACD,gBAAlCgoB,EAAO+G,yBACTvP,EAAe4R,eAAiB,SAElC,IAAItB,EAAyE,IAAxDzxB,OAAOqI,KAAKkpB,EAAY/P,qBAAqBje,OAAeguB,EAAY/P,oBAAsB+P,EAAY7P,oBAC3HgQ,EAAU,CACZC,SAAUhI,EAAO+G,uBACjB5mB,SAAU6f,EAAO2G,KAAKQ,cACtB9P,eAAgBG,EAChBF,eAAgBwQ,GAEd9H,EAAOiI,mBAAmBjI,EAAOhd,YACnC+kB,EAAQG,gBAAkBlI,EAAOiI,mBAAmBjI,EAAOhd,WAE7Dgd,EAAO6G,OAAOjiB,QAAQ,eAAgBmjB,GAAS,SAAUrvB,EAAK+G,GAC5D,GAAI/G,EACF,OAAO6X,EAAS3M,UAAUlL,GAE5B,IAAI2vB,EAAsB5oB,EAAK6oB,oBAC/BtI,EAAOhd,SAAWqlB,EAAoBgB,gBACtCrJ,EAAOoH,YAAcpH,EAAOkH,UAAY,IAAMlH,EAAOhd,SAAW,YAChEwe,EAAe,IAAI9C,EAAW2J,EAAoBiB,MAAO,IACzDvI,EAAO,IAAIrC,EAAW2J,EAAoBkB,KAAM,IAChDvJ,EAAOwJ,gCACPZ,EAAqBrH,6BAA6BvB,EAAOhd,SAAU4kB,EAAYhQ,cAAe4J,EAAcT,GAAM,SAAU0I,EAAWzH,GAEjIyH,GACFlZ,EAAS3M,UAAU6lB,GAErB,IAAIC,EAAUZ,EAAW/D,eACrB5mB,EAAU,yBAA8B,YAAc,CAAC,UAAY6hB,EAAO2G,KAAKkC,kBAAmB,QAAS,UAAY7I,EAAOhd,SAAU,QAAS,UAAYqlB,EAAoBsB,aAAc,UAAW,UAAYD,EAAS,WAC/NnwB,EAAM,yBAA8ByoB,GACpC4H,EAAkB,cAAiB,IAAWzrB,EAAS5E,IACvDswB,EAAqB,CAAC,EAC1BA,EAAmBhC,SAAW7H,EAAOhd,SACrC6mB,EAAmBC,4BAA8BzB,EAAoBsB,aACrEE,EAAmBE,UAAYL,EAC/BG,EAAmBG,yBAA2BJ,EACtB,MAApB5J,EAAO+I,YACTc,EAAmBb,WAAahJ,EAAO+I,WAEzC,IAaIkB,EAAc,CAChB7B,cAAe,oBACfjoB,SAAU6f,EAAO2G,KAAKQ,cACtB+C,mBAAoBL,EACpBjD,QAASnnB,EAAKmnB,QACdtP,eAAgBwQ,GAEd9H,EAAOiI,uBACTgC,EAAY/B,gBAAkBlI,EAAOiI,sBArBV,SAASkC,EAAuBC,EAAWC,GACtE,OAAOrK,EAAO6G,OAAOjiB,QAAQ,yBAA0BwlB,GAAW,SAAUE,EAAcC,GACxF,OAAID,GAAsC,8BAAtBA,EAAa/yB,OAAkG,IAA1D+yB,EAAansB,QAAQ0X,cAAc2U,QAAQ,WAClHX,EAAmBb,WAAa,KAChChJ,EAAO+I,UAAY,KACnB/I,EAAOP,eAAiB,KACxBO,EAAOD,eAAiB,KACxBC,EAAOyK,kCACAN,EAAuBC,EAAWC,IAEpCA,EAAkBC,EAAcC,EACzC,GACF,CAWAJ,CAAuBF,GAAa,SAAUS,EAAiBC,GAC7D,OAAID,EACKna,EAAS3M,UAAU8mB,GAErB1K,EAAO4K,yBAAyBD,EAAkB/B,EAAsBrY,EACjF,GAGF,GAGF,GAEF,GACF,EAaAmH,EAAOgR,sCAAwC,SAA+Cd,EAAarX,GACzG,IAAI6P,EAASlqB,KACTshB,EAAiB,CAAC,EAGtB,GAFAA,EAAeqQ,SAAW3xB,KAAK8M,SAC/BwU,EAAeqT,SAAWjD,EAAYhQ,cACjCJ,EAAeqT,SAApB,CAIA,IAAIjC,EAAuB,IAAIrK,EAAqBroB,KAAKywB,KAAKkC,mBAC9D3yB,KAAKszB,gCACiB,MAAlBtzB,KAAK6yB,YACPvR,EAAewR,WAAa9yB,KAAK6yB,WAEnC,IAAIjB,EAAyE,IAAxDzxB,OAAOqI,KAAKkpB,EAAY/P,qBAAqBje,OAAeguB,EAAY/P,oBAAsB+P,EAAY7P,oBAC3HgQ,EAAU,CACZC,SAAU,qBACV7nB,SAAUjK,KAAKywB,KAAKQ,cACpB9P,eAAgBG,EAChBF,eAAgBwQ,GAEd5xB,KAAK+xB,mBAAmB/xB,KAAK8M,YAC/B+kB,EAAQG,gBAAkBhyB,KAAK+xB,mBAAmB/xB,KAAK8M,WAIzD9M,KAAK2wB,OAAOjiB,QAAQ,eAAgBmjB,GAAS,SAAUrvB,EAAKoyB,GAC1D,OAAIpyB,EACK6X,EAAS3M,UAAUlL,GAErB0nB,EAAOwK,yBAAyBE,EAAYlC,EAAsBrY,EAC3E,GAvBA,MAFEA,EAAS3M,UAAU,IAAIhL,MAAM,kCA0BjC,EAUA8e,EAAOkT,yBAA2B,SAAkCD,EAAkB/B,EAAsBrY,GAC1G,IAAIkR,EAASvrB,KACTiyB,EAAgBwC,EAAiBvC,cACjCC,EAAsBsC,EAAiBrC,oBAC3C,GAAsB,YAAlBH,EAEF,OADAjyB,KAAK0wB,QAAU+D,EAAiB/D,QACzBrW,EAASwa,YAAY5C,EAAeE,GAE7C,GAAsB,oBAAlBF,EAEF,OADAjyB,KAAK0wB,QAAU+D,EAAiB/D,QACzBrW,EAASya,cAAc7C,EAAeE,GAE/C,GAAsB,cAAlBF,EAEF,OADAjyB,KAAK0wB,QAAU+D,EAAiB/D,QACzBrW,EAAS0a,SAAS9C,EAAeE,GAE1C,GAAsB,uBAAlBF,EAEF,OADAjyB,KAAK0wB,QAAU+D,EAAiB/D,QACzBrW,EAAS2a,aAAa/C,EAAeE,GAE9C,GAAsB,qBAAlBF,EAEF,OADAjyB,KAAK0wB,QAAU+D,EAAiB/D,QACzBrW,EAASgY,gBAAgBF,GAElC,GAAsB,0BAAlBF,EAA2C,CAC7CjyB,KAAK0wB,QAAU+D,EAAiB/D,QAChC,IAAIpjB,EAAiB,KACjB2nB,EAAwB,KACxB1nB,EAAqB,GACrB2nB,EAAuBxC,EAAqBxG,qDAKhD,GAJIiG,IACF7kB,EAAiBpL,KAAK2F,MAAM4sB,EAAiBrC,oBAAoB9kB,gBACjE2nB,EAAwB/yB,KAAK2F,MAAM4sB,EAAiBrC,oBAAoB7kB,qBAEtE0nB,EACF,IAAK,IAAIp1B,EAAI,EAAGA,EAAIo1B,EAAsBvxB,OAAQ7D,IAChD0N,EAAmB1N,GAAKo1B,EAAsBp1B,GAAGs1B,OAAOD,EAAqBxxB,QAGjF,OAAO2W,EAAShN,oBAAoBC,EAAgBC,EACtD,CACA,GAAsB,oBAAlB0kB,EAGF,OAFAjyB,KAAK0wB,QAAU+D,EAAiB/D,aAChC1wB,KAAKo1B,kBAAkB/a,GAGzBra,KAAK4wB,kBAAoB5wB,KAAKsyB,sBAAsBmC,EAAiBlC,sBACrEvyB,KAAKiyB,cAAgBA,EACrBjyB,KAAKqxB,cACL,IAAIgE,EAAoBZ,EAAiBlC,qBAAqB+C,kBAC9D,GAAyB,MAArBD,EACF,OAAOhb,EAAS7M,UAAUxN,KAAK4wB,mBAEjC8B,EAAqB9I,mBAAmB6K,EAAiBlC,qBAAqB+C,kBAAkBC,eAAgBd,EAAiBlC,qBAAqB+C,kBAAkBE,WAAW,SAAUC,GAC3L,GAAIA,EACF,OAAOpb,EAAS3M,UAAU+nB,GAE5B,IAAIC,EAA6B,CAC/BC,KAAM,UAAYjD,EAAqBlJ,iBAAkB,OAAO1nB,SAAS,UACzE8zB,iBAAkB,UAAYlD,EAAqBhJ,qBAAsB,OAAO5nB,SAAS,WAE3FypB,EAAO5B,gBAAkB+L,EAA2BE,iBACpDrK,EAAO1B,eAAiBwL,EAAkBE,eAC1ChK,EAAOhC,eAAiBmJ,EAAqBpJ,oBAC7CiC,EAAOoF,OAAOjiB,QAAQ,gBAAiB,CACrC8mB,UAAWH,EAAkBG,UAC7B/H,YAAalC,EAAOqF,kBAAkBrC,iBAAiB5B,cACvDkJ,2BAA4BH,EAC5BI,WAAYtF,IACX,SAAUuF,EAAYC,GACvB,OAAID,EACK1b,EAAS3M,UAAUqoB,IAE5BxK,EAAOsH,UAAY4B,EAAiBlC,qBAAqB+C,kBAAkBE,UAC3EjK,EAAO0K,6BACuC,IAA1CD,EAAYE,0BACP7b,EAAS7M,UAAU+d,EAAOqF,kBAAmBoF,EAAYE,2BAE3D7b,EAAS7M,UAAU+d,EAAOqF,mBACnC,GAEF,GAEF,EAiBApP,EAAO2U,6BAA+B,SAAsCC,EAAaC,EAAuBhc,EAAUkH,GACxH,IAAIwK,EAAS/rB,KACb,IAAKo2B,EACH,OAAO/b,EAAS3M,UAAU,IAAIhL,MAAM,8BAEtC,IAAIgwB,EAAuB,IAAIrK,EAAqBroB,KAAKywB,KAAKkC,mBAC1DuC,EAAuBxC,EAAqBxG,qDAC5CoK,EAAsB,CAAC,EACvBD,GACFl2B,OAAOqI,KAAK6tB,GAAuBE,SAAQ,SAAUlzB,GACnDizB,EAAoBpB,EAAuB7xB,GAAOgzB,EAAsBhzB,EAC1E,IAEFizB,EAAoBE,aAAeJ,EACnCE,EAAoB3E,SAAW3xB,KAAK8M,SACpC,IAAI+kB,EAAU,CACZK,cAAe,wBACfjoB,SAAUjK,KAAKywB,KAAKQ,cACpB+C,mBAAoBsC,EACpB5F,QAAS1wB,KAAK0wB,QACdtP,eAAgBG,GAEdvhB,KAAK+xB,uBACPF,EAAQG,gBAAkBhyB,KAAK+xB,sBAEjC/xB,KAAK2wB,OAAOjiB,QAAQ,yBAA0BmjB,GAAS,SAAU2C,EAAiBC,GAChF,OAAID,EACKna,EAAS3M,UAAU8mB,GAErBzI,EAAO2I,yBAAyBD,EAAkB/B,EAAsBrY,EACjF,GAEF,EAaAmH,EAAO4T,kBAAoB,SAA2B/a,EAAUkH,GAC9D,IAAIkV,EAASz2B,KACT0yB,EAAuB,IAAIrK,EAAqBroB,KAAK6pB,gBACrD+I,EAAa,IAAIhE,EACjBtN,EAAiB,CAAC,EACtBA,EAAeqQ,SAAW3xB,KAAK8M,SAC/BwU,EAAewR,WAAa9yB,KAAK6yB,UACjCH,EAAqB7J,gBAAe,SAAU6N,EAAW1D,GAEnD0D,GACFrc,EAAS3M,UAAUgpB,GAErBpV,EAAe2R,MAAQD,EAAOlxB,SAAS,IACvC,IAAI+vB,EAAU,CACZK,cAAe,kBACfjoB,SAAUwsB,EAAOhG,KAAKQ,cACtB+C,mBAAoB1S,EACpBF,eAAgBG,EAChBmP,QAAS+F,EAAO/F,SAEd+F,EAAO1E,uBACTF,EAAQG,gBAAkByE,EAAO1E,sBAEnC0E,EAAO9F,OAAOjiB,QAAQ,yBAA0BmjB,GAAS,SAAUrvB,EAAK+G,GACtE,GAAI/G,EACF,OAAO6X,EAAS3M,UAAUlL,GAE5B,IAAI2vB,EAAsB5oB,EAAK6oB,oBAC3B9G,EAAe,IAAI9C,EAAW2J,EAAoBiB,MAAO,IACzDvI,EAAO,IAAIrC,EAAW2J,EAAoBkB,KAAM,IACpDX,EAAqBrH,6BAA6BoL,EAAO5D,UAAW4D,EAAOlN,eAAgB+B,EAAcT,GAAM,SAAU8L,EAAS7K,GAEhI,GAAI6K,EACF,OAAOtc,EAAS3M,UAAUipB,GAE5B,IAAInD,EAAUZ,EAAW/D,eACrB5mB,EAAU,yBAA8B,YAAc,CAAC,UAAYwuB,EAAO5M,eAAgB,QAAS,UAAY4M,EAAO5D,UAAW,QAAS,UAAYV,EAAoBsB,aAAc,UAAW,UAAYD,EAAS,WACxNnwB,EAAM,yBAA8ByoB,GACpC4H,EAAkB,cAAiB,IAAWzrB,EAAS5E,IACvDswB,EAAqB,CAAC,EAC1BA,EAAmBhC,SAAW8E,EAAO3pB,SACrC6mB,EAAmBC,4BAA8BzB,EAAoBsB,aACrEE,EAAmBE,UAAYL,EAC/BG,EAAmBG,yBAA2BJ,EAC9CC,EAAmBb,WAAa2D,EAAO5D,UACvC,IAAIkB,EAAc,CAChB7B,cAAe,2BACfjoB,SAAUwsB,EAAOhG,KAAKQ,cACtB+C,mBAAoBL,EACpBjD,QAASnnB,EAAKmnB,SAEZ+F,EAAO1E,uBACTgC,EAAY/B,gBAAkByE,EAAO1E,sBAEvC0E,EAAO9F,OAAOjiB,QAAQ,yBAA0BqlB,GAAa,SAAUS,EAAiBC,GACtF,OAAID,EACKna,EAAS3M,UAAU8mB,IAE5BiC,EAAO7F,kBAAoB6F,EAAOnE,sBAAsBmC,EAAiBlC,sBACzEkE,EAAOpF,cACAhX,EAAS7M,UAAUipB,EAAO7F,mBACnC,GAGF,GAGF,GAEF,GACF,EAUApP,EAAOoV,oBAAsB,SAA6BC,EAAkBC,EAAoBzc,EAAUkH,GACxG,IAAIsQ,EAAU,CACZ5nB,SAAUjK,KAAKywB,KAAKQ,cACpB8F,iBAAkBF,EAClBnqB,SAAU1M,KAAK8M,SACfkqB,mBAAoBF,EACpB1V,eAAgBG,GAEdvhB,KAAK+xB,uBACPF,EAAQG,gBAAkBhyB,KAAK+xB,sBAEjC/xB,KAAK2wB,OAAOjiB,QAAQ,gBAAiBmjB,GAAS,SAAUrvB,GACtD,OAAIA,EACK6X,EAAS7X,EAAK,MAEhB6X,EAAS,KAAM,UACxB,GACF,EAaAmH,EAAOyV,0BAA4B,SAAmCC,EAAiB7c,EAAUkH,GAC/F,IAAI4V,EAASn3B,KACT2zB,EAAqB,CAAC,EAC1BA,EAAmBhC,SAAW3xB,KAAK8M,SACnC6mB,EAAmByD,OAASF,EAC5B,IAAIxE,EAAuB,IAAIrK,EAAqBroB,KAAKywB,KAAKkC,mBAC9D3yB,KAAKszB,gCACiB,MAAlBtzB,KAAK6yB,YACPc,EAAmBb,WAAa9yB,KAAK6yB,WAEvC,IAAIhB,EAAU,CACZK,cAAe,mBACf8B,mBAAoBL,EACpB1pB,SAAUjK,KAAKywB,KAAKQ,cACpBP,QAAS1wB,KAAK0wB,QACdtP,eAAgBG,GAEdvhB,KAAK+xB,uBACPF,EAAQG,gBAAkBhyB,KAAK+xB,sBAEjC/xB,KAAK2wB,OAAOjiB,QAAQ,yBAA0BmjB,GAAS,SAAUrvB,EAAK+G,GACpE,OAAI/G,EACK6X,EAAS3M,UAAUlL,GAErB20B,EAAOzC,yBAAyBnrB,EAAMmpB,EAAsBrY,EACrE,GACF,EAYAmH,EAAO6V,YAAc,SAAqBR,EAAkBxc,EAAUid,EAAS/V,GAC7E,IAAIgW,EAASv3B,KACT2zB,EAAqB,CAAC,EAC1BA,EAAmBhC,SAAW3xB,KAAK8M,SACnC6mB,EAAmB6D,aAAeX,EAClC,IAAIY,EAAmBH,GAAW,UACT,uBAArBG,IACF9D,EAAmB+D,wBAA0Bb,GAEzB,MAAlB72B,KAAK6yB,YACPc,EAAmBb,WAAa9yB,KAAK6yB,WAEvC,IAAIhB,EAAU,CACZK,cAAeuF,EACfzD,mBAAoBL,EACpB1pB,SAAUjK,KAAKywB,KAAKQ,cACpBP,QAAS1wB,KAAK0wB,QACdtP,eAAgBG,GAEdvhB,KAAK+xB,uBACPF,EAAQG,gBAAkBhyB,KAAK+xB,sBAEjC/xB,KAAK2wB,OAAOjiB,QAAQ,yBAA0BmjB,GAAS,SAAUrvB,EAAKiyB,GACpE,GAAIjyB,EACF,OAAO6X,EAAS3M,UAAUlL,GAG5B,GAAsB,oBADFiyB,EAAiBvC,cACrC,CAMA,GAFAqF,EAAO3G,kBAAoB2G,EAAOjF,sBAAsBmC,EAAiBlC,sBACzEgF,EAAOlG,cACwD,MAA3DoD,EAAiBlC,qBAAqB+C,kBACxC,OAAOjb,EAAS7M,UAAU+pB,EAAO3G,mBAEnC,IAAI8B,EAAuB,IAAIrK,EAAqBkP,EAAO9G,KAAKkC,mBAChED,EAAqB9I,mBAAmB6K,EAAiBlC,qBAAqB+C,kBAAkBC,eAAgBd,EAAiBlC,qBAAqB+C,kBAAkBE,WAAW,SAAUC,GAC3L,GAAIA,EACF,OAAOpb,EAAS3M,UAAU+nB,GAE5B,IAAIC,EAA6B,CAC/BC,KAAM,UAAYjD,EAAqBlJ,iBAAkB,OAAO1nB,SAAS,UACzE8zB,iBAAkB,UAAYlD,EAAqBhJ,qBAAsB,OAAO5nB,SAAS,WAE3Fy1B,EAAO5N,gBAAkB+L,EAA2BE,iBACpD2B,EAAO1N,eAAiB4K,EAAiBlC,qBAAqB+C,kBAAkBC,eAChFgC,EAAOhO,eAAiBmJ,EAAqBpJ,oBAC7CiO,EAAO5G,OAAOjiB,QAAQ,gBAAiB,CACrC8mB,UAAWf,EAAiBlC,qBAAqB+C,kBAAkBE,UACnE/H,YAAa8J,EAAO3G,kBAAkBrC,iBAAiB5B,cACvDkJ,2BAA4BH,EAC5BI,WAAYtF,IACX,SAAUuF,EAAYC,GACvB,OAAID,EACK1b,EAAS3M,UAAUqoB,IAE5BwB,EAAO1E,UAAY4B,EAAiBlC,qBAAqB+C,kBAAkBE,UAC3E+B,EAAOtB,6BACuC,IAA1CD,EAAYE,0BACP7b,EAAS7M,UAAU+pB,EAAO3G,kBAAmBoF,EAAYE,2BAE3D7b,EAAS7M,UAAU+pB,EAAO3G,mBACnC,GAEF,GAnCA,MAFE2G,EAAOnC,kBAAkB/a,EAuC7B,GACF,EAUAmH,EAAOnG,eAAiB,SAAwBsc,EAAiBC,EAAiBvd,EAAUkH,GAC1F,GAAgC,MAA1BvhB,KAAK4wB,oBAA6B5wB,KAAK4wB,kBAAkBzlB,UAC7D,OAAOkP,EAAS,IAAI3X,MAAM,6BAA8B,MAE1D1C,KAAK2wB,OAAOjiB,QAAQ,iBAAkB,CACpCmpB,iBAAkBF,EAClBG,iBAAkBF,EAClBnK,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrDvL,eAAgBG,IACf,SAAU/e,GACX,OAAIA,EACK6X,EAAS7X,EAAK,MAEhB6X,EAAS,KAAM,UACxB,GAEF,EAQAmH,EAAOuW,UAAY,SAAmB1d,GACpC,GAA8B,MAA1Bra,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS,IAAI3X,MAAM,6BAA8B,MAE1D,IAAIs1B,EAAa,GAKjBA,EAAW7wB,KAJM,CACf8wB,eAAgB,MAChBC,cAAe,iBAGjBl4B,KAAK2wB,OAAOjiB,QAAQ,kBAAmB,CACrCypB,WAAYH,EACZvK,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,gBACpD,SAAUnqB,GACX,OAAIA,EACK6X,EAAS7X,EAAK,MAEhB6X,EAAS,KAAM,UACxB,GAEF,EASAmH,EAAO4W,qBAAuB,SAA8BC,EAAgBC,EAA0Bje,GACpG,GAA8B,MAA1Bra,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS,IAAI3X,MAAM,6BAA8B,MAE1D1C,KAAK2wB,OAAOjiB,QAAQ,uBAAwB,CAC1C6pB,eAAgBF,EAChBG,yBAA0BF,EAC1B7K,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,gBACpD,SAAUnqB,GACX,OAAIA,EACK6X,EAAS7X,EAAK,MAEhB6X,EAAS,KAAM,UACxB,GAEF,EAQAmH,EAAOiX,WAAa,SAAoBpe,GACtC,GAA8B,MAA1Bra,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS,IAAI3X,MAAM,6BAA8B,MAG1D1C,KAAK2wB,OAAOjiB,QAAQ,kBAAmB,CACrCypB,WAFe,GAGf1K,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,gBACpD,SAAUnqB,GACX,OAAIA,EACK6X,EAAS7X,EAAK,MAEhB6X,EAAS,KAAM,UACxB,GAEF,EAQAmH,EAAOkX,WAAa,SAAoBre,EAAUkH,GAChD,IAAIoX,EAAS34B,KACb,GAA8B,MAA1BA,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS,IAAI3X,MAAM,6BAA8B,MAE1D1C,KAAK2wB,OAAOjiB,QAAQ,aAAc,CAChC+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrDvL,eAAgBG,IACf,SAAU/e,GACX,OAAIA,EACK6X,EAAS7X,EAAK,OAEvBm2B,EAAOC,kBACAve,EAAS,KAAM,WACxB,GAEF,EAYAmH,EAAOvW,iBAAmB,SAA0BK,EAAY+O,EAAUkH,GACxE,IAAIsX,EAAU74B,KACd,GAA8B,MAA1BA,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS,IAAI3X,MAAM,6BAA8B,MAE1D1C,KAAK2wB,OAAOjiB,QAAQ,uBAAwB,CAC1C+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrDmM,eAAgBxtB,EAChB8V,eAAgBG,IACf,SAAU/e,GACX,OAAIA,EACK6X,EAAS7X,EAAK,MAIhBq2B,EAAQE,aAAY,WACzB,OAAO1e,EAAS,KAAM,UACxB,GAAG,CACD2e,aAAa,GAEjB,GAEF,EAOAxX,EAAOpW,kBAAoB,SAA2BiP,GACpD,GAAgC,MAA1Bra,KAAK4wB,oBAA6B5wB,KAAK4wB,kBAAkBzlB,UAC7D,OAAOkP,EAAS,IAAI3X,MAAM,6BAA8B,MAE1D1C,KAAK2wB,OAAOjiB,QAAQ,UAAW,CAC7B+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,gBACpD,SAAUnqB,EAAKy2B,GAChB,GAAIz2B,EACF,OAAO6X,EAAS7X,EAAK,MAGvB,IADA,IAAI02B,EAAgB,GACXr5B,EAAI,EAAGA,EAAIo5B,EAASH,eAAep1B,OAAQ7D,IAAK,CACvD,IAAIua,EAAY,CACd5O,KAAMytB,EAASH,eAAej5B,GAAG2L,KACjCC,MAAOwtB,EAASH,eAAej5B,GAAG4L,OAEhC0tB,EAAgB,IAAIxd,EAAqBvB,GAC7C8e,EAAc/xB,KAAKgyB,EACrB,CACA,OAAO9e,EAAS,KAAM6e,EACxB,GAEF,EAUA1X,EAAO4X,cAAgB,SAAuB/e,GAC5C,GAAgC,MAA1Bra,KAAK4wB,oBAA6B5wB,KAAK4wB,kBAAkBzlB,UAC7D,OAAOkP,EAAS,IAAI3X,MAAM,6BAA8B,MAE1D1C,KAAK2wB,OAAOjiB,QAAQ,UAAW,CAC7B+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,gBACpD,SAAUnqB,EAAKy2B,GAChB,OAAIz2B,EACK6X,EAAS7X,EAAK,MAEhB6X,EAAS,KAAM4e,EAASd,WACjC,GAEF,EAMA3W,EAAO6X,qBAAuB,WAC5B,OAAOr5B,KAAK2wB,OAAO2I,iBAAiB,UAAW,CAC7C7L,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,eAEzD,EAMAnL,EAAO+X,yBAA2B,SAAkCzqB,GAClE,IAAI0qB,EAAUx5B,KAKd,YAJgB,IAAZ8O,IACFA,EAAU,CAAC,GAGN,IAAIjM,SAAQ,SAAUsB,GAC3B,IAAI+M,EAAUsoB,EAAQ5I,kBAAkB1kB,kBACpCgF,GAAWA,EAAQ8c,WACrBwL,EAAQvtB,eAAeiF,EAAS/M,EAAS2K,EAAQyS,gBAEjDpd,GAEJ,GACF,EAcAqd,EAAOuX,YAAc,SAAqB1e,EAAU9R,GAClD,IAAIkxB,EAAUz5B,KACd,GAAgC,MAA1BA,KAAK4wB,oBAA6B5wB,KAAK4wB,kBAAkBzlB,UAE7D,OADAnL,KAAKoxB,sBACE/W,EAAS,IAAI3X,MAAM,6BAA8B,MAE1D,IAAIu2B,EAAWj5B,KAAK05B,uBACpB,GAAKT,EAML,GAAIj5B,KAAK25B,gCAAgCpxB,GACvCvI,KAAK45B,gBAAgB52B,MAAK,SAAUuG,GAClC,OAAOkwB,EAAQF,yBAAyBhxB,GAAQvF,MAAK,WACnD,OAAOuG,CACT,GACF,IAAGvG,MAAK,SAAUuG,GAChB,OAAO8Q,EAAS,KAAM9Q,EACxB,IAAU,MAAE8Q,QAGd,IAEE,YADAA,EAAS,KAAMnY,KAAK2F,MAAMoxB,GAM5B,CAJE,MAAOz2B,GAGP,OAFAxC,KAAKoxB,2BACL/W,EAAS7X,EAAK,KAEhB,MAtBExC,KAAK45B,gBAAgB52B,MAAK,SAAUuG,GAClC8Q,EAAS,KAAM9Q,EACjB,IAAU,MAAE8Q,EAqBhB,EAOAmH,EAAOkY,qBAAuB,WAE5B,OADe15B,KAAK8wB,QAAQjnB,QAAQ7J,KAAKkxB,YAE3C,EAOA1P,EAAOmY,gCAAkC,SAAyCpxB,GAChF,IACEsxB,GADStxB,GAAU,CAAC,GACIywB,YAE1B,YADqC,IAArBa,GAAsCA,CAExD,EAMArY,EAAOoY,cAAgB,WACrB,IAAIE,EAAU95B,KACd,OAAOA,KAAKq5B,uBAAuBr2B,MAAK,SAAUuG,GAEhD,OADAuwB,EAAQC,cAAcxwB,GACfA,CACT,GACF,EAQAiY,EAAOwY,iBAAmB,SAA0Bd,EAAe7e,GACjE,IAAI4f,EAAUj6B,KACd,GAAgC,MAA1BA,KAAK4wB,oBAA6B5wB,KAAK4wB,kBAAkBzlB,UAC7D,OAAOkP,EAAS,IAAI3X,MAAM,6BAA8B,MAE1D1C,KAAK2wB,OAAOjiB,QAAQ,uBAAwB,CAC1CwrB,mBAAoBhB,EACpBzL,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,gBACpD,SAAUnqB,GACX,OAAIA,EACK6X,EAAS7X,EAAK,MAIhBy3B,EAAQlB,aAAY,WACzB,OAAO1e,EAAS,KAAM,UACxB,GAAG,CACD2e,aAAa,GAEjB,GAEF,EAQAxX,EAAO2Y,uBAAyB,SAAgC9f,EAAUkH,GACxE,IAAIsQ,EAAU,CACZ5nB,SAAUjK,KAAKywB,KAAKQ,cACpBvkB,SAAU1M,KAAK8M,SACfsU,eAAgBG,GAElBvhB,KAAK2wB,OAAOjiB,QAAQ,yBAA0BmjB,GAAS,SAAUrvB,EAAKkC,GACpE,OAAIlC,EACK6X,EAAS7X,EAAK,MAEhB6X,EAAS,KAAM3V,EACxB,GACF,EAeA8c,EAAOxW,WAAa,SAAoBqP,EAAUvL,GAIhD,QAHgB,IAAZA,IACFA,EAAU,CAAC,GAEQ,MAAjB9O,KAAK8M,SACP,OAAOuN,EAAS,IAAI3X,MAAM,mDAAoD,MAEhF,GAA8B,MAA1B1C,KAAK4wB,mBAA6B5wB,KAAK4wB,kBAAkBzlB,UAC3D,OAAOkP,EAAS,KAAMra,KAAK4wB,mBAE7B,IAAII,EAAY,kCAAoChxB,KAAKywB,KAAKQ,cAAgB,IAAMjxB,KAAK8M,SACrFstB,EAAapJ,EAAY,WACzBqJ,EAAiBrJ,EAAY,eAC7BsJ,EAAkBtJ,EAAY,gBAC9BuJ,EAAgBvJ,EAAY,cAChC,GAAIhxB,KAAK8wB,QAAQjnB,QAAQuwB,GAAa,CACpC,IAAIvuB,EAAU,IAAI+hB,EAAe,CAC/BC,QAAS7tB,KAAK8wB,QAAQjnB,QAAQuwB,KAE5BjM,EAAc,IAAIf,EAAmB,CACvCK,YAAaztB,KAAK8wB,QAAQjnB,QAAQwwB,KAEhC9vB,EAAe,IAAIujB,EAAoB,CACzCC,aAAc/tB,KAAK8wB,QAAQjnB,QAAQywB,KAEjClM,EAAalW,SAASlY,KAAK8wB,QAAQjnB,QAAQ0wB,GAAgB,IAAM,EAOjEC,EAAgB,IAAIvM,EANN,CAChBJ,QAAShiB,EACT4hB,YAAaU,EACbJ,aAAcxjB,EACd2jB,WAAYE,IAGd,GAAIoM,EAAcrvB,UAEhB,OADAnL,KAAK4wB,kBAAoB4J,EAClBngB,EAAS,KAAMra,KAAK4wB,mBAE7B,IAAKrmB,EAAayjB,WAChB,OAAO3T,EAAS,IAAI3X,MAAM,uDAAwD,MAEpF1C,KAAKiM,eAAe1B,EAAc8P,EAAUvL,EAAQyS,eACtD,MACElH,EAAS,IAAI3X,MAAM,6DAA8D,KAGrF,EASA8e,EAAOvV,eAAiB,SAAwB1B,EAAc8P,EAAUkH,GACtE,IAAIkZ,EAAUz6B,KACV06B,EAAkB16B,KAAKywB,KAAKkK,2BAA6B36B,KAAKywB,KAAKkK,2BAA2BtgB,GAAYA,EAC1GiH,EAAiB,CAAC,EACtBA,EAAesZ,cAAgBrwB,EAAayjB,WAC5C,IAAIgD,EAAY,kCAAoChxB,KAAKywB,KAAKQ,cAC1D4J,EAAc7J,EAAY,gBAC9B,GAAIhxB,KAAK8wB,QAAQjnB,QAAQgxB,GAAc,CACrC76B,KAAK8M,SAAW9M,KAAK8wB,QAAQjnB,QAAQgxB,GACrC,IAAIC,EAAe9J,EAAY,IAAMhxB,KAAK8M,SAAW,aACrD9M,KAAK6yB,UAAY7yB,KAAK8wB,QAAQjnB,QAAQixB,GACtCxZ,EAAewR,WAAa9yB,KAAK6yB,SACnC,CACA,IAAIhB,EAAU,CACZ5nB,SAAUjK,KAAKywB,KAAKQ,cACpBa,SAAU,qBACV3Q,eAAgBG,EAChBF,eAAgBG,GAEdvhB,KAAK+xB,uBACPF,EAAQG,gBAAkBhyB,KAAK+xB,sBAEjC/xB,KAAK2wB,OAAOjiB,QAAQ,eAAgBmjB,GAAS,SAAUrvB,EAAKoyB,GAC1D,GAAIpyB,EAIF,MAHiB,2BAAbA,EAAInB,MACNo5B,EAAQ7B,kBAEH8B,EAAgBl4B,EAAK,MAE9B,GAAIoyB,EAAY,CACd,IAAImG,EAAuBnG,EAAWrC,qBAMtC,OALKpyB,OAAOic,UAAUrV,eAAe2mB,KAAKqN,EAAsB,kBAC9DA,EAAqBhN,aAAexjB,EAAayjB,YAEnDyM,EAAQ7J,kBAAoB6J,EAAQnI,sBAAsByI,GAC1DN,EAAQpJ,cACDqJ,EAAgB,KAAMD,EAAQ7J,kBACvC,CAEF,GACF,EAMApP,EAAO6P,YAAc,WACnB,IAAIL,EAAY,kCAAoChxB,KAAKywB,KAAKQ,cAC1DmJ,EAAapJ,EAAY,IAAMhxB,KAAK8M,SAAW,WAC/CutB,EAAiBrJ,EAAY,IAAMhxB,KAAK8M,SAAW,eACnDwtB,EAAkBtJ,EAAY,IAAMhxB,KAAK8M,SAAW,gBACpDytB,EAAgBvJ,EAAY,IAAMhxB,KAAK8M,SAAW,cAClD+tB,EAAc7J,EAAY,gBAC9BhxB,KAAK8wB,QAAQ7uB,QAAQm4B,EAAYp6B,KAAK4wB,kBAAkBtC,aAAa3B,eACrE3sB,KAAK8wB,QAAQ7uB,QAAQo4B,EAAgBr6B,KAAK4wB,kBAAkBrC,iBAAiB5B,eAC7E3sB,KAAK8wB,QAAQ7uB,QAAQq4B,EAAiBt6B,KAAK4wB,kBAAkB1kB,kBAAkB8hB,YAC/EhuB,KAAK8wB,QAAQ7uB,QAAQs4B,EAAe,GAAKv6B,KAAK4wB,kBAAkBpC,iBAChExuB,KAAK8wB,QAAQ7uB,QAAQ44B,EAAa76B,KAAK8M,SACzC,EAKA0U,EAAOuY,cAAgB,SAAuBd,GAC5Cj5B,KAAK8wB,QAAQ7uB,QAAQjC,KAAKkxB,YAAahvB,KAAKC,UAAU82B,GACxD,EAKAzX,EAAO4P,oBAAsB,WAC3BpxB,KAAK8wB,QAAQrhB,WAAWzP,KAAKkxB,YAC/B,EACA1P,EAAOoX,gBAAkB,WACvB54B,KAAKg7B,oBACLh7B,KAAKoxB,qBACP,EAMA5P,EAAOyU,0BAA4B,WACjC,IAAIjF,EAAY,kCAAoChxB,KAAKywB,KAAKQ,cAAgB,IAAMjxB,KAAK8M,SACrFguB,EAAe9J,EAAY,aAC3BiK,EAAoBjK,EAAY,qBAChCkK,EAAoBlK,EAAY,kBACpChxB,KAAK8wB,QAAQ7uB,QAAQ64B,EAAc96B,KAAK6yB,WACxC7yB,KAAK8wB,QAAQ7uB,QAAQg5B,EAAmBj7B,KAAKupB,gBAC7CvpB,KAAK8wB,QAAQ7uB,QAAQi5B,EAAmBl7B,KAAK6pB,eAC/C,EAMArI,EAAO8R,8BAAgC,WACrC,IAAItC,EAAY,kCAAoChxB,KAAKywB,KAAKQ,cAAgB,IAAMjxB,KAAK8M,SACrFguB,EAAe9J,EAAY,aAC3BiK,EAAoBjK,EAAY,qBAChCkK,EAAoBlK,EAAY,kBAChChxB,KAAK8wB,QAAQjnB,QAAQixB,KACvB96B,KAAK6yB,UAAY7yB,KAAK8wB,QAAQjnB,QAAQixB,GACtC96B,KAAKupB,eAAiBvpB,KAAK8wB,QAAQjnB,QAAQoxB,GAC3Cj7B,KAAK6pB,eAAiB7pB,KAAK8wB,QAAQjnB,QAAQqxB,GAE/C,EAMA1Z,EAAO+S,gCAAkC,WACvC,IAAIvD,EAAY,kCAAoChxB,KAAKywB,KAAKQ,cAAgB,IAAMjxB,KAAK8M,SACrFguB,EAAe9J,EAAY,aAC3BiK,EAAoBjK,EAAY,qBAChCkK,EAAoBlK,EAAY,kBACpChxB,KAAK8wB,QAAQrhB,WAAWqrB,GACxB96B,KAAK8wB,QAAQrhB,WAAWwrB,GACxBj7B,KAAK8wB,QAAQrhB,WAAWyrB,EAC1B,EAMA1Z,EAAOwZ,kBAAoB,WACzB,IAAIhK,EAAY,kCAAoChxB,KAAKywB,KAAKQ,cAC1DmJ,EAAapJ,EAAY,IAAMhxB,KAAK8M,SAAW,WAC/CutB,EAAiBrJ,EAAY,IAAMhxB,KAAK8M,SAAW,eACnDwtB,EAAkBtJ,EAAY,IAAMhxB,KAAK8M,SAAW,gBACpD+tB,EAAc7J,EAAY,gBAC1BuJ,EAAgBvJ,EAAY,IAAMhxB,KAAK8M,SAAW,cACtD9M,KAAK8wB,QAAQrhB,WAAW2qB,GACxBp6B,KAAK8wB,QAAQrhB,WAAW4qB,GACxBr6B,KAAK8wB,QAAQrhB,WAAW6qB,GACxBt6B,KAAK8wB,QAAQrhB,WAAWorB,GACxB76B,KAAK8wB,QAAQrhB,WAAW8qB,EAC1B,EAQA/Y,EAAO8Q,sBAAwB,SAA+BsC,GAC5D,IAAI/oB,EAAU,IAAI+hB,EAAegH,GAC7BzG,EAAc,IAAIf,EAAmBwH,GACrCrqB,EAAe,IAAIujB,EAAoB8G,GAM3C,OAAO,IAAI3G,EALO,CAChBJ,QAAShiB,EACT4hB,YAAaU,EACbJ,aAAcxjB,GAGlB,EAYAiX,EAAO9G,eAAiB,SAAwBL,EAAUkH,GACxD,IAAIsQ,EAAU,CACZ5nB,SAAUjK,KAAKywB,KAAKQ,cACpBvkB,SAAU1M,KAAK8M,SACfsU,eAAgBG,GAEdvhB,KAAK+xB,uBACPF,EAAQG,gBAAkBhyB,KAAK+xB,sBAEjC/xB,KAAK2wB,OAAOjiB,QAAQ,iBAAkBmjB,GAAS,SAAUrvB,EAAK+G,GAC5D,OAAI/G,EACK6X,EAAS3M,UAAUlL,GAEkB,mBAAnC6X,EAASC,sBACXD,EAASC,sBAAsB/Q,GAEjC8Q,EAAS7M,UAAUjE,EAC5B,GACF,EAYAiY,EAAO3G,gBAAkB,SAAyBgc,EAAkBT,EAAa/b,EAAUkH,GACzF,IAAIsQ,EAAU,CACZ5nB,SAAUjK,KAAKywB,KAAKQ,cACpBvkB,SAAU1M,KAAK8M,SACfiqB,iBAAkBF,EAClBzpB,SAAUgpB,EACVhV,eAAgBG,GAEdvhB,KAAK+xB,uBACPF,EAAQG,gBAAkBhyB,KAAK+xB,sBAEjC/xB,KAAK2wB,OAAOjiB,QAAQ,wBAAyBmjB,GAAS,SAAUrvB,GAC9D,OAAIA,EACK6X,EAAS3M,UAAUlL,GAErB6X,EAAS7M,UAAU,UAC5B,GACF,EAWAgU,EAAOjH,6BAA+B,SAAsC4gB,EAAe9gB,EAAUkH,GACnG,GAA8B,MAA1BvhB,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS3M,UAAU,IAAIhL,MAAM,8BAEtC1C,KAAK2wB,OAAOjiB,QAAQ,mCAAoC,CACtDwpB,cAAeiD,EACf1N,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrDvL,eAAgBG,IACf,SAAU/e,EAAK+G,GAChB,OAAI/G,EACK6X,EAAS3M,UAAUlL,GAEkB,mBAAnC6X,EAASC,sBACXD,EAASC,sBAAsB/Q,GAEjC8Q,EAAS7M,UAAU,UAC5B,GAEF,EAWAgU,EAAOrH,gBAAkB,SAAyBghB,EAAetE,EAAkBxc,GACjF,GAA8B,MAA1Bra,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS3M,UAAU,IAAIhL,MAAM,8BAEtC1C,KAAK2wB,OAAOjiB,QAAQ,sBAAuB,CACzCwpB,cAAeiD,EACfC,KAAMvE,EACNpJ,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,gBACpD,SAAUnqB,GACX,OAAIA,EACK6X,EAAS3M,UAAUlL,GAErB6X,EAAS7M,UAAU,UAC5B,GAEF,EASAgU,EAAO6Z,UAAY,SAAmBhhB,GACpC,GAA8B,MAA1Bra,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS3M,UAAU,IAAIhL,MAAM,8BAEtC1C,KAAK2wB,OAAOjiB,QAAQ,YAAa,CAC/B+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrD6I,UAAWx1B,KAAK6yB,YACf,SAAUrwB,EAAK+G,GAChB,OAAI/G,EACK6X,EAAS3M,UAAUlL,GAErB6X,EAAS7M,UAAUjE,EAC5B,GAEF,EAUAiY,EAAO8Z,qBAAuB,SAA8BzI,EAAWxY,GACrE,GAA8B,MAA1Bra,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS3M,UAAU,IAAIhL,MAAM,8BAEtC1C,KAAK2wB,OAAOjiB,QAAQ,eAAgB,CAClC+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrD6I,UAAW3C,IACV,SAAUrwB,GACX,OAAIA,EACK6X,EAAS3M,UAAUlL,GAErB6X,EAAS7M,UAAU,UAC5B,GAEF,EASAgU,EAAO+Z,aAAe,SAAsBlhB,GAC1C,IAAImhB,EAAUx7B,KACdA,KAAKs7B,qBAAqBt7B,KAAK6yB,UAAW,CACxCnlB,UAAW2M,EAAS3M,UACpBF,UAAW,SAAmB9I,GAK5B,OAJA82B,EAAQ3I,UAAY,KACpB2I,EAAQ3R,eAAiB,KACzB2R,EAAQjS,eAAiB,KACzBiS,EAAQjH,kCACDla,EAAS7M,UAAU9I,EAC5B,GAEJ,EASA8c,EAAOia,0BAA4B,SAAmCphB,GACpE,GAA8B,MAA1Bra,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS3M,UAAU,IAAIhL,MAAM,8BAEtC1C,KAAK2wB,OAAOjiB,QAAQ,qBAAsB,CACxC+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrD6I,UAAWx1B,KAAK6yB,UAChB6I,uBAAwB,eACvB,SAAUl5B,GACX,OAAIA,EACK6X,EAAS3M,UAAUlL,GAErB6X,EAAS7M,UAAU,UAC5B,GAEF,EASAgU,EAAOma,6BAA+B,SAAsCthB,GAC1E,GAA8B,MAA1Bra,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS3M,UAAU,IAAIhL,MAAM,8BAEtC1C,KAAK2wB,OAAOjiB,QAAQ,qBAAsB,CACxC+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrD6I,UAAWx1B,KAAK6yB,UAChB6I,uBAAwB,mBACvB,SAAUl5B,GACX,OAAIA,EACK6X,EAAS3M,UAAUlL,GAErB6X,EAAS7M,UAAU,UAC5B,GAEF,EAYAgU,EAAOoa,YAAc,SAAqBxqB,EAAOyqB,EAAiBxhB,GAChE,GAA8B,MAA1Bra,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS3M,UAAU,IAAIhL,MAAM,8BAEtC,IAAIo5B,EAAgB,CAClBrO,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrDoP,MAAO3qB,GAELyqB,IACFC,EAAcE,gBAAkBH,GAElC77B,KAAK2wB,OAAOjiB,QAAQ,cAAeotB,GAAe,SAAUt5B,EAAK+G,GAC/D,OAAI/G,EACK6X,EAAS3M,UAAUlL,GAErB6X,EAAS7M,UAAUjE,EAC5B,GAEF,EASAiY,EAAOya,cAAgB,SAAuB5hB,GAC5C,IAAI6hB,EAAUl8B,KACd,GAA8B,MAA1BA,KAAK4wB,oBAA8B5wB,KAAK4wB,kBAAkBzlB,UAC5D,OAAOkP,EAAS3M,UAAU,IAAIhL,MAAM,8BAEtC1C,KAAK2wB,OAAOjiB,QAAQ,gBAAiB,CACnC+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,gBACpD,SAAUnqB,GACX,OAAIA,EACK6X,EAAS3M,UAAUlL,IAE5B05B,EAAQtD,kBACDve,EAAS7M,UAAU,WAC5B,GAEF,EAMAgU,EAAO3H,QAAU,SAAiBsiB,GAChC,IAAIC,EAAUp8B,KAETm8B,GAAsD,mBAAxBA,EAInCn8B,KAAKgL,YAAW,SAAU2C,EAAO0uB,GAC/B,GAAI1uB,EACF,OAAOwuB,EAAoBxuB,GAE7ByuB,EAAQE,cAAa,SAAU95B,GAC7B45B,EAAQG,kBACRJ,EAAoB35B,EACtB,GACF,IAXExC,KAAKu8B,iBAYT,EACA/a,EAAO8a,aAAe,SAAsBH,GAI1C,QAH4B,IAAxBA,IACFA,EAAsB,WAAgC,GAErB,mBAAxBA,EACT,MAAM,IAAIz5B,MAAM,yDAGlB,IAAK1C,KAAK4wB,kBAER,OAAOuL,EADK,IAAIz5B,MAAM,8BAGxB,IAAK1C,KAAK4wB,kBAAkBrC,iBAE1B,OAAO4N,EADM,IAAIz5B,MAAM,8BAGzB,IAAI6H,EAAevK,KAAK4wB,kBAAkB1kB,kBAAkB8hB,WACxDG,EAAcnuB,KAAK4wB,kBAAkBrC,iBACzC,GAAIvuB,KAAKw8B,mBAAmBrO,IACtB5jB,EACF,OAAOvK,KAAKy8B,YAAY,CACtB1sB,MAAOxF,EACP8P,SAAU8hB,IAIhBA,GACF,EACA3a,EAAOgb,mBAAqB,SAA4BzsB,GACtD,GAAIA,GAAwC,mBAAxBA,EAAM2c,cACxB,IAGE,QAF2B3c,EAAM2c,gBACGgQ,UAItC,CAFE,MAAOl6B,GAET,CAEF,OAAO,CACT,EACAgf,EAAO+a,gBAAkB,WACvBv8B,KAAK4wB,kBAAoB,KACzB5wB,KAAK44B,iBACP,EACApX,EAAOib,YAAc,SAAqBE,GACxC,IAAI5sB,EAAQ4sB,EAAM5sB,MAChBsK,EAAWsiB,EAAMtiB,SACnBra,KAAK2wB,OAAOiM,iBAAiB,cAAe,CAC1CC,MAAO9sB,EACP9F,SAAUjK,KAAKywB,KAAKQ,gBACnB,SAAUzuB,GACX,GAAIA,EACF,OAAO6X,EAAS7X,GAElB6X,GACF,GACF,EAQAmH,EAAOsb,uBAAyB,SAAgC5F,EAAiB7c,GAC/E,IAAI0iB,EAAU/8B,KACV2zB,EAAqB,CAAC,EAC1BA,EAAmBhC,SAAW3xB,KAAK8M,SACnC6mB,EAAmByD,OAASF,EAC5B,IAAIrF,EAAU,CACZK,cAAe,kBACf8B,mBAAoBL,EACpB1pB,SAAUjK,KAAKywB,KAAKQ,cACpBP,QAAS1wB,KAAK0wB,SAEZ1wB,KAAK+xB,uBACPF,EAAQG,gBAAkBhyB,KAAK+xB,sBAEjC/xB,KAAK2wB,OAAOjiB,QAAQ,yBAA0BmjB,GAAS,SAAUrvB,EAAK+G,GACpE,OAAI/G,EACK6X,EAAS3M,UAAUlL,IAE5Bu6B,EAAQrM,QAAUnnB,EAAKmnB,QACC,YAApBwG,EACK7c,EAASwa,YAAYtrB,EAAK2oB,cAAe3oB,EAAK6oB,qBAE/B,uBAApB8E,EACK7c,EAAS2a,aAAazrB,EAAK2oB,cAAe3oB,EAAK6oB,0BADxD,EAIF,GACF,EAMA5Q,EAAOuQ,mBAAqB,WAE1B,OADW/xB,KAAKywB,KACJsB,mBAAmB/xB,KAAK8M,SACtC,EAOA0U,EAAOwb,uBAAyB,SAAgC3iB,GAC9D,IAAI4iB,EAAUj9B,KACkB,MAA1BA,KAAK4wB,mBAA6B5wB,KAAK4wB,kBAAkBzlB,UAW7DnL,KAAK2wB,OAAOjiB,QAAQ,yBAA0B,CAC5C+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,gBACpD,SAAUnqB,EAAK+G,GAChB,OAAI/G,EACK6X,EAAS3M,UAAUlL,GAErB6X,EAAS6iB,oBAAoB3zB,EAAK4zB,WAC3C,IAjBAn9B,KAAK2wB,OAAOjiB,QAAQ,yBAA0B,CAC5CgiB,QAAS1wB,KAAK0wB,UACb,SAAUluB,EAAK+G,GAChB,OAAI/G,EACK6X,EAAS3M,UAAUlL,IAE5By6B,EAAQvM,QAAUnnB,EAAKmnB,QAChBrW,EAAS6iB,oBAAoB3zB,EAAK4zB,YAC3C,GAWJ,EASA3b,EAAO4b,oBAAsB,SAA6BC,EAAUC,EAAoBjjB,GACtF,IAAIkjB,EAAUv9B,KACkB,MAA1BA,KAAK4wB,mBAA6B5wB,KAAK4wB,kBAAkBzlB,UAgC7DnL,KAAK2wB,OAAOjiB,QAAQ,sBAAuB,CACzC+e,YAAaztB,KAAK4wB,kBAAkBrC,iBAAiB5B,cACrD6Q,SAAUH,EACVI,mBAAoBH,IACnB,SAAU96B,EAAK+G,GAChB,OAAI/G,EACK6X,EAAS3M,UAAUlL,GAErB6X,EAAS7M,UAAUjE,EAC5B,IAxCAvJ,KAAK2wB,OAAOjiB,QAAQ,sBAAuB,CACzCgiB,QAAS1wB,KAAK0wB,QACd8M,SAAUH,EACVI,mBAAoBH,IACnB,SAAU96B,EAAK+G,GAChB,GAAI/G,EACF,OAAO6X,EAAS3M,UAAUlL,GAE5B+6B,EAAQ7M,QAAUnnB,EAAKmnB,QACvB,IAAIiD,EAAqB,CAAC,EAC1BA,EAAmBhC,SAAW4L,EAAQzwB,SACtC,IAAI+kB,EAAU,CACZK,cAAe,YACfjoB,SAAUszB,EAAQ9M,KAAKQ,cACvB+C,mBAAoBL,EACpBjD,QAAS6M,EAAQ7M,SAEf6M,EAAQxL,uBACVF,EAAQG,gBAAkBuL,EAAQxL,sBAEpCwL,EAAQ5M,OAAOjiB,QAAQ,yBAA0BmjB,GAAS,SAAU6L,EAAYC,GAC9E,OAAID,EACKrjB,EAAS3M,UAAUgwB,IAE5BH,EAAQ3M,kBAAoB2M,EAAQjL,sBAAsBqL,EAAYpL,sBACtEgL,EAAQlM,cACDhX,EAAS7M,UAAU+vB,EAAQ3M,mBACpC,GAEF,GAaJ,EACOnkB,CACT,CA9sD+B,GC1D3BmxB,UAAkB,qBACXC,EAAW,CACpBrN,UAAWoN,EAAkB,MAC7BE,QAAS,GACT5a,UAAW,KACX6a,eAAe,GCRjB,SAASC,IAAa,CDUG,oBAAd9a,WAA6BA,UAAU4a,UAChDD,EAASC,QAAU5a,UAAU4a,SAAW,GACxCD,EAAS3a,UAAYA,WAAa,KAE3B,gBADCA,UAAU4a,SAEdD,EAASrN,UAAYoN,EAAkB,gBACvCC,EAASE,eAAgB,IAGzBF,EAASrN,UAAYoN,EAAkB,MACvCC,EAASE,eAAgB,IClB/BC,EAAU5hB,UAAUoU,UDuBXqN,EAASrN,UCtBX,IAAIyN,EAA2B,SAAkCC,GACjEA,IAGDF,EAAU5hB,UAAUoU,YAAcwN,EAAU5hB,UAAUoU,UAAUtpB,SAASg3B,KAC3EF,EAAU5hB,UAAUoU,UAAYwN,EAAU5hB,UAAUoU,UAAUhS,OAAO,IAAK0f,IAEvEF,EAAU5hB,UAAUoU,WAA+C,KAAlCwN,EAAU5hB,UAAUoU,YACxDwN,EAAU5hB,UAAUoU,UAAY0N,GAEpC,EAGA,UCjBA,SAASC,EAAiBC,GAAS,IAAIC,EAAwB,mBAARC,IAAqB,IAAIA,SAAQrsB,EAA8nB,OAAnnBksB,EAAmB,SAA0BC,GAAS,GAAc,OAAVA,IAGlIr9B,EAHuKq9B,GAGjG,IAAzDG,SAASz8B,SAAS4rB,KAAK3sB,GAAIuzB,QAAQ,kBAH+H,OAAO8J,EAGjN,IAA2Br9B,EAH6L,GAAqB,mBAAVq9B,EAAwB,MAAM,IAAII,UAAU,sDAAyD,QAAsB,IAAXH,EAAwB,CAAE,GAAIA,EAAOI,IAAIL,GAAQ,OAAOC,EAAOK,IAAIN,GAAQC,EAAOh8B,IAAI+7B,EAAOO,EAAU,CAAE,SAASA,IAAY,OAAOC,GAAWR,EAAO36B,UAAWo7B,GAAgB7+B,MAAMgF,YAAc,CAAkJ,OAAhJ25B,EAAQviB,UAAYjc,OAAOwtB,OAAOyQ,EAAMhiB,UAAW,CAAEpX,YAAa,CAAE3E,MAAOs+B,EAASG,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAkB,GAAgBL,EAASP,EAAQ,EAAUD,EAAiBC,EAAQ,CACtvB,SAASQ,GAAWK,EAAQC,EAAMd,GAA4V,OAAhTQ,GAA/BO,KAA4Cv7B,QAAQw7B,UAAUx8B,OAA8B,SAAoBq8B,EAAQC,EAAMd,GAAS,IAAIx+B,EAAI,CAAC,MAAOA,EAAEuH,KAAKvC,MAAMhF,EAAGs/B,GAAO,IAAsDG,EAAW,IAA/Cd,SAAS37B,KAAKgC,MAAMq6B,EAAQr/B,IAA6F,OAAnDw+B,GAAO,GAAgBiB,EAAUjB,EAAMhiB,WAAmBijB,CAAU,EAAYT,GAAWh6B,MAAM,KAAMnB,UAAY,CACxa,SAAS07B,KAA8B,GAAuB,oBAAZv7B,UAA4BA,QAAQw7B,UAAW,OAAO,EAAO,GAAIx7B,QAAQw7B,UAAUE,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhFC,QAAQpjB,UAAUqjB,QAAQ/R,KAAK9pB,QAAQw7B,UAAUI,QAAS,IAAI,WAAa,MAAY,CAAkC,CAA1B,MAAOh7B,GAAK,OAAO,CAAO,CAAE,CAExU,SAAS,GAAgByoB,EAAG1e,GAA6I,OAAxI,GAAkBpO,OAAO+sB,eAAiB/sB,OAAO+sB,eAAetqB,OAAS,SAAyBqqB,EAAG1e,GAAsB,OAAjB0e,EAAEE,UAAY5e,EAAU0e,CAAG,EAAU,GAAgBA,EAAG1e,EAAI,CACvM,SAASswB,GAAgB5R,GAA+J,OAA1J4R,GAAkB1+B,OAAO+sB,eAAiB/sB,OAAOu/B,eAAe98B,OAAS,SAAyBqqB,GAAK,OAAOA,EAAEE,WAAahtB,OAAOu/B,eAAezS,EAAI,EAAU4R,GAAgB5R,EAAI,CAGnN,IAAI0S,GAA4B,SAAUC,GAExC,SAASD,EAAa13B,EAAS5G,EAAM6S,EAAM2rB,GACzC,IAAI5W,EAKJ,OAJAA,EAAQ2W,EAAOlS,KAAK1tB,KAAMiI,IAAYjI,MAChCqB,KAAOA,EACb4nB,EAAM/U,KAAOA,EACb+U,EAAM4W,WAAaA,EACZ5W,CACT,CACA,OAnBgCsE,EAUHqS,GAVPtS,EAUPqS,GAVwCvjB,UAAYjc,OAAOwtB,OAAOJ,EAAWnR,WAAYkR,EAASlR,UAAUpX,YAAcsoB,EAAU,GAAgBA,EAAUC,GAmBtKoS,EAnBT,IAAwBrS,EAAUC,CAoBlC,CAXgC,CAWhB4Q,EAAiBz7B,QAE7Bo9B,GAAsB,WAOxB,SAASA,EAAOC,EAAQ7vB,EAAUe,GAChCjR,KAAKkQ,SAAWA,GAAY,uBAAyB6vB,EAAS,kBAC9D,IACEC,GADS/uB,GAAgB,CAAC,GACP+uB,YACrBhgC,KAAKiR,aAAe+uB,EAAc,CAChCA,YAAaA,GACX,CAAC,CACP,CASA,IAAIxe,EAASse,EAAO1jB,UAsGpB,OArGAoF,EAAO8X,iBAAmB,SAA0B2G,EAAW13B,GAC7D,IAAIuhB,EAAS9pB,KACb,OAAO,IAAI6C,SAAQ,SAAUsB,EAASC,GACpC0lB,EAAOpb,QAAQuxB,EAAW13B,GAAQ,SAAU/F,EAAK+G,GAC3C/G,EACF4B,EAAO,IAAIu7B,GAAan9B,EAAIyF,QAASzF,EAAInB,KAAMmB,EAAI0R,KAAM1R,EAAIq9B,aAE7D17B,EAAQoF,EAEZ,GACF,GACF,EACAiY,EAAOob,iBAAmB,SAA0BqD,EAAW13B,EAAQ8R,GACrE,IAsJ+C6kB,EAAMgB,EAtJjDhW,EAASlqB,MAsJkCk/B,EA1I5C,CAAC32B,GA0IiD23B,EArJ3B,SAsJT,IAAfA,IACFA,EAAaC,IAERC,IAxJoB,SAAU7xB,GACjC,OAAO,IAAI1L,SAAQ,SAAUC,EAAKC,GAChCmnB,EAAOxb,QAAQuxB,EAAW1xB,GAAG,SAAUZ,EAAOjJ,GACxCiJ,EACF5K,EAAI4K,GAEJ7K,EAAI4B,EAER,GACF,GACF,GA8I4Bw6B,EAbhC,SAAyBgB,GAGvB,OAAO,SAAUG,GACf,IAAIC,EAHa,IAGL1jB,KAAKa,IAAI,EAAG4iB,GAFN,IAEgDzjB,KAAK4F,SACvE,QAAO8d,EAAQJ,IAAqBI,CACtC,CACF,CAMsCC,CAAgBL,KA9IhBl9B,MAAK,SAAU0B,GAC/C,OAAO2V,EAAS,KAAM3V,EACxB,IAAU,OAAE,SAAUiJ,GACpB,OAAO0M,EAAS1M,EAClB,GACF,EAUA6T,EAAO9S,QAAU,SAAiBuxB,EAAW13B,EAAQ8R,GACnD,IAYIjZ,EAZAoR,EAAU,CACZ,eAAgB,6BAChB,eAAgB,qCAAuCytB,EACvD,mBAAoB,uBAElBnxB,EAAU3O,OAAOiH,OAAO,CAAC,EAAGpH,KAAKiR,aAAc,CACjDuB,QAASA,EACT1K,OAAQ,OACR04B,KAAM,OACNC,MAAO,WACP14B,KAAM7F,KAAKC,UAAUoG,KAIvBd,MAAMzH,KAAKkQ,SAAUpB,GAAS9L,MAAK,SAAU09B,GAE3C,OADAt/B,EAAWs/B,EACJA,CACT,IAAG,SAAUl+B,GAGX,GAAIA,aAAeg8B,UACjB,MAAM,IAAI97B,MAAM,iBAElB,MAAMF,CACR,IAAGQ,MAAK,SAAU09B,GAChB,OAAOA,EAAKC,OAAc,OAAE,WAC1B,MAAO,CAAC,CACV,GACF,IAAG39B,MAAK,SAAUuG,GAEhB,GAAInI,EAASw/B,GAAI,OAAOvmB,EAAS,KAAM9Q,GAKvC,IAAIlI,GAAQkI,EAAKs3B,QAAUt3B,EAAKlI,MAAM8G,MAAM,KAAK6X,MAC7CrS,EAAQ,IAAIjL,MAAM6G,EAAKtB,SAAWsB,EAAKu3B,SAAW,MAGtD,OAFAnzB,EAAMuG,KAAO7S,EACbsM,EAAMtM,KAAOA,EACNgZ,EAAS1M,EAClB,IAAU,OAAE,SAAUnL,GAEpB,GAAIpB,GAAYA,EAASoR,SAAWpR,EAASoR,QAAQksB,IAAI,oBACvD,IACE,IAAIr9B,EAAOD,EAASoR,QAAQksB,IAAI,oBAAoBv2B,MAAM,KAAK,GAC3DwF,EAAQ,IAAIjL,MAAMtB,EAASsG,OAAStG,EAASsG,OAAO5F,WAAa,MAIrE,OAHA6L,EAAMtM,KAAOA,EACbsM,EAAMuG,KAAO7S,EACbsM,EAAMkyB,WAAaz+B,EAASsG,OACrB2S,EAAS1M,EAGlB,CAFE,MAAOozB,GACP,OAAO1mB,EAAS7X,EAClB,MAESA,aAAeE,OAAyB,kBAAhBF,EAAIyF,UACrCzF,EAAInB,KAAO,gBAEb,OAAOgZ,EAAS7X,EAClB,GACF,EACOs9B,CACT,CA9H0B,GAuJ1B,SAASM,GAAMY,EAAiB9B,EAAM+B,EAASZ,GAI7C,QAHgB,IAAZA,IACFA,EAAU,GAEmB,mBAApBW,EACT,MAAMt+B,MAAM,sCAGd,OADas+B,EAAgB9sB,KAAiDhS,KAAKC,UAAU+8B,GACtF8B,EAAgBp8B,WAAM,EAAQs6B,GAAa,OAAE,SAAU18B,GAE5D,GAD2Bw+B,EAAgB9sB,MAbQhB,EAc3B1Q,IAZZ0Q,EAAO,aAcjB,MADa8tB,EAAgB9sB,KACvB1R,EAhBc,IAA6B0Q,EAkB/CguB,EAAUD,EAAQZ,EAASnB,EAAM18B,GAErC,GADaw+B,EAAgB9sB,MACb,IAAZgtB,EACF,OAAO,IAAIr+B,SAAQ,SAAUC,GAC3B,OAAOq+B,WAAWr+B,EAAKo+B,EACzB,IAAGl+B,MAAK,WACN,OAAOo9B,GAAMY,EAAiB9B,EAAM+B,EAASZ,EAAU,EACzD,IAEA,MAAM79B,CAEV,GACF,CA/BiCE,MAwCjC,IAAIy9B,GAAe,ICrMfr2B,GAA+B,WAejC,SAASA,EAAgBP,EAAMoxB,GAC7B,IAAI1Z,EAAO1X,GAAQ,CAAC,EAClBQ,EAAakX,EAAKlX,WAClBE,EAAWgX,EAAKhX,SAChBiG,EAAW+Q,EAAK/Q,SAChBe,EAAegQ,EAAKhQ,aACpBmwB,EAAqCngB,EAAKmgB,mCAC5C,IAAKr3B,IAAeE,EAClB,MAAM,IAAIvH,MAAM,8CAElB,GAAIqH,EAAWrG,OA5BW,KA4B0B,wBAAwB8b,KAAKzV,GAC/E,MAAM,IAAIrH,MAAM,8BAElB,IAAIq9B,EAASh2B,EAAW5B,MAAM,KAAK,GACnCnI,KAAKqhC,WAAat3B,EAClB/J,KAAKshC,SAAWr3B,EAChBjK,KAAK2wB,OAAS,IAAImP,GAAOC,EAAQ7vB,EAAUe,GAM3CjR,KAAKuhC,oCAA4E,IAAvCH,EAC1CphC,KAAK8wB,QAAUvnB,EAAKwnB,UAAW,IAAIZ,GAAgBI,aAC/CoK,IACF36B,KAAK26B,2BAA6BA,EAEtC,CAKA,IAAInZ,EAAS1X,EAAgBsS,UAiH7B,OAhHAoF,EAAOggB,cAAgB,WACrB,OAAOxhC,KAAKqhC,UACd,EAKA7f,EAAOmR,gBAAkB,WACvB,OAAO3yB,KAAKwhC,gBAAgBr5B,MAAM,KAAK,EACzC,EAKAqZ,EAAOyP,YAAc,WACnB,OAAOjxB,KAAKshC,QACd,EAkBA9f,EAAOigB,OAAS,SAAgB30B,EAAUC,EAAUO,EAAgB+T,EAAgBhH,EAAUkH,GAC5F,IAAI0H,EAAQjpB,KACR6xB,EAAU,CACZ5nB,SAAUjK,KAAKshC,SACf50B,SAAUI,EACVM,SAAUL,EACV+rB,eAAgBxrB,EAChB4T,eAAgBG,EAChBD,eAAgBG,GAEdvhB,KAAK+xB,mBAAmBjlB,KAC1B+kB,EAAQG,gBAAkBhyB,KAAK+xB,mBAAmBjlB,IAEpD9M,KAAK2wB,OAAOjiB,QAAQ,SAAUmjB,GAAS,SAAUrvB,EAAK+G,GACpD,GAAI/G,EACF,OAAO6X,EAAS7X,EAAK,MAEvB,IAAI4C,EAAc,CAChBsH,SAAUI,EACVH,KAAMsc,EACN8H,QAAS9H,EAAM6H,SAEb4Q,EAAa,CACfl3B,KAAM,IAAIiC,EAAYrH,GACtBu8B,cAAep4B,EAAKq4B,cACpBC,QAASt4B,EAAKu4B,QACdC,oBAAqBx4B,EAAKy4B,qBAE5B,OAAO3nB,EAAS,KAAMqnB,EACxB,GACF,EAOAlgB,EAAOzW,eAAiB,WACtB,IAAI8vB,EAAc,kCAAoC76B,KAAKshC,SAAW,gBAClEW,EAAejiC,KAAK8wB,QAAQjnB,QAAQgxB,GACxC,GAAIoH,EAAc,CAChB,IAAI78B,EAAc,CAChBsH,SAAUu1B,EACVt1B,KAAM3M,KACN+wB,QAAS/wB,KAAK8wB,SAEhB,OAAO,IAAIrkB,EAAYrH,EACzB,CACA,OAAO,IACT,EAUAoc,EAAOuQ,mBAAqB,SAA4BjlB,GACtD,GAAiD,oBAAtCo1B,kCAAX,CAIA,IAAIC,EAAyCD,kCAG7C,GAAIliC,KAAKuhC,mCAAoC,CAC3C,IAAIa,EAAuBD,EAAuCE,QAAQv1B,EAAU9M,KAAKqhC,WAAYrhC,KAAKshC,UAC1G,GAAIc,EAIF,MAHsB,CACpBE,YAAaF,EAInB,CACA,MAAO,CAAC,CAdR,CAeF,EACOt4B,CACT,CAjKmC,aCR/By4B,GAA6B,WAU/B,SAASA,EAAch5B,GACrB,IAAIA,EAAKi5B,OAGP,MAAM,IAAI9/B,MAAM,qDAiBlB,GAnBE1C,KAAKwiC,OAASj5B,EAAKi5B,OAIjBj5B,EAAKk5B,KACPziC,KAAKyiC,KAAOl5B,EAAKk5B,KAEjBziC,KAAKyiC,KAAO,IAEVtiC,OAAOic,UAAUrV,eAAe2mB,KAAKnkB,EAAM,WAC7CvJ,KAAK0iC,QAAUn5B,EAAKm5B,QAEpB1iC,KAAK0iC,QAAU,IAEbviC,OAAOic,UAAUrV,eAAe2mB,KAAKnkB,EAAM,UAC7CvJ,KAAK2iC,OAASp5B,EAAKo5B,OAEnB3iC,KAAK2iC,QAAS,EAEZxiC,OAAOic,UAAUrV,eAAe2mB,KAAKnkB,EAAM,YAAa,CAC1D,IAAK,CAAC,SAAU,MAAO,QAAQrC,SAASqC,EAAKq5B,UAC3C,MAAM,IAAIlgC,MAAM,0EAElB,GAAsB,SAAlB6G,EAAKq5B,WAAwB5iC,KAAK2iC,OACpC,MAAM,IAAIjgC,MAAM,6EAElB1C,KAAK4iC,SAAWr5B,EAAKq5B,QACvB,MACE5iC,KAAK4iC,SAAW,IAEpB,CAQA,IAAIphB,EAAS+gB,EAAcnmB,UAwD3B,OAvDAoF,EAAOvf,QAAU,SAAiBoB,EAAKhD,GACrC,IAAIyO,EAAU,CACZ2zB,KAAMziC,KAAKyiC,KACXC,QAAS1iC,KAAK0iC,QACdF,OAAQxiC,KAAKwiC,OACbG,OAAQ3iC,KAAK2iC,QAMf,OAJI3iC,KAAK4iC,WACP9zB,EAAQ8zB,SAAW5iC,KAAK4iC,UAE1B,OAAYv/B,EAAKhD,EAAOyO,GACjB,OAAYzL,EACrB,EAQAme,EAAO3X,QAAU,SAAiBxG,GAChC,OAAO,OAAYA,EACrB,EAOAme,EAAO/R,WAAa,SAAoBpM,GACtC,IAAIyL,EAAU,CACZ2zB,KAAMziC,KAAKyiC,KACXC,QAAS1iC,KAAK0iC,QACdF,OAAQxiC,KAAKwiC,OACbG,OAAQ3iC,KAAK2iC,QAKf,OAHI3iC,KAAK4iC,WACP9zB,EAAQ8zB,SAAW5iC,KAAK4iC,UAEnB,UAAev/B,EAAKyL,EAC7B,EAOA0S,EAAO0O,MAAQ,WAGb,IAFA,IAAI2S,EAAU,SACVC,EAAU3iC,OAAOqI,KAAKq6B,GAASn/B,OAC1BuQ,EAAQ,EAAGA,EAAQ6uB,IAAW7uB,EACrCjU,KAAKyP,WAAWtP,OAAOqI,KAAKq6B,GAAS5uB,IAEvC,MAAO,CAAC,CACV,EACOsuB,CACT,CA3GiC,6BCDjC/iC,EAAQujC,WAuCR,SAAqBC,GACnB,IAAIC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAC3B,OAAuC,GAA9BE,EAAWC,GAAuB,EAAKA,CAClD,EA3CA5jC,EAAQ6jC,YAiDR,SAAsBL,GACpB,IAAIM,EAcAzjC,EAbAojC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAEvBM,EAAM,IAAIC,EAVhB,SAAsBR,EAAKG,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,CAClD,CAQoBK,CAAYT,EAAKG,EAAUC,IAEzCM,EAAU,EAGVC,EAAMP,EAAkB,EACxBD,EAAW,EACXA,EAGJ,IAAKtjC,EAAI,EAAGA,EAAI8jC,EAAK9jC,GAAK,EACxByjC,EACGM,EAAUZ,EAAI/kB,WAAWpe,KAAO,GAChC+jC,EAAUZ,EAAI/kB,WAAWpe,EAAI,KAAO,GACpC+jC,EAAUZ,EAAI/kB,WAAWpe,EAAI,KAAO,EACrC+jC,EAAUZ,EAAI/kB,WAAWpe,EAAI,IAC/B0jC,EAAIG,KAAcJ,GAAO,GAAM,IAC/BC,EAAIG,KAAcJ,GAAO,EAAK,IAC9BC,EAAIG,KAAmB,IAANJ,EAmBnB,OAhBwB,IAApBF,IACFE,EACGM,EAAUZ,EAAI/kB,WAAWpe,KAAO,EAChC+jC,EAAUZ,EAAI/kB,WAAWpe,EAAI,KAAO,EACvC0jC,EAAIG,KAAmB,IAANJ,GAGK,IAApBF,IACFE,EACGM,EAAUZ,EAAI/kB,WAAWpe,KAAO,GAChC+jC,EAAUZ,EAAI/kB,WAAWpe,EAAI,KAAO,EACpC+jC,EAAUZ,EAAI/kB,WAAWpe,EAAI,KAAO,EACvC0jC,EAAIG,KAAcJ,GAAO,EAAK,IAC9BC,EAAIG,KAAmB,IAANJ,GAGZC,CACT,EA5FA/jC,EAAQqkC,cAkHR,SAAwBC,GAQtB,IAPA,IAAIR,EACAK,EAAMG,EAAMpgC,OACZqgC,EAAaJ,EAAM,EACnBK,EAAQ,GACRC,EAAiB,MAGZpkC,EAAI,EAAGqkC,EAAOP,EAAMI,EAAYlkC,EAAIqkC,EAAMrkC,GAAKokC,EACtDD,EAAM78B,KAAKg9B,EAAYL,EAAOjkC,EAAIA,EAAIokC,EAAkBC,EAAOA,EAAQrkC,EAAIokC,IAqB7E,OAjBmB,IAAfF,GACFT,EAAMQ,EAAMH,EAAM,GAClBK,EAAM78B,KACJi9B,EAAOd,GAAO,GACdc,EAAQd,GAAO,EAAK,IACpB,OAEsB,IAAfS,IACTT,GAAOQ,EAAMH,EAAM,IAAM,GAAKG,EAAMH,EAAM,GAC1CK,EAAM78B,KACJi9B,EAAOd,GAAO,IACdc,EAAQd,GAAO,EAAK,IACpBc,EAAQd,GAAO,EAAK,IACpB,MAIGU,EAAM37B,KAAK,GACpB,EA1IA,IALA,IAAI+7B,EAAS,GACTR,EAAY,GACZJ,EAA4B,oBAAfa,WAA6BA,WAAan1B,MAEvD7N,EAAO,mEACFxB,EAAI,EAAG8jC,EAAMtiC,EAAKqC,OAAQ7D,EAAI8jC,IAAO9jC,EAC5CukC,EAAOvkC,GAAKwB,EAAKxB,GACjB+jC,EAAUviC,EAAK4c,WAAWpe,IAAMA,EAQlC,SAASqjC,EAASF,GAChB,IAAIW,EAAMX,EAAIt/B,OAEd,GAAIigC,EAAM,EAAI,EACZ,MAAM,IAAIjhC,MAAM,kDAKlB,IAAIygC,EAAWH,EAAI1O,QAAQ,KAO3B,OANkB,IAAd6O,IAAiBA,EAAWQ,GAMzB,CAACR,EAJcA,IAAaQ,EAC/B,EACA,EAAKR,EAAW,EAGtB,CAmEA,SAASgB,EAAaL,EAAOQ,EAAOC,GAGlC,IAFA,IAAIjB,EARoBkB,EASpBnkB,EAAS,GACJxgB,EAAIykC,EAAOzkC,EAAI0kC,EAAK1kC,GAAK,EAChCyjC,GACIQ,EAAMjkC,IAAM,GAAM,WAClBikC,EAAMjkC,EAAI,IAAM,EAAK,QACP,IAAfikC,EAAMjkC,EAAI,IACbwgB,EAAOlZ,KAdFi9B,GADiBI,EAeMlB,IAdT,GAAK,IACxBc,EAAOI,GAAO,GAAK,IACnBJ,EAAOI,GAAO,EAAI,IAClBJ,EAAa,GAANI,IAaT,OAAOnkB,EAAOhY,KAAK,GACrB,CAlGAu7B,EAAU,IAAI3lB,WAAW,IAAM,GAC/B2lB,EAAU,IAAI3lB,WAAW,IAAM,mCCT3BwmB,EAAS,EAAQ,KACjBC,EAAU,EAAQ,KAClBv1B,EAAU,EAAQ,KAmDtB,SAASw1B,IACP,OAAOC,EAAOC,oBACV,WACA,UACN,CAEA,SAASC,EAAcC,EAAMrhC,GAC3B,GAAIihC,IAAejhC,EACjB,MAAM,IAAIshC,WAAW,8BAcvB,OAZIJ,EAAOC,qBAETE,EAAO,IAAIV,WAAW3gC,IACjBypB,UAAYyX,EAAOxoB,WAGX,OAAT2oB,IACFA,EAAO,IAAIH,EAAOlhC,IAEpBqhC,EAAKrhC,OAASA,GAGTqhC,CACT,CAYA,SAASH,EAAQ5jC,EAAKikC,EAAkBvhC,GACtC,KAAKkhC,EAAOC,qBAAyB7kC,gBAAgB4kC,GACnD,OAAO,IAAIA,EAAO5jC,EAAKikC,EAAkBvhC,GAI3C,GAAmB,iBAAR1C,EAAkB,CAC3B,GAAgC,iBAArBikC,EACT,MAAM,IAAIviC,MACR,qEAGJ,OAAOwiC,EAAYllC,KAAMgB,EAC3B,CACA,OAAOmkC,EAAKnlC,KAAMgB,EAAKikC,EAAkBvhC,EAC3C,CAUA,SAASyhC,EAAMJ,EAAM1kC,EAAO4kC,EAAkBvhC,GAC5C,GAAqB,iBAAVrD,EACT,MAAM,IAAIm+B,UAAU,yCAGtB,MAA2B,oBAAhB4G,aAA+B/kC,aAAiB+kC,YA6H7D,SAA0BL,EAAM/jB,EAAOqkB,EAAY3hC,GAGjD,GAFAsd,EAAM+hB,WAEFsC,EAAa,GAAKrkB,EAAM+hB,WAAasC,EACvC,MAAM,IAAIL,WAAW,6BAGvB,GAAIhkB,EAAM+hB,WAAasC,GAAc3hC,GAAU,GAC7C,MAAM,IAAIshC,WAAW,6BAmBvB,OAfEhkB,OADiB/O,IAAfozB,QAAuCpzB,IAAXvO,EACtB,IAAI2gC,WAAWrjB,QACH/O,IAAXvO,EACD,IAAI2gC,WAAWrjB,EAAOqkB,GAEtB,IAAIhB,WAAWrjB,EAAOqkB,EAAY3hC,GAGxCkhC,EAAOC,qBAETE,EAAO/jB,GACFmM,UAAYyX,EAAOxoB,UAGxB2oB,EAAOO,EAAcP,EAAM/jB,GAEtB+jB,CACT,CAxJWQ,CAAgBR,EAAM1kC,EAAO4kC,EAAkBvhC,GAGnC,iBAAVrD,EAwFb,SAAqB0kC,EAAMnkB,EAAQ4kB,GAKjC,GAJwB,iBAAbA,GAAsC,KAAbA,IAClCA,EAAW,SAGRZ,EAAOa,WAAWD,GACrB,MAAM,IAAIhH,UAAU,8CAGtB,IAAI96B,EAAwC,EAA/Bq/B,EAAWniB,EAAQ4kB,GAG5BE,GAFJX,EAAOD,EAAaC,EAAMrhC,IAERiiC,MAAM/kB,EAAQ4kB,GAShC,OAPIE,IAAWhiC,IAIbqhC,EAAOA,EAAK5mB,MAAM,EAAGunB,IAGhBX,CACT,CA7GWjiB,CAAWiiB,EAAM1kC,EAAO4kC,GAsJnC,SAAqBF,EAAM7xB,GACzB,GAAI0xB,EAAOgB,SAAS1yB,GAAM,CACxB,IAAIywB,EAA4B,EAAtBxmB,EAAQjK,EAAIxP,QAGtB,OAAoB,KAFpBqhC,EAAOD,EAAaC,EAAMpB,IAEjBjgC,QAITwP,EAAI2yB,KAAKd,EAAM,EAAG,EAAGpB,GAHZoB,CAKX,CAEA,GAAI7xB,EAAK,CACP,GAA4B,oBAAhBkyB,aACRlyB,EAAI4yB,kBAAkBV,aAAgB,WAAYlyB,EACpD,MAA0B,iBAAfA,EAAIxP,SA+8CL2C,EA/8CkC6M,EAAIxP,SAg9CrC2C,EA/8CFy+B,EAAaC,EAAM,GAErBO,EAAcP,EAAM7xB,GAG7B,GAAiB,WAAbA,EAAIf,MAAqBhD,EAAQ+D,EAAI3J,MACvC,OAAO+7B,EAAcP,EAAM7xB,EAAI3J,KAEnC,CAs8CF,IAAgBlD,EAp8Cd,MAAM,IAAIm4B,UAAU,qFACtB,CA/KSuH,CAAWhB,EAAM1kC,EAC1B,CA2BA,SAAS2lC,EAAYlpB,GACnB,GAAoB,iBAATA,EACT,MAAM,IAAI0hB,UAAU,oCACf,GAAI1hB,EAAO,EAChB,MAAM,IAAIkoB,WAAW,uCAEzB,CA0BA,SAASE,EAAaH,EAAMjoB,GAG1B,GAFAkpB,EAAWlpB,GACXioB,EAAOD,EAAaC,EAAMjoB,EAAO,EAAI,EAAoB,EAAhBK,EAAQL,KAC5C8nB,EAAOC,oBACV,IAAK,IAAIhlC,EAAI,EAAGA,EAAIid,IAAQjd,EAC1BklC,EAAKllC,GAAK,EAGd,OAAOklC,CACT,CAuCA,SAASO,EAAeP,EAAM/jB,GAC5B,IAAItd,EAASsd,EAAMtd,OAAS,EAAI,EAA4B,EAAxByZ,EAAQ6D,EAAMtd,QAClDqhC,EAAOD,EAAaC,EAAMrhC,GAC1B,IAAK,IAAI7D,EAAI,EAAGA,EAAI6D,EAAQ7D,GAAK,EAC/BklC,EAAKllC,GAAgB,IAAXmhB,EAAMnhB,GAElB,OAAOklC,CACT,CA8DA,SAAS5nB,EAASzZ,GAGhB,GAAIA,GAAUihC,IACZ,MAAM,IAAIK,WAAW,0DACaL,IAAa7iC,SAAS,IAAM,UAEhE,OAAgB,EAAT4B,CACT,CAqFA,SAASq/B,EAAYniB,EAAQ4kB,GAC3B,GAAIZ,EAAOgB,SAAShlB,GAClB,OAAOA,EAAOld,OAEhB,GAA2B,oBAAhB0hC,aAA6D,mBAAvBA,YAAYa,SACxDb,YAAYa,OAAOrlB,IAAWA,aAAkBwkB,aACnD,OAAOxkB,EAAOmiB,WAEM,iBAAXniB,IACTA,EAAS,GAAKA,GAGhB,IAAI+iB,EAAM/iB,EAAOld,OACjB,GAAY,IAARigC,EAAW,OAAO,EAItB,IADA,IAAIuC,GAAc,IAEhB,OAAQV,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAO7B,EACT,IAAK,OACL,IAAK,QACL,UAAK1xB,EACH,OAAOk0B,EAAYvlB,GAAQld,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAANigC,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAOyC,EAAcxlB,GAAQld,OAC/B,QACE,GAAIwiC,EAAa,OAAOC,EAAYvlB,GAAQld,OAC5C8hC,GAAY,GAAKA,GAAU7lB,cAC3BumB,GAAc,EAGtB,CAGA,SAASG,EAAcb,EAAUlB,EAAOC,GACtC,IAAI2B,GAAc,EAclB,SALcj0B,IAAVqyB,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQtkC,KAAK0D,OACf,MAAO,GAOT,SAJYuO,IAARsyB,GAAqBA,EAAMvkC,KAAK0D,UAClC6gC,EAAMvkC,KAAK0D,QAGT6gC,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACTD,KAAW,GAGT,MAAO,GAKT,IAFKkB,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOc,EAAStmC,KAAMskC,EAAOC,GAE/B,IAAK,OACL,IAAK,QACH,OAAOgC,EAAUvmC,KAAMskC,EAAOC,GAEhC,IAAK,QACH,OAAOiC,EAAWxmC,KAAMskC,EAAOC,GAEjC,IAAK,SACL,IAAK,SACH,OAAOkC,EAAYzmC,KAAMskC,EAAOC,GAElC,IAAK,SACH,OAAOmC,EAAY1mC,KAAMskC,EAAOC,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOoC,EAAa3mC,KAAMskC,EAAOC,GAEnC,QACE,GAAI2B,EAAa,MAAM,IAAI1H,UAAU,qBAAuBgH,GAC5DA,GAAYA,EAAW,IAAI7lB,cAC3BumB,GAAc,EAGtB,CAMA,SAASU,EAAMnoB,EAAG4E,EAAGxK,GACnB,IAAIhZ,EAAI4e,EAAE4E,GACV5E,EAAE4E,GAAK5E,EAAE5F,GACT4F,EAAE5F,GAAKhZ,CACT,CAkIA,SAASgnC,EAAsBf,EAAQz/B,EAAKg/B,EAAYG,EAAUsB,GAEhE,GAAsB,IAAlBhB,EAAOpiC,OAAc,OAAQ,EAmBjC,GAhB0B,iBAAf2hC,GACTG,EAAWH,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAEhBA,GAAcA,EACVhmB,MAAMgmB,KAERA,EAAayB,EAAM,EAAKhB,EAAOpiC,OAAS,GAItC2hC,EAAa,IAAGA,EAAaS,EAAOpiC,OAAS2hC,GAC7CA,GAAcS,EAAOpiC,OAAQ,CAC/B,GAAIojC,EAAK,OAAQ,EACZzB,EAAaS,EAAOpiC,OAAS,CACpC,MAAO,GAAI2hC,EAAa,EAAG,CACzB,IAAIyB,EACC,OAAQ,EADJzB,EAAa,CAExB,CAQA,GALmB,iBAARh/B,IACTA,EAAMu+B,EAAOO,KAAK9+B,EAAKm/B,IAIrBZ,EAAOgB,SAASv/B,GAElB,OAAmB,IAAfA,EAAI3C,QACE,EAEHqjC,EAAajB,EAAQz/B,EAAKg/B,EAAYG,EAAUsB,GAClD,GAAmB,iBAARzgC,EAEhB,OADAA,GAAY,IACRu+B,EAAOC,qBACiC,mBAAjCR,WAAWjoB,UAAUkY,QAC1BwS,EACKzC,WAAWjoB,UAAUkY,QAAQ5G,KAAKoY,EAAQz/B,EAAKg/B,GAE/ChB,WAAWjoB,UAAU4qB,YAAYtZ,KAAKoY,EAAQz/B,EAAKg/B,GAGvD0B,EAAajB,EAAQ,CAAEz/B,GAAOg/B,EAAYG,EAAUsB,GAG7D,MAAM,IAAItI,UAAU,uCACtB,CAEA,SAASuI,EAAcxD,EAAKl9B,EAAKg/B,EAAYG,EAAUsB,GACrD,IA0BIjnC,EA1BAonC,EAAY,EACZC,EAAY3D,EAAI7/B,OAChByjC,EAAY9gC,EAAI3C,OAEpB,QAAiBuO,IAAbuzB,IAEe,UADjBA,EAAWza,OAAOya,GAAU7lB,gBACY,UAAb6lB,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAIjC,EAAI7/B,OAAS,GAAK2C,EAAI3C,OAAS,EACjC,OAAQ,EAEVujC,EAAY,EACZC,GAAa,EACbC,GAAa,EACb9B,GAAc,CAChB,CAGF,SAAS+B,EAAM7c,EAAK1qB,GAClB,OAAkB,IAAdonC,EACK1c,EAAI1qB,GAEJ0qB,EAAI8c,aAAaxnC,EAAIonC,EAEhC,CAGA,GAAIH,EAAK,CACP,IAAIQ,GAAc,EAClB,IAAKznC,EAAIwlC,EAAYxlC,EAAIqnC,EAAWrnC,IAClC,GAAIunC,EAAK7D,EAAK1jC,KAAOunC,EAAK/gC,GAAqB,IAAhBihC,EAAoB,EAAIznC,EAAIynC,IAEzD,IADoB,IAAhBA,IAAmBA,EAAaznC,GAChCA,EAAIynC,EAAa,IAAMH,EAAW,OAAOG,EAAaL,OAEtC,IAAhBK,IAAmBznC,GAAKA,EAAIynC,GAChCA,GAAc,CAGpB,MAEE,IADIjC,EAAa8B,EAAYD,IAAW7B,EAAa6B,EAAYC,GAC5DtnC,EAAIwlC,EAAYxlC,GAAK,EAAGA,IAAK,CAEhC,IADA,IAAI0nC,GAAQ,EACHhqB,EAAI,EAAGA,EAAI4pB,EAAW5pB,IAC7B,GAAI6pB,EAAK7D,EAAK1jC,EAAI0d,KAAO6pB,EAAK/gC,EAAKkX,GAAI,CACrCgqB,GAAQ,EACR,KACF,CAEF,GAAIA,EAAO,OAAO1nC,CACpB,CAGF,OAAQ,CACV,CAcA,SAAS2nC,EAAUjd,EAAK3J,EAAQ6mB,EAAQ/jC,GACtC+jC,EAAS97B,OAAO87B,IAAW,EAC3B,IAAIC,EAAYnd,EAAI7mB,OAAS+jC,EACxB/jC,GAGHA,EAASiI,OAAOjI,IACHgkC,IACXhkC,EAASgkC,GAJXhkC,EAASgkC,EASX,IAAIC,EAAS/mB,EAAOld,OACpB,GAAIikC,EAAS,GAAM,EAAG,MAAM,IAAInJ,UAAU,sBAEtC96B,EAASikC,EAAS,IACpBjkC,EAASikC,EAAS,GAEpB,IAAK,IAAI9nC,EAAI,EAAGA,EAAI6D,IAAU7D,EAAG,CAC/B,IAAI+nC,EAAS1vB,SAAS0I,EAAOuU,OAAW,EAAJt1B,EAAO,GAAI,IAC/C,GAAIwf,MAAMuoB,GAAS,OAAO/nC,EAC1B0qB,EAAIkd,EAAS5nC,GAAK+nC,CACpB,CACA,OAAO/nC,CACT,CAEA,SAASgoC,EAAWtd,EAAK3J,EAAQ6mB,EAAQ/jC,GACvC,OAAOokC,EAAW3B,EAAYvlB,EAAQ2J,EAAI7mB,OAAS+jC,GAASld,EAAKkd,EAAQ/jC,EAC3E,CAEA,SAASqkC,EAAYxd,EAAK3J,EAAQ6mB,EAAQ/jC,GACxC,OAAOokC,EAq6BT,SAAuBtd,GAErB,IADA,IAAIwd,EAAY,GACPnoC,EAAI,EAAGA,EAAI2qB,EAAI9mB,SAAU7D,EAEhCmoC,EAAU7gC,KAAyB,IAApBqjB,EAAIvM,WAAWpe,IAEhC,OAAOmoC,CACT,CA56BoBC,CAAarnB,GAAS2J,EAAKkd,EAAQ/jC,EACvD,CAEA,SAASwkC,EAAa3d,EAAK3J,EAAQ6mB,EAAQ/jC,GACzC,OAAOqkC,EAAWxd,EAAK3J,EAAQ6mB,EAAQ/jC,EACzC,CAEA,SAASykC,EAAa5d,EAAK3J,EAAQ6mB,EAAQ/jC,GACzC,OAAOokC,EAAW1B,EAAcxlB,GAAS2J,EAAKkd,EAAQ/jC,EACxD,CAEA,SAAS0kC,EAAW7d,EAAK3J,EAAQ6mB,EAAQ/jC,GACvC,OAAOokC,EAk6BT,SAAyBtd,EAAK6d,GAG5B,IAFA,IAAI7kC,EAAG8kC,EAAIC,EACPP,EAAY,GACPnoC,EAAI,EAAGA,EAAI2qB,EAAI9mB,WACjB2kC,GAAS,GAAK,KADaxoC,EAIhCyoC,GADA9kC,EAAIgnB,EAAIvM,WAAWpe,KACT,EACV0oC,EAAK/kC,EAAI,IACTwkC,EAAU7gC,KAAKohC,GACfP,EAAU7gC,KAAKmhC,GAGjB,OAAON,CACT,CAh7BoBQ,CAAe5nB,EAAQ2J,EAAI7mB,OAAS+jC,GAASld,EAAKkd,EAAQ/jC,EAC9E,CAiFA,SAASgjC,EAAanc,EAAK+Z,EAAOC,GAChC,OAAc,IAAVD,GAAeC,IAAQha,EAAI7mB,OACtB+gC,EAAOZ,cAActZ,GAErBka,EAAOZ,cAActZ,EAAIpM,MAAMmmB,EAAOC,GAEjD,CAEA,SAASgC,EAAWhc,EAAK+Z,EAAOC,GAC9BA,EAAM3nB,KAAK2J,IAAIgE,EAAI7mB,OAAQ6gC,GAI3B,IAHA,IAAIzhC,EAAM,GAENjD,EAAIykC,EACDzkC,EAAI0kC,GAAK,CACd,IAQMkE,EAAYC,EAAWC,EAAYC,EARrCC,EAAYte,EAAI1qB,GAChBipC,EAAY,KACZC,EAAoBF,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EACpBA,EAAY,IAAQ,EACrB,EAEJ,GAAIhpC,EAAIkpC,GAAoBxE,EAG1B,OAAQwE,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EAEyB,MAAV,KADlBJ,EAAale,EAAI1qB,EAAI,OAEnB+oC,GAA6B,GAAZC,IAAqB,EAAoB,GAAbJ,GACzB,MAClBK,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAale,EAAI1qB,EAAI,GACrB6oC,EAAYne,EAAI1qB,EAAI,GACQ,MAAV,IAAb4oC,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZC,IAAoB,IAAoB,GAAbJ,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEE,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAale,EAAI1qB,EAAI,GACrB6oC,EAAYne,EAAI1qB,EAAI,GACpB8oC,EAAape,EAAI1qB,EAAI,GACO,MAAV,IAAb4oC,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZC,IAAoB,IAAqB,GAAbJ,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CE,EAAYF,GAMJ,OAAdE,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbhmC,EAAIqE,KAAK2hC,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBhmC,EAAIqE,KAAK2hC,GACTjpC,GAAKkpC,CACP,CAEA,OAQF,SAAgCC,GAC9B,IAAIrF,EAAMqF,EAAWtlC,OACrB,GAAIigC,GAAOsF,EACT,OAAOle,OAAOC,aAAapmB,MAAMmmB,OAAQie,GAM3C,IAFA,IAAIlmC,EAAM,GACNjD,EAAI,EACDA,EAAI8jC,GACT7gC,GAAOioB,OAAOC,aAAapmB,MACzBmmB,OACAie,EAAW7qB,MAAMte,EAAGA,GAAKopC,IAG7B,OAAOnmC,CACT,CAxBSomC,CAAsBpmC,EAC/B,CA/8BAtD,EAAQ,GAASolC,EAEjBplC,EAAQ,GAAoB,GA0B5BolC,EAAOC,yBAAqD5yB,IAA/B,EAAA+P,EAAO6iB,oBAChC,EAAA7iB,EAAO6iB,oBAQX,WACE,IACE,IAAItB,EAAM,IAAIc,WAAW,GAEzB,OADAd,EAAIpW,UAAY,CAACA,UAAWkX,WAAWjoB,UAAW+sB,IAAK,WAAc,OAAO,EAAG,GAC1D,KAAd5F,EAAI4F,OACiB,mBAAjB5F,EAAI6F,UACuB,IAAlC7F,EAAI6F,SAAS,EAAG,GAAGrG,UAGzB,CAFE,MAAOv+B,GACP,OAAO,CACT,CACF,CAjBI6kC,GAKiB1E,IAkErBC,EAAO0E,SAAW,KAGlB1E,EAAO2E,SAAW,SAAUhG,GAE1B,OADAA,EAAIpW,UAAYyX,EAAOxoB,UAChBmnB,CACT,EA0BAqB,EAAOO,KAAO,SAAU9kC,EAAO4kC,EAAkBvhC,GAC/C,OAAOyhC,EAAK,KAAM9kC,EAAO4kC,EAAkBvhC,EAC7C,EAEIkhC,EAAOC,sBACTD,EAAOxoB,UAAU+Q,UAAYkX,WAAWjoB,UACxCwoB,EAAOzX,UAAYkX,WACG,oBAAXmF,QAA0BA,OAAOC,SACxC7E,EAAO4E,OAAOC,WAAa7E,GAE7BzkC,OAAOC,eAAewkC,EAAQ4E,OAAOC,QAAS,CAC5CppC,MAAO,KACP2+B,cAAc,KAiCpB4F,EAAO8E,MAAQ,SAAU5sB,EAAM6sB,EAAMnE,GACnC,OArBF,SAAgBT,EAAMjoB,EAAM6sB,EAAMnE,GAEhC,OADAQ,EAAWlpB,GACPA,GAAQ,EACHgoB,EAAaC,EAAMjoB,QAEf7K,IAAT03B,EAIyB,iBAAbnE,EACVV,EAAaC,EAAMjoB,GAAM6sB,KAAKA,EAAMnE,GACpCV,EAAaC,EAAMjoB,GAAM6sB,KAAKA,GAE7B7E,EAAaC,EAAMjoB,EAC5B,CAOS4sB,CAAM,KAAM5sB,EAAM6sB,EAAMnE,EACjC,EAgBAZ,EAAOM,YAAc,SAAUpoB,GAC7B,OAAOooB,EAAY,KAAMpoB,EAC3B,EAIA8nB,EAAOgF,gBAAkB,SAAU9sB,GACjC,OAAOooB,EAAY,KAAMpoB,EAC3B,EAgHA8nB,EAAOgB,SAAW,SAAmBnnB,GACnC,QAAe,MAALA,IAAaA,EAAEorB,UAC3B,EAEAjF,EAAOkF,QAAU,SAAkBlqC,EAAG6e,GACpC,IAAKmmB,EAAOgB,SAAShmC,KAAOglC,EAAOgB,SAASnnB,GAC1C,MAAM,IAAI+f,UAAU,6BAGtB,GAAI5+B,IAAM6e,EAAG,OAAO,EAKpB,IAHA,IAAIhG,EAAI7Y,EAAE8D,OACNgiB,EAAIjH,EAAE/a,OAED7D,EAAI,EAAG8jC,EAAM/mB,KAAK2J,IAAI9N,EAAGiN,GAAI7lB,EAAI8jC,IAAO9jC,EAC/C,GAAID,EAAEC,KAAO4e,EAAE5e,GAAI,CACjB4Y,EAAI7Y,EAAEC,GACN6lB,EAAIjH,EAAE5e,GACN,KACF,CAGF,OAAI4Y,EAAIiN,GAAW,EACfA,EAAIjN,EAAU,EACX,CACT,EAEAmsB,EAAOa,WAAa,SAAqBD,GACvC,OAAQza,OAAOya,GAAU7lB,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,EAEb,EAEAilB,EAAOpmB,OAAS,SAAiB1L,EAAMpP,GACrC,IAAKyL,EAAQ2D,GACX,MAAM,IAAI0rB,UAAU,+CAGtB,GAAoB,IAAhB1rB,EAAKpP,OACP,OAAOkhC,EAAO8E,MAAM,GAGtB,IAAI7pC,EACJ,QAAeoS,IAAXvO,EAEF,IADAA,EAAS,EACJ7D,EAAI,EAAGA,EAAIiT,EAAKpP,SAAU7D,EAC7B6D,GAAUoP,EAAKjT,GAAG6D,OAItB,IAAIoiC,EAASlB,EAAOM,YAAYxhC,GAC5BqmC,EAAM,EACV,IAAKlqC,EAAI,EAAGA,EAAIiT,EAAKpP,SAAU7D,EAAG,CAChC,IAAI0qB,EAAMzX,EAAKjT,GACf,IAAK+kC,EAAOgB,SAASrb,GACnB,MAAM,IAAIiU,UAAU,+CAEtBjU,EAAIsb,KAAKC,EAAQiE,GACjBA,GAAOxf,EAAI7mB,MACb,CACA,OAAOoiC,CACT,EA6CAlB,EAAO7B,WAAaA,EA0EpB6B,EAAOxoB,UAAUytB,WAAY,EAQ7BjF,EAAOxoB,UAAU4tB,OAAS,WACxB,IAAIrG,EAAM3jC,KAAK0D,OACf,GAAIigC,EAAM,GAAM,EACd,MAAM,IAAIqB,WAAW,6CAEvB,IAAK,IAAInlC,EAAI,EAAGA,EAAI8jC,EAAK9jC,GAAK,EAC5B+mC,EAAK5mC,KAAMH,EAAGA,EAAI,GAEpB,OAAOG,IACT,EAEA4kC,EAAOxoB,UAAU6tB,OAAS,WACxB,IAAItG,EAAM3jC,KAAK0D,OACf,GAAIigC,EAAM,GAAM,EACd,MAAM,IAAIqB,WAAW,6CAEvB,IAAK,IAAInlC,EAAI,EAAGA,EAAI8jC,EAAK9jC,GAAK,EAC5B+mC,EAAK5mC,KAAMH,EAAGA,EAAI,GAClB+mC,EAAK5mC,KAAMH,EAAI,EAAGA,EAAI,GAExB,OAAOG,IACT,EAEA4kC,EAAOxoB,UAAU8tB,OAAS,WACxB,IAAIvG,EAAM3jC,KAAK0D,OACf,GAAIigC,EAAM,GAAM,EACd,MAAM,IAAIqB,WAAW,6CAEvB,IAAK,IAAInlC,EAAI,EAAGA,EAAI8jC,EAAK9jC,GAAK,EAC5B+mC,EAAK5mC,KAAMH,EAAGA,EAAI,GAClB+mC,EAAK5mC,KAAMH,EAAI,EAAGA,EAAI,GACtB+mC,EAAK5mC,KAAMH,EAAI,EAAGA,EAAI,GACtB+mC,EAAK5mC,KAAMH,EAAI,EAAGA,EAAI,GAExB,OAAOG,IACT,EAEA4kC,EAAOxoB,UAAUta,SAAW,WAC1B,IAAI4B,EAAuB,EAAd1D,KAAK0D,OAClB,OAAe,IAAXA,EAAqB,GACA,IAArBD,UAAUC,OAAqB6iC,EAAUvmC,KAAM,EAAG0D,GAC/C2iC,EAAazhC,MAAM5E,KAAMyD,UAClC,EAEAmhC,EAAOxoB,UAAUqL,OAAS,SAAiBhJ,GACzC,IAAKmmB,EAAOgB,SAASnnB,GAAI,MAAM,IAAI+f,UAAU,6BAC7C,OAAIx+B,OAASye,GACsB,IAA5BmmB,EAAOkF,QAAQ9pC,KAAMye,EAC9B,EAEAmmB,EAAOxoB,UAAU+tB,QAAU,WACzB,IAAI3f,EAAM,GACNxE,EAAMxmB,EAAQ,GAKlB,OAJIQ,KAAK0D,OAAS,IAChB8mB,EAAMxqB,KAAK8B,SAAS,MAAO,EAAGkkB,GAAK7G,MAAM,SAAS9W,KAAK,KACnDrI,KAAK0D,OAASsiB,IAAKwE,GAAO,UAEzB,WAAaA,EAAM,GAC5B,EAEAoa,EAAOxoB,UAAU0tB,QAAU,SAAkBlpC,EAAQ0jC,EAAOC,EAAK6F,EAAWC,GAC1E,IAAKzF,EAAOgB,SAAShlC,GACnB,MAAM,IAAI49B,UAAU,6BAgBtB,QAbcvsB,IAAVqyB,IACFA,EAAQ,QAEEryB,IAARsyB,IACFA,EAAM3jC,EAASA,EAAO8C,OAAS,QAEfuO,IAAdm4B,IACFA,EAAY,QAEEn4B,IAAZo4B,IACFA,EAAUrqC,KAAK0D,QAGb4gC,EAAQ,GAAKC,EAAM3jC,EAAO8C,QAAU0mC,EAAY,GAAKC,EAAUrqC,KAAK0D,OACtE,MAAM,IAAIshC,WAAW,sBAGvB,GAAIoF,GAAaC,GAAW/F,GAASC,EACnC,OAAO,EAET,GAAI6F,GAAaC,EACf,OAAQ,EAEV,GAAI/F,GAASC,EACX,OAAO,EAQT,GAAIvkC,OAASY,EAAQ,OAAO,EAS5B,IAPA,IAAI6X,GAJJ4xB,KAAa,IADbD,KAAe,GAMX1kB,GAPJ6e,KAAS,IADTD,KAAW,GASPX,EAAM/mB,KAAK2J,IAAI9N,EAAGiN,GAElB4kB,EAAWtqC,KAAKme,MAAMisB,EAAWC,GACjCE,EAAa3pC,EAAOud,MAAMmmB,EAAOC,GAE5B1kC,EAAI,EAAGA,EAAI8jC,IAAO9jC,EACzB,GAAIyqC,EAASzqC,KAAO0qC,EAAW1qC,GAAI,CACjC4Y,EAAI6xB,EAASzqC,GACb6lB,EAAI6kB,EAAW1qC,GACf,KACF,CAGF,OAAI4Y,EAAIiN,GAAW,EACfA,EAAIjN,EAAU,EACX,CACT,EA4HAmsB,EAAOxoB,UAAUlV,SAAW,SAAmBb,EAAKg/B,EAAYG,GAC9D,OAAoD,IAA7CxlC,KAAKs0B,QAAQjuB,EAAKg/B,EAAYG,EACvC,EAEAZ,EAAOxoB,UAAUkY,QAAU,SAAkBjuB,EAAKg/B,EAAYG,GAC5D,OAAOqB,EAAqB7mC,KAAMqG,EAAKg/B,EAAYG,GAAU,EAC/D,EAEAZ,EAAOxoB,UAAU4qB,YAAc,SAAsB3gC,EAAKg/B,EAAYG,GACpE,OAAOqB,EAAqB7mC,KAAMqG,EAAKg/B,EAAYG,GAAU,EAC/D,EAiDAZ,EAAOxoB,UAAUupB,MAAQ,SAAgB/kB,EAAQ6mB,EAAQ/jC,EAAQ8hC,GAE/D,QAAevzB,IAAXw1B,EACFjC,EAAW,OACX9hC,EAAS1D,KAAK0D,OACd+jC,EAAS,OAEJ,QAAex1B,IAAXvO,GAA0C,iBAAX+jC,EACxCjC,EAAWiC,EACX/jC,EAAS1D,KAAK0D,OACd+jC,EAAS,MAEJ,KAAI+C,SAAS/C,GAWlB,MAAM,IAAI/kC,MACR,2EAXF+kC,GAAkB,EACd+C,SAAS9mC,IACXA,GAAkB,OACDuO,IAAbuzB,IAAwBA,EAAW,UAEvCA,EAAW9hC,EACXA,OAASuO,EAOb,CAEA,IAAIy1B,EAAY1nC,KAAK0D,OAAS+jC,EAG9B,SAFex1B,IAAXvO,GAAwBA,EAASgkC,KAAWhkC,EAASgkC,GAEpD9mB,EAAOld,OAAS,IAAMA,EAAS,GAAK+jC,EAAS,IAAOA,EAASznC,KAAK0D,OACrE,MAAM,IAAIshC,WAAW,0CAGlBQ,IAAUA,EAAW,QAG1B,IADA,IAAIU,GAAc,IAEhB,OAAQV,GACN,IAAK,MACH,OAAOgC,EAASxnC,KAAM4gB,EAAQ6mB,EAAQ/jC,GAExC,IAAK,OACL,IAAK,QACH,OAAOmkC,EAAU7nC,KAAM4gB,EAAQ6mB,EAAQ/jC,GAEzC,IAAK,QACH,OAAOqkC,EAAW/nC,KAAM4gB,EAAQ6mB,EAAQ/jC,GAE1C,IAAK,SACL,IAAK,SACH,OAAOwkC,EAAYloC,KAAM4gB,EAAQ6mB,EAAQ/jC,GAE3C,IAAK,SAEH,OAAOykC,EAAYnoC,KAAM4gB,EAAQ6mB,EAAQ/jC,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO0kC,EAAUpoC,KAAM4gB,EAAQ6mB,EAAQ/jC,GAEzC,QACE,GAAIwiC,EAAa,MAAM,IAAI1H,UAAU,qBAAuBgH,GAC5DA,GAAY,GAAKA,GAAU7lB,cAC3BumB,GAAc,EAGtB,EAEAtB,EAAOxoB,UAAU2T,OAAS,WACxB,MAAO,CACL5d,KAAM,SACN5I,KAAM2F,MAAMkN,UAAU+B,MAAMuP,KAAK1tB,KAAKyqC,MAAQzqC,KAAM,GAExD,EAsFA,IAAIipC,EAAuB,KAoB3B,SAASzC,EAAYjc,EAAK+Z,EAAOC,GAC/B,IAAImG,EAAM,GACVnG,EAAM3nB,KAAK2J,IAAIgE,EAAI7mB,OAAQ6gC,GAE3B,IAAK,IAAI1kC,EAAIykC,EAAOzkC,EAAI0kC,IAAO1kC,EAC7B6qC,GAAO3f,OAAOC,aAAsB,IAATT,EAAI1qB,IAEjC,OAAO6qC,CACT,CAEA,SAASjE,EAAalc,EAAK+Z,EAAOC,GAChC,IAAImG,EAAM,GACVnG,EAAM3nB,KAAK2J,IAAIgE,EAAI7mB,OAAQ6gC,GAE3B,IAAK,IAAI1kC,EAAIykC,EAAOzkC,EAAI0kC,IAAO1kC,EAC7B6qC,GAAO3f,OAAOC,aAAaT,EAAI1qB,IAEjC,OAAO6qC,CACT,CAEA,SAASpE,EAAU/b,EAAK+Z,EAAOC,GAC7B,IAqnBclhB,EArnBVsgB,EAAMpZ,EAAI7mB,SAET4gC,GAASA,EAAQ,KAAGA,EAAQ,KAC5BC,GAAOA,EAAM,GAAKA,EAAMZ,KAAKY,EAAMZ,GAGxC,IADA,IAAIgH,EAAM,GACD9qC,EAAIykC,EAAOzkC,EAAI0kC,IAAO1kC,EAC7B8qC,IA8mBYtnB,EA9mBCkH,EAAI1qB,IA+mBX,GAAW,IAAMwjB,EAAEvhB,SAAS,IAC7BuhB,EAAEvhB,SAAS,IA9mBlB,OAAO6oC,CACT,CAEA,SAAShE,EAAcpc,EAAK+Z,EAAOC,GAGjC,IAFA,IAAIqG,EAAQrgB,EAAIpM,MAAMmmB,EAAOC,GACzBzhC,EAAM,GACDjD,EAAI,EAAGA,EAAI+qC,EAAMlnC,OAAQ7D,GAAK,EACrCiD,GAAOioB,OAAOC,aAAa4f,EAAM/qC,GAAoB,IAAf+qC,EAAM/qC,EAAI,IAElD,OAAOiD,CACT,CAyCA,SAAS+nC,EAAapD,EAAQqD,EAAKpnC,GACjC,GAAK+jC,EAAS,GAAO,GAAKA,EAAS,EAAG,MAAM,IAAIzC,WAAW,sBAC3D,GAAIyC,EAASqD,EAAMpnC,EAAQ,MAAM,IAAIshC,WAAW,wCAClD,CA8JA,SAAS+F,EAAUxgB,EAAKlqB,EAAOonC,EAAQqD,EAAK9kB,EAAKO,GAC/C,IAAKqe,EAAOgB,SAASrb,GAAM,MAAM,IAAIiU,UAAU,+CAC/C,GAAIn+B,EAAQ2lB,GAAO3lB,EAAQkmB,EAAK,MAAM,IAAIye,WAAW,qCACrD,GAAIyC,EAASqD,EAAMvgB,EAAI7mB,OAAQ,MAAM,IAAIshC,WAAW,qBACtD,CAiDA,SAASgG,EAAmBzgB,EAAKlqB,EAAOonC,EAAQwD,GAC1C5qC,EAAQ,IAAGA,EAAQ,MAASA,EAAQ,GACxC,IAAK,IAAIR,EAAI,EAAG0d,EAAIX,KAAK2J,IAAIgE,EAAI7mB,OAAS+jC,EAAQ,GAAI5nC,EAAI0d,IAAK1d,EAC7D0qB,EAAIkd,EAAS5nC,IAAMQ,EAAS,KAAS,GAAK4qC,EAAeprC,EAAI,EAAIA,MAClC,GAA5BorC,EAAeprC,EAAI,EAAIA,EAE9B,CA4BA,SAASqrC,EAAmB3gB,EAAKlqB,EAAOonC,EAAQwD,GAC1C5qC,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5C,IAAK,IAAIR,EAAI,EAAG0d,EAAIX,KAAK2J,IAAIgE,EAAI7mB,OAAS+jC,EAAQ,GAAI5nC,EAAI0d,IAAK1d,EAC7D0qB,EAAIkd,EAAS5nC,GAAMQ,IAAuC,GAA5B4qC,EAAeprC,EAAI,EAAIA,GAAU,GAEnE,CAiJA,SAASsrC,EAAc5gB,EAAKlqB,EAAOonC,EAAQqD,EAAK9kB,EAAKO,GACnD,GAAIkhB,EAASqD,EAAMvgB,EAAI7mB,OAAQ,MAAM,IAAIshC,WAAW,sBACpD,GAAIyC,EAAS,EAAG,MAAM,IAAIzC,WAAW,qBACvC,CAEA,SAASoG,EAAY7gB,EAAKlqB,EAAOonC,EAAQwD,EAAcI,GAKrD,OAJKA,GACHF,EAAa5gB,EAAKlqB,EAAOonC,EAAQ,GAEnC/C,EAAQiB,MAAMpb,EAAKlqB,EAAOonC,EAAQwD,EAAc,GAAI,GAC7CxD,EAAS,CAClB,CAUA,SAAS6D,EAAa/gB,EAAKlqB,EAAOonC,EAAQwD,EAAcI,GAKtD,OAJKA,GACHF,EAAa5gB,EAAKlqB,EAAOonC,EAAQ,GAEnC/C,EAAQiB,MAAMpb,EAAKlqB,EAAOonC,EAAQwD,EAAc,GAAI,GAC7CxD,EAAS,CAClB,CAhdA7C,EAAOxoB,UAAU+B,MAAQ,SAAgBmmB,EAAOC,GAC9C,IAoBIgH,EApBA5H,EAAM3jC,KAAK0D,OAqBf,IApBA4gC,IAAUA,GAGE,GACVA,GAASX,GACG,IAAGW,EAAQ,GACdA,EAAQX,IACjBW,EAAQX,IANVY,OAActyB,IAARsyB,EAAoBZ,IAAQY,GASxB,GACRA,GAAOZ,GACG,IAAGY,EAAM,GACVA,EAAMZ,IACfY,EAAMZ,GAGJY,EAAMD,IAAOC,EAAMD,GAGnBM,EAAOC,qBACT0G,EAASvrC,KAAKopC,SAAS9E,EAAOC,IACvBpX,UAAYyX,EAAOxoB,cACrB,CACL,IAAIovB,EAAWjH,EAAMD,EACrBiH,EAAS,IAAI3G,EAAO4G,OAAUv5B,GAC9B,IAAK,IAAIpS,EAAI,EAAGA,EAAI2rC,IAAY3rC,EAC9B0rC,EAAO1rC,GAAKG,KAAKH,EAAIykC,EAEzB,CAEA,OAAOiH,CACT,EAUA3G,EAAOxoB,UAAUqvB,WAAa,SAAqBhE,EAAQ1E,EAAYsI,GACrE5D,GAAkB,EAClB1E,GAA0B,EACrBsI,GAAUR,EAAYpD,EAAQ1E,EAAY/iC,KAAK0D,QAKpD,IAHA,IAAI2C,EAAMrG,KAAKynC,GACXiE,EAAM,EACN7rC,EAAI,IACCA,EAAIkjC,IAAe2I,GAAO,MACjCrlC,GAAOrG,KAAKynC,EAAS5nC,GAAK6rC,EAG5B,OAAOrlC,CACT,EAEAu+B,EAAOxoB,UAAUuvB,WAAa,SAAqBlE,EAAQ1E,EAAYsI,GACrE5D,GAAkB,EAClB1E,GAA0B,EACrBsI,GACHR,EAAYpD,EAAQ1E,EAAY/iC,KAAK0D,QAKvC,IAFA,IAAI2C,EAAMrG,KAAKynC,IAAW1E,GACtB2I,EAAM,EACH3I,EAAa,IAAM2I,GAAO,MAC/BrlC,GAAOrG,KAAKynC,IAAW1E,GAAc2I,EAGvC,OAAOrlC,CACT,EAEAu+B,EAAOxoB,UAAUwvB,UAAY,SAAoBnE,EAAQ4D,GAEvD,OADKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QACpC1D,KAAKynC,EACd,EAEA7C,EAAOxoB,UAAUyvB,aAAe,SAAuBpE,EAAQ4D,GAE7D,OADKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QACpC1D,KAAKynC,GAAWznC,KAAKynC,EAAS,IAAM,CAC7C,EAEA7C,EAAOxoB,UAAUirB,aAAe,SAAuBI,EAAQ4D,GAE7D,OADKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QACnC1D,KAAKynC,IAAW,EAAKznC,KAAKynC,EAAS,EAC7C,EAEA7C,EAAOxoB,UAAU0vB,aAAe,SAAuBrE,EAAQ4D,GAG7D,OAFKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,SAElC1D,KAAKynC,GACTznC,KAAKynC,EAAS,IAAM,EACpBznC,KAAKynC,EAAS,IAAM,IACD,SAAnBznC,KAAKynC,EAAS,EACrB,EAEA7C,EAAOxoB,UAAU2vB,aAAe,SAAuBtE,EAAQ4D,GAG7D,OAFKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QAEpB,SAAf1D,KAAKynC,IACTznC,KAAKynC,EAAS,IAAM,GACrBznC,KAAKynC,EAAS,IAAM,EACrBznC,KAAKynC,EAAS,GAClB,EAEA7C,EAAOxoB,UAAU4vB,UAAY,SAAoBvE,EAAQ1E,EAAYsI,GACnE5D,GAAkB,EAClB1E,GAA0B,EACrBsI,GAAUR,EAAYpD,EAAQ1E,EAAY/iC,KAAK0D,QAKpD,IAHA,IAAI2C,EAAMrG,KAAKynC,GACXiE,EAAM,EACN7rC,EAAI,IACCA,EAAIkjC,IAAe2I,GAAO,MACjCrlC,GAAOrG,KAAKynC,EAAS5nC,GAAK6rC,EAM5B,OAFIrlC,IAFJqlC,GAAO,OAESrlC,GAAOuW,KAAKa,IAAI,EAAG,EAAIslB,IAEhC18B,CACT,EAEAu+B,EAAOxoB,UAAU6vB,UAAY,SAAoBxE,EAAQ1E,EAAYsI,GACnE5D,GAAkB,EAClB1E,GAA0B,EACrBsI,GAAUR,EAAYpD,EAAQ1E,EAAY/iC,KAAK0D,QAKpD,IAHA,IAAI7D,EAAIkjC,EACJ2I,EAAM,EACNrlC,EAAMrG,KAAKynC,IAAW5nC,GACnBA,EAAI,IAAM6rC,GAAO,MACtBrlC,GAAOrG,KAAKynC,IAAW5nC,GAAK6rC,EAM9B,OAFIrlC,IAFJqlC,GAAO,OAESrlC,GAAOuW,KAAKa,IAAI,EAAG,EAAIslB,IAEhC18B,CACT,EAEAu+B,EAAOxoB,UAAU8vB,SAAW,SAAmBzE,EAAQ4D,GAErD,OADKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QACtB,IAAf1D,KAAKynC,IAC0B,GAA5B,IAAOznC,KAAKynC,GAAU,GADKznC,KAAKynC,EAE3C,EAEA7C,EAAOxoB,UAAU+vB,YAAc,SAAsB1E,EAAQ4D,GACtDA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QAC3C,IAAI2C,EAAMrG,KAAKynC,GAAWznC,KAAKynC,EAAS,IAAM,EAC9C,OAAc,MAANphC,EAAsB,WAANA,EAAmBA,CAC7C,EAEAu+B,EAAOxoB,UAAUgwB,YAAc,SAAsB3E,EAAQ4D,GACtDA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QAC3C,IAAI2C,EAAMrG,KAAKynC,EAAS,GAAMznC,KAAKynC,IAAW,EAC9C,OAAc,MAANphC,EAAsB,WAANA,EAAmBA,CAC7C,EAEAu+B,EAAOxoB,UAAUiG,YAAc,SAAsBolB,EAAQ4D,GAG3D,OAFKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QAEnC1D,KAAKynC,GACVznC,KAAKynC,EAAS,IAAM,EACpBznC,KAAKynC,EAAS,IAAM,GACpBznC,KAAKynC,EAAS,IAAM,EACzB,EAEA7C,EAAOxoB,UAAUiwB,YAAc,SAAsB5E,EAAQ4D,GAG3D,OAFKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QAEnC1D,KAAKynC,IAAW,GACrBznC,KAAKynC,EAAS,IAAM,GACpBznC,KAAKynC,EAAS,IAAM,EACpBznC,KAAKynC,EAAS,EACnB,EAEA7C,EAAOxoB,UAAUkwB,YAAc,SAAsB7E,EAAQ4D,GAE3D,OADKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QACpCghC,EAAQ0C,KAAKpnC,KAAMynC,GAAQ,EAAM,GAAI,EAC9C,EAEA7C,EAAOxoB,UAAUmwB,YAAc,SAAsB9E,EAAQ4D,GAE3D,OADKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QACpCghC,EAAQ0C,KAAKpnC,KAAMynC,GAAQ,EAAO,GAAI,EAC/C,EAEA7C,EAAOxoB,UAAUowB,aAAe,SAAuB/E,EAAQ4D,GAE7D,OADKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QACpCghC,EAAQ0C,KAAKpnC,KAAMynC,GAAQ,EAAM,GAAI,EAC9C,EAEA7C,EAAOxoB,UAAUqwB,aAAe,SAAuBhF,EAAQ4D,GAE7D,OADKA,GAAUR,EAAYpD,EAAQ,EAAGznC,KAAK0D,QACpCghC,EAAQ0C,KAAKpnC,KAAMynC,GAAQ,EAAO,GAAI,EAC/C,EAQA7C,EAAOxoB,UAAUswB,YAAc,SAAsBrsC,EAAOonC,EAAQ1E,EAAYsI,GAC9EhrC,GAASA,EACTonC,GAAkB,EAClB1E,GAA0B,EACrBsI,GAEHN,EAAS/qC,KAAMK,EAAOonC,EAAQ1E,EADfnmB,KAAKa,IAAI,EAAG,EAAIslB,GAAc,EACO,GAGtD,IAAI2I,EAAM,EACN7rC,EAAI,EAER,IADAG,KAAKynC,GAAkB,IAARpnC,IACNR,EAAIkjC,IAAe2I,GAAO,MACjC1rC,KAAKynC,EAAS5nC,GAAMQ,EAAQqrC,EAAO,IAGrC,OAAOjE,EAAS1E,CAClB,EAEA6B,EAAOxoB,UAAUuwB,YAAc,SAAsBtsC,EAAOonC,EAAQ1E,EAAYsI,GAC9EhrC,GAASA,EACTonC,GAAkB,EAClB1E,GAA0B,EACrBsI,GAEHN,EAAS/qC,KAAMK,EAAOonC,EAAQ1E,EADfnmB,KAAKa,IAAI,EAAG,EAAIslB,GAAc,EACO,GAGtD,IAAIljC,EAAIkjC,EAAa,EACjB2I,EAAM,EAEV,IADA1rC,KAAKynC,EAAS5nC,GAAa,IAARQ,IACVR,GAAK,IAAM6rC,GAAO,MACzB1rC,KAAKynC,EAAS5nC,GAAMQ,EAAQqrC,EAAO,IAGrC,OAAOjE,EAAS1E,CAClB,EAEA6B,EAAOxoB,UAAUwwB,WAAa,SAAqBvsC,EAAOonC,EAAQ4D,GAMhE,OALAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,IAAM,GACjD7C,EAAOC,sBAAqBxkC,EAAQuc,KAAK6G,MAAMpjB,IACpDL,KAAKynC,GAAmB,IAARpnC,EACTonC,EAAS,CAClB,EAUA7C,EAAOxoB,UAAUywB,cAAgB,SAAwBxsC,EAAOonC,EAAQ4D,GAUtE,OATAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,MAAQ,GACpD7C,EAAOC,qBACT7kC,KAAKynC,GAAmB,IAARpnC,EAChBL,KAAKynC,EAAS,GAAMpnC,IAAU,GAE9B2qC,EAAkBhrC,KAAMK,EAAOonC,GAAQ,GAElCA,EAAS,CAClB,EAEA7C,EAAOxoB,UAAU0wB,cAAgB,SAAwBzsC,EAAOonC,EAAQ4D,GAUtE,OATAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,MAAQ,GACpD7C,EAAOC,qBACT7kC,KAAKynC,GAAWpnC,IAAU,EAC1BL,KAAKynC,EAAS,GAAc,IAARpnC,GAEpB2qC,EAAkBhrC,KAAMK,EAAOonC,GAAQ,GAElCA,EAAS,CAClB,EASA7C,EAAOxoB,UAAU2wB,cAAgB,SAAwB1sC,EAAOonC,EAAQ4D,GAYtE,OAXAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,WAAY,GACxD7C,EAAOC,qBACT7kC,KAAKynC,EAAS,GAAMpnC,IAAU,GAC9BL,KAAKynC,EAAS,GAAMpnC,IAAU,GAC9BL,KAAKynC,EAAS,GAAMpnC,IAAU,EAC9BL,KAAKynC,GAAmB,IAARpnC,GAEhB6qC,EAAkBlrC,KAAMK,EAAOonC,GAAQ,GAElCA,EAAS,CAClB,EAEA7C,EAAOxoB,UAAU4wB,cAAgB,SAAwB3sC,EAAOonC,EAAQ4D,GAYtE,OAXAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,WAAY,GACxD7C,EAAOC,qBACT7kC,KAAKynC,GAAWpnC,IAAU,GAC1BL,KAAKynC,EAAS,GAAMpnC,IAAU,GAC9BL,KAAKynC,EAAS,GAAMpnC,IAAU,EAC9BL,KAAKynC,EAAS,GAAc,IAARpnC,GAEpB6qC,EAAkBlrC,KAAMK,EAAOonC,GAAQ,GAElCA,EAAS,CAClB,EAEA7C,EAAOxoB,UAAU6wB,WAAa,SAAqB5sC,EAAOonC,EAAQ1E,EAAYsI,GAG5E,GAFAhrC,GAASA,EACTonC,GAAkB,GACb4D,EAAU,CACb,IAAIj6B,EAAQwL,KAAKa,IAAI,EAAG,EAAIslB,EAAa,GAEzCgI,EAAS/qC,KAAMK,EAAOonC,EAAQ1E,EAAY3xB,EAAQ,GAAIA,EACxD,CAEA,IAAIvR,EAAI,EACJ6rC,EAAM,EACN1/B,EAAM,EAEV,IADAhM,KAAKynC,GAAkB,IAARpnC,IACNR,EAAIkjC,IAAe2I,GAAO,MAC7BrrC,EAAQ,GAAa,IAAR2L,GAAsC,IAAzBhM,KAAKynC,EAAS5nC,EAAI,KAC9CmM,EAAM,GAERhM,KAAKynC,EAAS5nC,IAAOQ,EAAQqrC,GAAQ,GAAK1/B,EAAM,IAGlD,OAAOy7B,EAAS1E,CAClB,EAEA6B,EAAOxoB,UAAU8wB,WAAa,SAAqB7sC,EAAOonC,EAAQ1E,EAAYsI,GAG5E,GAFAhrC,GAASA,EACTonC,GAAkB,GACb4D,EAAU,CACb,IAAIj6B,EAAQwL,KAAKa,IAAI,EAAG,EAAIslB,EAAa,GAEzCgI,EAAS/qC,KAAMK,EAAOonC,EAAQ1E,EAAY3xB,EAAQ,GAAIA,EACxD,CAEA,IAAIvR,EAAIkjC,EAAa,EACjB2I,EAAM,EACN1/B,EAAM,EAEV,IADAhM,KAAKynC,EAAS5nC,GAAa,IAARQ,IACVR,GAAK,IAAM6rC,GAAO,MACrBrrC,EAAQ,GAAa,IAAR2L,GAAsC,IAAzBhM,KAAKynC,EAAS5nC,EAAI,KAC9CmM,EAAM,GAERhM,KAAKynC,EAAS5nC,IAAOQ,EAAQqrC,GAAQ,GAAK1/B,EAAM,IAGlD,OAAOy7B,EAAS1E,CAClB,EAEA6B,EAAOxoB,UAAU+wB,UAAY,SAAoB9sC,EAAOonC,EAAQ4D,GAO9D,OANAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,KAAO,KAClD7C,EAAOC,sBAAqBxkC,EAAQuc,KAAK6G,MAAMpjB,IAChDA,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCL,KAAKynC,GAAmB,IAARpnC,EACTonC,EAAS,CAClB,EAEA7C,EAAOxoB,UAAUgxB,aAAe,SAAuB/sC,EAAOonC,EAAQ4D,GAUpE,OATAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,OAAS,OACrD7C,EAAOC,qBACT7kC,KAAKynC,GAAmB,IAARpnC,EAChBL,KAAKynC,EAAS,GAAMpnC,IAAU,GAE9B2qC,EAAkBhrC,KAAMK,EAAOonC,GAAQ,GAElCA,EAAS,CAClB,EAEA7C,EAAOxoB,UAAUixB,aAAe,SAAuBhtC,EAAOonC,EAAQ4D,GAUpE,OATAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,OAAS,OACrD7C,EAAOC,qBACT7kC,KAAKynC,GAAWpnC,IAAU,EAC1BL,KAAKynC,EAAS,GAAc,IAARpnC,GAEpB2qC,EAAkBhrC,KAAMK,EAAOonC,GAAQ,GAElCA,EAAS,CAClB,EAEA7C,EAAOxoB,UAAUkxB,aAAe,SAAuBjtC,EAAOonC,EAAQ4D,GAYpE,OAXAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,YAAa,YACzD7C,EAAOC,qBACT7kC,KAAKynC,GAAmB,IAARpnC,EAChBL,KAAKynC,EAAS,GAAMpnC,IAAU,EAC9BL,KAAKynC,EAAS,GAAMpnC,IAAU,GAC9BL,KAAKynC,EAAS,GAAMpnC,IAAU,IAE9B6qC,EAAkBlrC,KAAMK,EAAOonC,GAAQ,GAElCA,EAAS,CAClB,EAEA7C,EAAOxoB,UAAUmxB,aAAe,SAAuBltC,EAAOonC,EAAQ4D,GAapE,OAZAhrC,GAASA,EACTonC,GAAkB,EACb4D,GAAUN,EAAS/qC,KAAMK,EAAOonC,EAAQ,EAAG,YAAa,YACzDpnC,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GACxCukC,EAAOC,qBACT7kC,KAAKynC,GAAWpnC,IAAU,GAC1BL,KAAKynC,EAAS,GAAMpnC,IAAU,GAC9BL,KAAKynC,EAAS,GAAMpnC,IAAU,EAC9BL,KAAKynC,EAAS,GAAc,IAARpnC,GAEpB6qC,EAAkBlrC,KAAMK,EAAOonC,GAAQ,GAElCA,EAAS,CAClB,EAeA7C,EAAOxoB,UAAUoxB,aAAe,SAAuBntC,EAAOonC,EAAQ4D,GACpE,OAAOD,EAAWprC,KAAMK,EAAOonC,GAAQ,EAAM4D,EAC/C,EAEAzG,EAAOxoB,UAAUqxB,aAAe,SAAuBptC,EAAOonC,EAAQ4D,GACpE,OAAOD,EAAWprC,KAAMK,EAAOonC,GAAQ,EAAO4D,EAChD,EAUAzG,EAAOxoB,UAAUsxB,cAAgB,SAAwBrtC,EAAOonC,EAAQ4D,GACtE,OAAOC,EAAYtrC,KAAMK,EAAOonC,GAAQ,EAAM4D,EAChD,EAEAzG,EAAOxoB,UAAUuxB,cAAgB,SAAwBttC,EAAOonC,EAAQ4D,GACtE,OAAOC,EAAYtrC,KAAMK,EAAOonC,GAAQ,EAAO4D,EACjD,EAGAzG,EAAOxoB,UAAUypB,KAAO,SAAejlC,EAAQgtC,EAAatJ,EAAOC,GAQjE,GAPKD,IAAOA,EAAQ,GACfC,GAAe,IAARA,IAAWA,EAAMvkC,KAAK0D,QAC9BkqC,GAAehtC,EAAO8C,SAAQkqC,EAAchtC,EAAO8C,QAClDkqC,IAAaA,EAAc,GAC5BrJ,EAAM,GAAKA,EAAMD,IAAOC,EAAMD,GAG9BC,IAAQD,EAAO,OAAO,EAC1B,GAAsB,IAAlB1jC,EAAO8C,QAAgC,IAAhB1D,KAAK0D,OAAc,OAAO,EAGrD,GAAIkqC,EAAc,EAChB,MAAM,IAAI5I,WAAW,6BAEvB,GAAIV,EAAQ,GAAKA,GAAStkC,KAAK0D,OAAQ,MAAM,IAAIshC,WAAW,6BAC5D,GAAIT,EAAM,EAAG,MAAM,IAAIS,WAAW,2BAG9BT,EAAMvkC,KAAK0D,SAAQ6gC,EAAMvkC,KAAK0D,QAC9B9C,EAAO8C,OAASkqC,EAAcrJ,EAAMD,IACtCC,EAAM3jC,EAAO8C,OAASkqC,EAActJ,GAGtC,IACIzkC,EADA8jC,EAAMY,EAAMD,EAGhB,GAAItkC,OAASY,GAAU0jC,EAAQsJ,GAAeA,EAAcrJ,EAE1D,IAAK1kC,EAAI8jC,EAAM,EAAG9jC,GAAK,IAAKA,EAC1Be,EAAOf,EAAI+tC,GAAe5tC,KAAKH,EAAIykC,QAEhC,GAAIX,EAAM,MAASiB,EAAOC,oBAE/B,IAAKhlC,EAAI,EAAGA,EAAI8jC,IAAO9jC,EACrBe,EAAOf,EAAI+tC,GAAe5tC,KAAKH,EAAIykC,QAGrCD,WAAWjoB,UAAU/Z,IAAIqrB,KACvB9sB,EACAZ,KAAKopC,SAAS9E,EAAOA,EAAQX,GAC7BiK,GAIJ,OAAOjK,CACT,EAMAiB,EAAOxoB,UAAUutB,KAAO,SAAetjC,EAAKi+B,EAAOC,EAAKiB,GAEtD,GAAmB,iBAARn/B,EAAkB,CAS3B,GARqB,iBAAVi+B,GACTkB,EAAWlB,EACXA,EAAQ,EACRC,EAAMvkC,KAAK0D,QACa,iBAAR6gC,IAChBiB,EAAWjB,EACXA,EAAMvkC,KAAK0D,QAEM,IAAf2C,EAAI3C,OAAc,CACpB,IAAIrC,EAAOgF,EAAI4X,WAAW,GACtB5c,EAAO,MACTgF,EAAMhF,EAEV,CACA,QAAiB4Q,IAAbuzB,GAA8C,iBAAbA,EACnC,MAAM,IAAIhH,UAAU,6BAEtB,GAAwB,iBAAbgH,IAA0BZ,EAAOa,WAAWD,GACrD,MAAM,IAAIhH,UAAU,qBAAuBgH,EAE/C,KAA0B,iBAARn/B,IAChBA,GAAY,KAId,GAAIi+B,EAAQ,GAAKtkC,KAAK0D,OAAS4gC,GAAStkC,KAAK0D,OAAS6gC,EACpD,MAAM,IAAIS,WAAW,sBAGvB,GAAIT,GAAOD,EACT,OAAOtkC,KAQT,IAAIH,EACJ,GANAykC,KAAkB,EAClBC,OAActyB,IAARsyB,EAAoBvkC,KAAK0D,OAAS6gC,IAAQ,EAE3Cl+B,IAAKA,EAAM,GAGG,iBAARA,EACT,IAAKxG,EAAIykC,EAAOzkC,EAAI0kC,IAAO1kC,EACzBG,KAAKH,GAAKwG,MAEP,CACL,IAAIukC,EAAQhG,EAAOgB,SAASv/B,GACxBA,EACA8/B,EAAY,IAAIvB,EAAOv+B,EAAKm/B,GAAU1jC,YACtC6hC,EAAMiH,EAAMlnC,OAChB,IAAK7D,EAAI,EAAGA,EAAI0kC,EAAMD,IAASzkC,EAC7BG,KAAKH,EAAIykC,GAASsG,EAAM/qC,EAAI8jC,EAEhC,CAEA,OAAO3jC,IACT,EAKA,IAAI6tC,EAAoB,qBAwBxB,SAAS1H,EAAavlB,EAAQynB,GAE5B,IAAIS,EADJT,EAAQA,GAASyF,IAMjB,IAJA,IAAIpqC,EAASkd,EAAOld,OAChBqqC,EAAgB,KAChBnD,EAAQ,GAEH/qC,EAAI,EAAGA,EAAI6D,IAAU7D,EAAG,CAI/B,IAHAipC,EAAYloB,EAAO3C,WAAWpe,IAGd,OAAUipC,EAAY,MAAQ,CAE5C,IAAKiF,EAAe,CAElB,GAAIjF,EAAY,MAAQ,EAEjBT,GAAS,IAAM,GAAGuC,EAAMzjC,KAAK,IAAM,IAAM,KAC9C,QACF,CAAO,GAAItH,EAAI,IAAM6D,EAAQ,EAEtB2kC,GAAS,IAAM,GAAGuC,EAAMzjC,KAAK,IAAM,IAAM,KAC9C,QACF,CAGA4mC,EAAgBjF,EAEhB,QACF,CAGA,GAAIA,EAAY,MAAQ,EACjBT,GAAS,IAAM,GAAGuC,EAAMzjC,KAAK,IAAM,IAAM,KAC9C4mC,EAAgBjF,EAChB,QACF,CAGAA,EAAkE,OAArDiF,EAAgB,OAAU,GAAKjF,EAAY,MAC1D,MAAWiF,IAEJ1F,GAAS,IAAM,GAAGuC,EAAMzjC,KAAK,IAAM,IAAM,KAMhD,GAHA4mC,EAAgB,KAGZjF,EAAY,IAAM,CACpB,IAAKT,GAAS,GAAK,EAAG,MACtBuC,EAAMzjC,KAAK2hC,EACb,MAAO,GAAIA,EAAY,KAAO,CAC5B,IAAKT,GAAS,GAAK,EAAG,MACtBuC,EAAMzjC,KACJ2hC,GAAa,EAAM,IACP,GAAZA,EAAmB,IAEvB,MAAO,GAAIA,EAAY,MAAS,CAC9B,IAAKT,GAAS,GAAK,EAAG,MACtBuC,EAAMzjC,KACJ2hC,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAEvB,KAAO,MAAIA,EAAY,SASrB,MAAM,IAAIpmC,MAAM,sBARhB,IAAK2lC,GAAS,GAAK,EAAG,MACtBuC,EAAMzjC,KACJ2hC,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAIvB,CACF,CAEA,OAAO8B,CACT,CA2BA,SAASxE,EAAe5b,GACtB,OAAOia,EAAOpB,YAhIhB,SAAsB7Y,GAIpB,IAFAA,EAUF,SAAqBA,GACnB,OAAIA,EAAI9K,KAAa8K,EAAI9K,OAClB8K,EAAI9e,QAAQ,aAAc,GACnC,CAbQsiC,CAAWxjB,GAAK9e,QAAQmiC,EAAmB,KAEzCnqC,OAAS,EAAG,MAAO,GAE3B,KAAO8mB,EAAI9mB,OAAS,GAAM,GACxB8mB,GAAY,IAEd,OAAOA,CACT,CAsH4ByjB,CAAYzjB,GACxC,CAEA,SAASsd,EAAYoG,EAAKC,EAAK1G,EAAQ/jC,GACrC,IAAK,IAAI7D,EAAI,EAAGA,EAAI6D,KACb7D,EAAI4nC,GAAU0G,EAAIzqC,QAAY7D,GAAKquC,EAAIxqC,UADhB7D,EAE5BsuC,EAAItuC,EAAI4nC,GAAUyG,EAAIruC,GAExB,OAAOA,CACT,uBCxvDE,IAoBGuuC,EAjBH3uC,EAAOD,SAiBJ4uC,EAAWA,GAAa,SAAUxxB,EAAM3K,GAExC,IAAI6P,EA4BJ,GAzBsB,oBAAX/f,QAA0BA,OAAO+f,SACxCA,EAAS/f,OAAO+f,QAIA,oBAAThiB,MAAwBA,KAAKgiB,SACpCA,EAAShiB,KAAKgiB,QAIQ,oBAAfusB,YAA8BA,WAAWvsB,SAChDA,EAASusB,WAAWvsB,SAInBA,GAA4B,oBAAX/f,QAA0BA,OAAOggB,WACnDD,EAAS/f,OAAOggB,WAIfD,QAA4B,IAAX,EAAAE,GAA0B,EAAAA,EAAOF,SACnDA,EAAS,EAAAE,EAAOF,SAIfA,EACD,IACIA,EAAS,EAAQ,IACN,CAAb,MAAOtf,GAAM,CAQnB,IAAIyf,EAAwB,WACxB,GAAIH,EAAQ,CAER,GAAsC,mBAA3BA,EAAOI,gBACd,IACI,OAAOJ,EAAOI,gBAAgB,IAAIC,YAAY,IAAI,EACvC,CAAb,MAAO3f,GAAM,CAInB,GAAkC,mBAAvBsf,EAAOM,YACd,IACI,OAAON,EAAOM,YAAY,GAAGC,aAClB,CAAb,MAAO7f,GAAM,CAEvB,CAEA,MAAM,IAAIE,MAAM,sEACpB,EAMIirB,EAASxtB,OAAOwtB,QAAW,WAC3B,SAAS2gB,IAAK,CAEd,OAAO,SAAUp7B,GACb,IAAIq7B,EAQJ,OANAD,EAAElyB,UAAYlJ,EAEdq7B,EAAU,IAAID,EAEdA,EAAElyB,UAAY,KAEPmyB,CACX,CACJ,CAd8B,GAmB1BC,EAAI,CAAC,EAKLC,EAAQD,EAAEE,IAAM,CAAC,EAKjBC,EAAOF,EAAME,KAGN,CAmBHC,OAAQ,SAAUC,GAEd,IAAIN,EAAU5gB,EAAO3tB,MAoBrB,OAjBI6uC,GACAN,EAAQO,MAAMD,GAIbN,EAAQxnC,eAAe,SAAW/G,KAAK+uC,OAASR,EAAQQ,OACzDR,EAAQQ,KAAO,WACXR,EAAQS,OAAOD,KAAKnqC,MAAM5E,KAAMyD,UACpC,GAIJ8qC,EAAQQ,KAAK3yB,UAAYmyB,EAGzBA,EAAQS,OAAShvC,KAEVuuC,CACX,EAcA5gB,OAAQ,WACJ,IAAI0R,EAAWr/B,KAAK4uC,SAGpB,OAFAvP,EAAS0P,KAAKnqC,MAAMy6B,EAAU57B,WAEvB47B,CACX,EAcA0P,KAAM,WACN,EAaAD,MAAO,SAAUG,GACb,IAAK,IAAIC,KAAgBD,EACjBA,EAAWloC,eAAemoC,KAC1BlvC,KAAKkvC,GAAgBD,EAAWC,IAKpCD,EAAWloC,eAAe,cAC1B/G,KAAK8B,SAAWmtC,EAAWntC,SAEnC,EAWAqtC,MAAO,WACH,OAAOnvC,KAAK+uC,KAAK3yB,UAAUwyB,OAAO5uC,KACtC,GAUJsiB,EAAYmsB,EAAMnsB,UAAYqsB,EAAKC,OAAO,CAa1CG,KAAM,SAAUpxB,EAAO4E,GACnB5E,EAAQ3d,KAAK2d,MAAQA,GAAS,GAG1B3d,KAAKuiB,SA7OM,MA4OXA,EACgBA,EAEe,EAAf5E,EAAMja,MAE9B,EAeA5B,SAAU,SAAUstC,GAChB,OAAQA,GAAWC,GAAKltC,UAAUnC,KACtC,EAaAwe,OAAQ,SAAUkE,GAEd,IAAI4sB,EAAYtvC,KAAK2d,MACjB4xB,EAAY7sB,EAAU/E,MACtB6xB,EAAexvC,KAAKuiB,SACpBktB,EAAe/sB,EAAUH,SAM7B,GAHAviB,KAAKulB,QAGDiqB,EAAe,EAEf,IAAK,IAAI3vC,EAAI,EAAGA,EAAI4vC,EAAc5vC,IAAK,CACnC,IAAI6vC,EAAYH,EAAU1vC,IAAM,KAAQ,GAAMA,EAAI,EAAK,EAAM,IAC7DyvC,EAAWE,EAAe3vC,IAAO,IAAM6vC,GAAa,IAAOF,EAAe3vC,GAAK,EAAK,CACxF,MAGA,IAAK,IAAI0d,EAAI,EAAGA,EAAIkyB,EAAclyB,GAAK,EACnC+xB,EAAWE,EAAejyB,IAAO,GAAKgyB,EAAUhyB,IAAM,GAM9D,OAHAvd,KAAKuiB,UAAYktB,EAGVzvC,IACX,EASAulB,MAAO,WAEH,IAAI5H,EAAQ3d,KAAK2d,MACb4E,EAAWviB,KAAKuiB,SAGpB5E,EAAM4E,IAAa,IAAM,YAAe,GAAMA,EAAW,EAAK,EAC9D5E,EAAMja,OAASkZ,EAAK+yB,KAAKptB,EAAW,EACxC,EAWA4sB,MAAO,WACH,IAAIA,EAAQR,EAAKQ,MAAMzhB,KAAK1tB,MAG5B,OAFAmvC,EAAMxxB,MAAQ3d,KAAK2d,MAAMQ,MAAM,GAExBgxB,CACX,EAeA3sB,OAAQ,SAAUC,GAGd,IAFA,IAAI9E,EAAQ,GAEH9d,EAAI,EAAGA,EAAI4iB,EAAQ5iB,GAAK,EAC7B8d,EAAMxW,KAAK8a,KAGf,OAAO,IAAIK,EAAUysB,KAAKpxB,EAAO8E,EACrC,IAMAmtB,EAAQpB,EAAEqB,IAAM,CAAC,EAKjBR,EAAMO,EAAMP,IAAM,CAclBltC,UAAW,SAAUugB,GAOjB,IALA,IAAI/E,EAAQ+E,EAAU/E,MAClB4E,EAAWG,EAAUH,SAGrBI,EAAW,GACN9iB,EAAI,EAAGA,EAAI0iB,EAAU1iB,IAAK,CAC/B,IAAI+iB,EAAQjF,EAAM9d,IAAM,KAAQ,GAAMA,EAAI,EAAK,EAAM,IACrD8iB,EAASxb,MAAMyb,IAAS,GAAG9gB,SAAS,KACpC6gB,EAASxb,MAAa,GAAPyb,GAAa9gB,SAAS,IACzC,CAEA,OAAO6gB,EAASta,KAAK,GACzB,EAeAR,MAAO,SAAU6iB,GAMb,IAJA,IAAIolB,EAAeplB,EAAOhnB,OAGtBia,EAAQ,GACH9d,EAAI,EAAGA,EAAIiwC,EAAcjwC,GAAK,EACnC8d,EAAM9d,IAAM,IAAMqY,SAASwS,EAAOyK,OAAOt1B,EAAG,GAAI,KAAQ,GAAMA,EAAI,EAAK,EAG3E,OAAO,IAAIyiB,EAAUysB,KAAKpxB,EAAOmyB,EAAe,EACpD,GAMAC,EAASH,EAAMG,OAAS,CAcxB5tC,UAAW,SAAUugB,GAOjB,IALA,IAAI/E,EAAQ+E,EAAU/E,MAClB4E,EAAWG,EAAUH,SAGrBytB,EAAc,GACTnwC,EAAI,EAAGA,EAAI0iB,EAAU1iB,IAAK,CAC/B,IAAI+iB,EAAQjF,EAAM9d,IAAM,KAAQ,GAAMA,EAAI,EAAK,EAAM,IACrDmwC,EAAY7oC,KAAK4jB,OAAOC,aAAapI,GACzC,CAEA,OAAOotB,EAAY3nC,KAAK,GAC5B,EAeAR,MAAO,SAAUooC,GAMb,IAJA,IAAIC,EAAkBD,EAAUvsC,OAG5Bia,EAAQ,GACH9d,EAAI,EAAGA,EAAIqwC,EAAiBrwC,IACjC8d,EAAM9d,IAAM,KAAiC,IAA1BowC,EAAUhyB,WAAWpe,KAAe,GAAMA,EAAI,EAAK,EAG1E,OAAO,IAAIyiB,EAAUysB,KAAKpxB,EAAOuyB,EACrC,GAMAC,EAAOP,EAAMO,KAAO,CAcpBhuC,UAAW,SAAUugB,GACjB,IACI,OAAO0tB,mBAAmBC,OAAON,EAAO5tC,UAAUugB,IAGtD,CAFE,MAAOle,GACL,MAAM,IAAI9B,MAAM,uBACpB,CACJ,EAeAmF,MAAO,SAAUyoC,GACb,OAAOP,EAAOloC,MAAM0oC,SAAS1nC,mBAAmBynC,IACpD,GAUAE,EAAyB/B,EAAM+B,uBAAyB7B,EAAKC,OAAO,CAQpE6B,MAAO,WAEHzwC,KAAK0wC,MAAQ,IAAIpuB,EAAUysB,KAC3B/uC,KAAK2wC,YAAc,CACvB,EAYAC,QAAS,SAAUrnC,GAEI,iBAARA,IACPA,EAAO4mC,EAAKtoC,MAAM0B,IAItBvJ,KAAK0wC,MAAMlyB,OAAOjV,GAClBvJ,KAAK2wC,aAAepnC,EAAKgZ,QAC7B,EAgBAsuB,SAAU,SAAUC,GAChB,IAAIC,EAGAxnC,EAAOvJ,KAAK0wC,MACZM,EAAYznC,EAAKoU,MACjBszB,EAAe1nC,EAAKgZ,SACpB2uB,EAAYlxC,KAAKkxC,UAIjBC,EAAeF,GAHc,EAAZC,GAcjBE,GARAD,EAFAL,EAEel0B,EAAK+yB,KAAKwB,GAIVv0B,EAAKoJ,KAAoB,EAAfmrB,GAAoBnxC,KAAKqxC,eAAgB,IAIrCH,EAG7BI,EAAc10B,EAAK2J,IAAkB,EAAd6qB,EAAiBH,GAG5C,GAAIG,EAAa,CACb,IAAK,IAAI3J,EAAS,EAAGA,EAAS2J,EAAa3J,GAAUyJ,EAEjDlxC,KAAKuxC,gBAAgBP,EAAWvJ,GAIpCsJ,EAAiBC,EAAU5oC,OAAO,EAAGgpC,GACrC7nC,EAAKgZ,UAAY+uB,CACrB,CAGA,OAAO,IAAIhvB,EAAUysB,KAAKgC,EAAgBO,EAC9C,EAWAnC,MAAO,WACH,IAAIA,EAAQR,EAAKQ,MAAMzhB,KAAK1tB,MAG5B,OAFAmvC,EAAMuB,MAAQ1wC,KAAK0wC,MAAMvB,QAElBA,CACX,EAEAkC,eAAgB,IA2IhBG,GAnIS/C,EAAMgD,OAASjB,EAAuB5B,OAAO,CAItD8C,IAAK/C,EAAKC,SAWVG,KAAM,SAAU2C,GAEZ1xC,KAAK0xC,IAAM1xC,KAAK0xC,IAAI9C,OAAO8C,GAG3B1xC,KAAKywC,OACT,EASAA,MAAO,WAEHD,EAAuBC,MAAM/iB,KAAK1tB,MAGlCA,KAAK2xC,UACT,EAcAC,OAAQ,SAAUC,GAQd,OANA7xC,KAAK4wC,QAAQiB,GAGb7xC,KAAK6wC,WAGE7wC,IACX,EAgBA8xC,SAAU,SAAUD,GAShB,OAPIA,GACA7xC,KAAK4wC,QAAQiB,GAIN7xC,KAAK+xC,aAGpB,EAEAb,UAAW,GAeXc,cAAe,SAAUC,GACrB,OAAO,SAAUhqC,EAASypC,GACtB,OAAO,IAAIO,EAAOlD,KAAK2C,GAAKI,SAAS7pC,EACzC,CACJ,EAeAiqC,kBAAmB,SAAUD,GACzB,OAAO,SAAUhqC,EAAS5E,GACtB,OAAO,IAAImuC,EAAOW,KAAKpD,KAAKkD,EAAQ5uC,GAAKyuC,SAAS7pC,EACtD,CACJ,IAMSumC,EAAE4D,KAAO,CAAC,GAEvB,OAAO5D,CACX,CA7wB2B,CA6wBzB5xB,MAGKwxB,wBCpyBN,IAagBA,EAITI,EAEAlsB,EAhBP7iB,EAAOD,SAUS4uC,EAVmB,EAAQ,KAgBpC9rB,GAFAksB,EAAIJ,GACMM,IACQpsB,UACVksB,EAAEqB,IAKKwC,OAAS,CAcxBlwC,UAAW,SAAUugB,GAEjB,IAAI/E,EAAQ+E,EAAU/E,MAClB4E,EAAWG,EAAUH,SACrB5Z,EAAM3I,KAAKsyC,KAGf5vB,EAAU6C,QAIV,IADA,IAAIgtB,EAAc,GACT1yC,EAAI,EAAGA,EAAI0iB,EAAU1iB,GAAK,EAO/B,IANA,IAII2yC,GAJS70B,EAAM9d,IAAM,KAAc,GAAMA,EAAI,EAAK,EAAY,MAI1C,IAHX8d,EAAO9d,EAAI,IAAO,KAAQ,IAAOA,EAAI,GAAK,EAAK,EAAM,MAG1B,EAF3B8d,EAAO9d,EAAI,IAAO,KAAQ,IAAOA,EAAI,GAAK,EAAK,EAAM,IAIzD0d,EAAI,EAAIA,EAAI,GAAO1d,EAAQ,IAAJ0d,EAAWgF,EAAWhF,IAClDg1B,EAAYprC,KAAKwB,EAAIyW,OAAQozB,IAAa,GAAK,EAAIj1B,GAAO,KAKlE,IAAIk1B,EAAc9pC,EAAIyW,OAAO,IAC7B,GAAIqzB,EACA,KAAOF,EAAY7uC,OAAS,GACxB6uC,EAAYprC,KAAKsrC,GAIzB,OAAOF,EAAYlqC,KAAK,GAC5B,EAeAR,MAAO,SAAU6qC,GAEb,IAAIC,EAAkBD,EAAUhvC,OAC5BiF,EAAM3I,KAAKsyC,KACXM,EAAa5yC,KAAK6yC,YAEtB,IAAKD,EAAY,CACTA,EAAa5yC,KAAK6yC,YAAc,GAChC,IAAK,IAAIt1B,EAAI,EAAGA,EAAI5U,EAAIjF,OAAQ6Z,IAC5Bq1B,EAAWjqC,EAAIsV,WAAWV,IAAMA,CAE5C,CAGA,IAAIk1B,EAAc9pC,EAAIyW,OAAO,IAC7B,GAAIqzB,EAAa,CACb,IAAIK,EAAeJ,EAAUpe,QAAQme,IACf,IAAlBK,IACAH,EAAkBG,EAE1B,CAGA,OAOR,SAAmBJ,EAAWC,EAAiBC,GAG7C,IAFA,IAAIj1B,EAAQ,GACR8E,EAAS,EACJ5iB,EAAI,EAAGA,EAAI8yC,EAAiB9yC,IACjC,GAAIA,EAAI,EAAG,CACP,IAEIkzC,EAFQH,EAAWF,EAAUz0B,WAAWpe,EAAI,KAASA,EAAI,EAAK,EACtD+yC,EAAWF,EAAUz0B,WAAWpe,MAAS,EAAKA,EAAI,EAAK,EAEnE8d,EAAM8E,IAAW,IAAMswB,GAAiB,GAAMtwB,EAAS,EAAK,EAC5DA,GACJ,CAEJ,OAAOH,EAAUqL,OAAOhQ,EAAO8E,EACjC,CApBeuwB,CAAUN,EAAWC,EAAiBC,EAEjD,EAEAN,KAAM,qEAoBPlE,EAASyB,IAAIwC,4BCrInB,IAagBjE,EAVhB3uC,EAAOD,SAUS4uC,EAVmB,EAAQ,KAAW,EAAQ,KAAa,EAAQ,KAY7EA,EAAS6E,iCCff,IAiBOzE,EAEAG,EAEAwB,EAlBP1wC,EAAOD,SAgBAmvC,GAFAH,EAd4B,EAAQ,MAe1BE,IACGC,KAEbwB,EADQ3B,EAAEqB,IACGM,UACJ3B,EAAE4D,KAKGD,KAAOxD,EAAKC,OAAO,CAWjCG,KAAM,SAAUkD,EAAQ5uC,GAEpB4uC,EAASjyC,KAAKkzC,QAAU,IAAIjB,EAAOlD,KAGjB,iBAAP1rC,IACPA,EAAM8sC,EAAKtoC,MAAMxE,IAIrB,IAAI8vC,EAAkBlB,EAAOf,UACzBkC,EAAyC,EAAlBD,EAGvB9vC,EAAIkf,SAAW6wB,IACf/vC,EAAM4uC,EAAOH,SAASzuC,IAI1BA,EAAIkiB,QAWJ,IARA,IAAI8tB,EAAOrzC,KAAKszC,MAAQjwC,EAAI8rC,QACxBoE,EAAOvzC,KAAKwzC,MAAQnwC,EAAI8rC,QAGxBsE,EAAYJ,EAAK11B,MACjB+1B,EAAYH,EAAK51B,MAGZ9d,EAAI,EAAGA,EAAIszC,EAAiBtzC,IACjC4zC,EAAU5zC,IAAM,WAChB6zC,EAAU7zC,IAAM,UAEpBwzC,EAAK9wB,SAAWgxB,EAAKhxB,SAAW6wB,EAGhCpzC,KAAKywC,OACT,EASAA,MAAO,WAEH,IAAIwB,EAASjyC,KAAKkzC,QAGlBjB,EAAOxB,QACPwB,EAAOL,OAAO5xC,KAAKwzC,MACvB,EAcA5B,OAAQ,SAAUC,GAId,OAHA7xC,KAAKkzC,QAAQtB,OAAOC,GAGb7xC,IACX,EAgBA8xC,SAAU,SAAUD,GAEhB,IAAII,EAASjyC,KAAKkzC,QAGdS,EAAY1B,EAAOH,SAASD,GAIhC,OAHAI,EAAOxB,QACIwB,EAAOH,SAAS9xC,KAAKszC,MAAMnE,QAAQ3wB,OAAOm1B,GAGzD,2BCzIP,IAagBvF,EAVhB3uC,EAAOD,SAUS4uC,EAVmB,EAAQ,KAY3C,WAEG,GAA0B,mBAAfhJ,YAAX,CAKA,IAEI9iB,EAFI8rB,EACMM,IACQpsB,UAGlBsxB,EAAYtxB,EAAUysB,KAGtB8E,EAAUvxB,EAAUysB,KAAO,SAAU+E,GAqBrC,GAnBIA,aAAsB1O,cACtB0O,EAAa,IAAIzP,WAAWyP,KAK5BA,aAAsBC,WACQ,oBAAtBC,mBAAqCF,aAAsBE,mBACnEF,aAAsBG,YACtBH,aAAsBI,aACtBJ,aAAsBK,YACtBL,aAAsB3xB,aACtB2xB,aAAsBM,cACtBN,aAAsBO,gBAEtBP,EAAa,IAAIzP,WAAWyP,EAAWhO,OAAQgO,EAAWzO,WAAYyO,EAAW/Q,aAIjF+Q,aAAsBzP,WAAY,CAMlC,IAJA,IAAIiQ,EAAuBR,EAAW/Q,WAGlCplB,EAAQ,GACH9d,EAAI,EAAGA,EAAIy0C,EAAsBz0C,IACtC8d,EAAM9d,IAAM,IAAMi0C,EAAWj0C,IAAO,GAAMA,EAAI,EAAK,EAIvD+zC,EAAUlmB,KAAK1tB,KAAM2d,EAAO22B,EAChC,MAEIV,EAAUhvC,MAAM5E,KAAMyD,UAE9B,EAEAowC,EAAQz3B,UAAYkG,CAlDpB,CAmDJ,CAvDA,GA0DO8rB,EAASM,IAAIpsB,gCCzEnB,IAagB8rB,EAVhB3uC,EAAOD,SAUS4uC,EAVmB,EAAQ,KAY3C,SAAUxxB,GAEP,IAAI4xB,EAAIJ,EACJK,EAAQD,EAAEE,IACVpsB,EAAYmsB,EAAMnsB,UAClBmvB,EAAShD,EAAMgD,OACfD,EAAShD,EAAE4D,KAGXmC,EAAI,GACJC,EAAI,IAGP,WACG,SAASC,EAAQpxB,GAEb,IADA,IAAIqxB,EAAQ93B,EAAK+3B,KAAKtxB,GACbuxB,EAAS,EAAGA,GAAUF,EAAOE,IAClC,KAAMvxB,EAAIuxB,GACN,OAAO,EAIf,OAAO,CACX,CAEA,SAASC,EAAkBxxB,GACvB,OAAwB,YAAfA,GAAS,EAAJA,IAAyB,CAC3C,CAIA,IAFA,IAAIA,EAAI,EACJyxB,EAAS,EACNA,EAAS,IACRL,EAAQpxB,KACJyxB,EAAS,IACTP,EAAEO,GAAUD,EAAkBj4B,EAAKa,IAAI4F,EAAG,MAE9CmxB,EAAEM,GAAUD,EAAkBj4B,EAAKa,IAAI4F,EAAG,EAAI,IAE9CyxB,KAGJzxB,GAER,CA9BA,GAiCA,IAAI0xB,EAAI,GAKJC,EAASxD,EAAOwD,OAASvD,EAAO7C,OAAO,CACvC+C,SAAU,WACN3xC,KAAKi1C,MAAQ,IAAI3yB,EAAUysB,KAAKwF,EAAEp2B,MAAM,GAC5C,EAEAozB,gBAAiB,SAAU2D,EAAGzN,GAe1B,IAbA,IAAI8M,EAAIv0C,KAAKi1C,MAAMt3B,MAGf/d,EAAI20C,EAAE,GACN91B,EAAI81B,EAAE,GACN/wC,EAAI+wC,EAAE,GACNhxC,EAAIgxC,EAAE,GACN/vC,EAAI+vC,EAAE,GACNY,EAAIZ,EAAE,GACNvyB,EAAIuyB,EAAE,GACN12B,EAAI02B,EAAE,GAGD10C,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACzB,GAAIA,EAAI,GACJk1C,EAAEl1C,GAAqB,EAAhBq1C,EAAEzN,EAAS5nC,OACf,CACH,IAAIu1C,EAAUL,EAAEl1C,EAAI,IAChBw1C,GAAYD,GAAW,GAAOA,IAAY,IAC9BA,GAAW,GAAOA,IAAY,IAC9BA,IAAY,EAExBE,EAAUP,EAAEl1C,EAAI,GAChB01C,GAAYD,GAAW,GAAOA,IAAY,KAC9BA,GAAW,GAAOA,IAAY,IAC9BA,IAAY,GAE5BP,EAAEl1C,GAAKw1C,EAASN,EAAEl1C,EAAI,GAAK01C,EAASR,EAAEl1C,EAAI,GAC9C,CAEA,IACI21C,EAAO51C,EAAI6e,EAAM7e,EAAI4D,EAAMib,EAAIjb,EAE/BiyC,GAAW71C,GAAK,GAAOA,IAAM,IAAQA,GAAK,GAAOA,IAAM,KAASA,GAAK,GAAOA,IAAM,IAGlF81C,EAAK73B,IAFMrZ,GAAK,GAAOA,IAAM,IAAQA,GAAK,GAAOA,IAAM,KAASA,GAAK,EAAOA,IAAM,MAJ3EA,EAAI2wC,GAAO3wC,EAAIwd,GAMCwyB,EAAE30C,GAAKk1C,EAAEl1C,GAGpCge,EAAImE,EACJA,EAAImzB,EACJA,EAAI3wC,EACJA,EAAKjB,EAAImyC,EAAM,EACfnyC,EAAIC,EACJA,EAAIib,EACJA,EAAI7e,EACJA,EAAK81C,GATID,EAASD,GASF,CACpB,CAGAjB,EAAE,GAAMA,EAAE,GAAK30C,EAAK,EACpB20C,EAAE,GAAMA,EAAE,GAAK91B,EAAK,EACpB81B,EAAE,GAAMA,EAAE,GAAK/wC,EAAK,EACpB+wC,EAAE,GAAMA,EAAE,GAAKhxC,EAAK,EACpBgxC,EAAE,GAAMA,EAAE,GAAK/vC,EAAK,EACpB+vC,EAAE,GAAMA,EAAE,GAAKY,EAAK,EACpBZ,EAAE,GAAMA,EAAE,GAAKvyB,EAAK,EACpBuyB,EAAE,GAAMA,EAAE,GAAK12B,EAAK,CACxB,EAEAk0B,YAAa,WAET,IAAIxoC,EAAOvJ,KAAK0wC,MACZM,EAAYznC,EAAKoU,MAEjBg4B,EAAgC,EAAnB31C,KAAK2wC,YAClBiF,EAA4B,EAAhBrsC,EAAKgZ,SAYrB,OATAyuB,EAAU4E,IAAc,IAAM,KAAS,GAAKA,EAAY,GACxD5E,EAA4C,IAA/B4E,EAAY,KAAQ,GAAM,IAAWh5B,EAAK6G,MAAMkyB,EAAa,YAC1E3E,EAA4C,IAA/B4E,EAAY,KAAQ,GAAM,IAAWD,EAClDpsC,EAAKgZ,SAA8B,EAAnByuB,EAAUttC,OAG1B1D,KAAK6wC,WAGE7wC,KAAKi1C,KAChB,EAEA9F,MAAO,WACH,IAAIA,EAAQsC,EAAOtC,MAAMzhB,KAAK1tB,MAG9B,OAFAmvC,EAAM8F,MAAQj1C,KAAKi1C,MAAM9F,QAElBA,CACX,IAiBJX,EAAEwG,OAASvD,EAAOO,cAAcgD,GAgBhCxG,EAAEyE,WAAaxB,EAAOS,kBAAkB8C,EAC5C,CAlLA,CAkLEp4B,MAGKwxB,EAAS4G,qBCnMjBx1C,EAAQ4nC,KAAO,SAAUtB,EAAQ2B,EAAQoO,EAAMC,EAAMrzB,GACnD,IAAIje,EAAGqU,EACHk9B,EAAiB,EAATtzB,EAAcqzB,EAAO,EAC7BE,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACTr2C,EAAIg2C,EAAQpzB,EAAS,EAAK,EAC1Blf,EAAIsyC,GAAQ,EAAI,EAChB79B,EAAI8tB,EAAO2B,EAAS5nC,GAOxB,IALAA,GAAK0D,EAELiB,EAAIwT,GAAM,IAAOk+B,GAAU,EAC3Bl+B,KAAQk+B,EACRA,GAASH,EACFG,EAAQ,EAAG1xC,EAAS,IAAJA,EAAWshC,EAAO2B,EAAS5nC,GAAIA,GAAK0D,EAAG2yC,GAAS,GAKvE,IAHAr9B,EAAIrU,GAAM,IAAO0xC,GAAU,EAC3B1xC,KAAQ0xC,EACRA,GAASJ,EACFI,EAAQ,EAAGr9B,EAAS,IAAJA,EAAWitB,EAAO2B,EAAS5nC,GAAIA,GAAK0D,EAAG2yC,GAAS,GAEvE,GAAU,IAAN1xC,EACFA,EAAI,EAAIyxC,MACH,IAAIzxC,IAAMwxC,EACf,OAAOn9B,EAAIs9B,IAAsBrI,KAAd91B,GAAK,EAAI,GAE5Ba,GAAQ+D,KAAKa,IAAI,EAAGq4B,GACpBtxC,GAAQyxC,CACV,CACA,OAAQj+B,GAAK,EAAI,GAAKa,EAAI+D,KAAKa,IAAI,EAAGjZ,EAAIsxC,EAC5C,EAEAt2C,EAAQmmC,MAAQ,SAAUG,EAAQzlC,EAAOonC,EAAQoO,EAAMC,EAAMrzB,GAC3D,IAAIje,EAAGqU,EAAGrV,EACNuyC,EAAiB,EAATtzB,EAAcqzB,EAAO,EAC7BE,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBI,EAAe,KAATN,EAAcl5B,KAAKa,IAAI,GAAI,IAAMb,KAAKa,IAAI,GAAI,IAAM,EAC1D5d,EAAIg2C,EAAO,EAAKpzB,EAAS,EACzBlf,EAAIsyC,EAAO,GAAK,EAChB79B,EAAI3X,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQuc,KAAKsC,IAAI7e,GAEbgf,MAAMhf,IAAUA,IAAUytC,KAC5Bj1B,EAAIwG,MAAMhf,GAAS,EAAI,EACvBmE,EAAIwxC,IAEJxxC,EAAIoY,KAAK6G,MAAM7G,KAAKy5B,IAAIh2C,GAASuc,KAAK05B,KAClCj2C,GAASmD,EAAIoZ,KAAKa,IAAI,GAAIjZ,IAAM,IAClCA,IACAhB,GAAK,IAGLnD,GADEmE,EAAIyxC,GAAS,EACNG,EAAK5yC,EAEL4yC,EAAKx5B,KAAKa,IAAI,EAAG,EAAIw4B,IAEpBzyC,GAAK,IACfgB,IACAhB,GAAK,GAGHgB,EAAIyxC,GAASD,GACfn9B,EAAI,EACJrU,EAAIwxC,GACKxxC,EAAIyxC,GAAS,GACtBp9B,GAAMxY,EAAQmD,EAAK,GAAKoZ,KAAKa,IAAI,EAAGq4B,GACpCtxC,GAAQyxC,IAERp9B,EAAIxY,EAAQuc,KAAKa,IAAI,EAAGw4B,EAAQ,GAAKr5B,KAAKa,IAAI,EAAGq4B,GACjDtxC,EAAI,IAIDsxC,GAAQ,EAAGhQ,EAAO2B,EAAS5nC,GAAS,IAAJgZ,EAAUhZ,GAAK0D,EAAGsV,GAAK,IAAKi9B,GAAQ,GAI3E,IAFAtxC,EAAKA,GAAKsxC,EAAQj9B,EAClBk9B,GAAQD,EACDC,EAAO,EAAGjQ,EAAO2B,EAAS5nC,GAAS,IAAJ2E,EAAU3E,GAAK0D,EAAGiB,GAAK,IAAKuxC,GAAQ,GAE1EjQ,EAAO2B,EAAS5nC,EAAI0D,IAAU,IAAJyU,CAC5B,WCpFA,IAAIlW,EAAW,CAAC,EAAEA,SAElBrC,EAAOD,QAAU0P,MAAMC,SAAW,SAAUo0B,GAC1C,MAA6B,kBAAtBzhC,EAAS4rB,KAAK6V,EACvB,iBCJA9jC,EAAOD,QAAUM,KAAK2H,QAAU3H,KAAK2H,MAAQ,gBAA8B,EAAQ,qBCAnF,QAOYlI,IAkBV,WACD,SAASqvC,IAGR,IAFA,IAAI/uC,EAAI,EACJ6E,EAAS,CAAC,EACP7E,EAAI4D,UAAUC,OAAQ7D,IAAK,CACjC,IAAIyL,EAAa7H,UAAW5D,GAC5B,IAAK,IAAIwD,KAAOiI,EACf5G,EAAOrB,GAAOiI,EAAWjI,EAE3B,CACA,OAAOqB,CACR,CAEA,SAAS6xC,EAAQv+B,GAChB,OAAOA,EAAEtM,QAAQ,mBAAoB0kC,mBACtC,CAyHA,OAvHA,SAASrB,EAAMyH,GACd,SAASC,IAAO,CAEhB,SAASp0C,EAAKgB,EAAKhD,EAAOiL,GACzB,GAAwB,oBAAborC,SAAX,CAQkC,iBAJlCprC,EAAasjC,EAAO,CACnBnM,KAAM,KACJgU,EAAI79B,SAAUtN,IAEKo3B,UACrBp3B,EAAWo3B,QAAU,IAAI9gC,KAAkB,EAAb,IAAIA,KAAkC,MAArB0J,EAAWo3B,UAI3Dp3B,EAAWo3B,QAAUp3B,EAAWo3B,QAAUp3B,EAAWo3B,QAAQiU,cAAgB,GAE7E,IACC,IAAIjyC,EAASxC,KAAKC,UAAU9B,GACxB,UAAUmf,KAAK9a,KAClBrE,EAAQqE,EAEG,CAAX,MAAOF,GAAI,CAEbnE,EAAQm2C,EAAU7Q,MACjB6Q,EAAU7Q,MAAMtlC,EAAOgD,GACvBwF,mBAAmBkiB,OAAO1qB,IACxBqL,QAAQ,4DAA6D0kC,oBAExE/sC,EAAMwF,mBAAmBkiB,OAAO1nB,IAC9BqI,QAAQ,2BAA4B0kC,oBACpC1kC,QAAQ,UAAW2kC,QAErB,IAAIuG,EAAwB,GAC5B,IAAK,IAAIzb,KAAiB7vB,EACpBA,EAAW6vB,KAGhByb,GAAyB,KAAOzb,GACE,IAA9B7vB,EAAW6vB,KAWfyb,GAAyB,IAAMtrC,EAAW6vB,GAAehzB,MAAM,KAAK,KAGrE,OAAQuuC,SAASG,OAASxzC,EAAM,IAAMhD,EAAQu2C,CAjD9C,CAkDD,CAEA,SAASlY,EAAKr7B,EAAKs9B,GAClB,GAAwB,oBAAb+V,SAAX,CAUA,IANA,IAAII,EAAM,CAAC,EAGPjU,EAAU6T,SAASG,OAASH,SAASG,OAAO1uC,MAAM,MAAQ,GAC1DtI,EAAI,EAEDA,EAAIgjC,EAAQn/B,OAAQ7D,IAAK,CAC/B,IAAImkC,EAAQnB,EAAQhjC,GAAGsI,MAAM,KACzB0uC,EAAS7S,EAAM7lB,MAAM,GAAG9V,KAAK,KAE5Bs4B,GAA6B,MAArBkW,EAAOz3B,OAAO,KAC1By3B,EAASA,EAAO14B,MAAM,GAAI,IAG3B,IACC,IAAIjK,EAAOqiC,EAAOvS,EAAM,IAIxB,GAHA6S,GAAUL,EAAUpP,MAAQoP,GAAWK,EAAQ3iC,IAC9CqiC,EAAOM,GAEJlW,EACH,IACCkW,EAAS30C,KAAK2F,MAAMgvC,EACR,CAAX,MAAOryC,GAAI,CAKd,GAFAsyC,EAAI5iC,GAAQ2iC,EAERxzC,IAAQ6Q,EACX,KAEW,CAAX,MAAO1P,GAAI,CACd,CAEA,OAAOnB,EAAMyzC,EAAIzzC,GAAOyzC,CAnCxB,CAoCD,CAmBA,OAjBAL,EAAIp0C,IAAMA,EACVo0C,EAAI/X,IAAM,SAAUr7B,GACnB,OAAOq7B,EAAIr7B,GAAK,EACjB,EACAozC,EAAIM,QAAU,SAAU1zC,GACvB,OAAOq7B,EAAIr7B,GAAK,EACjB,EACAozC,EAAIO,OAAS,SAAU3zC,EAAKiI,GAC3BjJ,EAAIgB,EAAK,GAAIurC,EAAOtjC,EAAY,CAC/Bo3B,SAAU,IAEZ,EAEA+T,EAAI79B,SAAW,CAAC,EAEhB69B,EAAIQ,cAAgBlI,EAEb0H,CACR,CAEO1H,EAAK,WAAa,GAC1B,OAxJgB,0BAAd,KAAc,kCAIdtvC,EAAOD,QAAUD,gCCdJ,WAASiF,EAAE6e,GAAG,OAAOA,EAAEA,GAAG,CAAC,EAAE,IAAIxgB,SAAQ,SAAS0S,EAAEtS,GAAG,IAAI+U,EAAE,IAAIk/B,eAAejqB,EAAE,GAAGxY,EAAE,GAAG5U,EAAE,CAAC,EAAED,EAAE,WAAW,MAAM,CAACghC,GAAG,IAAI5oB,EAAEtQ,OAAO,IAAI,GAAGyvC,WAAWn/B,EAAEm/B,WAAWzvC,OAAOsQ,EAAEtQ,OAAOb,IAAImR,EAAEo/B,YAAYxvC,KAAK,WAAW,OAAO/E,QAAQsB,QAAQ6T,EAAEq/B,aAAa,EAAE1W,KAAK,WAAW,OAAO99B,QAAQsB,QAAQ6T,EAAEq/B,cAAcr0C,KAAKd,KAAK2F,MAAM,EAAEqB,KAAK,WAAW,OAAOrG,QAAQsB,QAAQ,IAAI+N,KAAK,CAAC8F,EAAE5W,WAAW,EAAE+tC,MAAMvvC,EAAE4S,QAAQ,CAAChK,KAAK,WAAW,OAAOykB,CAAC,EAAE1d,QAAQ,WAAW,OAAOkF,CAAC,EAAEiqB,IAAI,SAASl6B,GAAG,OAAO3E,EAAE2E,EAAEmb,cAAc,EAAE8e,IAAI,SAASj6B,GAAG,OAAOA,EAAEmb,gBAAgB9f,CAAC,GAAG,EAAE,IAAI,IAAI2jB,KAAKxL,EAAEs/B,KAAKj0B,EAAEvb,QAAQ,MAAMtD,GAAE,GAAIwT,EAAEu/B,OAAO,WAAWv/B,EAAEw/B,wBAAwB9rC,QAAQ,gCAA+B,SAASlH,EAAE6e,EAAE9N,GAAG0X,EAAE9lB,KAAKkc,EAAEA,EAAE1D,eAAelL,EAAEtN,KAAK,CAACkc,EAAE9N,IAAI1V,EAAEwjB,GAAGxjB,EAAEwjB,GAAGxjB,EAAEwjB,GAAG,IAAI9N,EAAEA,CAAC,IAAGA,EAAE3V,IAAI,EAAEoY,EAAErV,QAAQM,EAAE+U,EAAEy/B,gBAAgB,WAAWp0B,EAAE2c,YAAY3c,EAAE7Q,QAAQwF,EAAE0/B,iBAAiBl0B,EAAEH,EAAE7Q,QAAQgR,IAAIxL,EAAE2/B,KAAKt0B,EAAEtb,MAAM,KAAK,GAAE,uDCCp4B6vC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB7lC,IAAjB8lC,EACH,OAAOA,EAAav4C,QAGrB,IAAIC,EAASm4C,EAAyBE,GAAY,CAGjDt4C,QAAS,CAAC,GAOX,OAHAw4C,EAAoBF,GAAUpqB,KAAKjuB,EAAOD,QAASC,EAAQA,EAAOD,QAASq4C,GAGpEp4C,EAAOD,OACf,QCrBAq4C,EAAoBx0B,EAAK5jB,IACxB,IAAIw4C,EAASx4C,GAAUA,EAAOS,WAC7B,IAAOT,EAAiB,QACxB,IAAM,EAEP,OADAo4C,EAAoBt0C,EAAE00C,EAAQ,CAAEr4C,EAAGq4C,IAC5BA,CAAM,ECLdJ,EAAoBt0C,EAAI,CAAC/D,EAAS04C,KACjC,IAAI,IAAI70C,KAAO60C,EACXL,EAAoB5qB,EAAEirB,EAAY70C,KAASw0C,EAAoB5qB,EAAEztB,EAAS6D,IAC5ElD,OAAOC,eAAeZ,EAAS6D,EAAK,CAAEy7B,YAAY,EAAMJ,IAAKwZ,EAAW70C,IAE1E,ECNDw0C,EAAoB71B,EAAI,WACvB,GAA0B,iBAAfqsB,WAAyB,OAAOA,WAC3C,IACC,OAAOruC,MAAQ,IAAIu+B,SAAS,cAAb,EAGhB,CAFE,MAAO/5B,GACR,GAAsB,iBAAXzC,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB81C,EAAoB5qB,EAAI,CAAC/Z,EAAKilC,IAAUh4C,OAAOic,UAAUrV,eAAe2mB,KAAKxa,EAAKilC,GCClFN,EAAoB50C,EAAKzD,IACH,oBAAXgqC,QAA0BA,OAAO4O,aAC1Cj4C,OAAOC,eAAeZ,EAASgqC,OAAO4O,YAAa,CAAE/3C,MAAO,WAE7DF,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,GAAO,ECFpCw3C,EAAoB","sources":["webpack://skapi-js/webpack/universalModuleDefinition","webpack://skapi-js/./js/Api.js","webpack://skapi-js/./js/decorators.js","webpack://skapi-js/./js/skapi.js","webpack://skapi-js/./js/skapi_error.js","webpack://skapi-js/./js/utils.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/AuthenticationDetails.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/utils/cryptoSecureRandomInt.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/utils/WordArray.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/BigInteger.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/AuthenticationHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoJwtToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoAccessToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoIdToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoRefreshToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserSession.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/DateHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserAttribute.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/StorageHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUser.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/Platform/index.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/UserAgent.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/Client.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserPool.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CookieStorage.js","webpack://skapi-js/./node_modules/base64-js/index.js","webpack://skapi-js/./node_modules/buffer/index.js","webpack://skapi-js/./node_modules/crypto-js/core.js","webpack://skapi-js/./node_modules/crypto-js/enc-base64.js","webpack://skapi-js/./node_modules/crypto-js/hmac-sha256.js","webpack://skapi-js/./node_modules/crypto-js/hmac.js","webpack://skapi-js/./node_modules/crypto-js/lib-typedarrays.js","webpack://skapi-js/./node_modules/crypto-js/sha256.js","webpack://skapi-js/./node_modules/ieee754/index.js","webpack://skapi-js/./node_modules/isarray/index.js","webpack://skapi-js/./node_modules/isomorphic-unfetch/browser.js","webpack://skapi-js/./node_modules/js-cookie/src/js.cookie.js","webpack://skapi-js/./node_modules/unfetch/dist/unfetch.module.js","webpack://skapi-js/webpack/bootstrap","webpack://skapi-js/webpack/runtime/compat get default export","webpack://skapi-js/webpack/runtime/define property getters","webpack://skapi-js/webpack/runtime/global","webpack://skapi-js/webpack/runtime/hasOwnProperty shorthand","webpack://skapi-js/webpack/runtime/make namespace object","webpack://skapi-js/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SkapiError = exports.Skapi = void 0;\nconst skapi_1 = __importDefault(require(\"./skapi\"));\nexports.Skapi = skapi_1.default;\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nexports.SkapiError = skapi_error_1.default;\n//# sourceMappingURL=Api.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formResponse = void 0;\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nfunction formResponse() {\n    return function (target, propertyKey, descriptor) {\n        const fn = descriptor.value;\n        descriptor.value = function (...arg) {\n            let form = arg[0];\n            let option = (arg === null || arg === void 0 ? void 0 : arg[1]) || {};\n            const handleResponse = (response) => {\n                if (option === null || option === void 0 ? void 0 : option.response) {\n                    if (typeof option.response === 'function') {\n                        option.response(response);\n                        return response;\n                    }\n                    else {\n                        throw new skapi_error_1.default('Callback \"response\" should be type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                if (!(form instanceof HTMLFormElement)) {\n                    return response;\n                }\n                let href = new URL(form.action);\n                let response_key = form.action;\n                let timestamp = Date.now().toString();\n                window.sessionStorage.setItem(response_key, JSON.stringify({ [timestamp]: response }));\n                href.searchParams.set(response_key, timestamp);\n                window.location.href = href.href;\n            };\n            let response;\n            function handleError(err) {\n                let is_err = err instanceof Error ? err : new skapi_error_1.default(err);\n                if (option === null || option === void 0 ? void 0 : option.onerror) {\n                    if (typeof option.onerror === 'function') {\n                        return option.onerror(is_err);\n                    }\n                    else {\n                        throw new skapi_error_1.default('Callback \"onerror\" should be type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                return is_err;\n            }\n            try {\n                response = fn.bind(this)(...arg);\n            }\n            catch (err) {\n                let is_err = handleError(err);\n                if (is_err instanceof Error) {\n                    throw is_err;\n                }\n                return is_err;\n            }\n            if (response instanceof Promise) {\n                return new Promise((res, rej) => {\n                    response\n                        .then((r) => {\n                        res(handleResponse(r));\n                    })\n                        .catch((err) => {\n                        err = handleError(err);\n                        if (err instanceof Error) {\n                            rej(err);\n                        }\n                        else {\n                            res(err);\n                        }\n                    });\n                });\n            }\n            else {\n                return handleResponse(response);\n            }\n        };\n    };\n}\nexports.formResponse = formResponse;\n//# sourceMappingURL=decorators.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst amazon_cognito_identity_js_1 = require(\"amazon-cognito-identity-js\");\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nconst decorators_1 = require(\"./decorators\");\nconst utils_1 = require(\"./utils\");\nclass Skapi {\n    constructor(service_id, service_owner, autoLogin = false) {\n        this.cognitoUser = null;\n        this.__disabledAccount = null;\n        this.__serviceHash = {};\n        this.__pendingRequest = {};\n        this.__cached_requests = {};\n        this.__startKey_keys = {};\n        this.__request_signup_confirmation = null;\n        this.__index_number_range = 4503599627370496;\n        this.__class_properties_has_been_cached = false;\n        this.session = null;\n        this.__user = null;\n        this.connection = null;\n        this.host = 'skapi';\n        this.hostDomain = 'skapi.com';\n        this.userPool = null;\n        this.regex = {\n            validateUserId(val) {\n                try {\n                    (0, utils_1.validateUserId)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validateUrl(val) {\n                try {\n                    (0, utils_1.validateUrl)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validatePhoneNumber(val) {\n                try {\n                    (0, utils_1.validatePhoneNumber)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validateBirthdate(val) {\n                try {\n                    (0, utils_1.validateBirthdate)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            validateEmail(val) {\n                try {\n                    (0, utils_1.validateEmail)(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            }\n        };\n        this.update_startKey_keys = (option) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            let { hashedParam, url, response } = option;\n            let fetched = null;\n            if (response instanceof Promise) {\n                fetched = yield response;\n            }\n            else {\n                fetched = response;\n            }\n            if (typeof fetched !== 'object' ||\n                !fetched.hasOwnProperty('startKey') ||\n                !hashedParam ||\n                !url) {\n                return fetched;\n            }\n            if (!this.__startKey_keys.hasOwnProperty(url)) {\n                this.__startKey_keys[url] = {};\n            }\n            if (!((_a = this.__cached_requests) === null || _a === void 0 ? void 0 : _a[url])) {\n                this.__cached_requests[url] = {};\n            }\n            this.__cached_requests[url][hashedParam] = fetched;\n            if (!this.__startKey_keys[url].hasOwnProperty(hashedParam)) {\n                this.__startKey_keys[url][hashedParam] = [];\n            }\n            let startKey_string = JSON.stringify(fetched.startKey);\n            if (!this.__startKey_keys[url][hashedParam].includes(startKey_string)) {\n                this.__startKey_keys[url][hashedParam].push(startKey_string);\n            }\n            this.__cached_requests[url][hashedParam] = fetched;\n            return Object.assign({ startKey_list: this.__startKey_keys[url][hashedParam] }, fetched);\n        });\n        this._fetch = (url, opt, responseType) => __awaiter(this, void 0, void 0, function* () {\n            let response = yield fetch(url, opt);\n            if (responseType) {\n                if (response.status === 200) {\n                    return yield response[responseType]();\n                }\n                else {\n                    throw response;\n                }\n            }\n            let received = yield response.text();\n            try {\n                received = JSON.parse(received);\n            }\n            catch (err) {\n            }\n            if (response.status === 200) {\n                if (typeof received === 'object' && opt.method === 'GET' && received.hasOwnProperty('body')) {\n                    try {\n                        received = JSON.parse(received.body);\n                    }\n                    catch (err) { }\n                }\n                return received;\n            }\n            else {\n                let status = response === null || response === void 0 ? void 0 : response.status;\n                let errCode = [\n                    'INVALID_CORS',\n                    'INVALID_REQUEST',\n                    'SERVICE_DISABLED',\n                    'INVALID_PARAMETER',\n                    'ERROR',\n                    'EXISTS',\n                    'NOT_EXISTS'\n                ];\n                if (typeof received === 'object' && (received === null || received === void 0 ? void 0 : received.message)) {\n                    let code = ((status ? status.toString() : null) || 'ERROR');\n                    throw new skapi_error_1.default(received === null || received === void 0 ? void 0 : received.message, { code: code });\n                }\n                else if (typeof received === 'string') {\n                    let errMsg = received.split(':');\n                    let code = errMsg.splice(0, 1)[0];\n                    throw new skapi_error_1.default(errMsg.join(''), { code: (errCode.includes(code) ? code : 'ERROR') });\n                }\n                throw response;\n            }\n        });\n        this._get = (url, params, option) => __awaiter(this, void 0, void 0, function* () {\n            if (params && typeof params === 'object' && Object.keys(params).length) {\n                if (url.substring(url.length - 1) !== '?') {\n                    url = url + '?';\n                }\n                let query = Object.keys(params)\n                    .map(k => {\n                    let value = params[k];\n                    if (typeof value !== 'string') {\n                        value = JSON.stringify(value);\n                    }\n                    return encodeURIComponent(k) + '=' + encodeURIComponent(value);\n                })\n                    .join('&');\n                url += query;\n            }\n            let responseType = null;\n            if (option.hasOwnProperty('responseType')) {\n                responseType = option.responseType;\n                delete option.responseType;\n            }\n            let opt = Object.assign({\n                method: 'GET'\n            }, option);\n            return this._fetch(url, opt, responseType);\n        });\n        if (typeof service_id !== 'string' || typeof service_owner !== 'string') {\n            throw new skapi_error_1.default('\"service_id\" and \"service_owner\" should be type <string>.', { code: 'INVALID_PARAMETER' });\n        }\n        if (!service_id || !service_owner) {\n            throw new skapi_error_1.default('\"service_id\" and \"service_owner\" is required', { code: 'INVALID_PARAMETER' });\n        }\n        if (service_owner !== this.host) {\n            (0, utils_1.validateUserId)(service_owner, '\"service_owner\"');\n        }\n        this.service = service_id;\n        this.service_owner = service_owner;\n        const cdn_domain = 'https://dkls9pxkgz855.cloudfront.net';\n        let sreg = service_id.substring(0, 4);\n        this.admin_endpoint = fetch(`${cdn_domain}/${sreg}/admin.json`)\n            .then(response => response.blob())\n            .then(blob => new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }))\n            .then(data => typeof data === 'string' ? JSON.parse(window.atob(data.split(',')[1])) : null);\n        this.record_endpoint = fetch(`${cdn_domain}/${sreg}/record.json`)\n            .then(response => response.blob())\n            .then(blob => new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }))\n            .then(data => typeof data === 'string' ? JSON.parse(window.atob(data.split(',')[1])) : null);\n        this.__connection = ((skapi) => __awaiter(this, void 0, void 0, function* () {\n            if (!window.sessionStorage) {\n                throw new Error(`This browser does not support skapi.`);\n            }\n            const restore = JSON.parse(window.sessionStorage.getItem(`${service_id}#${service_owner}`) || 'null');\n            if (restore === null || restore === void 0 ? void 0 : restore.connection) {\n                for (let k in restore) {\n                    skapi[k] = restore[k];\n                }\n            }\n            const admin_endpoint = yield skapi.admin_endpoint;\n            skapi.userPool = new amazon_cognito_identity_js_1.CognitoUserPool({\n                UserPoolId: admin_endpoint.userpool_id,\n                ClientId: admin_endpoint.userpool_client\n            });\n            const process = [\n                skapi.updateConnection()\n            ];\n            if ((restore === null || restore === void 0 ? void 0 : restore.connection) || autoLogin) {\n                process.push(skapi.authentication().updateSession({ refreshToken: !!(restore === null || restore === void 0 ? void 0 : restore.connection) }).catch(err => {\n                    skapi.user = null;\n                }));\n            }\n            yield Promise.all(process);\n            const storeClassProperties = () => {\n                if (skapi.__class_properties_has_been_cached) {\n                    return;\n                }\n                let data = {};\n                const to_be_cached = [\n                    '__startKey_keys',\n                    '__cached_requests',\n                    '__request_signup_confirmation',\n                    'connection',\n                ];\n                if (skapi.connection) {\n                    for (let k of to_be_cached) {\n                        data[k] = skapi[k];\n                    }\n                    sessionStorage.setItem(`${service_id}#${service_owner}`, JSON.stringify(data));\n                    skapi.__class_properties_has_been_cached = true;\n                }\n            };\n            window.addEventListener('beforeunload', storeClassProperties);\n            window.addEventListener(\"visibilitychange\", storeClassProperties);\n            return skapi.connection;\n        }))(this).catch(err => { throw err; });\n    }\n    get user() {\n        if (this.__user && Object.keys(this.__user).length) {\n            return JSON.parse(JSON.stringify(this.__user));\n        }\n        else {\n            return null;\n        }\n    }\n    set user(value) {\n    }\n    static connect(service_id, service_owner, autoLogin = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const skapi = new Skapi(service_id, service_owner, autoLogin);\n            yield skapi.__connection;\n            return skapi;\n        });\n    }\n    authentication() {\n        if (!this.userPool) {\n            throw new skapi_error_1.default('User pool is missing', { code: 'INVALID_REQUEST' });\n        }\n        const updateSession = (option) => {\n            let { refreshToken = false } = option || {};\n            return new Promise((res, rej) => {\n                var _a;\n                let currentUser = ((_a = this.userPool) === null || _a === void 0 ? void 0 : _a.getCurrentUser()) || null;\n                this.cognitoUser = currentUser;\n                if (currentUser === null) {\n                    rej(null);\n                }\n                currentUser.getSession((err, session) => {\n                    if (err) {\n                        rej(err);\n                    }\n                    const updateAttributes = (sessionToMerge) => __awaiter(this, void 0, void 0, function* () {\n                        if (sessionToMerge.isValid() && currentUser) {\n                            currentUser.getUserAttributes((attrErr, attributes) => {\n                                if (attrErr) {\n                                    rej(attrErr);\n                                }\n                                else {\n                                    let normalized_attributes = {};\n                                    let user = {};\n                                    for (let i of attributes) {\n                                        normalized_attributes[i.Name] = i.Value;\n                                        let key_1 = i.Name.replace('custom:', '');\n                                        user[key_1] = i.Value;\n                                        if (i.Name === 'custom:service' && normalized_attributes[i.Name] !== this.service) {\n                                            rej(new skapi_error_1.default('The user is not registered to the service.', { code: 'INVALID_REQUEST' }));\n                                        }\n                                    }\n                                    for (let k of [\n                                        'address_public',\n                                        'birthdate_public',\n                                        'email_public',\n                                        'email_subscription',\n                                        'gender_public',\n                                        'phone_number_public'\n                                    ]) {\n                                        if (k.includes('_public')) {\n                                            if (user.hasOwnProperty(k.split('_')[0])) {\n                                                user[k] = user.hasOwnProperty(k) ? Number(user[k]) : 0;\n                                            }\n                                            else {\n                                                delete user[k];\n                                            }\n                                        }\n                                        else {\n                                            user[k] = user.hasOwnProperty(k) ? Number(user[k]) : 0;\n                                        }\n                                    }\n                                    for (let k of [\n                                        'email_verified',\n                                        'phone_number_verified'\n                                    ]) {\n                                        if (user[k.split('_')[0]]) {\n                                            user[k] = user.hasOwnProperty(k) ? user[k] === 'true' : false;\n                                        }\n                                        else if (user.hasOwnProperty(k)) {\n                                            delete user[k];\n                                        }\n                                    }\n                                    sessionToMerge.attributes = normalized_attributes;\n                                    this.session = sessionToMerge;\n                                    user.access_group = Number(this.session.idToken.payload.access_group);\n                                    user.user_id = user.sub;\n                                    delete user.sub;\n                                    this.__user = user;\n                                    res(user);\n                                }\n                            });\n                        }\n                        else {\n                            rej(new skapi_error_1.default('Invalid session.', { code: 'INVALID_REQUEST' }));\n                        }\n                    });\n                    if (session) {\n                        if (refreshToken) {\n                            currentUser === null || currentUser === void 0 ? void 0 : currentUser.refreshSession(session.getRefreshToken(), (refreshErr, refreshedSession) => {\n                                if (refreshErr) {\n                                    rej(refreshErr);\n                                }\n                                updateAttributes(refreshedSession).catch(err => rej(err));\n                            });\n                        }\n                        else {\n                            updateAttributes(session).catch(err => rej(err));\n                        }\n                    }\n                    else {\n                        rej(new skapi_error_1.default('Current session does not exist.', { code: 'INVALID_REQUEST' }));\n                    }\n                });\n            });\n        };\n        const createCognitoUser = (email) => __awaiter(this, void 0, void 0, function* () {\n            let hash = null;\n            if (email) {\n                hash = this.__serviceHash[email] || (yield this.updateConnection({ request_hash: email })).hash;\n            }\n            else {\n                if (this.session) {\n                    hash = this.session.idToken.payload['cognito:username'];\n                }\n                else {\n                    throw new skapi_error_1.default('E-Mail is required.', { code: 'INVALID_PARAMETER' });\n                }\n            }\n            return {\n                cognitoUser: new amazon_cognito_identity_js_1.CognitoUser({\n                    Username: hash,\n                    Pool: this.userPool\n                }),\n                cognitoUsername: hash\n            };\n        });\n        const authenticateUser = (username, password) => {\n            return new Promise((res, rej) => __awaiter(this, void 0, void 0, function* () {\n                this.logout();\n                this.__request_signup_confirmation = null;\n                this.__disabledAccount = null;\n                let initUser = yield createCognitoUser(username);\n                this.cognitoUser = initUser.cognitoUser;\n                username = initUser.cognitoUsername;\n                let authenticationDetails = new amazon_cognito_identity_js_1.AuthenticationDetails({\n                    Username: username,\n                    Password: password\n                });\n                this.cognitoUser.authenticateUser(authenticationDetails, {\n                    newPasswordRequired: (userAttributes, requiredAttributes) => {\n                        this.__request_signup_confirmation = username;\n                        rej(new skapi_error_1.default(\"User's signup confirmation is required.\", { code: 'SIGNUP_CONFIRMATION_NEEDED' }));\n                    },\n                    onSuccess: (logged) => {\n                        updateSession().then(session => {\n                            res(session);\n                        });\n                    },\n                    onFailure: (err) => {\n                        let error = [err.message || 'Failed to authenticate user.', (err === null || err === void 0 ? void 0 : err.code) || 'INVALID_REQUEST'];\n                        if (err.code === \"NotAuthorizedException\") {\n                            if (err.message === \"User is disabled.\") {\n                                this.__disabledAccount = username;\n                                error = ['This account is disabled.', 'USER_IS_DISABLED'];\n                            }\n                            else {\n                                error = ['Incorrect username or password.', 'INCORRECT_USERNAME_OR_PASSWORD'];\n                            }\n                        }\n                        rej(new skapi_error_1.default(error[0], { code: error[1], cause: err }));\n                    }\n                });\n            }));\n        };\n        return { updateSession, authenticateUser, createCognitoUser };\n    }\n    requireAdmin(option) {\n        var _a, _b, _c, _d, _e, _f;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_b = (_a = this.session) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b['custom:service']) === this.service) {\n                if (((_d = (_c = this.session) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d['custom:service_owner']) === this.host) {\n                    if (!(option === null || option === void 0 ? void 0 : option.ignoreVerification) && !((_f = (_e = this.session) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.email_verified)) {\n                        throw new skapi_error_1.default('Email verification is required.', { code: 'INVALID_REQUEST' });\n                    }\n                    return true;\n                }\n                if (option === null || option === void 0 ? void 0 : option.throwError) {\n                    throw new skapi_error_1.default('Admin access is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            else {\n                this.logout();\n                if (option === null || option === void 0 ? void 0 : option.throwError) {\n                    throw new skapi_error_1.default('User login is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            return false;\n        });\n    }\n    getBlob(params, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let p = (0, utils_1.checkParams)(params, {\n                url: (v) => (0, utils_1.validateUrl)(v)\n            }, ['url']);\n            return yield this.request(p.url, option || null, { method: 'get', auth: p.url.includes('/auth/'), contentType: null, responseType: 'blob' });\n        });\n    }\n    mock(data, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.request('test-api', data, options);\n        });\n    }\n    secureRequest(request) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let paramsStruct = {\n                url: (v) => {\n                    return (0, utils_1.validateUrl)(v);\n                },\n                data: null,\n                sync: ['boolean', () => true]\n            };\n            if (Array.isArray(request)) {\n                for (let r of request) {\n                    r = (0, utils_1.checkParams)(r, paramsStruct);\n                }\n            }\n            else {\n                request = (0, utils_1.checkParams)(request, paramsStruct);\n            }\n            return yield this.request('post-secure', request, { auth: true });\n        });\n    }\n    getFormResponse() {\n        let params = new URLSearchParams(window.location.search);\n        for (let [key, val] of params.entries()) {\n            if (key.substring(0, 5) !== 'form-') {\n                continue;\n            }\n            let stored = window.sessionStorage.getItem(key);\n            if (stored) {\n                window.sessionStorage.removeItem(key);\n                try {\n                    stored = JSON.parse(stored);\n                }\n                catch (err) { }\n            }\n            if (typeof stored === 'object' && stored[val]) {\n                return stored[val];\n            }\n            else {\n                continue;\n            }\n        }\n        return null;\n    }\n    request(url, data = null, options = {}) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        return __awaiter(this, void 0, void 0, function* () {\n            let { auth = false, method = 'post', meta = null, bypassAwaitConnection = false } = options;\n            let __connection = bypassAwaitConnection ? null : (yield this.__connection);\n            let token = auth ? (_b = (_a = this.session) === null || _a === void 0 ? void 0 : _a.idToken) === null || _b === void 0 ? void 0 : _b.jwtToken : null;\n            if (auth) {\n                if (!token) {\n                    this.logout();\n                    throw new skapi_error_1.default('User login is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            let isExternalUrl = '';\n            try {\n                isExternalUrl = (0, utils_1.validateUrl)(url);\n            }\n            catch (err) {\n            }\n            const getEndpoint = (dest, auth) => __awaiter(this, void 0, void 0, function* () {\n                const endpoints = yield Promise.all([\n                    this.admin_endpoint,\n                    this.record_endpoint\n                ]);\n                const admin = endpoints[0];\n                const record = endpoints[1];\n                const get_ep = () => {\n                    switch (dest) {\n                        case 'get-serviceletters':\n                        case 'delete-newsletter':\n                        case 'block-account':\n                        case 'register-service':\n                        case 'get-users':\n                        case 'post-userdata':\n                        case 'remove-account':\n                        case 'post-secure':\n                        case 'get-newsletters':\n                        case 'subscribe-newsletter':\n                        case 'signup':\n                        case 'confirm-signup':\n                        case 'recover-account':\n                        case 'test-api':\n                        case 'service':\n                            return {\n                                public: admin.admin_public,\n                                private: admin.admin_private\n                            };\n                        case 'post-record':\n                        case 'get-records':\n                        case 'subscription':\n                        case 'get-subscription':\n                        case 'del-records':\n                        case 'get-table':\n                        case 'get-tag':\n                        case 'get-index':\n                        case 'storage-info':\n                            return {\n                                private: record.record_private,\n                                public: record.record_public\n                            };\n                    }\n                };\n                return get_ep()[auth ? 'private' : 'public'] + dest;\n            });\n            let endpoint = isExternalUrl || (yield getEndpoint(url, !!auth));\n            let service = ((_d = (_c = this.session) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d['custom:service']) || (__connection === null || __connection === void 0 ? void 0 : __connection.service) || this.service;\n            let service_owner = ((_f = (_e = this.session) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f['custom:service_owner']) || (__connection === null || __connection === void 0 ? void 0 : __connection.owner) || this.service_owner;\n            if (meta) {\n                if (typeof meta === 'object' && !Array.isArray(meta)) {\n                    meta = JSON.parse(JSON.stringify(meta));\n                }\n                else {\n                    throw new skapi_error_1.default('Invalid meta data.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            if (Array.isArray(data) || data && typeof data !== 'object') {\n                throw new skapi_error_1.default('Request data should be a JSON Object | FormData | HTMLFormElement.', { code: 'INVALID_REQUEST' });\n            }\n            let required = { service, service_owner };\n            let fetchOptions = {};\n            let { refresh = false } = options.fetchOptions || {};\n            if (options.fetchOptions && Object.keys(options.fetchOptions).length) {\n                let fetOpt = (0, utils_1.checkParams)({\n                    limit: ((_g = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _g === void 0 ? void 0 : _g.limit) || 100,\n                    startKey: ((_h = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _h === void 0 ? void 0 : _h.startKey) || null,\n                    ascending: typeof ((_j = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _j === void 0 ? void 0 : _j.ascending) === 'boolean' ? options.fetchOptions.ascending : true\n                }, {\n                    limit: ['number', () => 100],\n                    startKey: null,\n                    ascending: ['boolean', () => true]\n                });\n                if (fetOpt.hasOwnProperty('limit') && typeof fetOpt.limit === 'number') {\n                    if (fetOpt.limit > 1000) {\n                        throw new skapi_error_1.default('Fetch limit should be below 1000.', { code: 'INVALID_REQUEST' });\n                    }\n                    Object.assign(fetchOptions, { limit: fetOpt.limit });\n                }\n                if (fetOpt.hasOwnProperty('startKey') && typeof fetOpt.startKey === 'object' && fetOpt.startKey && Object.keys(fetOpt.startKey)) {\n                    Object.assign(fetchOptions, { startKey: fetOpt.startKey });\n                }\n                if (fetOpt.hasOwnProperty('ascending') && typeof fetOpt.ascending === 'boolean') {\n                    Object.assign(fetchOptions, { ascending: fetOpt.ascending });\n                }\n            }\n            Object.assign(required, fetchOptions);\n            let metaData = (0, utils_1.extractFormMetaData)(data);\n            let isForm = metaData === null || metaData === void 0 ? void 0 : metaData.meta;\n            let fileKeys = (metaData === null || metaData === void 0 ? void 0 : metaData.files) || [];\n            let normalize_form = (data, isForm, addRequired = false) => __awaiter(this, void 0, void 0, function* () {\n                var _k, _l;\n                if (isForm === null) {\n                    return data;\n                }\n                let isFormEl = false;\n                if (data instanceof HTMLFormElement) {\n                    data = new FormData(data);\n                    isFormEl = true;\n                }\n                if (!(data instanceof FormData)) {\n                    return data;\n                }\n                if (addRequired) {\n                    for (let k in required) {\n                        if (required[k] !== undefined) {\n                            data.set(k, typeof required[k] === 'string' ? required[k] : new Blob([JSON.stringify(required[k])], {\n                                type: 'application/json'\n                            }));\n                        }\n                    }\n                }\n                for (let k in isForm) {\n                    if (isForm[k] !== undefined) {\n                        data[fileKeys.includes(k) ? \"append\" : \"set\"](k, typeof isForm[k] === 'string' ? isForm[k] : new Blob([JSON.stringify(isForm[k])], {\n                            type: 'application/json'\n                        }));\n                    }\n                }\n                if ((_k = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _k === void 0 ? void 0 : _k.formData) {\n                    if (typeof ((_l = options === null || options === void 0 ? void 0 : options.fetchOptions) === null || _l === void 0 ? void 0 : _l.formData) === 'function') {\n                        if (!isFormEl) {\n                            throw new skapi_error_1.default('Form data should be HTMLFormElement when formData() callback is used.', { code: 'INVALID_PARAMETER' });\n                        }\n                        let cb = options.fetchOptions.formData(data);\n                        if (cb instanceof Promise) {\n                            cb = yield cb;\n                        }\n                        if (cb instanceof FormData) {\n                            data = cb;\n                        }\n                        else {\n                            throw new skapi_error_1.default('Callback for extractFormData() should return FormData', { code: 'INVALID_PARAMETER' });\n                        }\n                    }\n                    else {\n                        throw new skapi_error_1.default('Callback \"formData\" should type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                return data;\n            });\n            if (meta) {\n                meta = Object.assign(required, meta);\n                data = yield normalize_form(data, isForm);\n            }\n            else {\n                if (!data && isForm === null) {\n                    data = required;\n                }\n                else {\n                    if (isForm) {\n                        data = yield normalize_form(data, isForm, true);\n                    }\n                    else {\n                        data = Object.assign(required, data);\n                    }\n                }\n            }\n            let requestKey = this.load_startKey_keys({\n                params: data,\n                url: isExternalUrl || url,\n                refresh: isForm ? true : refresh\n            });\n            if (requestKey && typeof requestKey === 'object') {\n                return requestKey;\n            }\n            if (typeof requestKey === 'string') {\n                if (!(this.__pendingRequest[requestKey] instanceof Promise)) {\n                    let headers = {\n                        'Accept': '*/*'\n                    };\n                    if (token) {\n                        headers.Authorization = token;\n                    }\n                    if (meta) {\n                        headers[\"Content-Meta\"] = JSON.stringify(meta);\n                    }\n                    if (options.hasOwnProperty('contentType')) {\n                        if (options === null || options === void 0 ? void 0 : options.contentType) {\n                            headers[\"Content-Type\"] = options.contentType;\n                        }\n                    }\n                    else if (!(data instanceof FormData)) {\n                        headers[\"Content-Type\"] = 'application/json';\n                    }\n                    let opt = { headers };\n                    if (options === null || options === void 0 ? void 0 : options.responseType) {\n                        opt.responseType = options.responseType;\n                    }\n                    if (method === 'post') {\n                        this.__pendingRequest[requestKey] = this._post(endpoint, data, opt);\n                    }\n                    else if (method === 'get') {\n                        this.__pendingRequest[requestKey] = this._get(endpoint, data, opt);\n                    }\n                }\n                try {\n                    let response = yield this.__pendingRequest[requestKey];\n                    if (isForm) {\n                        return response;\n                    }\n                    else {\n                        return yield this.update_startKey_keys({\n                            hashedParam: requestKey,\n                            url,\n                            response\n                        });\n                    }\n                }\n                catch (err) {\n                    throw err;\n                }\n                finally {\n                    if (requestKey && this.__pendingRequest.hasOwnProperty(requestKey)) {\n                        delete this.__pendingRequest[requestKey];\n                    }\n                }\n            }\n        });\n    }\n    load_startKey_keys(option) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        let { params = {}, url, refresh = false } = option || {};\n        if (params.hasOwnProperty('startKey')) {\n            if (typeof params.startKey !== 'object' && !Object.keys(params.startKey).length ||\n                params.startKey !== 'end') {\n                throw new skapi_error_1.default(`\"${params.startKey}\" is invalid startKey key.`, { code: 'INVALID_PARAMETER' });\n            }\n            switch (params.startKey) {\n                case 'end':\n                    return {\n                        list: [],\n                        startKey: 'end',\n                        endOfList: true\n                    };\n                case 'start':\n                    delete params.startKey;\n            }\n        }\n        let hashedParams = (() => {\n            if (params && typeof params === 'object' && Object.keys(params).length) {\n                function orderObjectKeys(obj) {\n                    function sortObject(obj) {\n                        if (typeof obj === 'object' && obj) {\n                            return Object.keys(obj).sort().reduce((res, key) => (res[key] = obj[key], res), {});\n                        }\n                        return obj;\n                    }\n                    ;\n                    let _obj = sortObject(obj);\n                    for (let k in _obj) {\n                        if (_obj[k] && typeof _obj[k] === 'object') {\n                            _obj[k] = sortObject(obj[k]);\n                        }\n                    }\n                    return _obj;\n                }\n                return url + '/' + JSON.stringify(orderObjectKeys(params));\n            }\n            return url + '/' + this.service;\n        })();\n        if (refresh && ((_b = (_a = this.__startKey_keys) === null || _a === void 0 ? void 0 : _a[url]) === null || _b === void 0 ? void 0 : _b[hashedParams])) {\n            if (((_c = this.__cached_requests) === null || _c === void 0 ? void 0 : _c[url]) && ((_e = (_d = this.__cached_requests) === null || _d === void 0 ? void 0 : _d[url]) === null || _e === void 0 ? void 0 : _e[hashedParams])) {\n                delete this.__cached_requests[url][hashedParams];\n            }\n            if (Array.isArray(this.__startKey_keys[url][hashedParams]) && this.__startKey_keys[url][hashedParams].length) {\n                for (let p of this.__startKey_keys[url][hashedParams]) {\n                    let hashedParams_cached = hashedParams + '/' + JSON.stringify(p);\n                    if (((_f = this.__cached_requests) === null || _f === void 0 ? void 0 : _f[url]) && ((_h = (_g = this.__cached_requests) === null || _g === void 0 ? void 0 : _g[url]) === null || _h === void 0 ? void 0 : _h[hashedParams_cached])) {\n                        delete this.__cached_requests[url][hashedParams_cached];\n                    }\n                }\n            }\n            delete this.__startKey_keys[url][hashedParams];\n            return hashedParams;\n        }\n        if (!Array.isArray((_k = (_j = this.__startKey_keys) === null || _j === void 0 ? void 0 : _j[url]) === null || _k === void 0 ? void 0 : _k[hashedParams])) {\n            return hashedParams;\n        }\n        let list_of_startKeys = this.__startKey_keys[url][hashedParams];\n        let last_startKey_key = list_of_startKeys[list_of_startKeys.length - 1];\n        let cache_hashedParams = hashedParams;\n        if (last_startKey_key) {\n            if (last_startKey_key === '\"end\"') {\n                return {\n                    list: [],\n                    startKey: 'end',\n                    endOfList: true\n                };\n            }\n            else {\n                cache_hashedParams += ('/' + last_startKey_key);\n                params.startKey = JSON.parse(last_startKey_key);\n            }\n        }\n        if ((_m = (_l = this.__cached_requests) === null || _l === void 0 ? void 0 : _l[url]) === null || _m === void 0 ? void 0 : _m[cache_hashedParams]) {\n            return (_p = (_o = this.__cached_requests) === null || _o === void 0 ? void 0 : _o[url]) === null || _p === void 0 ? void 0 : _p[cache_hashedParams];\n        }\n        return hashedParams;\n    }\n    _post(url, params, option) {\n        let responseType = null;\n        if (option.hasOwnProperty('responseType')) {\n            responseType = option.responseType;\n            delete option.responseType;\n        }\n        let opt = Object.assign({\n            method: 'POST'\n        }, option, {\n            body: params instanceof FormData ? params : JSON.stringify(params)\n        });\n        return this._fetch(url, opt, responseType);\n    }\n    postRecord(form, option) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            let is_admin = yield this.requireAdmin({ ignoreVerification: true });\n            let { formData } = option;\n            let fetchOptions = {};\n            if (typeof formData === 'function') {\n                fetchOptions.formData = formData;\n            }\n            option = (0, utils_1.checkParams)(option || {}, {\n                record_id: 'string',\n                access_group: ['number', 'private'],\n                table: 'string',\n                subscription_group: 'number',\n                reference: ['string', null],\n                index: {\n                    name: 'string',\n                    value: ['string', 'number', 'boolean']\n                },\n                tags: (v) => {\n                    if (v === null) {\n                        return v;\n                    }\n                    if (typeof v === 'string') {\n                        return [v];\n                    }\n                    if (Array.isArray(v)) {\n                        for (let i of v) {\n                            if (typeof i !== 'string') {\n                                throw new skapi_error_1.default(`\"tags\" should be type: <string | string[]>`, { code: 'INVALID_PARAMETER' });\n                            }\n                        }\n                        return v;\n                    }\n                    throw new skapi_error_1.default(`\"tags\" should be type: <string | string[]>`, { code: 'INVALID_PARAMETER' });\n                },\n                config: {\n                    reference_limit: (v) => {\n                        if (v === null) {\n                            return null;\n                        }\n                        else if (typeof v === 'number') {\n                            if (0 > v) {\n                                throw new skapi_error_1.default(`\"reference_limit\" should be >= 0`, { code: 'INVALID_PARAMETER' });\n                            }\n                            if (v > 4503599627370546) {\n                                throw new skapi_error_1.default(`\"reference_limit\" should be <= 4503599627370546`, { code: 'INVALID_PARAMETER' });\n                            }\n                            return v;\n                        }\n                        throw new skapi_error_1.default(`\"reference_limit\" should be type: <number | null>`, { code: 'INVALID_PARAMETER' });\n                    },\n                    allow_multiple_reference: 'boolean',\n                    private_access: (v) => {\n                        let param = 'config.private_access';\n                        if (v === null) {\n                            return null;\n                        }\n                        if (v && typeof v === 'string') {\n                            v = [v];\n                        }\n                        if (Array.isArray(v)) {\n                            for (let u of v) {\n                                (0, utils_1.validateUserId)(u, `User ID in \"${param}\"`);\n                                if (this.__user && u === this.__user.user_id) {\n                                    throw new skapi_error_1.default(`\"${param}\" should not be the uploader's user ID.`, { code: 'INVALID_PARAMETER' });\n                                }\n                            }\n                        }\n                        else {\n                            throw new skapi_error_1.default(`\"${param}\" should be an array of user ID.`, { code: 'INVALID_PARAMETER' });\n                        }\n                        return v;\n                    }\n                }\n            }, [], ['response', 'formData', 'onerror']);\n            delete option.response;\n            delete option.formData;\n            delete option.onerror;\n            if (!(option === null || option === void 0 ? void 0 : option.table) && !(option === null || option === void 0 ? void 0 : option.record_id)) {\n                throw new skapi_error_1.default('Either \"record_id\" or \"table\" should have a value.', { code: 'INVALID_PARAMETER' });\n            }\n            if (option === null || option === void 0 ? void 0 : option.index) {\n                if (!((_a = option.index) === null || _a === void 0 ? void 0 : _a.name) || typeof ((_b = option.index) === null || _b === void 0 ? void 0 : _b.name) !== 'string') {\n                    throw new skapi_error_1.default('\"index.name\" is required. type: string.', { code: 'INVALID_PARAMETER' });\n                }\n                (0, utils_1.checkWhiteSpaceAndSpecialChars)(option.index.name, 'index name', true);\n                if (!option.index.hasOwnProperty('value')) {\n                    throw new skapi_error_1.default('\"index.value\" is required.', { code: 'INVALID_PARAMETER' });\n                }\n                if (typeof option.index.value === 'string') {\n                    (0, utils_1.checkWhiteSpaceAndSpecialChars)(option.index.value, 'index value', false, true);\n                }\n                else if (typeof option.index.value === 'number') {\n                    if (option.index.value > this.__index_number_range || option.index.value < -this.__index_number_range) {\n                        throw new skapi_error_1.default(`Number value should be within range -${this.__index_number_range} ~ +${this.__index_number_range}`, { code: 'INVALID_PARAMETER' });\n                    }\n                }\n            }\n            if (is_admin) {\n                if ((option === null || option === void 0 ? void 0 : option.access_group) === 'private') {\n                    throw new skapi_error_1.default('Service owner cannot write private records.', { code: 'INVALID_REQUEST' });\n                }\n                if (option.hasOwnProperty('subscription_group')) {\n                    throw new skapi_error_1.default('Service owner cannot write to subscription table.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            let options = { auth: true };\n            let postData = null;\n            if (form instanceof HTMLFormElement || form instanceof FormData) {\n                Object.assign(options, { meta: option });\n            }\n            else {\n                postData = Object.assign({ data: form }, option);\n            }\n            if (Object.keys(fetchOptions).length) {\n                Object.assign(options, { fetchOptions });\n            }\n            return (0, utils_1.normalize_record_data)(yield this.request('post-record', postData || form, options));\n        });\n    }\n    getRecords(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const indexTypes = {\n                '$record_id': 'string',\n                '$updated': 'number',\n                '$uploaded': 'number',\n                '$referenced_count': 'number'\n            };\n            const struct = {\n                table: 'string',\n                reference: 'string',\n                access_group: ['number', 'private'],\n                subscription: {\n                    user_id: (v) => (0, utils_1.validateUserId)(v, 'User ID in \"subscription.user_id\"'),\n                    group: 'number'\n                },\n                index: {\n                    name: (v) => {\n                        if (typeof v !== 'string') {\n                            throw new skapi_error_1.default('\"index.name\" should be type: string.', { code: 'INVALID_PARAMETER' });\n                        }\n                        if (indexTypes.hasOwnProperty(v)) {\n                            return v;\n                        }\n                        return (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index.name', true, false);\n                    },\n                    value: (v) => {\n                        var _a;\n                        if (((_a = params.index) === null || _a === void 0 ? void 0 : _a.name) && indexTypes.hasOwnProperty(params.index.name)) {\n                            let tp = indexTypes[params.index.name];\n                            if (typeof v === tp) {\n                                return v;\n                            }\n                            else {\n                                throw new skapi_error_1.default(`\"index.value\" should be type: ${tp}.`, { code: 'INVALID_PARAMETER' });\n                            }\n                        }\n                        if (typeof v === 'number') {\n                            if (v > this.__index_number_range || v < -this.__index_number_range) {\n                                throw new skapi_error_1.default(`Number value should be within range -${this.__index_number_range} ~ +${this.__index_number_range}`, { code: 'INVALID_PARAMETER' });\n                            }\n                            return v;\n                        }\n                        else if (typeof v === 'boolean') {\n                            return v;\n                        }\n                        else {\n                            return (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index.value', false, true);\n                        }\n                    },\n                    condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne'],\n                    range: (v) => {\n                        if (!('value' in params.index)) {\n                            throw new skapi_error_1.default('\"index.value\" is required.', { code: 'INVALID_PARAMETER' });\n                        }\n                        if (params.index.name === '$record_id') {\n                            throw new skapi_error_1.default(`Cannot do \"index.range\" on ${params.index.name}`, { code: 'INVALID_PARAMETER' });\n                        }\n                        if (typeof params.index.value !== typeof v) {\n                            throw new skapi_error_1.default('\"index.range\" type should match the type of \"index.value\".', { code: 'INVALID_PARAMETER' });\n                        }\n                        if (typeof v === 'string') {\n                            return (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index.value');\n                        }\n                        return v;\n                    }\n                },\n                tags: 'string'\n            };\n            params = (0, utils_1.checkParams)(params || {}, struct, ['table']);\n            if ((params === null || params === void 0 ? void 0 : params.subscription) && !this.session) {\n                throw new skapi_error_1.default('Requires login.', { code: 'INVALID_REQUEST' });\n            }\n            let result = yield this.request('get-records', params, Object.assign({ auth: params.hasOwnProperty('access_group') && (params.access_group === 'private' || params.access_group > 0) ? true : !!this.__user }, { fetchOptions }));\n            for (let i in result.list) {\n                result.list[i] = (0, utils_1.normalize_record_data)(result.list[i]);\n            }\n            ;\n            return result;\n        });\n    }\n    getTable(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let res = yield this.request('get-table', (0, utils_1.checkParams)(params || {}, {\n                table: 'string',\n                condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n            }), Object.assign({ auth: true }, { fetchOptions }));\n            let convert = {\n                'cnt_rec': 'number_of_records',\n                'tbl': 'table',\n                'srvc': 'service'\n            };\n            if (Array.isArray(res.list)) {\n                for (let t of res.list) {\n                    for (let k in convert) {\n                        if (t.hasOwnProperty(k)) {\n                            t[convert[k]] = t[k];\n                            delete t[k];\n                        }\n                    }\n                }\n            }\n            return res;\n        });\n    }\n    getIndex(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let p = (0, utils_1.checkParams)(params || {}, {\n                table: 'string',\n                index: (v) => (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'index name', true, false),\n                order_by: {\n                    name: [\n                        'average_number',\n                        'total_number',\n                        'number_count',\n                        'average_bool',\n                        'total_bool',\n                        'bool_count',\n                        'string_count',\n                        'index_name'\n                    ],\n                    value: ['string', 'number', 'boolean'],\n                    condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n                }\n            }, ['table']);\n            if (p.hasOwnProperty('order_by')) {\n                if (p.order_by === 'index_name') {\n                    if (!p.hasOwnProperty('index')) {\n                        throw new skapi_error_1.default('\"index\" is required for ordered by \"index_name\".', { code: 'INVALID_PARAMETER' });\n                    }\n                    if (p.index.substring(p.index.length - 1) !== '.') {\n                        throw new skapi_error_1.default('\"index\" should be parent \"index name\".', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                if (p.order_by.hasOwnProperty('condition') && !p.order_by.hasOwnProperty('value')) {\n                    throw new skapi_error_1.default('\"value\" is required for \"condition\".', { code: 'INVALID_PARAMETER' });\n                }\n            }\n            let res = yield this.request('get-index', p, Object.assign({ auth: true }, { fetchOptions }));\n            let convert = {\n                'cnt_bool': 'boolean_count',\n                'cnt_numb': 'number_count',\n                'totl_numb': 'total_number',\n                'totl_bool': 'total_bool',\n                'avrg_numb': 'average_number',\n                'avrg_bool': 'average_bool',\n                'cnt_str': 'string_count'\n            };\n            if (Array.isArray(res.list)) {\n                res.list = res.list.map((i) => {\n                    let iSplit = i.idx.split('/');\n                    let resolved = {\n                        table: iSplit[1],\n                        index: iSplit[2],\n                        number_of_records: i.cnt_rec\n                    };\n                    for (let k in convert) {\n                        if (i === null || i === void 0 ? void 0 : i[k]) {\n                            resolved[convert[k]] = i[k];\n                        }\n                        if (resolved === null || resolved === void 0 ? void 0 : resolved.number_of_number_values) {\n                            resolved.average_of_number_values = i.totl_numb / i.cnt_numb;\n                        }\n                        if (resolved === null || resolved === void 0 ? void 0 : resolved.number_of_boolean_values) {\n                            resolved.average_of_boolean_values = i.totl_bool / i.cnt_bool;\n                        }\n                    }\n                    return resolved;\n                });\n            }\n            return res;\n        });\n    }\n    getTag(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let res = yield this.request('get-tag', (0, utils_1.checkParams)(params || {}, {\n                table: 'string',\n                tag: 'string',\n                condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n            }), Object.assign({ auth: true }, { fetchOptions }));\n            if (Array.isArray(res.list)) {\n                for (let i in res.list) {\n                    let item = res.list[i];\n                    let tSplit = item.tag.split('/');\n                    res.list[i] = {\n                        table: tSplit[1],\n                        tag: tSplit[0],\n                        number_of_records: item.cnt_rec\n                    };\n                }\n            }\n            return res;\n        });\n    }\n    deleteRecords(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isAdmin = yield this.requireAdmin();\n            if (isAdmin && !(params === null || params === void 0 ? void 0 : params.service)) {\n                throw new skapi_error_1.default('Service ID is required.', { code: 'INVALID_PARAMETER' });\n            }\n            if (!isAdmin && !(params === null || params === void 0 ? void 0 : params.table)) {\n                throw new skapi_error_1.default('\"table\" is required.', { code: 'INVALID_PARAMETER' });\n            }\n            if (params === null || params === void 0 ? void 0 : params.record_id) {\n                return yield this.request('del-records', {\n                    service: params.service,\n                    record_id: (v => {\n                        let id = (0, utils_1.checkWhiteSpaceAndSpecialChars)(v, 'record_id', false);\n                        if (typeof id === 'string') {\n                            return [id];\n                        }\n                        return id;\n                    })(params.record_id)\n                }, { auth: true });\n            }\n            else {\n                if (!(params === null || params === void 0 ? void 0 : params.table)) {\n                    throw new skapi_error_1.default('Either \"table\" or \"record_id\" is required.', { code: 'INVALID_PARAMETER' });\n                }\n                let struct = {\n                    access_group: ['number', 'private'],\n                    table: {\n                        name: 'string',\n                        subscription: (v) => {\n                            if (isAdmin) {\n                                return (0, utils_1.validateUserId)(v, 'User ID in \"table.subscription\"');\n                            }\n                            throw new skapi_error_1.default('\"table.subscription\" is an invalid parameter key.', { code: 'INVALID_PARAMETER' });\n                        },\n                        subscription_group: (v) => {\n                            var _a;\n                            if (isAdmin && typeof ((_a = params === null || params === void 0 ? void 0 : params.table) === null || _a === void 0 ? void 0 : _a.subscription) !== 'string') {\n                                throw new skapi_error_1.default('\"table.subscription\" is required.', { code: 'INVALID_PARAMETER' });\n                            }\n                            if (typeof v === 'number') {\n                                if (v > 0 && v < 99) {\n                                    return v;\n                                }\n                            }\n                            throw new skapi_error_1.default('Subscription group should be between 0 ~ 99.', { code: 'INVALID_PARAMETER' });\n                        }\n                    }\n                };\n                params = (0, utils_1.checkParams)(params || {}, struct, isAdmin ? ['service'] : ['table', 'access_group']);\n            }\n            return yield this.request('del-records', params, { auth: true });\n        });\n    }\n    subscribeNewsletter(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let params = (0, utils_1.checkParams)(form || {}, {\n                email: (v) => (0, utils_1.validateEmail)(v),\n                bypassWelcome: ['boolean', () => true]\n            }, ['email']);\n            return yield this.request('subscribe-newsletter', params);\n        });\n    }\n    subscriptionGroupCheck(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            option = (0, utils_1.checkParams)(option, {\n                user_id: (v) => (0, utils_1.validateUserId)(v, '\"user_id\"'),\n                group: (v) => {\n                    if (v === '*') {\n                        return v;\n                    }\n                    if (typeof v !== 'number') {\n                        throw new skapi_error_1.default('\"group\" should be type: number.', { code: 'INVALID_PARAMETER' });\n                    }\n                    else if (v < 1 && v > 9) {\n                        throw new skapi_error_1.default('\"group\" should be within range 1 ~ 9.', { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                }\n            }, ['user_id', 'group']);\n            if (this.__user && option.user_id === this.__user.user_id) {\n                throw new skapi_error_1.default(`\"user_id\" cannot be the user's own ID.`, { code: 'INVALID_PARAMETER' });\n            }\n            return option;\n        });\n    }\n    subscribe(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            if (group === '*') {\n                throw new skapi_error_1.default('Cannot subscribe to all groups at once.', { code: 'INVALID_PARAMETER' });\n            }\n            return yield this.request('subscription', {\n                subscribe: user_id,\n                group\n            }, { auth: true });\n        });\n    }\n    unsubscribe(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            return yield this.request('subscription', {\n                unsubscribe: user_id,\n                group\n            }, { auth: true });\n        });\n    }\n    blockSubscriber(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            return yield this.request('subscription', { block: user_id, group }, { auth: true });\n        });\n    }\n    unblockSubscriber(option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, group } = yield this.subscriptionGroupCheck(option);\n            return yield this.request('subscription', { unblock: user_id, group }, { auth: true });\n        });\n    }\n    getUserSubscriptions(option) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            option = (0, utils_1.checkParams)(option, {\n                user_id: (v) => {\n                    try {\n                        return (0, utils_1.validateUserId)(v, '\"user_id\"');\n                    }\n                    catch (err) {\n                    }\n                    try {\n                        return (0, utils_1.validateEmail)(v);\n                    }\n                    catch (err) {\n                    }\n                    throw new skapi_error_1.default('\"subscriber\" should be either valid user ID or E-Mail.', { code: 'INVALID_PARAMETER' });\n                },\n                group: 'number'\n            }) || {};\n            return this.getSubscriptions({\n                subscriber: option.user_id || ((_a = this.__user) === null || _a === void 0 ? void 0 : _a.user_id),\n                group: option.group\n            });\n        });\n    }\n    getUserSubscribers(option) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            option = (0, utils_1.checkParams)(option, {\n                user_id: (v) => (0, utils_1.validateUserId)(v, '\"user_id\"'),\n                group: 'number'\n            }) || {};\n            let subParams = {\n                subscription: option.user_id || ((_a = this.__user) === null || _a === void 0 ? void 0 : _a.user_id),\n                group: option.group\n            };\n            return this.getSubscriptions(subParams);\n        });\n    }\n    getSubscriptions(params, fetchOptions, _mapper) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isNewsletterSub = false;\n            params = (0, utils_1.checkParams)(params, {\n                subscriber: (v) => {\n                    try {\n                        return (0, utils_1.validateUserId)(v, 'User ID in \"subscriber\"');\n                    }\n                    catch (err) {\n                    }\n                    try {\n                        let isEmail = (0, utils_1.validateEmail)(v);\n                        isNewsletterSub = true;\n                        return isEmail;\n                    }\n                    catch (err) {\n                    }\n                    throw new skapi_error_1.default('\"subscriber\" should be either valid user ID or E-Mail.', { code: 'INVALID_PARAMETER' });\n                },\n                group: 'number',\n                subscription: (v) => {\n                    try {\n                        return (0, utils_1.validateUserId)(v, 'User ID in \"subscription\"');\n                    }\n                    catch (err) {\n                    }\n                    if (typeof v === 'string' && v.length === 14) {\n                        return v;\n                    }\n                    throw new skapi_error_1.default('\"subscriber\" should be either valid service ID or user ID.', { code: 'INVALID_PARAMETER' });\n                },\n                blocked: 'boolean'\n            });\n            if (isNewsletterSub && !(params === null || params === void 0 ? void 0 : params.subscription)) {\n                params.subscription = this.service;\n            }\n            if (!params.subscriber && !params.subscription) {\n                throw new skapi_error_1.default('At least either \"subscriber\" or \"subscription\" should have a value.', { code: 'INVALID_PARAMETER' });\n            }\n            let response = yield this.request('get-subscription', params, Object.assign({ auth: !isNewsletterSub }, { fetchOptions }));\n            response.list = response.list.map(_mapper || ((s) => {\n                let subscription = {};\n                let subSplit = s.sub.split('#');\n                subscription.subscriber = subSplit[2];\n                subscription.subscription = subSplit[0];\n                subscription.group = parseInt(subSplit[1]);\n                subscription.timestamp = s.stmp;\n                subscription.blocked = s.grp.substring(0, 1) === 'N';\n                return subscription;\n            }));\n            return response;\n        });\n    }\n    getNewsletters(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isAdmin = yield this.requireAdmin();\n            let searchType = {\n                'message_id': 'string',\n                'timestamp': 'number',\n                'read': 'number',\n                'complaint': 'number',\n                'subject': 'string'\n            };\n            if (!params) {\n                if (!fetchOptions) {\n                    fetchOptions = {};\n                }\n                fetchOptions.ascending = false;\n            }\n            let _params = params || {\n                searchFor: 'timestamp',\n                value: 0,\n                condition: '>'\n            };\n            params = (0, utils_1.checkParams)(_params, {\n                searchFor: ['message_id', 'timestamp', 'read', 'complaint', 'group', 'subject'],\n                value: (v) => {\n                    if (typeof v !== searchType[_params.searchFor]) {\n                        throw new skapi_error_1.default(`\"value\" type does not match the type of \"${_params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    else if (typeof v === 'string' && !v) {\n                        throw new skapi_error_1.default('\"value\" should not be empty string.', { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                },\n                range: (v) => {\n                    if (!_params.hasOwnProperty('value') || typeof v !== typeof _params.value) {\n                        throw new skapi_error_1.default('\"range\" should match type of \"value\".', { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                },\n                condition: ['>', '>=', '=', '<', '<=', 'gt', 'gte', 'eq', 'lt', 'lte', () => '='],\n                group: (x) => {\n                    if (x !== 'newsletter' && !this.session) {\n                        throw new skapi_error_1.default('User should be logged in.', { code: 'INVALID_REQUEST' });\n                    }\n                    if (typeof x === 'string' && x !== 'newsletter') {\n                        throw new skapi_error_1.default('Group should be either \"newsletter\" or access group number.', { code: 'INVALID_PARAMETER' });\n                    }\n                    if (!isAdmin && x > parseInt(this.session.idToken.payload.access_group)) {\n                        throw new skapi_error_1.default('User has no access.', { code: 'INVALID_REQUEST' });\n                    }\n                    if (x === 'newsletter') {\n                        return 0;\n                    }\n                    return x;\n                }\n            }, ['searchFor', 'value', 'group']);\n            let mails = yield this.request(params.group === 0 ? 'get-newsletters' : 'get-serviceletters', params, Object.assign({ method: 'get', auth: params.group !== 0 }, { fetchOptions }));\n            let remap = {\n                'message_id': 'mid',\n                'timestamp': 'stmp',\n                'complaint': 'cmpl',\n                'read': 'read',\n                'subject': 'subj',\n                'bounced': 'bnce',\n                'url': 'url'\n            };\n            let defaults = {\n                'message_id': '',\n                'timestamp': 0,\n                'complaint': 0,\n                'read': 0,\n                'subject': '',\n                'bounced': 0,\n                'url': ''\n            };\n            mails.list = mails.list.map(m => {\n                let remapped = {};\n                for (let k in remap) {\n                    remapped[k] = m[remap[k]] || defaults[remap[k]];\n                }\n                return remapped;\n            });\n            return mails;\n        });\n    }\n    signup(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.logout();\n            let params = (0, utils_1.checkParams)(form || {}, {\n                email: (v) => (0, utils_1.validateEmail)(v),\n                password: (v) => (0, utils_1.validatePassword)(v),\n                name: 'string',\n                address: 'string',\n                gender: 'string',\n                birthdate: (v) => (0, utils_1.validateBirthdate)(v),\n                phone_number: (v) => (0, utils_1.validatePhoneNumber)(v),\n                email_public: ['boolean', () => false],\n                address_public: ['boolean', () => false],\n                gender_public: ['boolean', () => false],\n                birthdate_public: ['boolean', () => false],\n                phone_number_public: ['boolean', () => false],\n                email_subscription: ['boolean', () => false]\n            }, ['email', 'password']);\n            option = (0, utils_1.checkParams)(option || {}, {\n                confirmation: (v) => {\n                    if (typeof v === 'string') {\n                        return (0, utils_1.validateUrl)(v);\n                    }\n                    else if (typeof v === 'boolean') {\n                        return v;\n                    }\n                    else {\n                        throw new skapi_error_1.default('\"option.confirmation\" should be type: <string | boolean>.', { code: 'INVALID_PARAMETER' });\n                    }\n                },\n                login: (v) => {\n                    if (typeof v === 'boolean') {\n                        if (option.confirmation && v) {\n                            throw new skapi_error_1.default('\"login\" is not allowed when \"option.confirmation\" is true.', { code: 'INVALID_PARAMETER' });\n                        }\n                        return v;\n                    }\n                    throw new skapi_error_1.default('\"option.login\" should be type: boolean.', { code: 'INVALID_PARAMETER' });\n                }\n            });\n            let { login = false, confirmation = false } = option || {};\n            if (!confirmation && params.email_public) {\n                throw new skapi_error_1.default('\"option.confirmation\" should be true if \"email_public\" is set to true.', { code: 'INVALID_PARAMETER' });\n            }\n            yield this.request(\"signup\", params, { meta: option });\n            if (confirmation) {\n                return \"SUCCESS: The account has been created. User's email confirmation is required.\";\n            }\n            else if (login) {\n                return yield this.login({ email: params.email, password: params.password });\n            }\n            else {\n                return 'SUCCESS: The account has been created.';\n            }\n        });\n    }\n    logout() {\n        if (this.cognitoUser) {\n            this.cognitoUser.signOut();\n        }\n        let to_be_erased = {\n            'session': null,\n            '__startKey_keys': {},\n            '__cached_requests': {},\n            'user': null\n        };\n        for (let k in to_be_erased) {\n            this[k] = to_be_erased[k];\n        }\n        return 'SUCCESS: The user has been logged out.';\n    }\n    resendSignupConfirmation(redirect) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.__request_signup_confirmation) {\n                throw new skapi_error_1.default('Least one login attempt is required.', { code: 'INVALID_REQUEST' });\n            }\n            if (redirect) {\n                (0, utils_1.validateUrl)(redirect);\n            }\n            let resend = yield this.request(\"confirm-signup\", {\n                username: this.__request_signup_confirmation,\n                redirect\n            });\n            this.__request_signup_confirmation = null;\n            return resend;\n        });\n    }\n    recoverAccount(redirect = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof redirect === 'string') {\n                (0, utils_1.validateUrl)(redirect);\n            }\n            else if (typeof redirect !== 'boolean') {\n                throw new skapi_error_1.default('Argument should be type: <boolean | string>.', { code: 'INVALID_REQUEST' });\n            }\n            if (!this.__disabledAccount) {\n                throw new skapi_error_1.default('Least one signin attempt of disabled account is required.', { code: 'INVALID_REQUEST' });\n            }\n            let resend = yield this.request(\"recover-account\", { username: this.__disabledAccount, redirect });\n            this.__disabledAccount = null;\n            return resend;\n        });\n    }\n    login(form, option) {\n        this.logout();\n        let params = (0, utils_1.checkParams)(form, {\n            email: (v) => (0, utils_1.validateEmail)(v),\n            password: (v) => (0, utils_1.validatePassword)(v)\n        }, ['email', 'password']);\n        return this.authentication().authenticateUser(params.email, params.password);\n    }\n    verifyAttribute(attribute, code) {\n        if (!this.cognitoUser) {\n            throw new skapi_error_1.default('The user has to be logged in.', { code: 'INVALID_REQUEST' });\n        }\n        return new Promise((res, rej) => {\n            var _a, _b;\n            let callback = {\n                onSuccess: (result) => {\n                    if (code) {\n                        this.authentication().updateSession({ refreshToken: true }).then(() => {\n                            if (this.__user) {\n                                this.__user[attribute + '_verified'] = true;\n                            }\n                            res(`SUCCESS: \"${attribute}\" is verified.`);\n                        }).catch(err => {\n                            rej(err);\n                        });\n                    }\n                    else {\n                        res('SUCCESS: Verification code has been sent.');\n                    }\n                },\n                onFailure: (err) => {\n                    rej(new skapi_error_1.default(err.message || 'Failed to request verification code.', {\n                        code: err === null || err === void 0 ? void 0 : err.code\n                    }));\n                },\n                inputVerificationCode: null\n            };\n            if (code) {\n                (_a = this.cognitoUser) === null || _a === void 0 ? void 0 : _a.verifyAttribute(attribute, code, callback);\n            }\n            else {\n                (_b = this.cognitoUser) === null || _b === void 0 ? void 0 : _b.getAttributeVerificationCode(attribute, callback);\n            }\n        });\n    }\n    verifyEmail(form, option) {\n        let code = (form ? (0, utils_1.checkParams)(form, {\n            code: ['number', 'string']\n        }) : {}).code || '';\n        return this.verifyAttribute('email', code.toString());\n    }\n    verifyMobile(form, option) {\n        let code = (form ? (0, utils_1.checkParams)(form, {\n            code: ['number', 'string']\n        }) : {}).code || null;\n        return this.verifyAttribute('phone_number', code.toString());\n    }\n    forgotPassword(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            let params = (0, utils_1.checkParams)(form, {\n                email: (v) => (0, utils_1.validateEmail)(v)\n            }, ['email']);\n            return new Promise((res, rej) => __awaiter(this, void 0, void 0, function* () {\n                let cognitoUser = (yield this.authentication().createCognitoUser(params.email)).cognitoUser;\n                cognitoUser.forgotPassword({\n                    onSuccess: result => {\n                        res(\"SUCCESS: Verification code has been sent.\");\n                    },\n                    onFailure: (err) => {\n                        rej(new skapi_error_1.default((err === null || err === void 0 ? void 0 : err.message) || 'Failed to send verification code.', { code: (err === null || err === void 0 ? void 0 : err.code) || 'ERROR' }));\n                    }\n                });\n            }));\n        });\n    }\n    resetPassword(form, option) {\n        let params = (0, utils_1.checkParams)(form, {\n            email: (v) => (0, utils_1.validateEmail)(v),\n            code: ['number', 'string'],\n            new_password: (v) => (0, utils_1.validatePassword)(v)\n        }, ['email', 'code', 'new_password']);\n        let code = params.code, new_password = params.new_password;\n        if (typeof code === 'number') {\n            code = code.toString();\n        }\n        return new Promise((res, rej) => __awaiter(this, void 0, void 0, function* () {\n            let cognitoUser = (yield this.authentication().createCognitoUser(params.email)).cognitoUser;\n            cognitoUser.confirmPassword(code, new_password, {\n                onSuccess: result => {\n                    res(\"SUCCESS: New password has been set.\");\n                },\n                onFailure: (err) => {\n                    rej(new skapi_error_1.default((err === null || err === void 0 ? void 0 : err.message) || 'Failed to reset password.', { code: err === null || err === void 0 ? void 0 : err.code }));\n                }\n            });\n        }));\n    }\n    disableAccount() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            if (this.__user && Array.isArray(this.__user.services)) {\n                for (let s of this.__user.services) {\n                    if (s.active) {\n                        throw new skapi_error_1.default('All services needs to be disabled.', { code: 'INVALID_REQUEST' });\n                    }\n                }\n            }\n            let result = yield this.request('remove-account', { disable: true }, { auth: true });\n            this.logout();\n            return result;\n        });\n    }\n    updateUserSettings(form, option) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.__connection;\n            let attr = (_a = this.session) === null || _a === void 0 ? void 0 : _a.attributes;\n            if (!attr || !this.cognitoUser) {\n                throw new skapi_error_1.default('User has to be logged in.', { code: 'INVALID_REQUEST' });\n            }\n            let params = (0, utils_1.checkParams)(form || {}, {\n                email: (v) => (0, utils_1.validateEmail)(v),\n                name: 'string',\n                address: 'string',\n                gender: 'string',\n                birthdate: (v) => (0, utils_1.validateBirthdate)(v),\n                phone_number: (v) => (0, utils_1.validatePhoneNumber)(v),\n                email_public: 'boolean',\n                phone_number_public: 'boolean',\n                address_public: 'boolean',\n                gender_public: 'boolean',\n                birthdate_public: 'boolean',\n                email_subscription: 'boolean',\n                current_password: (v) => (0, utils_1.validatePassword)(v),\n                new_password: (v) => (0, utils_1.validatePassword)(v)\n            });\n            if (params && typeof params === 'object' && !Object.keys(params).length) {\n                return this.__user;\n            }\n            if (params.new_password || params.current_password) {\n                if (!params.current_password) {\n                    throw new skapi_error_1.default('\"current_password\" is needed to change the password.', { code: 'INVALID_PARAMETER' });\n                }\n                if (!params.new_password) {\n                    throw new skapi_error_1.default('\"new_password\" is needed to change password.', { code: 'INVALID_PARAMETER' });\n                }\n                if (params.new_password !== params.current_password) {\n                    yield new Promise((res, rej) => {\n                        this.cognitoUser.changePassword(params.current_password, params.new_password, (err, result) => {\n                            if (err) {\n                                rej(new skapi_error_1.default((err === null || err === void 0 ? void 0 : err.message) || 'Failed to change users password.', { code: (err === null || err === void 0 ? void 0 : err.code) || (err === null || err === void 0 ? void 0 : err.name) }));\n                            }\n                            res(result);\n                        });\n                    });\n                }\n                delete params.current_password;\n                delete params.new_password;\n            }\n            if (params.email) {\n                let connect = yield this.updateConnection({ request_hash: params.email });\n                params['preferred_username'] = connect.hash;\n            }\n            let collision = [\n                ['email_subscription', 'email_verified', \"User's E-Mail should be verified to set\"],\n                ['email_public', 'email_verified', \"User's E-Mail should be verified to set\"],\n                ['phone_number_public', 'phone_number_verified', \"User's phone number should be verified to set\"]\n            ];\n            if (this.__user) {\n                for (let c of collision) {\n                    if (params[c[0]] && !this.__user[c[1]]) {\n                        throw new skapi_error_1.default(`${c[2]} \"${c[0]}\" to true.`, { code: 'INVALID_REQUEST' });\n                    }\n                }\n            }\n            let customAttr = [\n                'email_public',\n                'phone_number_public',\n                'address_public',\n                'gender_public',\n                'birthdate_public',\n                'email_subscription'\n            ];\n            for (let k in params) {\n                if (params[k] === attr[k]) {\n                    delete params[k];\n                }\n                else if (customAttr.includes(k)) {\n                    let parseValue = params[k];\n                    if (typeof parseValue === 'boolean')\n                        parseValue = parseValue ? '1' : '0';\n                    params['custom:' + k] = parseValue;\n                    delete params[k];\n                }\n            }\n            if (params && typeof params === 'object' && Object.keys(params).length) {\n                let toSet = [];\n                for (let key in params) {\n                    toSet.push(new amazon_cognito_identity_js_1.CognitoUserAttribute({\n                        Name: key,\n                        Value: params[key]\n                    }));\n                }\n                yield new Promise((res, rej) => {\n                    var _a;\n                    (_a = this.cognitoUser) === null || _a === void 0 ? void 0 : _a.updateAttributes(toSet, (err, result) => {\n                        if (err) {\n                            rej([\n                                (err === null || err === void 0 ? void 0 : err.code) || (err === null || err === void 0 ? void 0 : err.name),\n                                (err === null || err === void 0 ? void 0 : err.message) || `Failed to update user settings.`\n                            ]);\n                        }\n                        res(result);\n                    });\n                });\n                yield this.authentication().updateSession({ refreshToken: true });\n            }\n            return this.__user;\n        });\n    }\n    uploadUserData(form, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            option = (0, utils_1.checkParams)(option || {}, {\n                private: 'array'\n            });\n            let opt = {\n                auth: true\n            };\n            if (option === null || option === void 0 ? void 0 : option.private) {\n                Object.assign(opt, { meta: { '__private__': option.private } });\n            }\n            yield this.request('post-userdata', form, opt);\n            yield this.authentication().updateSession();\n            return this.__user;\n        });\n    }\n    getUsers(params, fetchOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let isAdmin = yield this.requireAdmin({\n                ignoreVerification: true\n            });\n            if (!params) {\n                if (!fetchOptions) {\n                    fetchOptions = {};\n                }\n                fetchOptions.ascending = false;\n            }\n            params = params || {\n                searchFor: 'timestamp',\n                condition: '>',\n                value: 0\n            };\n            const searchForTypes = {\n                'user_id': (v) => (0, utils_1.validateUserId)(v),\n                'name': 'string',\n                'email': (v) => (0, utils_1.validateEmail)(v),\n                'phone_number': (v) => (0, utils_1.validatePhoneNumber)(v),\n                'address': 'string',\n                'gender': 'string',\n                'birthdate': (v) => (0, utils_1.validateBirthdate)(v),\n                'locale': (v) => {\n                    if (typeof v !== 'string' || typeof v === 'string' && v.length > 5) {\n                        throw new skapi_error_1.default('Value of \"locale\" should be a country code.');\n                    }\n                    return v;\n                },\n                'subscribers': 'number',\n                'timestamp': 'number',\n                'group': 'number',\n                'email_subscription': (v) => {\n                    if (!isAdmin) {\n                        throw new skapi_error_1.default('Only admin is allowed to search \"email_subscription\".', { code: 'INVALID_REQUEST' });\n                    }\n                    return v;\n                },\n                'blocked': (v) => {\n                    if (v) {\n                        return 'by_admin:suspended';\n                    }\n                    else {\n                        return 'by_admin:approved';\n                    }\n                }\n            };\n            let required = ['searchFor', 'value'];\n            params = (0, utils_1.checkParams)(params, {\n                searchFor: [\n                    'user_id',\n                    'name',\n                    'email',\n                    'phone_number',\n                    'address',\n                    'gender',\n                    'birthdate',\n                    'locale',\n                    'subscribers',\n                    'timestamp',\n                    'group',\n                    'email_subscription',\n                    'blocked'\n                ],\n                condition: ['>', '>=', '=', '<', '<=', 'gt', 'gte', 'eq', 'lt', 'lte', () => '='],\n                value: (v) => {\n                    let checker = searchForTypes[params.searchFor];\n                    if (typeof checker === 'function') {\n                        return checker(v);\n                    }\n                    else if (typeof v !== checker) {\n                        throw new skapi_error_1.default(`Value does not match the type of \"${params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                },\n                range: (v) => {\n                    let checker = searchForTypes[params.searchFor];\n                    if (typeof checker === 'function') {\n                        return checker(v);\n                    }\n                    else if (typeof v !== checker) {\n                        throw new skapi_error_1.default(`Range does not match the type of \"${params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                }\n            }, required);\n            if ((params === null || params === void 0 ? void 0 : params.condition) && (params === null || params === void 0 ? void 0 : params.condition) !== '=' && params.hasOwnProperty('range')) {\n                throw new skapi_error_1.default('Conditions does not apply on range search.', { code: 'INVALID_PARAMETER' });\n            }\n            if (['user_id', 'blocked'].includes(params.searchFor) && params.condition !== '=') {\n                throw new skapi_error_1.default(`Condition is not allowed on \"${params.searchFor}\"`, { code: 'INVALID_PARAMETER' });\n            }\n            if (params.searchFor === 'blocked') {\n                params.searchFor = 'suspended';\n            }\n            if (typeof (params === null || params === void 0 ? void 0 : params.value) === 'string' && !(params === null || params === void 0 ? void 0 : params.value)) {\n                throw new skapi_error_1.default('Value should not be an empty string.', { code: 'INVALID_PARAMETER' });\n            }\n            if (typeof (params === null || params === void 0 ? void 0 : params.searchFor) === 'string' && !(params === null || params === void 0 ? void 0 : params.searchFor)) {\n                throw new skapi_error_1.default('\"searchFor\" should not be an empty string.', { code: 'INVALID_PARAMETER' });\n            }\n            let isSelfProfile = params.searchFor === 'user_id' && params.value === this.session.idToken.payload.sub;\n            if (isAdmin && !isSelfProfile && !params.service) {\n                throw new skapi_error_1.default('Service ID is required.', { code: 'INVALID_PARAMETER' });\n            }\n            let result = yield this.request('get-users', params, { auth: true, fetchOptions });\n            if (!result.list[0] || !isSelfProfile || result.list.length > 1) {\n                return result;\n            }\n            let user = result.list[0];\n            Object.assign(user, this.__user);\n            user._what_public_see = JSON.parse(JSON.stringify(user));\n            let public_keys = [\n                'service',\n                'user_id',\n                'name',\n                'locale',\n                'address',\n                'birthdate',\n                'phone_number',\n                'email',\n                'gender',\n                'subscribers',\n                'timestamp',\n                'group',\n                'log',\n                'user_data'\n            ];\n            for (let k in user._what_public_see) {\n                if (!public_keys.includes(k)) {\n                    delete user._what_public_see[k];\n                }\n            }\n            return user;\n        });\n    }\n    updateConnection(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let request = null;\n            let connectedService = {};\n            if (params === null || params === void 0 ? void 0 : params.request_hash) {\n                if (this.__serviceHash[params.request_hash]) {\n                    Object.assign(connectedService, { hash: this.__serviceHash[params.request_hash] });\n                }\n                else {\n                    request = {\n                        request_hash: (0, utils_1.validateEmail)(params.request_hash)\n                    };\n                }\n            }\n            if (!this.connection || this.connection.service !== this.service || request) {\n                if (request === null) {\n                    request = {};\n                }\n                Object.assign(request, {\n                    service: this.service,\n                    service_owner: this.service_owner\n                });\n            }\n            Object.assign(connectedService, (request ? yield this.request('service', request, { bypassAwaitConnection: true }) : this.connection));\n            if (params === null || params === void 0 ? void 0 : params.request_hash) {\n                this.__serviceHash[params.request_hash] = connectedService.hash;\n            }\n            let connection = JSON.parse(JSON.stringify(connectedService));\n            delete connection.hash;\n            this.connection = connection;\n            return connectedService;\n        });\n    }\n}\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"postRecord\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"subscribeNewsletter\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"subscribe\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"unsubscribe\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"blockSubscriber\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"unblockSubscriber\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"signup\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"login\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"verifyEmail\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"verifyMobile\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"forgotPassword\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"resetPassword\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"updateUserSettings\", null);\n__decorate([\n    (0, decorators_1.formResponse)()\n], Skapi.prototype, \"uploadUserData\", null);\nexports.default = Skapi;\n//# sourceMappingURL=skapi.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass SkapiError extends Error {\n    constructor(error, options) {\n        if (error instanceof Error) {\n            super(error.message || 'Something went wrong.');\n            this.cause = error;\n            this.name = error.name;\n            if (error.hasOwnProperty('code')) {\n                this.code = error.code;\n            }\n        }\n        else if (typeof error === 'string') {\n            super(error || 'Something went wrong.');\n            this.name = \"SkapiError\";\n            this.code = 'ERROR';\n            if (options) {\n                if (options.code) {\n                    this.code = options.code;\n                }\n                if (options.cause) {\n                    this.cause = options.cause;\n                }\n            }\n        }\n    }\n}\nexports.default = SkapiError;\n//# sourceMappingURL=skapi_error.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha256 = exports.validateUrl = exports.validatePhoneNumber = exports.validatePassword = exports.validateEmail = exports.validateBirthdate = exports.validateUserId = exports.extractFormMetaData = exports.checkParams = exports.normalize_record_data = exports.checkWhiteSpaceAndSpecialChars = void 0;\nconst skapi_error_1 = __importDefault(require(\"./skapi_error\"));\nconst sha256 = function sha256(ascii) {\n    function rightRotate(value, amount) {\n        return (value >>> amount) | (value << (32 - amount));\n    }\n    ;\n    let mathPow = Math.pow;\n    let maxWord = mathPow(2, 32);\n    let lengthProperty = 'length';\n    let i, j;\n    let result = '';\n    let words = [];\n    let asciiBitLength = ascii[lengthProperty] * 8;\n    let hash = sha256.h = sha256.h || [];\n    let k = sha256.k = sha256.k || [];\n    let primeCounter = k[lengthProperty];\n    let isComposite = {};\n    for (let candidate = 2; primeCounter < 64; candidate++) {\n        if (!isComposite[candidate]) {\n            for (i = 0; i < 313; i += candidate) {\n                isComposite[i] = candidate;\n            }\n            hash[primeCounter] = (mathPow(candidate, .5) * maxWord) | 0;\n            k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n        }\n    }\n    ascii += '\\x80';\n    while (ascii[lengthProperty] % 64 - 56)\n        ascii += '\\x00';\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n        j = ascii.charCodeAt(i);\n        if (j >> 8) {\n            return;\n        }\n        words[i >> 2] |= j << ((3 - i) % 4) * 8;\n    }\n    words[words[lengthProperty]] = ((asciiBitLength / maxWord) | 0);\n    words[words[lengthProperty]] = (asciiBitLength);\n    for (j = 0; j < words[lengthProperty];) {\n        let w = words.slice(j, j += 16);\n        let oldHash = hash;\n        hash = hash.slice(0, 8);\n        for (i = 0; i < 64; i++) {\n            let i2 = i + j;\n            let w15 = w[i - 15], w2 = w[i - 2];\n            let a = hash[0], e = hash[4];\n            let temp1 = hash[7]\n                + (rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25))\n                + ((e & hash[5]) ^ ((~e) & hash[6]))\n                + k[i]\n                + (w[i] = (i < 16) ? w[i] : (w[i - 16]\n                    + (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))\n                    + w[i - 7]\n                    + (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))) | 0);\n            let temp2 = (rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22))\n                + ((a & hash[1]) ^ (a & hash[2]) ^ (hash[1] & hash[2]));\n            hash = [(temp1 + temp2) | 0].concat(hash);\n            hash[4] = (hash[4] + temp1) | 0;\n        }\n        for (i = 0; i < 8; i++) {\n            hash[i] = (hash[i] + oldHash[i]) | 0;\n        }\n    }\n    for (i = 0; i < 8; i++) {\n        for (j = 3; j + 1; j--) {\n            let b = (hash[i] >> (j * 8)) & 255;\n            result += ((b < 16) ? 0 : '') + b.toString(16);\n        }\n    }\n    return result;\n};\nexports.sha256 = sha256;\nfunction checkParams(params, struct, required = null, bypassCheck = [], _parentKey = null) {\n    var _a;\n    if (Array.isArray(bypassCheck)) {\n        bypassCheck = bypassCheck.concat([\n            'service',\n            'service_owner',\n        ]);\n    }\n    function isObjectWithKeys(obj) {\n        if (obj instanceof Promise) {\n            throw new skapi_error_1.default('Parameter should not be a promise', { code: 'INVALID_PARAMETER' });\n        }\n        return obj && typeof obj === 'object' && !Array.isArray(obj) && Object.keys(obj).length;\n    }\n    function isEmptyObject(obj) {\n        return obj && typeof obj === 'object' && !Array.isArray(obj) && !Object.keys(obj).length;\n    }\n    let _params = params;\n    let val;\n    let errToThrow = null;\n    let isInvalid = _parentKey ? ` in \"${_parentKey}\" is invalid.` : '. Parameter should be type <object>.';\n    if (_parentKey === null) {\n        if (isObjectWithKeys(_params)) {\n            if (_params instanceof HTMLFormElement || _params instanceof FormData) {\n                _params = (_a = extractFormMetaData(params)) === null || _a === void 0 ? void 0 : _a.meta;\n            }\n            else {\n                _params = JSON.parse(JSON.stringify(params));\n            }\n            for (let k in _params) {\n                if (!struct.hasOwnProperty(k) && Array.isArray(bypassCheck) && !bypassCheck.includes(k)) {\n                    throw new skapi_error_1.default(`Key name \"${k}\" is invalid in parameter.`, { code: 'INVALID_PARAMETER' });\n                }\n            }\n            if (Array.isArray(required) && required.length) {\n                for (let k of required) {\n                    if (!Object.keys(_params).includes(k)) {\n                        throw new skapi_error_1.default(`Key \"${k}\" is required in parameter.`, { code: 'INVALID_PARAMETER' });\n                    }\n                }\n            }\n        }\n        else if (isEmptyObject(_params) || typeof _params === 'undefined') {\n            let defaults = {};\n            for (let s in struct) {\n                let structValue = struct[s];\n                if (Array.isArray(structValue) && typeof structValue[structValue.length - 1] === 'function')\n                    defaults[s] = structValue[structValue.length - 1]();\n            }\n            return Object.keys(defaults).length ? defaults : _params;\n        }\n        if (_params === null) {\n            return null;\n        }\n    }\n    if (isObjectWithKeys(struct) && isObjectWithKeys(_params)) {\n        for (let s in struct) {\n            let structValue = struct[s];\n            if (_params.hasOwnProperty(s) && typeof _params[s] != 'undefined') {\n                _params[s] = checkParams(_params[s], structValue, null, null, s);\n            }\n            else {\n                let defaultSetter = Array.isArray(structValue) &&\n                    typeof structValue[structValue.length - 1] === 'function' ? structValue[structValue.length - 1] : null;\n                if (defaultSetter) {\n                    let def = defaultSetter();\n                    if (def !== undefined) {\n                        _params[s] = def;\n                    }\n                }\n            }\n        }\n        val = _params;\n    }\n    else if (Array.isArray(struct)) {\n        for (let s of struct) {\n            try {\n                if (typeof _params !== undefined && typeof s !== 'function') {\n                    val = checkParams(_params, s, null, null, _parentKey);\n                }\n                break;\n            }\n            catch (err) {\n                if (typeof err === 'string' && err.substring(0, 6) === 'BREAK:') {\n                    err = err.substring(6);\n                    let errMsg = err.split(':');\n                    errToThrow = new skapi_error_1.default(errMsg[1], { code: errMsg[0] });\n                    break;\n                }\n                else {\n                    errToThrow = err;\n                }\n            }\n        }\n    }\n    else if (typeof struct === 'function') {\n        return struct(_params);\n    }\n    else if (typeof struct === 'string') {\n        if (Array.isArray(_params)) {\n            if (struct !== 'array') {\n                throw new skapi_error_1.default(`Invalid type \"${typeof _params}\"${isInvalid}`, { code: 'INVALID_PARAMETER' });\n            }\n            for (let p of _params) {\n                if (!['number', 'string', 'boolean'].includes(typeof p) && p !== null) {\n                    throw new skapi_error_1.default(`Invalid type \"${typeof p}\" in \"${_parentKey}\" array value.`, { code: 'INVALID_PARAMETER' });\n                }\n            }\n            val = _params;\n        }\n        else if (!['number', 'string', 'boolean', 'array', 'function'].includes(struct)) {\n            if (_params === struct) {\n                val = _params;\n            }\n            else {\n                throw new skapi_error_1.default(`Value: ${_params}${isInvalid}`, { code: 'INVALID_PARAMETER' });\n            }\n        }\n        else if (typeof _params === struct) {\n            if (struct === 'number') {\n                if (Math.abs(_params) > 4503599627370496) {\n                    throw `BREAK:INVALID_PARAMETER:\"${_parentKey}\" integer value should be within -4503599627370496 ~ +4503599627370546.`;\n                }\n            }\n            val = _params;\n        }\n        else {\n            throw new skapi_error_1.default(`Value: ${_params}${isInvalid}`, { code: 'INVALID_PARAMETER' });\n        }\n    }\n    else if (struct === null) {\n        val = _params;\n    }\n    if (val === undefined && errToThrow) {\n        throw errToThrow;\n    }\n    return val;\n}\nexports.checkParams = checkParams;\nfunction extractFormMetaData(form) {\n    function appendData(meta, key, val, append = true) {\n        if (meta[key] && append) {\n            if (Array.isArray(meta)) {\n                meta[key].push(val);\n            }\n            else {\n                meta[key] = [meta[key], val];\n            }\n        }\n        else {\n            meta[key] = val;\n        }\n    }\n    if (form instanceof FormData) {\n        let meta = {};\n        let totalFileSize = 0;\n        let files = [];\n        for (let pair of form.entries()) {\n            let name = pair[0];\n            let v = pair[1];\n            if (v instanceof File) {\n                if (!files.includes(name)) {\n                    files.push(name);\n                }\n                totalFileSize += Math.round((v.size / 1024));\n            }\n            else if (v instanceof FileList) {\n                if (!files.includes(name)) {\n                    files.push(name);\n                }\n                if (v && v.length > 0) {\n                    for (let idx = 0; idx <= v.length - 1; idx++) {\n                        totalFileSize += Math.round((v.item(idx).size / 1024));\n                    }\n                }\n            }\n            else {\n                appendData(meta, name, v);\n            }\n        }\n        if (totalFileSize > 5120) {\n            throw new skapi_error_1.default('Files cannot exceed 5MB. Use skapi.uploadFiles(...) instead.', { code: 'INVALID_REQUEST' });\n        }\n        return { meta, files };\n    }\n    else if (form instanceof HTMLFormElement) {\n        let meta = {};\n        let files = [];\n        let totalFileSize = 0;\n        let inputs = form.querySelectorAll('input');\n        let textarea = form.querySelectorAll('textarea');\n        for (let i of textarea) {\n            if (i.name) {\n                appendData(meta, i.name, i.value);\n            }\n        }\n        for (let i of inputs) {\n            if (i.name) {\n                if (i.type === 'number' && i.value) {\n                    appendData(meta, i.name, Number(i.value));\n                }\n                else if (i.type === 'checkbox' || i.type === 'radio') {\n                    if (i.value === 'on' || i.value === 'true') {\n                        appendData(meta, i.name, i.checked, false);\n                    }\n                    else if (i.value === 'false') {\n                        appendData(meta, i.name, !i.checked, false);\n                    }\n                    else if (i.checked) {\n                        appendData(meta, i.name, i.value, false);\n                    }\n                }\n                else if (i.type === 'file') {\n                    if (!files.includes(i.name)) {\n                        files.push(i.name);\n                    }\n                    if (i.files && i.files.length > 0) {\n                        for (let idx = 0; idx <= i.files.length - 1; idx++) {\n                            totalFileSize += Math.round((i.files.item(idx).size / 1024));\n                        }\n                    }\n                }\n                else {\n                    appendData(meta, i.name, i.value);\n                }\n            }\n        }\n        if (totalFileSize > 5120) {\n            throw new skapi_error_1.default('Files cannot exceed 5MB. Use skapi.uploadFiles(...) instead.', { code: 'INVALID_REQUEST' });\n        }\n        return { meta, files };\n    }\n    return null;\n}\nexports.extractFormMetaData = extractFormMetaData;\nfunction validateUserId(id, param = 'User ID') {\n    let uuid_regex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    if (!id) {\n        throw new skapi_error_1.default(`${param} is empty.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (typeof id !== 'string') {\n        throw new skapi_error_1.default(`${param} should be type: string.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (!id.match(uuid_regex)) {\n        throw new skapi_error_1.default(`${param} is invalid.`, { code: 'INVALID_PARAMETER' });\n    }\n    return id;\n}\nexports.validateUserId = validateUserId;\nfunction validatePhoneNumber(value) {\n    if (typeof value !== 'string' || value.charAt(0) !== '+' || isNaN(Number(value.substring(1)))) {\n        throw new skapi_error_1.default('\"phone_number\" is invalid. The format should be \"+00123456789\". Type: string.', { code: 'INVALID_PARAMETER' });\n    }\n    return value;\n}\nexports.validatePhoneNumber = validatePhoneNumber;\nfunction validateBirthdate(birthdate) {\n    if (typeof birthdate !== 'string') {\n        throw new skapi_error_1.default('\"birthdate\" is invalid. The format should be \"yyyy-mm-dd\". Type: string.', { code: 'INVALID_PARAMETER' });\n    }\n    else {\n        let date_regex = new RegExp(/([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/);\n        if (birthdate.length !== 10 || birthdate.split('-').length !== 3 || !date_regex.test(birthdate)) {\n            throw new skapi_error_1.default('\"birthdate\" is invalid. The format should be \"yyyy-mm-dd\". Type: string.', { code: 'INVALID_PARAMETER' });\n        }\n    }\n    return birthdate;\n}\nexports.validateBirthdate = validateBirthdate;\nfunction validatePassword(password) {\n    if (!password) {\n        throw new skapi_error_1.default('\"password\" is empty.', { code: 'PASSWORD_REQUIRED' });\n    }\n    else if (typeof password !== 'string') {\n        throw new skapi_error_1.default('\"password\" should be type: string.', { code: 'INVALID_PASSWORD' });\n    }\n    else if (password.length < 6) {\n        throw new skapi_error_1.default('\"password\" should be at least 6 characters.', { code: 'INVALID_PASSWORD' });\n    }\n    else if (password.length > 60) {\n        throw new skapi_error_1.default('\"password\" can be up to 60 characters max.', { code: 'INVALID_PASSWORD' });\n    }\n    return password;\n}\nexports.validatePassword = validatePassword;\nfunction validateEmail(email, paramName = 'email') {\n    if (!email) {\n        throw new skapi_error_1.default(`\"${paramName}\" is empty.`, { code: 'EMAIL_REQUIRED' });\n    }\n    else if (typeof email !== 'string') {\n        throw new skapi_error_1.default(`\"${paramName}\"should be type: string.`, { code: 'INVALID_EMAIL' });\n    }\n    else if (email.length < 5 || email.length > 64) {\n        throw new skapi_error_1.default(`\"${paramName}\" should be at least 5 characters and max 64 characters.`, { code: 'INVALID_EMAIL' });\n    }\n    else if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email)) {\n        email = email.trim();\n        let splitAt = email.split('@');\n        let tld = splitAt[1].split('.');\n        if (tld.length >= 2) {\n            return email.toLowerCase();\n        }\n    }\n    throw new skapi_error_1.default(`\"${email}\" is an invalid email.`, { code: 'INVALID_EMAIL' });\n}\nexports.validateEmail = validateEmail;\nfunction validateUrl(url) {\n    const baseUrl = (() => {\n        var _a;\n        let baseUrl = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.origin) || null;\n        if (baseUrl === 'file://') {\n            baseUrl += window.location.pathname;\n            let _baseUrl = baseUrl.split('/');\n            _baseUrl.pop();\n            baseUrl = _baseUrl.join('/');\n        }\n        return baseUrl;\n    })();\n    let check = (c) => {\n        if (typeof c === 'string') {\n            if (c === '*') {\n                return '*';\n            }\n            else {\n                let cu = c.trim();\n                if (!cu.includes(' ') && !cu.includes(',')) {\n                    if (cu.substring(0, 1) === '/' && baseUrl) {\n                        cu = baseUrl + cu;\n                    }\n                    let _url = null;\n                    try {\n                        _url = new URL(cu);\n                    }\n                    catch (err) {\n                        throw new skapi_error_1.default(`\"${c}\" is an invalid url.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    if (_url.protocol) {\n                        let url = _url.href;\n                        if (url.charAt(url.length - 1) === '/')\n                            url = url.substring(0, url.length - 1);\n                        return url;\n                    }\n                }\n            }\n        }\n        throw new skapi_error_1.default(`\"${c}\" is an invalid url.`, { code: 'INVALID_PARAMETER' });\n    };\n    if (Array.isArray(url)) {\n        return url.map(u => check(u));\n    }\n    else {\n        return check(url);\n    }\n}\nexports.validateUrl = validateUrl;\nfunction normalize_record_data(record) {\n    const output = {};\n    const keys = {\n        'rec': (r) => {\n            if (!r)\n                return;\n            output.record_id = r;\n            let base36timestamp = r.substring(0, 8);\n            output.uploaded = parseInt(base36timestamp, 36);\n        },\n        'usr': (r) => {\n            if (!r)\n                return;\n            output.user_id = r;\n        },\n        'tbl': (r) => {\n            if (!r)\n                return;\n            let rSplit = r.split('/');\n            output.table = rSplit[0];\n            output.access_group = rSplit[2] == '@@' ? 'private' : parseInt(rSplit[2]);\n            if (rSplit === null || rSplit === void 0 ? void 0 : rSplit[3]) {\n                output.subscription = {\n                    user_id: rSplit[3],\n                    group: parseInt(rSplit[4])\n                };\n            }\n        },\n        'idx': (r) => {\n            if (!r)\n                return;\n            let rSplit = r.split('!');\n            let name = rSplit.splice(0, 1)[0];\n            let value = normalize_typed_string(rSplit.join('!'));\n            output.index = {\n                name,\n                value\n            };\n        },\n        'ref': (r) => {\n            if (!r)\n                return;\n            output.reference = r.split('/')[0];\n        },\n        'tags': (r) => {\n            if (!r)\n                return;\n            output.tags = r;\n        },\n        'upd': (r) => {\n            if (!r)\n                return;\n            output.updated = r;\n        },\n        'acpt_mrf': (r) => {\n            if (!r)\n                return;\n            if (!(output === null || output === void 0 ? void 0 : output.config))\n                output.config = {};\n            output.config.allow_multiple_reference = r;\n        },\n        'ref_limt': (r) => {\n            if (!r)\n                return;\n            if (!(output === null || output === void 0 ? void 0 : output.config))\n                output.config = {};\n            output.config.reference_limit = r;\n        },\n        'rfd': (r) => {\n            output.referenced_count = r;\n        },\n        'prv_acs': (r) => {\n            if (!r)\n                return;\n            if (!(output === null || output === void 0 ? void 0 : output.config))\n                output.config = {};\n            output.config.private_access = r;\n        },\n        'data': (r) => {\n            let data = r;\n            if (r === '!D%{}') {\n                data = {};\n            }\n            else if (r === '!L%[]') {\n                data = [];\n            }\n            output.data = data;\n        }\n    };\n    if (record.record_id) {\n        return record;\n    }\n    for (let k in keys) {\n        keys[k](record[k]);\n    }\n    return output;\n}\nexports.normalize_record_data = normalize_record_data;\nfunction normalize_typed_string(v) {\n    let value = v.substring(2);\n    let type = v.substring(0, 2);\n    switch (type) {\n        case \"S%\":\n            return value;\n        case \"N%\":\n            return Number(value) - 4503599627370496;\n        case \"B%\":\n            return value === '1';\n        case \"L%\":\n            try {\n                return JSON.parse(value);\n            }\n            catch (err) {\n                throw new skapi_error_1.default('Value parse error.', { code: 'PARSE_ERROR' });\n            }\n        default:\n            return v;\n    }\n}\nfunction checkWhiteSpaceAndSpecialChars(string, p = 'parameter', allowPeriods = false, allowWhiteSpace = false) {\n    let checkStr = (s, array = false) => {\n        if (typeof s !== 'string') {\n            throw new skapi_error_1.default(`${p} should be type: <string | string[]>.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (!allowWhiteSpace && string.includes(' ')) {\n            throw new skapi_error_1.default(`${p} should not have whitespace.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (!allowPeriods && string.includes('.')) {\n            throw new skapi_error_1.default(`${p} should not have periods.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (/[`!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,<>\\/?~]/.test(s)) {\n            throw new skapi_error_1.default(`${p} should not have special characters.`, { code: 'INVALID_PARAMETER' });\n        }\n    };\n    if (Array.isArray(string)) {\n        for (let s of string) {\n            checkStr(s, true);\n        }\n    }\n    else {\n        checkStr(string, false);\n    }\n    return string;\n}\nexports.checkWhiteSpaceAndSpecialChars = checkWhiteSpaceAndSpecialChars;\n//# sourceMappingURL=utils.js.map","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar AuthenticationDetails = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationDetails object\n   * @param {object=} data Creation options.\n   * @param {string} data.Username User being authenticated.\n   * @param {string} data.Password Plain-text password to authenticate with.\n   * @param {(AttributeArg[])?} data.ValidationData Application extra metadata.\n   * @param {(AttributeArg[])?} data.AuthParamaters Authentication paramaters for custom auth.\n   */\n  function AuthenticationDetails(data) {\n    var _ref = data || {},\n      ValidationData = _ref.ValidationData,\n      Username = _ref.Username,\n      Password = _ref.Password,\n      AuthParameters = _ref.AuthParameters,\n      ClientMetadata = _ref.ClientMetadata;\n    this.validationData = ValidationData || {};\n    this.authParameters = AuthParameters || {};\n    this.clientMetadata = ClientMetadata || {};\n    this.username = Username;\n    this.password = Password;\n  }\n\n  /**\n   * @returns {string} the record's username\n   */\n  var _proto = AuthenticationDetails.prototype;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {string} the record's password\n   */;\n  _proto.getPassword = function getPassword() {\n    return this.password;\n  }\n\n  /**\n   * @returns {Array} the record's validationData\n   */;\n  _proto.getValidationData = function getValidationData() {\n    return this.validationData;\n  }\n\n  /**\n   * @returns {Array} the record's authParameters\n   */;\n  _proto.getAuthParameters = function getAuthParameters() {\n    return this.authParameters;\n  }\n\n  /**\n   * @returns {ClientMetadata} the clientMetadata for a Lambda trigger\n   */;\n  _proto.getClientMetadata = function getClientMetadata() {\n    return this.clientMetadata;\n  };\n  return AuthenticationDetails;\n}();\nexport { AuthenticationDetails as default };","var crypto;\n\n// Native crypto from window (Browser)\nif (typeof window !== 'undefined' && window.crypto) {\n  crypto = window.crypto;\n}\n\n// Native (experimental IE 11) crypto from window (Browser)\nif (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n  crypto = window.msCrypto;\n}\n\n// Native crypto from global (NodeJS)\nif (!crypto && typeof global !== 'undefined' && global.crypto) {\n  crypto = global.crypto;\n}\n\n// Native crypto import via require (NodeJS)\nif (!crypto && typeof require === 'function') {\n  try {\n    crypto = require('crypto');\n  } catch (err) {}\n}\n\n/*\n * Cryptographically secure pseudorandom number generator\n * As Math.random() is cryptographically not safe to use\n */\nexport default function cryptoSecureRandomInt() {\n  if (crypto) {\n    // Use getRandomValues method (Browser)\n    if (typeof crypto.getRandomValues === 'function') {\n      try {\n        return crypto.getRandomValues(new Uint32Array(1))[0];\n      } catch (err) {}\n    }\n\n    // Use randomBytes method (NodeJS)\n    if (typeof crypto.randomBytes === 'function') {\n      try {\n        return crypto.randomBytes(4).readInt32LE();\n      } catch (err) {}\n    }\n  }\n  throw new Error('Native crypto module could not be used to get secure random number.');\n}","import cryptoSecureRandomInt from './cryptoSecureRandomInt';\n\n/**\n * Hex encoding strategy.\n * Converts a word array to a hex string.\n * @param {WordArray} wordArray The word array.\n * @return {string} The hex string.\n * @static\n */\nfunction hexStringify(wordArray) {\n  // Shortcuts\n  var words = wordArray.words;\n  var sigBytes = wordArray.sigBytes;\n\n  // Convert\n  var hexChars = [];\n  for (var i = 0; i < sigBytes; i++) {\n    var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 0xff;\n    hexChars.push((bite >>> 4).toString(16));\n    hexChars.push((bite & 0x0f).toString(16));\n  }\n  return hexChars.join('');\n}\nvar WordArray = /*#__PURE__*/function () {\n  function WordArray(words, sigBytes) {\n    words = this.words = words || [];\n    if (sigBytes != undefined) {\n      this.sigBytes = sigBytes;\n    } else {\n      this.sigBytes = words.length * 4;\n    }\n  }\n  var _proto = WordArray.prototype;\n  _proto.random = function random(nBytes) {\n    var words = [];\n    for (var i = 0; i < nBytes; i += 4) {\n      words.push(cryptoSecureRandomInt());\n    }\n    return new WordArray(words, nBytes);\n  };\n  _proto.toString = function toString() {\n    return hexStringify(this);\n  };\n  return WordArray;\n}();\nexport { WordArray as default };","// A small implementation of BigInteger based on http://www-cs-students.stanford.edu/~tjw/jsbn/\n//\n// All public methods have been removed except the following:\n//   new BigInteger(a, b) (only radix 2, 4, 8, 16 and 32 supported)\n//   toString (only radix 2, 4, 8, 16 and 32 supported)\n//   negate\n//   abs\n//   compareTo\n//   bitLength\n//   mod\n//   equals\n//   add\n//   subtract\n//   multiply\n//   divide\n//   modPow\n\nexport default BigInteger;\n\n/*\n * Copyright (c) 2003-2005  Tom Wu\n * All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS-IS\" AND WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY\n * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n *\n * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,\n * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER\n * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF\n * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT\n * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * In addition, the following condition applies:\n *\n * All redistributions must retain an intact copy of this copyright notice\n * and disclaimer.\n */\n\n// (public) Constructor\nfunction BigInteger(a, b) {\n  if (a != null) this.fromString(a, b);\n}\n\n// return new, unset BigInteger\nfunction nbi() {\n  return new BigInteger(null);\n}\n\n// Bits per digit\nvar dbits;\n\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = (canary & 0xffffff) == 0xefcafe;\n\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n) {\n  while (--n >= 0) {\n    var v = x * this[i++] + w[j] + c;\n    c = Math.floor(v / 0x4000000);\n    w[j++] = v & 0x3ffffff;\n  }\n  return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n) {\n  var xl = x & 0x7fff,\n    xh = x >> 15;\n  while (--n >= 0) {\n    var l = this[i] & 0x7fff;\n    var h = this[i++] >> 15;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n    c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n    w[j++] = l & 0x3fffffff;\n  }\n  return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n) {\n  var xl = x & 0x3fff,\n    xh = x >> 14;\n  while (--n >= 0) {\n    var l = this[i] & 0x3fff;\n    var h = this[i++] >> 14;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n    c = (l >> 28) + (m >> 14) + xh * h;\n    w[j++] = l & 0xfffffff;\n  }\n  return c;\n}\nvar inBrowser = typeof navigator !== 'undefined';\nif (inBrowser && j_lm && navigator.appName == 'Microsoft Internet Explorer') {\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n} else if (inBrowser && j_lm && navigator.appName != 'Netscape') {\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n} else {\n  // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = (1 << dbits) - 1;\nBigInteger.prototype.DV = 1 << dbits;\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n\n// Digit conversions\nvar BI_RM = '0123456789abcdefghijklmnopqrstuvwxyz';\nvar BI_RC = new Array();\nvar rr, vv;\nrr = '0'.charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) {\n  BI_RC[rr++] = vv;\n}\nrr = 'a'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n  BI_RC[rr++] = vv;\n}\nrr = 'A'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n  BI_RC[rr++] = vv;\n}\nfunction int2char(n) {\n  return BI_RM.charAt(n);\n}\nfunction intAt(s, i) {\n  var c = BI_RC[s.charCodeAt(i)];\n  return c == null ? -1 : c;\n}\n\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n  for (var i = this.t - 1; i >= 0; --i) {\n    r[i] = this[i];\n  }\n  r.t = this.t;\n  r.s = this.s;\n}\n\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n  this.t = 1;\n  this.s = x < 0 ? -1 : 0;\n  if (x > 0) this[0] = x;else if (x < -1) this[0] = x + this.DV;else this.t = 0;\n}\n\n// return bigint initialized to value\nfunction nbv(i) {\n  var r = nbi();\n  r.fromInt(i);\n  return r;\n}\n\n// (protected) set from string and radix\nfunction bnpFromString(s, b) {\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  this.t = 0;\n  this.s = 0;\n  var i = s.length,\n    mi = false,\n    sh = 0;\n  while (--i >= 0) {\n    var x = intAt(s, i);\n    if (x < 0) {\n      if (s.charAt(i) == '-') mi = true;\n      continue;\n    }\n    mi = false;\n    if (sh == 0) this[this.t++] = x;else if (sh + k > this.DB) {\n      this[this.t - 1] |= (x & (1 << this.DB - sh) - 1) << sh;\n      this[this.t++] = x >> this.DB - sh;\n    } else this[this.t - 1] |= x << sh;\n    sh += k;\n    if (sh >= this.DB) sh -= this.DB;\n  }\n  this.clamp();\n  if (mi) BigInteger.ZERO.subTo(this, this);\n}\n\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n  var c = this.s & this.DM;\n  while (this.t > 0 && this[this.t - 1] == c) {\n    --this.t;\n  }\n}\n\n// (public) return string representation in given radix\nfunction bnToString(b) {\n  if (this.s < 0) return '-' + this.negate().toString(b);\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  var km = (1 << k) - 1,\n    d,\n    m = false,\n    r = '',\n    i = this.t;\n  var p = this.DB - i * this.DB % k;\n  if (i-- > 0) {\n    if (p < this.DB && (d = this[i] >> p) > 0) {\n      m = true;\n      r = int2char(d);\n    }\n    while (i >= 0) {\n      if (p < k) {\n        d = (this[i] & (1 << p) - 1) << k - p;\n        d |= this[--i] >> (p += this.DB - k);\n      } else {\n        d = this[i] >> (p -= k) & km;\n        if (p <= 0) {\n          p += this.DB;\n          --i;\n        }\n      }\n      if (d > 0) m = true;\n      if (m) r += int2char(d);\n    }\n  }\n  return m ? r : '0';\n}\n\n// (public) -this\nfunction bnNegate() {\n  var r = nbi();\n  BigInteger.ZERO.subTo(this, r);\n  return r;\n}\n\n// (public) |this|\nfunction bnAbs() {\n  return this.s < 0 ? this.negate() : this;\n}\n\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n  var r = this.s - a.s;\n  if (r != 0) return r;\n  var i = this.t;\n  r = i - a.t;\n  if (r != 0) return this.s < 0 ? -r : r;\n  while (--i >= 0) {\n    if ((r = this[i] - a[i]) != 0) return r;\n  }\n  return 0;\n}\n\n// returns bit length of the integer x\nfunction nbits(x) {\n  var r = 1,\n    t;\n  if ((t = x >>> 16) != 0) {\n    x = t;\n    r += 16;\n  }\n  if ((t = x >> 8) != 0) {\n    x = t;\n    r += 8;\n  }\n  if ((t = x >> 4) != 0) {\n    x = t;\n    r += 4;\n  }\n  if ((t = x >> 2) != 0) {\n    x = t;\n    r += 2;\n  }\n  if ((t = x >> 1) != 0) {\n    x = t;\n    r += 1;\n  }\n  return r;\n}\n\n// (public) return the number of bits in \"this\"\nfunction bnBitLength() {\n  if (this.t <= 0) return 0;\n  return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s & this.DM);\n}\n\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n, r) {\n  var i;\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + n] = this[i];\n  }\n  for (i = n - 1; i >= 0; --i) {\n    r[i] = 0;\n  }\n  r.t = this.t + n;\n  r.s = this.s;\n}\n\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n, r) {\n  for (var i = n; i < this.t; ++i) {\n    r[i - n] = this[i];\n  }\n  r.t = Math.max(this.t - n, 0);\n  r.s = this.s;\n}\n\n// (protected) r = this << n\nfunction bnpLShiftTo(n, r) {\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << cbs) - 1;\n  var ds = Math.floor(n / this.DB),\n    c = this.s << bs & this.DM,\n    i;\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + ds + 1] = this[i] >> cbs | c;\n    c = (this[i] & bm) << bs;\n  }\n  for (i = ds - 1; i >= 0; --i) {\n    r[i] = 0;\n  }\n  r[ds] = c;\n  r.t = this.t + ds + 1;\n  r.s = this.s;\n  r.clamp();\n}\n\n// (protected) r = this >> n\nfunction bnpRShiftTo(n, r) {\n  r.s = this.s;\n  var ds = Math.floor(n / this.DB);\n  if (ds >= this.t) {\n    r.t = 0;\n    return;\n  }\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << bs) - 1;\n  r[0] = this[ds] >> bs;\n  for (var i = ds + 1; i < this.t; ++i) {\n    r[i - ds - 1] |= (this[i] & bm) << cbs;\n    r[i - ds] = this[i] >> bs;\n  }\n  if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\n  r.t = this.t - ds;\n  r.clamp();\n}\n\n// (protected) r = this - a\nfunction bnpSubTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] - a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c -= a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c -= a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c -= a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c < -1) r[i++] = this.DV + c;else if (c > 0) r[i++] = c;\n  r.t = i;\n  r.clamp();\n}\n\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a, r) {\n  var x = this.abs(),\n    y = a.abs();\n  var i = x.t;\n  r.t = i + y.t;\n  while (--i >= 0) {\n    r[i] = 0;\n  }\n  for (i = 0; i < y.t; ++i) {\n    r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n  }\n  r.s = 0;\n  r.clamp();\n  if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\n}\n\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n  var x = this.abs();\n  var i = r.t = 2 * x.t;\n  while (--i >= 0) {\n    r[i] = 0;\n  }\n  for (i = 0; i < x.t - 1; ++i) {\n    var c = x.am(i, x[i], r, 2 * i, 0, 1);\n    if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n      r[i + x.t] -= x.DV;\n      r[i + x.t + 1] = 1;\n    }\n  }\n  if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n  r.s = 0;\n  r.clamp();\n}\n\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m, q, r) {\n  var pm = m.abs();\n  if (pm.t <= 0) return;\n  var pt = this.abs();\n  if (pt.t < pm.t) {\n    if (q != null) q.fromInt(0);\n    if (r != null) this.copyTo(r);\n    return;\n  }\n  if (r == null) r = nbi();\n  var y = nbi(),\n    ts = this.s,\n    ms = m.s;\n  var nsh = this.DB - nbits(pm[pm.t - 1]);\n  // normalize modulus\n  if (nsh > 0) {\n    pm.lShiftTo(nsh, y);\n    pt.lShiftTo(nsh, r);\n  } else {\n    pm.copyTo(y);\n    pt.copyTo(r);\n  }\n  var ys = y.t;\n  var y0 = y[ys - 1];\n  if (y0 == 0) return;\n  var yt = y0 * (1 << this.F1) + (ys > 1 ? y[ys - 2] >> this.F2 : 0);\n  var d1 = this.FV / yt,\n    d2 = (1 << this.F1) / yt,\n    e = 1 << this.F2;\n  var i = r.t,\n    j = i - ys,\n    t = q == null ? nbi() : q;\n  y.dlShiftTo(j, t);\n  if (r.compareTo(t) >= 0) {\n    r[r.t++] = 1;\n    r.subTo(t, r);\n  }\n  BigInteger.ONE.dlShiftTo(ys, t);\n  t.subTo(y, y);\n  // \"negative\" y so we can replace sub with am later\n  while (y.t < ys) {\n    y[y.t++] = 0;\n  }\n  while (--j >= 0) {\n    // Estimate quotient digit\n    var qd = r[--i] == y0 ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n    if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {\n      // Try it out\n      y.dlShiftTo(j, t);\n      r.subTo(t, r);\n      while (r[i] < --qd) {\n        r.subTo(t, r);\n      }\n    }\n  }\n  if (q != null) {\n    r.drShiftTo(ys, q);\n    if (ts != ms) BigInteger.ZERO.subTo(q, q);\n  }\n  r.t = ys;\n  r.clamp();\n  if (nsh > 0) r.rShiftTo(nsh, r);\n  // Denormalize remainder\n  if (ts < 0) BigInteger.ZERO.subTo(r, r);\n}\n\n// (public) this mod a\nfunction bnMod(a) {\n  var r = nbi();\n  this.abs().divRemTo(a, null, r);\n  if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\n  return r;\n}\n\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n  if (this.t < 1) return 0;\n  var x = this[0];\n  if ((x & 1) == 0) return 0;\n  var y = x & 3;\n  // y == 1/x mod 2^2\n  y = y * (2 - (x & 0xf) * y) & 0xf;\n  // y == 1/x mod 2^4\n  y = y * (2 - (x & 0xff) * y) & 0xff;\n  // y == 1/x mod 2^8\n  y = y * (2 - ((x & 0xffff) * y & 0xffff)) & 0xffff;\n  // y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n  y = y * (2 - x * y % this.DV) % this.DV;\n  // y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n  return y > 0 ? this.DV - y : -y;\n}\nfunction bnEquals(a) {\n  return this.compareTo(a) == 0;\n}\n\n// (protected) r = this + a\nfunction bnpAddTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] + a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c += a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c += a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c > 0) r[i++] = c;else if (c < -1) r[i++] = this.DV + c;\n  r.t = i;\n  r.clamp();\n}\n\n// (public) this + a\nfunction bnAdd(a) {\n  var r = nbi();\n  this.addTo(a, r);\n  return r;\n}\n\n// (public) this - a\nfunction bnSubtract(a) {\n  var r = nbi();\n  this.subTo(a, r);\n  return r;\n}\n\n// (public) this * a\nfunction bnMultiply(a) {\n  var r = nbi();\n  this.multiplyTo(a, r);\n  return r;\n}\n\n// (public) this / a\nfunction bnDivide(a) {\n  var r = nbi();\n  this.divRemTo(a, r, null);\n  return r;\n}\n\n// Montgomery reduction\nfunction Montgomery(m) {\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp & 0x7fff;\n  this.mph = this.mp >> 15;\n  this.um = (1 << m.DB - 15) - 1;\n  this.mt2 = 2 * m.t;\n}\n\n// xR mod m\nfunction montConvert(x) {\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t, r);\n  r.divRemTo(this.m, null, r);\n  if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\n  return r;\n}\n\n// x/R mod m\nfunction montRevert(x) {\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n}\n\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n  while (x.t <= this.mt2) {\n    // pad x so am has enough room later\n    x[x.t++] = 0;\n  }\n  for (var i = 0; i < this.m.t; ++i) {\n    // faster way of calculating u0 = x[i]*mp mod DV\n    var j = x[i] & 0x7fff;\n    var u0 = j * this.mpl + ((j * this.mph + (x[i] >> 15) * this.mpl & this.um) << 15) & x.DM;\n    // use am to combine the multiply-shift-add into one call\n    j = i + this.m.t;\n    x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n    // propagate carry\n    while (x[j] >= x.DV) {\n      x[j] -= x.DV;\n      x[++j]++;\n    }\n  }\n  x.clamp();\n  x.drShiftTo(this.m.t, x);\n  if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x, r) {\n  x.squareTo(r);\n  this.reduce(r);\n}\n\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n\n// (public) this^e % m (HAC 14.85)\nfunction bnModPow(e, m, callback) {\n  var i = e.bitLength(),\n    k,\n    r = nbv(1),\n    z = new Montgomery(m);\n  if (i <= 0) return r;else if (i < 18) k = 1;else if (i < 48) k = 3;else if (i < 144) k = 4;else if (i < 768) k = 5;else k = 6;\n\n  // precomputation\n  var g = new Array(),\n    n = 3,\n    k1 = k - 1,\n    km = (1 << k) - 1;\n  g[1] = z.convert(this);\n  if (k > 1) {\n    var g2 = nbi();\n    z.sqrTo(g[1], g2);\n    while (n <= km) {\n      g[n] = nbi();\n      z.mulTo(g2, g[n - 2], g[n]);\n      n += 2;\n    }\n  }\n  var j = e.t - 1,\n    w,\n    is1 = true,\n    r2 = nbi(),\n    t;\n  i = nbits(e[j]) - 1;\n  while (j >= 0) {\n    if (i >= k1) w = e[j] >> i - k1 & km;else {\n      w = (e[j] & (1 << i + 1) - 1) << k1 - i;\n      if (j > 0) w |= e[j - 1] >> this.DB + i - k1;\n    }\n    n = k;\n    while ((w & 1) == 0) {\n      w >>= 1;\n      --n;\n    }\n    if ((i -= n) < 0) {\n      i += this.DB;\n      --j;\n    }\n    if (is1) {\n      // ret == 1, don't bother squaring or multiplying it\n      g[w].copyTo(r);\n      is1 = false;\n    } else {\n      while (n > 1) {\n        z.sqrTo(r, r2);\n        z.sqrTo(r2, r);\n        n -= 2;\n      }\n      if (n > 0) z.sqrTo(r, r2);else {\n        t = r;\n        r = r2;\n        r2 = t;\n      }\n      z.mulTo(r2, g[w], r);\n    }\n    while (j >= 0 && (e[j] & 1 << i) == 0) {\n      z.sqrTo(r, r2);\n      t = r;\n      r = r2;\n      r2 = t;\n      if (--i < 0) {\n        i = this.DB - 1;\n        --j;\n      }\n    }\n  }\n  var result = z.revert(r);\n  callback(null, result);\n  return result;\n}\n\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.addTo = bnpAddTo;\n\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.modPow = bnModPow;\n\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\nimport CryptoJS from 'crypto-js/core';\nimport 'crypto-js/lib-typedarrays'; // necessary for crypto js\nimport SHA256 from 'crypto-js/sha256';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport WordArray from './utils/WordArray';\n\n/**\n * Returns a Buffer with a sequence of random nBytes\n *\n * @param {number} nBytes\n * @returns {Buffer} fixed-length sequence of random bytes\n */\n\nfunction randomBytes(nBytes) {\n  return Buffer.from(new WordArray().random(nBytes).toString(), 'hex');\n}\nimport BigInteger from './BigInteger';\n\n/**\n * Tests if a hex string has it most significant bit set (case-insensitive regex)\n */\nvar HEX_MSB_REGEX = /^[89a-f]/i;\nvar initN = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1' + '29024E088A67CC74020BBEA63B139B22514A08798E3404DD' + 'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245' + 'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED' + 'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D' + 'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F' + '83655D23DCA3AD961C62F356208552BB9ED529077096966D' + '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B' + 'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9' + 'DE2BCBF6955817183995497CEA956AE515D2261898FA0510' + '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64' + 'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7' + 'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B' + 'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C' + 'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31' + '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';\nvar newPasswordRequiredChallengeUserAttributePrefix = 'userAttributes.';\n\n/** @class */\nvar AuthenticationHelper = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationHelper object\n   * @param {string} PoolName Cognito user pool name.\n   */\n  function AuthenticationHelper(PoolName) {\n    this.N = new BigInteger(initN, 16);\n    this.g = new BigInteger('2', 16);\n    this.k = new BigInteger(this.hexHash(\"\" + this.padHex(this.N) + this.padHex(this.g)), 16);\n    this.smallAValue = this.generateRandomSmallA();\n    this.getLargeAValue(function () {});\n    this.infoBits = Buffer.from('Caldera Derived Key', 'utf8');\n    this.poolName = PoolName;\n  }\n\n  /**\n   * @returns {BigInteger} small A, a random number\n   */\n  var _proto = AuthenticationHelper.prototype;\n  _proto.getSmallAValue = function getSmallAValue() {\n    return this.smallAValue;\n  }\n\n  /**\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   */;\n  _proto.getLargeAValue = function getLargeAValue(callback) {\n    var _this = this;\n    if (this.largeAValue) {\n      callback(null, this.largeAValue);\n    } else {\n      this.calculateA(this.smallAValue, function (err, largeAValue) {\n        if (err) {\n          callback(err, null);\n        }\n        _this.largeAValue = largeAValue;\n        callback(null, _this.largeAValue);\n      });\n    }\n  }\n\n  /**\n   * helper function to generate a random big integer\n   * @returns {BigInteger} a random value.\n   * @private\n   */;\n  _proto.generateRandomSmallA = function generateRandomSmallA() {\n    // This will be interpreted as a postive 128-bit integer\n    var hexRandom = randomBytes(128).toString('hex');\n    var randomBigInt = new BigInteger(hexRandom, 16);\n\n    // There is no need to do randomBigInt.mod(this.N - 1) as N (3072-bit) is > 128 bytes (1024-bit)\n\n    return randomBigInt;\n  }\n\n  /**\n   * helper function to generate a random string\n   * @returns {string} a random value.\n   * @private\n   */;\n  _proto.generateRandomString = function generateRandomString() {\n    return randomBytes(40).toString('base64');\n  }\n\n  /**\n   * @returns {string} Generated random value included in password hash.\n   */;\n  _proto.getRandomPassword = function getRandomPassword() {\n    return this.randomPassword;\n  }\n\n  /**\n   * @returns {string} Generated random value included in devices hash.\n   */;\n  _proto.getSaltDevices = function getSaltDevices() {\n    return this.SaltToHashDevices;\n  }\n\n  /**\n   * @returns {string} Value used to verify devices.\n   */;\n  _proto.getVerifierDevices = function getVerifierDevices() {\n    return this.verifierDevices;\n  }\n\n  /**\n   * Generate salts and compute verifier.\n   * @param {string} deviceGroupKey Devices to generate verifier for.\n   * @param {string} username User to generate verifier for.\n   * @param {nodeCallback<null>} callback Called with (err, null)\n   * @returns {void}\n   */;\n  _proto.generateHashDevice = function generateHashDevice(deviceGroupKey, username, callback) {\n    var _this2 = this;\n    this.randomPassword = this.generateRandomString();\n    var combinedString = \"\" + deviceGroupKey + username + \":\" + this.randomPassword;\n    var hashedString = this.hash(combinedString);\n    var hexRandom = randomBytes(16).toString('hex');\n\n    // The random hex will be unambiguously represented as a postive integer\n    this.SaltToHashDevices = this.padHex(new BigInteger(hexRandom, 16));\n    this.g.modPow(new BigInteger(this.hexHash(this.SaltToHashDevices + hashedString), 16), this.N, function (err, verifierDevicesNotPadded) {\n      if (err) {\n        callback(err, null);\n      }\n      _this2.verifierDevices = _this2.padHex(verifierDevicesNotPadded);\n      callback(null, null);\n    });\n  }\n\n  /**\n   * Calculate the client's public value A = g^a%N\n   * with the generated random number a\n   * @param {BigInteger} a Randomly generated small A.\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   * @private\n   */;\n  _proto.calculateA = function calculateA(a, callback) {\n    var _this3 = this;\n    this.g.modPow(a, this.N, function (err, A) {\n      if (err) {\n        callback(err, null);\n      }\n      if (A.mod(_this3.N).equals(BigInteger.ZERO)) {\n        callback(new Error('Illegal paramater. A mod N cannot be 0.'), null);\n      }\n      callback(null, A);\n    });\n  }\n\n  /**\n   * Calculate the client's value U which is the hash of A and B\n   * @param {BigInteger} A Large A value.\n   * @param {BigInteger} B Server B value.\n   * @returns {BigInteger} Computed U value.\n   * @private\n   */;\n  _proto.calculateU = function calculateU(A, B) {\n    this.UHexHash = this.hexHash(this.padHex(A) + this.padHex(B));\n    var finalU = new BigInteger(this.UHexHash, 16);\n    return finalU;\n  }\n\n  /**\n   * Calculate a hash from a bitArray\n   * @param {Buffer} buf Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hash = function hash(buf) {\n    var str = buf instanceof Buffer ? CryptoJS.lib.WordArray.create(buf) : buf;\n    var hashHex = SHA256(str).toString();\n    return new Array(64 - hashHex.length).join('0') + hashHex;\n  }\n\n  /**\n   * Calculate a hash from a hex string\n   * @param {String} hexStr Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hexHash = function hexHash(hexStr) {\n    return this.hash(Buffer.from(hexStr, 'hex'));\n  }\n\n  /**\n   * Standard hkdf algorithm\n   * @param {Buffer} ikm Input key material.\n   * @param {Buffer} salt Salt value.\n   * @returns {Buffer} Strong key material.\n   * @private\n   */;\n  _proto.computehkdf = function computehkdf(ikm, salt) {\n    var infoBitsWordArray = CryptoJS.lib.WordArray.create(Buffer.concat([this.infoBits, Buffer.from(String.fromCharCode(1), 'utf8')]));\n    var ikmWordArray = ikm instanceof Buffer ? CryptoJS.lib.WordArray.create(ikm) : ikm;\n    var saltWordArray = salt instanceof Buffer ? CryptoJS.lib.WordArray.create(salt) : salt;\n    var prk = HmacSHA256(ikmWordArray, saltWordArray);\n    var hmac = HmacSHA256(infoBitsWordArray, prk);\n    return Buffer.from(hmac.toString(), 'hex').slice(0, 16);\n  }\n\n  /**\n   * Calculates the final hkdf based on computed S value, and computed U value and the key\n   * @param {String} username Username.\n   * @param {String} password Password.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {BigInteger} salt Generated salt.\n   * @param {nodeCallback<Buffer>} callback Called with (err, hkdfValue)\n   * @returns {void}\n   */;\n  _proto.getPasswordAuthenticationKey = function getPasswordAuthenticationKey(username, password, serverBValue, salt, callback) {\n    var _this4 = this;\n    if (serverBValue.mod(this.N).equals(BigInteger.ZERO)) {\n      throw new Error('B cannot be zero.');\n    }\n    this.UValue = this.calculateU(this.largeAValue, serverBValue);\n    if (this.UValue.equals(BigInteger.ZERO)) {\n      throw new Error('U cannot be zero.');\n    }\n    var usernamePassword = \"\" + this.poolName + username + \":\" + password;\n    var usernamePasswordHash = this.hash(usernamePassword);\n    var xValue = new BigInteger(this.hexHash(this.padHex(salt) + usernamePasswordHash), 16);\n    this.calculateS(xValue, serverBValue, function (err, sValue) {\n      if (err) {\n        callback(err, null);\n      }\n      var hkdf = _this4.computehkdf(Buffer.from(_this4.padHex(sValue), 'hex'), Buffer.from(_this4.padHex(_this4.UValue), 'hex'));\n      callback(null, hkdf);\n    });\n  }\n\n  /**\n   * Calculates the S value used in getPasswordAuthenticationKey\n   * @param {BigInteger} xValue Salted password hash value.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.calculateS = function calculateS(xValue, serverBValue, callback) {\n    var _this5 = this;\n    this.g.modPow(xValue, this.N, function (err, gModPowXN) {\n      if (err) {\n        callback(err, null);\n      }\n      var intValue2 = serverBValue.subtract(_this5.k.multiply(gModPowXN));\n      intValue2.modPow(_this5.smallAValue.add(_this5.UValue.multiply(xValue)), _this5.N, function (err2, result) {\n        if (err2) {\n          callback(err2, null);\n        }\n        callback(null, result.mod(_this5.N));\n      });\n    });\n  }\n\n  /**\n   * Return constant newPasswordRequiredChallengeUserAttributePrefix\n   * @return {newPasswordRequiredChallengeUserAttributePrefix} constant prefix value\n   */;\n  _proto.getNewPasswordRequiredChallengeUserAttributePrefix = function getNewPasswordRequiredChallengeUserAttributePrefix() {\n    return newPasswordRequiredChallengeUserAttributePrefix;\n  }\n\n  /**\n   * Returns an unambiguous, even-length hex string of the two's complement encoding of an integer.\n   *\n   * It is compatible with the hex encoding of Java's BigInteger's toByteArray(), wich returns a\n   * byte array containing the two's-complement representation of a BigInteger. The array contains\n   * the minimum number of bytes required to represent the BigInteger, including at least one sign bit.\n   *\n   * Examples showing how ambiguity is avoided by left padding with:\n   * \t\"00\" (for positive values where the most-significant-bit is set)\n   *  \"FF\" (for negative values where the most-significant-bit is set)\n   *\n   * padHex(bigInteger.fromInt(-236))  === \"FF14\"\n   * padHex(bigInteger.fromInt(20))    === \"14\"\n   *\n   * padHex(bigInteger.fromInt(-200))  === \"FF38\"\n   * padHex(bigInteger.fromInt(56))    === \"38\"\n   *\n   * padHex(bigInteger.fromInt(-20))   === \"EC\"\n   * padHex(bigInteger.fromInt(236))   === \"00EC\"\n   *\n   * padHex(bigInteger.fromInt(-56))   === \"C8\"\n   * padHex(bigInteger.fromInt(200))   === \"00C8\"\n   *\n   * @param {BigInteger} bigInt Number to encode.\n   * @returns {String} even-length hex string of the two's complement encoding.\n   */;\n  _proto.padHex = function padHex(bigInt) {\n    if (!(bigInt instanceof BigInteger)) {\n      throw new Error('Not a BigInteger');\n    }\n    var isNegative = bigInt.compareTo(BigInteger.ZERO) < 0;\n\n    /* Get a hex string for abs(bigInt) */\n    var hexStr = bigInt.abs().toString(16);\n\n    /* Pad hex to even length if needed */\n    hexStr = hexStr.length % 2 !== 0 ? \"0\" + hexStr : hexStr;\n\n    /* Prepend \"00\" if the most significant bit is set */\n    hexStr = HEX_MSB_REGEX.test(hexStr) ? \"00\" + hexStr : hexStr;\n    if (isNegative) {\n      /* Flip the bits of the representation */\n      var invertedNibbles = hexStr.split('').map(function (x) {\n        var invertedNibble = ~parseInt(x, 16) & 0xf;\n        return '0123456789ABCDEF'.charAt(invertedNibble);\n      }).join('');\n\n      /* After flipping the bits, add one to get the 2's complement representation */\n      var flippedBitsBI = new BigInteger(invertedNibbles, 16).add(BigInteger.ONE);\n      hexStr = flippedBitsBI.toString(16);\n\n      /*\n      For hex strings starting with 'FF8', 'FF' can be dropped, e.g. 0xFFFF80=0xFF80=0x80=-128\n      \t\tAny sequence of '1' bits on the left can always be substituted with a single '1' bit\n      without changing the represented value.\n      \t\tThis only happens in the case when the input is 80...00\n      */\n      if (hexStr.toUpperCase().startsWith('FF8')) {\n        hexStr = hexStr.substring(2);\n      }\n    }\n    return hexStr;\n  };\n  return AuthenticationHelper;\n}();\nexport { AuthenticationHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\n\n/** @class */\nvar CognitoJwtToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoJwtToken object\n   * @param {string=} token The JWT token.\n   */\n  function CognitoJwtToken(token) {\n    // Assign object\n    this.jwtToken = token || '';\n    this.payload = this.decodePayload();\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoJwtToken.prototype;\n  _proto.getJwtToken = function getJwtToken() {\n    return this.jwtToken;\n  }\n\n  /**\n   * @returns {int} the token's expiration (exp member).\n   */;\n  _proto.getExpiration = function getExpiration() {\n    return this.payload.exp;\n  }\n\n  /**\n   * @returns {int} the token's \"issued at\" (iat member).\n   */;\n  _proto.getIssuedAt = function getIssuedAt() {\n    return this.payload.iat;\n  }\n\n  /**\n   * @returns {object} the token's payload.\n   */;\n  _proto.decodePayload = function decodePayload() {\n    var payload = this.jwtToken.split('.')[1];\n    try {\n      return JSON.parse(Buffer.from(payload, 'base64').toString('utf8'));\n    } catch (err) {\n      return {};\n    }\n  };\n  return CognitoJwtToken;\n}();\nexport { CognitoJwtToken as default };","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CognitoJwtToken from './CognitoJwtToken';\n\n/** @class */\nvar CognitoAccessToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoAccessToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoAccessToken object\n   * @param {string=} AccessToken The JWT access token.\n   */\n  function CognitoAccessToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      AccessToken = _ref.AccessToken;\n    return _CognitoJwtToken.call(this, AccessToken || '') || this;\n  }\n  return CognitoAccessToken;\n}(CognitoJwtToken);\nexport { CognitoAccessToken as default };","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CognitoJwtToken from './CognitoJwtToken';\n\n/** @class */\nvar CognitoIdToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoIdToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoIdToken object\n   * @param {string=} IdToken The JWT Id token\n   */\n  function CognitoIdToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken;\n    return _CognitoJwtToken.call(this, IdToken || '') || this;\n  }\n  return CognitoIdToken;\n}(CognitoJwtToken);\nexport { CognitoIdToken as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoRefreshToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoRefreshToken object\n   * @param {string=} RefreshToken The JWT refresh token.\n   */\n  function CognitoRefreshToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      RefreshToken = _ref.RefreshToken;\n    // Assign object\n    this.token = RefreshToken || '';\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoRefreshToken.prototype;\n  _proto.getToken = function getToken() {\n    return this.token;\n  };\n  return CognitoRefreshToken;\n}();\nexport { CognitoRefreshToken as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserSession = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserSession object\n   * @param {CognitoIdToken} IdToken The session's Id token.\n   * @param {CognitoRefreshToken=} RefreshToken The session's refresh token.\n   * @param {CognitoAccessToken} AccessToken The session's access token.\n   * @param {int} ClockDrift The saved computer's clock drift or undefined to force calculation.\n   */\n  function CognitoUserSession(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken,\n      RefreshToken = _ref.RefreshToken,\n      AccessToken = _ref.AccessToken,\n      ClockDrift = _ref.ClockDrift;\n    if (AccessToken == null || IdToken == null) {\n      throw new Error('Id token and Access Token must be present.');\n    }\n    this.idToken = IdToken;\n    this.refreshToken = RefreshToken;\n    this.accessToken = AccessToken;\n    this.clockDrift = ClockDrift === undefined ? this.calculateClockDrift() : ClockDrift;\n  }\n\n  /**\n   * @returns {CognitoIdToken} the session's Id token\n   */\n  var _proto = CognitoUserSession.prototype;\n  _proto.getIdToken = function getIdToken() {\n    return this.idToken;\n  }\n\n  /**\n   * @returns {CognitoRefreshToken} the session's refresh token\n   */;\n  _proto.getRefreshToken = function getRefreshToken() {\n    return this.refreshToken;\n  }\n\n  /**\n   * @returns {CognitoAccessToken} the session's access token\n   */;\n  _proto.getAccessToken = function getAccessToken() {\n    return this.accessToken;\n  }\n\n  /**\n   * @returns {int} the session's clock drift\n   */;\n  _proto.getClockDrift = function getClockDrift() {\n    return this.clockDrift;\n  }\n\n  /**\n   * @returns {int} the computer's clock drift\n   */;\n  _proto.calculateClockDrift = function calculateClockDrift() {\n    var now = Math.floor(new Date() / 1000);\n    var iat = Math.min(this.accessToken.getIssuedAt(), this.idToken.getIssuedAt());\n    return now - iat;\n  }\n\n  /**\n   * Checks to see if the session is still valid based on session expiry information found\n   * in tokens and the current time (adjusted with clock drift)\n   * @returns {boolean} if the session is still valid\n   */;\n  _proto.isValid = function isValid() {\n    var now = Math.floor(new Date() / 1000);\n    var adjusted = now - this.clockDrift;\n    return adjusted < this.accessToken.getExpiration() && adjusted < this.idToken.getExpiration();\n  };\n  return CognitoUserSession;\n}();\nexport { CognitoUserSession as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nvar weekNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n/** @class */\nvar DateHelper = /*#__PURE__*/function () {\n  function DateHelper() {}\n  var _proto = DateHelper.prototype;\n  /**\n   * @returns {string} The current time in \"ddd MMM D HH:mm:ss UTC YYYY\" format.\n   */\n  _proto.getNowString = function getNowString() {\n    var now = new Date();\n    var weekDay = weekNames[now.getUTCDay()];\n    var month = monthNames[now.getUTCMonth()];\n    var day = now.getUTCDate();\n    var hours = now.getUTCHours();\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n    var minutes = now.getUTCMinutes();\n    if (minutes < 10) {\n      minutes = \"0\" + minutes;\n    }\n    var seconds = now.getUTCSeconds();\n    if (seconds < 10) {\n      seconds = \"0\" + seconds;\n    }\n    var year = now.getUTCFullYear();\n\n    // ddd MMM D HH:mm:ss UTC YYYY\n    var dateNow = weekDay + \" \" + month + \" \" + day + \" \" + hours + \":\" + minutes + \":\" + seconds + \" UTC \" + year;\n    return dateNow;\n  };\n  return DateHelper;\n}();\nexport { DateHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserAttribute = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserAttribute object\n   * @param {string=} Name The record's name\n   * @param {string=} Value The record's value\n   */\n  function CognitoUserAttribute(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      Name = _ref.Name,\n      Value = _ref.Value;\n    this.Name = Name || '';\n    this.Value = Value || '';\n  }\n\n  /**\n   * @returns {string} the record's value.\n   */\n  var _proto = CognitoUserAttribute.prototype;\n  _proto.getValue = function getValue() {\n    return this.Value;\n  }\n\n  /**\n   * Sets the record's value.\n   * @param {string} value The new value.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setValue = function setValue(value) {\n    this.Value = value;\n    return this;\n  }\n\n  /**\n   * @returns {string} the record's name.\n   */;\n  _proto.getName = function getName() {\n    return this.Name;\n  }\n\n  /**\n   * Sets the record's name\n   * @param {string} name The new name.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setName = function setName(name) {\n    this.Name = name;\n    return this;\n  }\n\n  /**\n   * @returns {string} a string representation of the record.\n   */;\n  _proto.toString = function toString() {\n    return JSON.stringify(this);\n  }\n\n  /**\n   * @returns {object} a flat object representing the record.\n   */;\n  _proto.toJSON = function toJSON() {\n    return {\n      Name: this.Name,\n      Value: this.Value\n    };\n  };\n  return CognitoUserAttribute;\n}();\nexport { CognitoUserAttribute as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar dataMemory = {};\n\n/** @class */\nexport var MemoryStorage = /*#__PURE__*/function () {\n  function MemoryStorage() {}\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  MemoryStorage.setItem = function setItem(key, value) {\n    dataMemory[key] = value;\n    return dataMemory[key];\n  }\n\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */;\n  MemoryStorage.getItem = function getItem(key) {\n    return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : undefined;\n  }\n\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {boolean} return true\n   */;\n  MemoryStorage.removeItem = function removeItem(key) {\n    return delete dataMemory[key];\n  }\n\n  /**\n   * This is used to clear the storage\n   * @returns {string} nothing\n   */;\n  MemoryStorage.clear = function clear() {\n    dataMemory = {};\n    return dataMemory;\n  };\n  return MemoryStorage;\n}();\n\n/** @class */\nvar StorageHelper = /*#__PURE__*/function () {\n  /**\n   * This is used to get a storage object\n   * @returns {object} the storage\n   */\n  function StorageHelper() {\n    try {\n      this.storageWindow = window.localStorage;\n      this.storageWindow.setItem('aws.cognito.test-ls', 1);\n      this.storageWindow.removeItem('aws.cognito.test-ls');\n    } catch (exception) {\n      this.storageWindow = MemoryStorage;\n    }\n  }\n\n  /**\n   * This is used to return the storage\n   * @returns {object} the storage\n   */\n  var _proto = StorageHelper.prototype;\n  _proto.getStorage = function getStorage() {\n    return this.storageWindow;\n  };\n  return StorageHelper;\n}();\nexport { StorageHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\nimport CryptoJS from 'crypto-js/core';\nimport TypedArrays from 'crypto-js/lib-typedarrays'; // necessary for crypto js\nimport Base64 from 'crypto-js/enc-base64';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport BigInteger from './BigInteger';\nimport AuthenticationHelper from './AuthenticationHelper';\nimport CognitoAccessToken from './CognitoAccessToken';\nimport CognitoIdToken from './CognitoIdToken';\nimport CognitoRefreshToken from './CognitoRefreshToken';\nimport CognitoUserSession from './CognitoUserSession';\nimport DateHelper from './DateHelper';\nimport CognitoUserAttribute from './CognitoUserAttribute';\nimport StorageHelper from './StorageHelper';\n\n/**\n * @callback nodeCallback\n * @template T result\n * @param {*} err The operation failure reason, or null.\n * @param {T} result The operation result.\n */\n\n/**\n * @callback onFailure\n * @param {*} err Failure reason.\n */\n\n/**\n * @callback onSuccess\n * @template T result\n * @param {T} result The operation result.\n */\n\n/**\n * @callback mfaRequired\n * @param {*} details MFA challenge details.\n */\n\n/**\n * @callback customChallenge\n * @param {*} details Custom challenge details.\n */\n\n/**\n * @callback inputVerificationCode\n * @param {*} data Server response.\n */\n\n/**\n * @callback authSuccess\n * @param {CognitoUserSession} session The new session.\n * @param {bool=} userConfirmationNecessary User must be confirmed.\n */\n\nvar isBrowser = typeof navigator !== 'undefined';\nvar userAgent = isBrowser ? navigator.userAgent : 'nodejs';\n\n/** @class */\nvar CognitoUser = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUser object\n   * @param {object} data Creation options\n   * @param {string} data.Username The user's username.\n   * @param {CognitoUserPool} data.Pool Pool containing the user.\n   * @param {object} data.Storage Optional storage object.\n   */\n  function CognitoUser(data) {\n    if (data == null || data.Username == null || data.Pool == null) {\n      throw new Error('Username and Pool information are required.');\n    }\n    this.username = data.Username || '';\n    this.pool = data.Pool;\n    this.Session = null;\n    this.client = data.Pool.client;\n    this.signInUserSession = null;\n    this.authenticationFlowType = 'USER_SRP_AUTH';\n    this.storage = data.Storage || new StorageHelper().getStorage();\n    this.keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    this.userDataKey = this.keyPrefix + \".\" + this.username + \".userData\";\n  }\n\n  /**\n   * Sets the session for this user\n   * @param {CognitoUserSession} signInUserSession the session\n   * @returns {void}\n   */\n  var _proto = CognitoUser.prototype;\n  _proto.setSignInUserSession = function setSignInUserSession(signInUserSession) {\n    this.clearCachedUserData();\n    this.signInUserSession = signInUserSession;\n    this.cacheTokens();\n  }\n\n  /**\n   * @returns {CognitoUserSession} the current session for this user\n   */;\n  _proto.getSignInUserSession = function getSignInUserSession() {\n    return this.signInUserSession;\n  }\n\n  /**\n   * @returns {string} the user's username\n   */;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {String} the authentication flow type\n   */;\n  _proto.getAuthenticationFlowType = function getAuthenticationFlowType() {\n    return this.authenticationFlowType;\n  }\n\n  /**\n   * sets authentication flow type\n   * @param {string} authenticationFlowType New value.\n   * @returns {void}\n   */;\n  _proto.setAuthenticationFlowType = function setAuthenticationFlowType(authenticationFlowType) {\n    this.authenticationFlowType = authenticationFlowType;\n  }\n\n  /**\n   * This is used for authenticating the user through the custom authentication flow.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.initiateAuth = function initiateAuth(authDetails, callback) {\n    var _this = this;\n    var authParameters = authDetails.getAuthParameters();\n    authParameters.USERNAME = this.username;\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'CUSTOM_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = data.ChallengeName;\n      var challengeParameters = data.ChallengeParameters;\n      if (challengeName === 'CUSTOM_CHALLENGE') {\n        _this.Session = data.Session;\n        return callback.customChallenge(challengeParameters);\n      }\n      _this.signInUserSession = _this.getCognitoUserSession(data.AuthenticationResult);\n      _this.cacheTokens();\n      return callback.onSuccess(_this.signInUserSession);\n    });\n  }\n\n  /**\n   * This is used for authenticating the user.\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUser = function authenticateUser(authDetails, callback) {\n    if (this.authenticationFlowType === 'USER_PASSWORD_AUTH') {\n      return this.authenticateUserPlainUsernamePassword(authDetails, callback);\n    } else if (this.authenticationFlowType === 'USER_SRP_AUTH' || this.authenticationFlowType === 'CUSTOM_AUTH') {\n      return this.authenticateUserDefaultAuth(authDetails, callback);\n    }\n    return callback.onFailure(new Error('Authentication flow type is invalid.'));\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * It calls the AuthenticationHelper for SRP related\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserDefaultAuth = function authenticateUserDefaultAuth(authDetails, callback) {\n    var _this2 = this;\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    var dateHelper = new DateHelper();\n    var serverBValue;\n    var salt;\n    var authParameters = {};\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    authParameters.USERNAME = this.username;\n    authenticationHelper.getLargeAValue(function (errOnAValue, aValue) {\n      // getLargeAValue callback start\n      if (errOnAValue) {\n        callback.onFailure(errOnAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      if (_this2.authenticationFlowType === 'CUSTOM_AUTH') {\n        authParameters.CHALLENGE_NAME = 'SRP_A';\n      }\n      var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n      var jsonReq = {\n        AuthFlow: _this2.authenticationFlowType,\n        ClientId: _this2.pool.getClientId(),\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetaData\n      };\n      if (_this2.getUserContextData(_this2.username)) {\n        jsonReq.UserContextData = _this2.getUserContextData(_this2.username);\n      }\n      _this2.client.request('InitiateAuth', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        _this2.username = challengeParameters.USER_ID_FOR_SRP;\n        _this2.userDataKey = _this2.keyPrefix + \".\" + _this2.username + \".userData\";\n        serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        salt = new BigInteger(challengeParameters.SALT, 16);\n        _this2.getCachedDeviceKeyAndPassword();\n        authenticationHelper.getPasswordAuthenticationKey(_this2.username, authDetails.getPassword(), serverBValue, salt, function (errOnHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errOnHkdf) {\n            callback.onFailure(errOnHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this2.pool.getUserPoolName(), 'utf8'), Buffer.from(_this2.username, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this2.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          if (_this2.deviceKey != null) {\n            challengeResponses.DEVICE_KEY = _this2.deviceKey;\n          }\n          var respondToAuthChallenge = function respondToAuthChallenge(challenge, challengeCallback) {\n            return _this2.client.request('RespondToAuthChallenge', challenge, function (errChallenge, dataChallenge) {\n              if (errChallenge && errChallenge.code === 'ResourceNotFoundException' && errChallenge.message.toLowerCase().indexOf('device') !== -1) {\n                challengeResponses.DEVICE_KEY = null;\n                _this2.deviceKey = null;\n                _this2.randomPassword = null;\n                _this2.deviceGroupKey = null;\n                _this2.clearCachedDeviceKeyAndPassword();\n                return respondToAuthChallenge(challenge, challengeCallback);\n              }\n              return challengeCallback(errChallenge, dataChallenge);\n            });\n          };\n          var jsonReqResp = {\n            ChallengeName: 'PASSWORD_VERIFIER',\n            ClientId: _this2.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session,\n            ClientMetadata: clientMetaData\n          };\n          if (_this2.getUserContextData()) {\n            jsonReqResp.UserContextData = _this2.getUserContextData();\n          }\n          respondToAuthChallenge(jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            return _this2.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserPlainUsernamePassword = function authenticateUserPlainUsernamePassword(authDetails, callback) {\n    var _this3 = this;\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.PASSWORD = authDetails.getPassword();\n    if (!authParameters.PASSWORD) {\n      callback.onFailure(new Error('PASSWORD parameter is required'));\n      return;\n    }\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'USER_PASSWORD_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData(this.username)) {\n      jsonReq.UserContextData = this.getUserContextData(this.username);\n    }\n    // USER_PASSWORD_AUTH happens in a single round-trip: client sends userName and password,\n    // Cognito UserPools verifies password and returns tokens.\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this3.authenticateUserInternal(authResult, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {object} dataAuthenticate authentication data\n   * @param {object} authenticationHelper helper created\n   * @param {callback} callback passed on from caller\n   * @returns {void}\n   */;\n  _proto.authenticateUserInternal = function authenticateUserInternal(dataAuthenticate, authenticationHelper, callback) {\n    var _this4 = this;\n    var challengeName = dataAuthenticate.ChallengeName;\n    var challengeParameters = dataAuthenticate.ChallengeParameters;\n    if (challengeName === 'SMS_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SELECT_MFA_TYPE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.selectMFAType(challengeName, challengeParameters);\n    }\n    if (challengeName === 'MFA_SETUP') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaSetup(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SOFTWARE_TOKEN_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.totpRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'CUSTOM_CHALLENGE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.customChallenge(challengeParameters);\n    }\n    if (challengeName === 'NEW_PASSWORD_REQUIRED') {\n      this.Session = dataAuthenticate.Session;\n      var userAttributes = null;\n      var rawRequiredAttributes = null;\n      var requiredAttributes = [];\n      var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n      if (challengeParameters) {\n        userAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes);\n        rawRequiredAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes);\n      }\n      if (rawRequiredAttributes) {\n        for (var i = 0; i < rawRequiredAttributes.length; i++) {\n          requiredAttributes[i] = rawRequiredAttributes[i].substr(userAttributesPrefix.length);\n        }\n      }\n      return callback.newPasswordRequired(userAttributes, requiredAttributes);\n    }\n    if (challengeName === 'DEVICE_SRP_AUTH') {\n      this.Session = dataAuthenticate.Session;\n      this.getDeviceResponse(callback);\n      return undefined;\n    }\n    this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n    this.challengeName = challengeName;\n    this.cacheTokens();\n    var newDeviceMetadata = dataAuthenticate.AuthenticationResult.NewDeviceMetadata;\n    if (newDeviceMetadata == null) {\n      return callback.onSuccess(this.signInUserSession);\n    }\n    authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n      if (errGenHash) {\n        return callback.onFailure(errGenHash);\n      }\n      var deviceSecretVerifierConfig = {\n        Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n        PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n      };\n      _this4.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n      _this4.deviceGroupKey = newDeviceMetadata.DeviceGroupKey;\n      _this4.randomPassword = authenticationHelper.getRandomPassword();\n      _this4.client.request('ConfirmDevice', {\n        DeviceKey: newDeviceMetadata.DeviceKey,\n        AccessToken: _this4.signInUserSession.getAccessToken().getJwtToken(),\n        DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n        DeviceName: userAgent\n      }, function (errConfirm, dataConfirm) {\n        if (errConfirm) {\n          return callback.onFailure(errConfirm);\n        }\n        _this4.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n        _this4.cacheDeviceKeyAndPassword();\n        if (dataConfirm.UserConfirmationNecessary === true) {\n          return callback.onSuccess(_this4.signInUserSession, dataConfirm.UserConfirmationNecessary);\n        }\n        return callback.onSuccess(_this4.signInUserSession);\n      });\n      return undefined;\n    });\n    return undefined;\n  }\n\n  /**\n   * This method is user to complete the NEW_PASSWORD_REQUIRED challenge.\n   * Pass the new password with any new user attributes to be updated.\n   * User attribute keys must be of format userAttributes.<attribute_name>.\n   * @param {string} newPassword new password for this user\n   * @param {object} requiredAttributeData map with values for all required attributes\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *         response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.completeNewPasswordChallenge = function completeNewPasswordChallenge(newPassword, requiredAttributeData, callback, clientMetadata) {\n    var _this5 = this;\n    if (!newPassword) {\n      return callback.onFailure(new Error('New password is required.'));\n    }\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n    var finalUserAttributes = {};\n    if (requiredAttributeData) {\n      Object.keys(requiredAttributeData).forEach(function (key) {\n        finalUserAttributes[userAttributesPrefix + key] = requiredAttributeData[key];\n      });\n    }\n    finalUserAttributes.NEW_PASSWORD = newPassword;\n    finalUserAttributes.USERNAME = this.username;\n    var jsonReq = {\n      ChallengeName: 'NEW_PASSWORD_REQUIRED',\n      ClientId: this.pool.getClientId(),\n      ChallengeResponses: finalUserAttributes,\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (errAuthenticate, dataAuthenticate) {\n      if (errAuthenticate) {\n        return callback.onFailure(errAuthenticate);\n      }\n      return _this5.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get a session using device authentication. It is called at the end of user\n   * authentication\n   *\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   * @private\n   */;\n  _proto.getDeviceResponse = function getDeviceResponse(callback, clientMetadata) {\n    var _this6 = this;\n    var authenticationHelper = new AuthenticationHelper(this.deviceGroupKey);\n    var dateHelper = new DateHelper();\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.DEVICE_KEY = this.deviceKey;\n    authenticationHelper.getLargeAValue(function (errAValue, aValue) {\n      // getLargeAValue callback start\n      if (errAValue) {\n        callback.onFailure(errAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      var jsonReq = {\n        ChallengeName: 'DEVICE_SRP_AUTH',\n        ClientId: _this6.pool.getClientId(),\n        ChallengeResponses: authParameters,\n        ClientMetadata: clientMetadata,\n        Session: _this6.Session\n      };\n      if (_this6.getUserContextData()) {\n        jsonReq.UserContextData = _this6.getUserContextData();\n      }\n      _this6.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        var serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        var salt = new BigInteger(challengeParameters.SALT, 16);\n        authenticationHelper.getPasswordAuthenticationKey(_this6.deviceKey, _this6.randomPassword, serverBValue, salt, function (errHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errHkdf) {\n            return callback.onFailure(errHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this6.deviceGroupKey, 'utf8'), Buffer.from(_this6.deviceKey, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this6.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          challengeResponses.DEVICE_KEY = _this6.deviceKey;\n          var jsonReqResp = {\n            ChallengeName: 'DEVICE_PASSWORD_VERIFIER',\n            ClientId: _this6.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session\n          };\n          if (_this6.getUserContextData()) {\n            jsonReqResp.UserContextData = _this6.getUserContextData();\n          }\n          _this6.client.request('RespondToAuthChallenge', jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            _this6.signInUserSession = _this6.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n            _this6.cacheTokens();\n            return callback.onSuccess(_this6.signInUserSession);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * This is used for a certain user to confirm the registration by using a confirmation code\n   * @param {string} confirmationCode Code entered by user.\n   * @param {bool} forceAliasCreation Allow migrating from an existing email / phone number.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmRegistration = function confirmRegistration(confirmationCode, forceAliasCreation, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      ConfirmationCode: confirmationCode,\n      Username: this.username,\n      ForceAliasCreation: forceAliasCreation,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmSignUp', jsonReq, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n  }\n\n  /**\n   * This is used by the user once he has the responses to a custom challenge\n   * @param {string} answerChallenge The custom challenge answer.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge\n   *    Custom challenge response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendCustomChallengeAnswer = function sendCustomChallengeAnswer(answerChallenge, callback, clientMetadata) {\n    var _this7 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: 'CUSTOM_CHALLENGE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this7.authenticateUserInternal(data, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * This is used by the user once he has an MFA code\n   * @param {string} confirmationCode The MFA code entered by the user.\n   * @param {object} callback Result callback map.\n   * @param {string} mfaType The mfa we are replying to.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendMFACode = function sendMFACode(confirmationCode, callback, mfaType, clientMetadata) {\n    var _this8 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.SMS_MFA_CODE = confirmationCode;\n    var mfaTypeSelection = mfaType || 'SMS_MFA';\n    if (mfaTypeSelection === 'SOFTWARE_TOKEN_MFA') {\n      challengeResponses.SOFTWARE_TOKEN_MFA_CODE = confirmationCode;\n    }\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: mfaTypeSelection,\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, dataAuthenticate) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = dataAuthenticate.ChallengeName;\n      if (challengeName === 'DEVICE_SRP_AUTH') {\n        _this8.getDeviceResponse(callback);\n        return undefined;\n      }\n      _this8.signInUserSession = _this8.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n      _this8.cacheTokens();\n      if (dataAuthenticate.AuthenticationResult.NewDeviceMetadata == null) {\n        return callback.onSuccess(_this8.signInUserSession);\n      }\n      var authenticationHelper = new AuthenticationHelper(_this8.pool.getUserPoolName());\n      authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n        if (errGenHash) {\n          return callback.onFailure(errGenHash);\n        }\n        var deviceSecretVerifierConfig = {\n          Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n          PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n        };\n        _this8.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n        _this8.deviceGroupKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey;\n        _this8.randomPassword = authenticationHelper.getRandomPassword();\n        _this8.client.request('ConfirmDevice', {\n          DeviceKey: dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,\n          AccessToken: _this8.signInUserSession.getAccessToken().getJwtToken(),\n          DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n          DeviceName: userAgent\n        }, function (errConfirm, dataConfirm) {\n          if (errConfirm) {\n            return callback.onFailure(errConfirm);\n          }\n          _this8.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n          _this8.cacheDeviceKeyAndPassword();\n          if (dataConfirm.UserConfirmationNecessary === true) {\n            return callback.onSuccess(_this8.signInUserSession, dataConfirm.UserConfirmationNecessary);\n          }\n          return callback.onSuccess(_this8.signInUserSession);\n        });\n        return undefined;\n      });\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to change the current password\n   * @param {string} oldUserPassword The current password.\n   * @param {string} newUserPassword The requested new password.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.changePassword = function changePassword(oldUserPassword, newUserPassword, callback, clientMetadata) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('ChangePassword', {\n      PreviousPassword: oldUserPassword,\n      ProposedPassword: newUserPassword,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.enableMFA = function enableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    var mfaEnabled = {\n      DeliveryMedium: 'SMS',\n      AttributeName: 'phone_number'\n    };\n    mfaOptions.push(mfaEnabled);\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @param {IMfaSettings} smsMfaSettings the sms mfa settings\n   * @param {IMFASettings} softwareTokenMfaSettings the software token mfa settings\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.setUserMfaPreference = function setUserMfaPreference(smsMfaSettings, softwareTokenMfaSettings, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('SetUserMFAPreference', {\n      SMSMfaSettings: smsMfaSettings,\n      SoftwareTokenMfaSettings: softwareTokenMfaSettings,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to disable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.disableMFA = function disableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to delete itself\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.deleteUser = function deleteUser(callback, clientMetadata) {\n    var _this9 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      _this9.clearCachedUser();\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * @typedef {CognitoUserAttribute | { Name:string, Value:string }} AttributeArg\n   */\n  /**\n   * This is used by an authenticated user to change a list of attributes\n   * @param {AttributeArg[]} attributes A list of the new user attributes.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.updateAttributes = function updateAttributes(attributes, callback, clientMetadata) {\n    var _this10 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('UpdateUserAttributes', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      UserAttributes: attributes,\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this10.getUserData(function () {\n        return callback(null, 'SUCCESS');\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to get a list of attributes\n   * @param {nodeCallback<CognitoUserAttribute[]>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getUserAttributes = function getUserAttributes(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      var attributeList = [];\n      for (var i = 0; i < userData.UserAttributes.length; i++) {\n        var attribute = {\n          Name: userData.UserAttributes[i].Name,\n          Value: userData.UserAttributes[i].Value\n        };\n        var userAttribute = new CognitoUserAttribute(attribute);\n        attributeList.push(userAttribute);\n      }\n      return callback(null, attributeList);\n    });\n    return undefined;\n  }\n\n  /**\n   * This was previously used by an authenticated user to get MFAOptions,\n   * but no longer returns a meaningful response. Refer to the documentation for\n   * how to setup and use MFA: https://docs.amplify.aws/lib/auth/mfa/q/platform/js\n   * @deprecated\n   * @param {nodeCallback<MFAOptions>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getMFAOptions = function getMFAOptions(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, userData.MFAOptions);\n    });\n    return undefined;\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.createGetUserRequest = function createGetUserRequest() {\n    return this.client.promisifyRequest('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.refreshSessionIfPossible = function refreshSessionIfPossible(options) {\n    var _this11 = this;\n    if (options === void 0) {\n      options = {};\n    }\n    // best effort, if not possible\n    return new Promise(function (resolve) {\n      var refresh = _this11.signInUserSession.getRefreshToken();\n      if (refresh && refresh.getToken()) {\n        _this11.refreshSession(refresh, resolve, options.clientMetadata);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * @typedef {Object} GetUserDataOptions\n   * @property {boolean} bypassCache - force getting data from Cognito service\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used by an authenticated users to get the userData\n   * @param {nodeCallback<UserData>} callback Called on success or error.\n   * @param {GetUserDataOptions} params\n   * @returns {void}\n   */;\n  _proto.getUserData = function getUserData(callback, params) {\n    var _this12 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.clearCachedUserData();\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var userData = this.getUserDataFromCache();\n    if (!userData) {\n      this.fetchUserData().then(function (data) {\n        callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    if (this.isFetchUserDataAndTokenRequired(params)) {\n      this.fetchUserData().then(function (data) {\n        return _this12.refreshSessionIfPossible(params).then(function () {\n          return data;\n        });\n      }).then(function (data) {\n        return callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    try {\n      callback(null, JSON.parse(userData));\n      return;\n    } catch (err) {\n      this.clearCachedUserData();\n      callback(err, null);\n      return;\n    }\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.getUserDataFromCache = function getUserDataFromCache() {\n    var userData = this.storage.getItem(this.userDataKey);\n    return userData;\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.isFetchUserDataAndTokenRequired = function isFetchUserDataAndTokenRequired(params) {\n    var _ref = params || {},\n      _ref$bypassCache = _ref.bypassCache,\n      bypassCache = _ref$bypassCache === void 0 ? false : _ref$bypassCache;\n    return bypassCache;\n  }\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.fetchUserData = function fetchUserData() {\n    var _this13 = this;\n    return this.createGetUserRequest().then(function (data) {\n      _this13.cacheUserData(data);\n      return data;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to delete a list of attributes\n   * @param {string[]} attributeList Names of the attributes to delete.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.deleteAttributes = function deleteAttributes(attributeList, callback) {\n    var _this14 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUserAttributes', {\n      UserAttributeNames: attributeList,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this14.getUserData(function () {\n        return callback(null, 'SUCCESS');\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by a user to resend a confirmation code\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.resendConfirmationCode = function resendConfirmationCode(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    this.client.request('ResendConfirmationCode', jsonReq, function (err, result) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, result);\n    });\n  }\n\n  /**\n   * @typedef {Object} GetSessionOptions\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used to get a session, either from the session object\n   * or from  the local storage, or by using a refresh token\n   *\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {GetSessionOptions} options\n   * @returns {void}\n   */;\n  _proto.getSession = function getSession(callback, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (this.username == null) {\n      return callback(new Error('Username is null. Cannot retrieve a new session'), null);\n    }\n    if (this.signInUserSession != null && this.signInUserSession.isValid()) {\n      return callback(null, this.signInUserSession);\n    }\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var idTokenKey = keyPrefix + \".idToken\";\n    var accessTokenKey = keyPrefix + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".clockDrift\";\n    if (this.storage.getItem(idTokenKey)) {\n      var idToken = new CognitoIdToken({\n        IdToken: this.storage.getItem(idTokenKey)\n      });\n      var accessToken = new CognitoAccessToken({\n        AccessToken: this.storage.getItem(accessTokenKey)\n      });\n      var refreshToken = new CognitoRefreshToken({\n        RefreshToken: this.storage.getItem(refreshTokenKey)\n      });\n      var clockDrift = parseInt(this.storage.getItem(clockDriftKey), 0) || 0;\n      var sessionData = {\n        IdToken: idToken,\n        AccessToken: accessToken,\n        RefreshToken: refreshToken,\n        ClockDrift: clockDrift\n      };\n      var cachedSession = new CognitoUserSession(sessionData);\n      if (cachedSession.isValid()) {\n        this.signInUserSession = cachedSession;\n        return callback(null, this.signInUserSession);\n      }\n      if (!refreshToken.getToken()) {\n        return callback(new Error('Cannot retrieve a new session. Please authenticate.'), null);\n      }\n      this.refreshSession(refreshToken, callback, options.clientMetadata);\n    } else {\n      callback(new Error('Local storage is missing an ID Token, Please authenticate'), null);\n    }\n    return undefined;\n  }\n\n  /**\n   * This uses the refreshToken to retrieve a new session\n   * @param {CognitoRefreshToken} refreshToken A previous session's refresh token.\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.refreshSession = function refreshSession(refreshToken, callback, clientMetadata) {\n    var _this15 = this;\n    var wrappedCallback = this.pool.wrapRefreshSessionCallback ? this.pool.wrapRefreshSessionCallback(callback) : callback;\n    var authParameters = {};\n    authParameters.REFRESH_TOKEN = refreshToken.getToken();\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    if (this.storage.getItem(lastUserKey)) {\n      this.username = this.storage.getItem(lastUserKey);\n      var deviceKeyKey = keyPrefix + \".\" + this.username + \".deviceKey\";\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      AuthFlow: 'REFRESH_TOKEN_AUTH',\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        if (err.code === 'NotAuthorizedException') {\n          _this15.clearCachedUser();\n        }\n        return wrappedCallback(err, null);\n      }\n      if (authResult) {\n        var authenticationResult = authResult.AuthenticationResult;\n        if (!Object.prototype.hasOwnProperty.call(authenticationResult, 'RefreshToken')) {\n          authenticationResult.RefreshToken = refreshToken.getToken();\n        }\n        _this15.signInUserSession = _this15.getCognitoUserSession(authenticationResult);\n        _this15.cacheTokens();\n        return wrappedCallback(null, _this15.signInUserSession);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used to save the session tokens to local storage\n   * @returns {void}\n   */;\n  _proto.cacheTokens = function cacheTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    this.storage.setItem(idTokenKey, this.signInUserSession.getIdToken().getJwtToken());\n    this.storage.setItem(accessTokenKey, this.signInUserSession.getAccessToken().getJwtToken());\n    this.storage.setItem(refreshTokenKey, this.signInUserSession.getRefreshToken().getToken());\n    this.storage.setItem(clockDriftKey, \"\" + this.signInUserSession.getClockDrift());\n    this.storage.setItem(lastUserKey, this.username);\n  }\n\n  /**\n   * This is to cache user data\n   */;\n  _proto.cacheUserData = function cacheUserData(userData) {\n    this.storage.setItem(this.userDataKey, JSON.stringify(userData));\n  }\n\n  /**\n   * This is to remove cached user data\n   */;\n  _proto.clearCachedUserData = function clearCachedUserData() {\n    this.storage.removeItem(this.userDataKey);\n  };\n  _proto.clearCachedUser = function clearCachedUser() {\n    this.clearCachedTokens();\n    this.clearCachedUserData();\n  }\n\n  /**\n   * This is used to cache the device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.cacheDeviceKeyAndPassword = function cacheDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.setItem(deviceKeyKey, this.deviceKey);\n    this.storage.setItem(randomPasswordKey, this.randomPassword);\n    this.storage.setItem(deviceGroupKeyKey, this.deviceGroupKey);\n  }\n\n  /**\n   * This is used to get current device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.getCachedDeviceKeyAndPassword = function getCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    if (this.storage.getItem(deviceKeyKey)) {\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      this.randomPassword = this.storage.getItem(randomPasswordKey);\n      this.deviceGroupKey = this.storage.getItem(deviceGroupKeyKey);\n    }\n  }\n\n  /**\n   * This is used to clear the device key info from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedDeviceKeyAndPassword = function clearCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.removeItem(deviceKeyKey);\n    this.storage.removeItem(randomPasswordKey);\n    this.storage.removeItem(deviceGroupKeyKey);\n  }\n\n  /**\n   * This is used to clear the session tokens from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedTokens = function clearCachedTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    this.storage.removeItem(idTokenKey);\n    this.storage.removeItem(accessTokenKey);\n    this.storage.removeItem(refreshTokenKey);\n    this.storage.removeItem(lastUserKey);\n    this.storage.removeItem(clockDriftKey);\n  }\n\n  /**\n   * This is used to build a user session from tokens retrieved in the authentication result\n   * @param {object} authResult Successful auth response from server.\n   * @returns {CognitoUserSession} The new user session.\n   * @private\n   */;\n  _proto.getCognitoUserSession = function getCognitoUserSession(authResult) {\n    var idToken = new CognitoIdToken(authResult);\n    var accessToken = new CognitoAccessToken(authResult);\n    var refreshToken = new CognitoRefreshToken(authResult);\n    var sessionData = {\n      IdToken: idToken,\n      AccessToken: accessToken,\n      RefreshToken: refreshToken\n    };\n    return new CognitoUserSession(sessionData);\n  }\n\n  /**\n   * This is used to initiate a forgot password request\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode?} callback.inputVerificationCode\n   *    Optional callback raised instead of onSuccess with response data.\n   * @param {onSuccess} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.forgotPassword = function forgotPassword(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ForgotPassword', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess(data);\n    });\n  }\n\n  /**\n   * This is used to confirm a new password using a confirmationCode\n   * @param {string} confirmationCode Code entered by user.\n   * @param {string} newPassword Confirm new password.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<void>} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmPassword = function confirmPassword(confirmationCode, newPassword, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ConfirmationCode: confirmationCode,\n      Password: newPassword,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmForgotPassword', jsonReq, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n  }\n\n  /**\n   * This is used to initiate an attribute confirmation request\n   * @param {string} attributeName User attribute that needs confirmation.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode} callback.inputVerificationCode Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.getAttributeVerificationCode = function getAttributeVerificationCode(attributeName, callback, clientMetadata) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetUserAttributeVerificationCode', {\n      AttributeName: attributeName,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to confirm an attribute using a confirmation code\n   * @param {string} attributeName Attribute being confirmed.\n   * @param {string} confirmationCode Code entered by user.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.verifyAttribute = function verifyAttribute(attributeName, confirmationCode, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('VerifyUserAttribute', {\n      AttributeName: attributeName,\n      Code: confirmationCode,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get the device information using the current device key\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device data.\n   * @returns {void}\n   */;\n  _proto.getDevice = function getDevice(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget a specific device\n   * @param {string} deviceKey Device key.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetSpecificDevice = function forgetSpecificDevice(deviceKey, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('ForgetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: deviceKey\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget the current device\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetDevice = function forgetDevice(callback) {\n    var _this16 = this;\n    this.forgetSpecificDevice(this.deviceKey, {\n      onFailure: callback.onFailure,\n      onSuccess: function onSuccess(result) {\n        _this16.deviceKey = null;\n        _this16.deviceGroupKey = null;\n        _this16.randomPassword = null;\n        _this16.clearCachedDeviceKeyAndPassword();\n        return callback.onSuccess(result);\n      }\n    });\n  }\n\n  /**\n   * This is used to set the device status as remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusRemembered = function setDeviceStatusRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to set the device status as not remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusNotRemembered = function setDeviceStatusNotRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'not_remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to list all devices for a user\n   *\n   * @param {int} limit the number of devices returned in a call\n   * @param {string | null} paginationToken the pagination token in case any was returned before\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device list.\n   * @returns {void}\n   */;\n  _proto.listDevices = function listDevices(limit, paginationToken, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    var requestParams = {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      Limit: limit\n    };\n    if (paginationToken) {\n      requestParams.PaginationToken = paginationToken;\n    }\n    this.client.request('ListDevices', requestParams, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to globally revoke all tokens issued to a user\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.globalSignOut = function globalSignOut(callback) {\n    var _this17 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GlobalSignOut', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this17.clearCachedUser();\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used for the user to signOut of the application and clear the cached tokens.\n   * @returns {void}\n   */;\n  _proto.signOut = function signOut(revokeTokenCallback) {\n    var _this18 = this;\n    // If tokens won't be revoked, we just clean the client data.\n    if (!revokeTokenCallback || typeof revokeTokenCallback !== 'function') {\n      this.cleanClientData();\n      return;\n    }\n    this.getSession(function (error, _session) {\n      if (error) {\n        return revokeTokenCallback(error);\n      }\n      _this18.revokeTokens(function (err) {\n        _this18.cleanClientData();\n        revokeTokenCallback(err);\n      });\n    });\n  };\n  _proto.revokeTokens = function revokeTokens(revokeTokenCallback) {\n    if (revokeTokenCallback === void 0) {\n      revokeTokenCallback = function revokeTokenCallback() {};\n    }\n    if (typeof revokeTokenCallback !== 'function') {\n      throw new Error('Invalid revokeTokenCallback. It should be a function.');\n    }\n    var tokensToBeRevoked = [];\n    if (!this.signInUserSession) {\n      var error = new Error('User is not authenticated');\n      return revokeTokenCallback(error);\n    }\n    if (!this.signInUserSession.getAccessToken()) {\n      var _error = new Error('No Access token available');\n      return revokeTokenCallback(_error);\n    }\n    var refreshToken = this.signInUserSession.getRefreshToken().getToken();\n    var accessToken = this.signInUserSession.getAccessToken();\n    if (this.isSessionRevocable(accessToken)) {\n      if (refreshToken) {\n        return this.revokeToken({\n          token: refreshToken,\n          callback: revokeTokenCallback\n        });\n      }\n    }\n    revokeTokenCallback();\n  };\n  _proto.isSessionRevocable = function isSessionRevocable(token) {\n    if (token && typeof token.decodePayload === 'function') {\n      try {\n        var _token$decodePayload = token.decodePayload(),\n          origin_jti = _token$decodePayload.origin_jti;\n        return !!origin_jti;\n      } catch (err) {\n        // Nothing to do, token doesnt have origin_jti claim\n      }\n    }\n    return false;\n  };\n  _proto.cleanClientData = function cleanClientData() {\n    this.signInUserSession = null;\n    this.clearCachedUser();\n  };\n  _proto.revokeToken = function revokeToken(_ref2) {\n    var token = _ref2.token,\n      callback = _ref2.callback;\n    this.client.requestWithRetry('RevokeToken', {\n      Token: token,\n      ClientId: this.pool.getClientId()\n    }, function (err) {\n      if (err) {\n        return callback(err);\n      }\n      callback();\n    });\n  }\n\n  /**\n   * This is used by a user trying to select a given MFA\n   * @param {string} answerChallenge the mfa the user wants\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.sendMFASelectionAnswer = function sendMFASelectionAnswer(answerChallenge, callback) {\n    var _this19 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var jsonReq = {\n      ChallengeName: 'SELECT_MFA_TYPE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this19.Session = data.Session;\n      if (answerChallenge === 'SMS_MFA') {\n        return callback.mfaRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      if (answerChallenge === 'SOFTWARE_TOKEN_MFA') {\n        return callback.totpRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This returns the user context data for advanced security feature.\n   * @returns {string} the user context data from CognitoUserPool\n   */;\n  _proto.getUserContextData = function getUserContextData() {\n    var pool = this.pool;\n    return pool.getUserContextData(this.username);\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to associate a TOTP MFA\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.associateSoftwareToken = function associateSoftwareToken(callback) {\n    var _this20 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('AssociateSoftwareToken', {\n        Session: this.Session\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this20.Session = data.Session;\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    } else {\n      this.client.request('AssociateSoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    }\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to verify a TOTP MFA\n   * @param {string} totpCode The MFA code entered by the user.\n   * @param {string} friendlyDeviceName The device name we are assigning to the device.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.verifySoftwareToken = function verifySoftwareToken(totpCode, friendlyDeviceName, callback) {\n    var _this21 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('VerifySoftwareToken', {\n        Session: this.Session,\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this21.Session = data.Session;\n        var challengeResponses = {};\n        challengeResponses.USERNAME = _this21.username;\n        var jsonReq = {\n          ChallengeName: 'MFA_SETUP',\n          ClientId: _this21.pool.getClientId(),\n          ChallengeResponses: challengeResponses,\n          Session: _this21.Session\n        };\n        if (_this21.getUserContextData()) {\n          jsonReq.UserContextData = _this21.getUserContextData();\n        }\n        _this21.client.request('RespondToAuthChallenge', jsonReq, function (errRespond, dataRespond) {\n          if (errRespond) {\n            return callback.onFailure(errRespond);\n          }\n          _this21.signInUserSession = _this21.getCognitoUserSession(dataRespond.AuthenticationResult);\n          _this21.cacheTokens();\n          return callback.onSuccess(_this21.signInUserSession);\n        });\n        return undefined;\n      });\n    } else {\n      this.client.request('VerifySoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.onSuccess(data);\n      });\n    }\n  };\n  return CognitoUser;\n}();\nexport { CognitoUser as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { version } from './version';\nvar BASE_USER_AGENT = \"aws-amplify/\" + version;\nexport var Platform = {\n  userAgent: BASE_USER_AGENT + \" js\",\n  product: '',\n  navigator: null,\n  isReactNative: false\n};\nif (typeof navigator !== 'undefined' && navigator.product) {\n  Platform.product = navigator.product || '';\n  Platform.navigator = navigator || null;\n  switch (navigator.product) {\n    case 'ReactNative':\n      Platform.userAgent = BASE_USER_AGENT + \" react-native\";\n      Platform.isReactNative = true;\n      break;\n    default:\n      Platform.userAgent = BASE_USER_AGENT + \" js\";\n      Platform.isReactNative = false;\n      break;\n  }\n}\nexport var getUserAgent = function getUserAgent() {\n  return Platform.userAgent;\n};\n\n/**\n * @deprecated use named import\n */\nexport default Platform;","import { getUserAgent } from \"./Platform\";\n// constructor\nfunction UserAgent() {}\n// public\nUserAgent.prototype.userAgent = getUserAgent();\nexport var appendToCognitoUserAgent = function appendToCognitoUserAgent(content) {\n  if (!content) {\n    return;\n  }\n  if (UserAgent.prototype.userAgent && !UserAgent.prototype.userAgent.includes(content)) {\n    UserAgent.prototype.userAgent = UserAgent.prototype.userAgent.concat(' ', content);\n  }\n  if (!UserAgent.prototype.userAgent || UserAgent.prototype.userAgent === '') {\n    UserAgent.prototype.userAgent = content;\n  }\n};\n\n// class for defining the amzn user-agent\nexport default UserAgent;","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nimport 'isomorphic-unfetch';\nimport UserAgent from './UserAgent';\nvar CognitoError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(CognitoError, _Error);\n  function CognitoError(message, code, name, statusCode) {\n    var _this;\n    _this = _Error.call(this, message) || this;\n    _this.code = code;\n    _this.name = name;\n    _this.statusCode = statusCode;\n    return _this;\n  }\n  return CognitoError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n/** @class */\nvar Client = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AWS Cognito Identity Provider client object\n   * @param {string} region AWS region\n   * @param {string} endpoint endpoint\n   * @param {object} fetchOptions options for fetch API (only credentials is supported)\n   */\n  function Client(region, endpoint, fetchOptions) {\n    this.endpoint = endpoint || \"https://cognito-idp.\" + region + \".amazonaws.com/\";\n    var _ref = fetchOptions || {},\n      credentials = _ref.credentials;\n    this.fetchOptions = credentials ? {\n      credentials: credentials\n    } : {};\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @returns Promise<object>\n   */\n  var _proto = Client.prototype;\n  _proto.promisifyRequest = function promisifyRequest(operation, params) {\n    var _this2 = this;\n    return new Promise(function (resolve, reject) {\n      _this2.request(operation, params, function (err, data) {\n        if (err) {\n          reject(new CognitoError(err.message, err.code, err.name, err.statusCode));\n        } else {\n          resolve(data);\n        }\n      });\n    });\n  };\n  _proto.requestWithRetry = function requestWithRetry(operation, params, callback) {\n    var _this3 = this;\n    var MAX_DELAY_IN_MILLIS = 5 * 1000;\n    jitteredExponentialRetry(function (p) {\n      return new Promise(function (res, rej) {\n        _this3.request(operation, p, function (error, result) {\n          if (error) {\n            rej(error);\n          } else {\n            res(result);\n          }\n        });\n      });\n    }, [params], MAX_DELAY_IN_MILLIS).then(function (result) {\n      return callback(null, result);\n    })[\"catch\"](function (error) {\n      return callback(error);\n    });\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @param {function} callback Callback called when a response is returned\n   * @returns {void}\n   */;\n  _proto.request = function request(operation, params, callback) {\n    var headers = {\n      'Content-Type': 'application/x-amz-json-1.1',\n      'X-Amz-Target': \"AWSCognitoIdentityProviderService.\" + operation,\n      'X-Amz-User-Agent': UserAgent.prototype.userAgent\n    };\n    var options = Object.assign({}, this.fetchOptions, {\n      headers: headers,\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      body: JSON.stringify(params)\n    });\n    var response;\n    var responseJsonData;\n    fetch(this.endpoint, options).then(function (resp) {\n      response = resp;\n      return resp;\n    }, function (err) {\n      // If error happens here, the request failed\n      // if it is TypeError throw network error\n      if (err instanceof TypeError) {\n        throw new Error('Network error');\n      }\n      throw err;\n    }).then(function (resp) {\n      return resp.json()[\"catch\"](function () {\n        return {};\n      });\n    }).then(function (data) {\n      // return parsed body stream\n      if (response.ok) return callback(null, data);\n      responseJsonData = data;\n\n      // Taken from aws-sdk-js/lib/protocol/json.js\n      // eslint-disable-next-line no-underscore-dangle\n      var code = (data.__type || data.code).split('#').pop();\n      var error = new Error(data.message || data.Message || null);\n      error.name = code;\n      error.code = code;\n      return callback(error);\n    })[\"catch\"](function (err) {\n      // first check if we have a service error\n      if (response && response.headers && response.headers.get('x-amzn-errortype')) {\n        try {\n          var code = response.headers.get('x-amzn-errortype').split(':')[0];\n          var error = new Error(response.status ? response.status.toString() : null);\n          error.code = code;\n          error.name = code;\n          error.statusCode = response.status;\n          return callback(error);\n        } catch (ex) {\n          return callback(err);\n        }\n        // otherwise check if error is Network error\n      } else if (err instanceof Error && err.message === 'Network error') {\n        err.code = 'NetworkError';\n      }\n      return callback(err);\n    });\n  };\n  return Client;\n}();\nexport { Client as default };\nvar logger = {\n  debug: function debug() {\n    // Intentionally blank. This package doesn't have logging\n  }\n};\n\n/**\n * For now, all errors are retryable.\n */\nvar NonRetryableError = /*#__PURE__*/function (_Error2) {\n  _inheritsLoose(NonRetryableError, _Error2);\n  function NonRetryableError(message) {\n    var _this4;\n    _this4 = _Error2.call(this, message) || this;\n    _this4.nonRetryable = true;\n    return _this4;\n  }\n  return NonRetryableError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar isNonRetryableError = function isNonRetryableError(obj) {\n  var key = 'nonRetryable';\n  return obj && obj[key];\n};\nfunction retry(functionToRetry, args, delayFn, attempt) {\n  if (attempt === void 0) {\n    attempt = 1;\n  }\n  if (typeof functionToRetry !== 'function') {\n    throw Error('functionToRetry must be a function');\n  }\n  logger.debug(functionToRetry.name + \" attempt #\" + attempt + \" with args: \" + JSON.stringify(args));\n  return functionToRetry.apply(void 0, args)[\"catch\"](function (err) {\n    logger.debug(\"error on \" + functionToRetry.name, err);\n    if (isNonRetryableError(err)) {\n      logger.debug(functionToRetry.name + \" non retryable error\", err);\n      throw err;\n    }\n    var retryIn = delayFn(attempt, args, err);\n    logger.debug(functionToRetry.name + \" retrying in \" + retryIn + \" ms\");\n    if (retryIn !== false) {\n      return new Promise(function (res) {\n        return setTimeout(res, retryIn);\n      }).then(function () {\n        return retry(functionToRetry, args, delayFn, attempt + 1);\n      });\n    } else {\n      throw err;\n    }\n  });\n}\nfunction jitteredBackoff(maxDelayMs) {\n  var BASE_TIME_MS = 100;\n  var JITTER_FACTOR = 100;\n  return function (attempt) {\n    var delay = Math.pow(2, attempt) * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n    return delay > maxDelayMs ? false : delay;\n  };\n}\nvar MAX_DELAY_MS = 5 * 60 * 1000;\nfunction jitteredExponentialRetry(functionToRetry, args, maxDelayMs) {\n  if (maxDelayMs === void 0) {\n    maxDelayMs = MAX_DELAY_MS;\n  }\n  return retry(functionToRetry, args, jitteredBackoff(maxDelayMs));\n}\n;","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Client from './Client';\nimport CognitoUser from './CognitoUser';\nimport StorageHelper from './StorageHelper';\nvar USER_POOL_ID_MAX_LENGTH = 55;\n\n/** @class */\nvar CognitoUserPool = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserPool object\n   * @param {object} data Creation options.\n   * @param {string} data.UserPoolId Cognito user pool id.\n   * @param {string} data.ClientId User pool application client id.\n   * @param {string} data.endpoint Optional custom service endpoint.\n   * @param {object} data.fetchOptions Optional options for fetch API.\n   *        (only credentials option is supported)\n   * @param {object} data.Storage Optional storage object.\n   * @param {boolean} data.AdvancedSecurityDataCollectionFlag Optional:\n   *        boolean flag indicating if the data collection is enabled\n   *        to support cognito advanced security features. By default, this\n   *        flag is set to true.\n   */\n  function CognitoUserPool(data, wrapRefreshSessionCallback) {\n    var _ref = data || {},\n      UserPoolId = _ref.UserPoolId,\n      ClientId = _ref.ClientId,\n      endpoint = _ref.endpoint,\n      fetchOptions = _ref.fetchOptions,\n      AdvancedSecurityDataCollectionFlag = _ref.AdvancedSecurityDataCollectionFlag;\n    if (!UserPoolId || !ClientId) {\n      throw new Error('Both UserPoolId and ClientId are required.');\n    }\n    if (UserPoolId.length > USER_POOL_ID_MAX_LENGTH || !/^[\\w-]+_[0-9a-zA-Z]+$/.test(UserPoolId)) {\n      throw new Error('Invalid UserPoolId format.');\n    }\n    var region = UserPoolId.split('_')[0];\n    this.userPoolId = UserPoolId;\n    this.clientId = ClientId;\n    this.client = new Client(region, endpoint, fetchOptions);\n\n    /**\n     * By default, AdvancedSecurityDataCollectionFlag is set to true,\n     * if no input value is provided.\n     */\n    this.advancedSecurityDataCollectionFlag = AdvancedSecurityDataCollectionFlag !== false;\n    this.storage = data.Storage || new StorageHelper().getStorage();\n    if (wrapRefreshSessionCallback) {\n      this.wrapRefreshSessionCallback = wrapRefreshSessionCallback;\n    }\n  }\n\n  /**\n   * @returns {string} the user pool id\n   */\n  var _proto = CognitoUserPool.prototype;\n  _proto.getUserPoolId = function getUserPoolId() {\n    return this.userPoolId;\n  }\n\n  /**\n   * @returns {string} the user pool name\n   */;\n  _proto.getUserPoolName = function getUserPoolName() {\n    return this.getUserPoolId().split('_')[1];\n  }\n\n  /**\n   * @returns {string} the client id\n   */;\n  _proto.getClientId = function getClientId() {\n    return this.clientId;\n  }\n\n  /**\n   * @typedef {object} SignUpResult\n   * @property {CognitoUser} user New user.\n   * @property {bool} userConfirmed If the user is already confirmed.\n   */\n  /**\n   * method for signing up a user\n   * @param {string} username User's username.\n   * @param {string} password Plain-text initial password entered by user.\n   * @param {(AttributeArg[])=} userAttributes New user attributes.\n   * @param {(AttributeArg[])=} validationData Application metadata.\n   * @param {(AttributeArg[])=} clientMetadata Client metadata.\n   * @param {nodeCallback<SignUpResult>} callback Called on error or with the new user.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.signUp = function signUp(username, password, userAttributes, validationData, callback, clientMetadata) {\n    var _this = this;\n    var jsonReq = {\n      ClientId: this.clientId,\n      Username: username,\n      Password: password,\n      UserAttributes: userAttributes,\n      ValidationData: validationData,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData(username)) {\n      jsonReq.UserContextData = this.getUserContextData(username);\n    }\n    this.client.request('SignUp', jsonReq, function (err, data) {\n      if (err) {\n        return callback(err, null);\n      }\n      var cognitoUser = {\n        Username: username,\n        Pool: _this,\n        Storage: _this.storage\n      };\n      var returnData = {\n        user: new CognitoUser(cognitoUser),\n        userConfirmed: data.UserConfirmed,\n        userSub: data.UserSub,\n        codeDeliveryDetails: data.CodeDeliveryDetails\n      };\n      return callback(null, returnData);\n    });\n  }\n\n  /**\n   * method for getting the current user of the application from the local storage\n   *\n   * @returns {CognitoUser} the user retrieved from storage\n   */;\n  _proto.getCurrentUser = function getCurrentUser() {\n    var lastUserKey = \"CognitoIdentityServiceProvider.\" + this.clientId + \".LastAuthUser\";\n    var lastAuthUser = this.storage.getItem(lastUserKey);\n    if (lastAuthUser) {\n      var cognitoUser = {\n        Username: lastAuthUser,\n        Pool: this,\n        Storage: this.storage\n      };\n      return new CognitoUser(cognitoUser);\n    }\n    return null;\n  }\n\n  /**\n   * This method returns the encoded data string used for cognito advanced security feature.\n   * This would be generated only when developer has included the JS used for collecting the\n   * data on their client. Please refer to documentation to know more about using AdvancedSecurity\n   * features\n   * @param {string} username the username for the context data\n   * @returns {string} the user context data\n   **/;\n  _proto.getUserContextData = function getUserContextData(username) {\n    if (typeof AmazonCognitoAdvancedSecurityData === 'undefined') {\n      return undefined;\n    }\n    /* eslint-disable */\n    var amazonCognitoAdvancedSecurityDataConst = AmazonCognitoAdvancedSecurityData;\n    /* eslint-enable */\n\n    if (this.advancedSecurityDataCollectionFlag) {\n      var advancedSecurityData = amazonCognitoAdvancedSecurityDataConst.getData(username, this.userPoolId, this.clientId);\n      if (advancedSecurityData) {\n        var userContextData = {\n          EncodedData: advancedSecurityData\n        };\n        return userContextData;\n      }\n    }\n    return {};\n  };\n  return CognitoUserPool;\n}();\nexport { CognitoUserPool as default };","import * as Cookies from 'js-cookie';\n\n/** @class */\nvar CookieStorage = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CookieStorage object\n   * @param {object} data Creation options.\n   * @param {string} data.domain Cookies domain (mandatory).\n   * @param {string} data.path Cookies path (default: '/')\n   * @param {integer} data.expires Cookie expiration (in days, default: 365)\n   * @param {boolean} data.secure Cookie secure flag (default: true)\n   * @param {string} data.sameSite Cookie request behaviour (default: null)\n   */\n  function CookieStorage(data) {\n    if (data.domain) {\n      this.domain = data.domain;\n    } else {\n      throw new Error('The domain of cookieStorage can not be undefined.');\n    }\n    if (data.path) {\n      this.path = data.path;\n    } else {\n      this.path = '/';\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'expires')) {\n      this.expires = data.expires;\n    } else {\n      this.expires = 365;\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'secure')) {\n      this.secure = data.secure;\n    } else {\n      this.secure = true;\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'sameSite')) {\n      if (!['strict', 'lax', 'none'].includes(data.sameSite)) {\n        throw new Error('The sameSite value of cookieStorage must be \"lax\", \"strict\" or \"none\".');\n      }\n      if (data.sameSite === 'none' && !this.secure) {\n        throw new Error('sameSite = None requires the Secure attribute in latest browser versions.');\n      }\n      this.sameSite = data.sameSite;\n    } else {\n      this.sameSite = null;\n    }\n  }\n\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  var _proto = CookieStorage.prototype;\n  _proto.setItem = function setItem(key, value) {\n    var options = {\n      path: this.path,\n      expires: this.expires,\n      domain: this.domain,\n      secure: this.secure\n    };\n    if (this.sameSite) {\n      options.sameSite = this.sameSite;\n    }\n    Cookies.set(key, value, options);\n    return Cookies.get(key);\n  }\n\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */;\n  _proto.getItem = function getItem(key) {\n    return Cookies.get(key);\n  }\n\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {string} value - value that was deleted\n   */;\n  _proto.removeItem = function removeItem(key) {\n    var options = {\n      path: this.path,\n      expires: this.expires,\n      domain: this.domain,\n      secure: this.secure\n    };\n    if (this.sameSite) {\n      options.sameSite = this.sameSite;\n    }\n    return Cookies.remove(key, options);\n  }\n\n  /**\n   * This is used to clear the storage of optional\n   * items that were previously set\n   * @returns {} an empty object\n   */;\n  _proto.clear = function clear() {\n    var cookies = Cookies.get();\n    var numKeys = Object.keys(cookies).length;\n    for (var index = 0; index < numKeys; ++index) {\n      this.removeItem(Object.keys(cookies)[index]);\n    }\n    return {};\n  };\n  return CookieStorage;\n}();\nexport { CookieStorage as default };","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              var bitsCombined = bits1 | bits2;\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha256\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha256\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacSHA256;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Check if typed arrays are supported\n\t    if (typeof ArrayBuffer != 'function') {\n\t        return;\n\t    }\n\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\n\t    // Reference original init\n\t    var superInit = WordArray.init;\n\n\t    // Augment WordArray.init to handle typed arrays\n\t    var subInit = WordArray.init = function (typedArray) {\n\t        // Convert buffers to uint8\n\t        if (typedArray instanceof ArrayBuffer) {\n\t            typedArray = new Uint8Array(typedArray);\n\t        }\n\n\t        // Convert other array views to uint8\n\t        if (\n\t            typedArray instanceof Int8Array ||\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\n\t            typedArray instanceof Int16Array ||\n\t            typedArray instanceof Uint16Array ||\n\t            typedArray instanceof Int32Array ||\n\t            typedArray instanceof Uint32Array ||\n\t            typedArray instanceof Float32Array ||\n\t            typedArray instanceof Float64Array\n\t        ) {\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n\t        }\n\n\t        // Handle Uint8Array\n\t        if (typedArray instanceof Uint8Array) {\n\t            // Shortcut\n\t            var typedArrayByteLength = typedArray.byteLength;\n\n\t            // Extract bytes\n\t            var words = [];\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\n\t            }\n\n\t            // Initialize this word array\n\t            superInit.call(this, words, typedArrayByteLength);\n\t        } else {\n\t            // Else call normal init\n\t            superInit.apply(this, arguments);\n\t        }\n\t    };\n\n\t    subInit.prototype = WordArray;\n\t}());\n\n\n\treturn CryptoJS.lib.WordArray;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = self.fetch || (self.fetch = require('unfetch').default || require('unfetch'));\n","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","export default function(e,n){return n=n||{},new Promise(function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||\"get\",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+\",\"+t:t}),t(a())},s.onerror=r,s.withCredentials=\"include\"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)})}\n//# sourceMappingURL=unfetch.module.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(864);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","__importDefault","this","mod","__esModule","Object","defineProperty","value","SkapiError","Skapi","skapi_1","default","skapi_error_1","formResponse","target","propertyKey","descriptor","fn","arg","form","option","handleResponse","response","code","HTMLFormElement","href","URL","action","response_key","timestamp","Date","now","toString","window","sessionStorage","setItem","JSON","stringify","searchParams","set","location","handleError","err","is_err","Error","onerror","bind","Promise","res","rej","then","r","catch","__decorate","decorators","key","desc","d","c","arguments","length","getOwnPropertyDescriptor","Reflect","decorate","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","next","e","rejected","result","done","apply","amazon_cognito_identity_js_1","decorators_1","utils_1","constructor","service_id","service_owner","autoLogin","cognitoUser","__disabledAccount","__serviceHash","__pendingRequest","__cached_requests","__startKey_keys","__request_signup_confirmation","__index_number_range","__class_properties_has_been_cached","session","__user","connection","host","hostDomain","userPool","regex","validateUserId","val","validateUrl","validatePhoneNumber","validateBirthdate","validateEmail","update_startKey_keys","_a","hashedParam","url","fetched","hasOwnProperty","startKey_string","startKey","includes","push","assign","startKey_list","_fetch","opt","responseType","fetch","status","received","text","parse","method","body","errCode","message","errMsg","split","splice","join","_get","params","keys","substring","query","map","k","encodeURIComponent","service","cdn_domain","sreg","admin_endpoint","blob","reader","FileReader","onloadend","readAsDataURL","data","atob","record_endpoint","__connection","skapi","restore","getItem","CognitoUserPool","UserPoolId","userpool_id","ClientId","userpool_client","process","updateConnection","authentication","updateSession","refreshToken","user","all","storeClassProperties","to_be_cached","addEventListener","static","currentUser","getCurrentUser","getSession","updateAttributes","sessionToMerge","isValid","getUserAttributes","attrErr","attributes","normalized_attributes","Name","Value","replace","Number","access_group","idToken","payload","user_id","sub","refreshSession","getRefreshToken","refreshErr","refreshedSession","createCognitoUser","email","hash","request_hash","CognitoUser","Username","Pool","cognitoUsername","authenticateUser","username","password","logout","initUser","authenticationDetails","AuthenticationDetails","Password","newPasswordRequired","userAttributes","requiredAttributes","onSuccess","logged","onFailure","error","cause","requireAdmin","_b","_c","_d","_e","_f","ignoreVerification","email_verified","throwError","getBlob","p","checkParams","v","request","auth","contentType","mock","options","secureRequest","paramsStruct","sync","Array","isArray","getFormResponse","URLSearchParams","search","entries","stored","removeItem","_g","_h","_j","meta","bypassAwaitConnection","token","jwtToken","isExternalUrl","endpoint","dest","endpoints","admin","record","public","admin_public","private","admin_private","record_private","record_public","get_ep","getEndpoint","owner","required","fetchOptions","refresh","fetOpt","limit","ascending","metaData","extractFormMetaData","isForm","fileKeys","files","normalize_form","addRequired","_k","_l","isFormEl","FormData","undefined","Blob","type","formData","cb","requestKey","load_startKey_keys","headers","Authorization","_post","_m","_o","_p","list","endOfList","hashedParams","orderObjectKeys","obj","sortObject","sort","reduce","_obj","hashedParams_cached","list_of_startKeys","last_startKey_key","cache_hashedParams","postRecord","is_admin","record_id","table","subscription_group","reference","index","name","tags","config","reference_limit","allow_multiple_reference","private_access","param","u","checkWhiteSpaceAndSpecialChars","postData","normalize_record_data","getRecords","indexTypes","struct","subscription","group","tp","condition","range","getTable","convert","t","getIndex","order_by","iSplit","idx","resolved","number_of_records","cnt_rec","number_of_number_values","average_of_number_values","totl_numb","cnt_numb","number_of_boolean_values","average_of_boolean_values","totl_bool","cnt_bool","getTag","tag","item","tSplit","deleteRecords","isAdmin","id","subscribeNewsletter","bypassWelcome","subscriptionGroupCheck","subscribe","unsubscribe","blockSubscriber","block","unblockSubscriber","unblock","getUserSubscriptions","getSubscriptions","subscriber","getUserSubscribers","subParams","_mapper","isNewsletterSub","isEmail","blocked","s","subSplit","parseInt","stmp","grp","getNewsletters","searchType","_params","searchFor","x","mails","remap","defaults","m","remapped","signup","validatePassword","address","gender","birthdate","phone_number","email_public","address_public","gender_public","birthdate_public","phone_number_public","email_subscription","confirmation","login","signOut","to_be_erased","resendSignupConfirmation","redirect","resend","recoverAccount","verifyAttribute","attribute","callback","inputVerificationCode","getAttributeVerificationCode","verifyEmail","verifyMobile","forgotPassword","resetPassword","new_password","confirmPassword","disableAccount","services","active","disable","updateUserSettings","attr","current_password","changePassword","connect","collision","customAttr","parseValue","toSet","CognitoUserAttribute","uploadUserData","getUsers","searchForTypes","checker","isSelfProfile","_what_public_see","public_keys","connectedService","prototype","super","sha256","appendData","append","totalFileSize","pair","File","Math","round","size","FileList","inputs","querySelectorAll","textarea","checked","ascii","rightRotate","amount","j","mathPow","pow","maxWord","words","asciiBitLength","h","primeCounter","isComposite","candidate","charCodeAt","w","slice","oldHash","w15","w2","temp1","concat","b","bypassCheck","_parentKey","isObjectWithKeys","errToThrow","isInvalid","structValue","defaultSetter","def","abs","match","charAt","isNaN","date_regex","RegExp","test","paramName","trim","toLowerCase","baseUrl","origin","pathname","_baseUrl","pop","check","cu","_url","protocol","output","base36timestamp","uploaded","rSplit","normalize_typed_string","updated","referenced_count","string","allowPeriods","allowWhiteSpace","checkStr","array","_ref","ValidationData","AuthParameters","ClientMetadata","validationData","authParameters","clientMetadata","_proto","getUsername","getPassword","getValidationData","getAuthParameters","getClientMetadata","crypto","msCrypto","g","cryptoSecureRandomInt","getRandomValues","Uint32Array","randomBytes","readInt32LE","WordArray","sigBytes","random","nBytes","wordArray","hexChars","bite","hexStringify","fromString","nbi","dbits","inBrowser","navigator","appName","am","n","xl","xh","l","floor","DB","DM","DV","FV","F1","F2","rr","vv","BI_RC","int2char","intAt","nbv","fromInt","nbits","Montgomery","mp","invDigit","mpl","mph","um","mt2","dlShiftTo","divRemTo","compareTo","ZERO","subTo","revert","copyTo","u0","clamp","drShiftTo","mulTo","y","multiplyTo","sqrTo","squareTo","mi","sh","max","lShiftTo","bs","cbs","bm","ds","rShiftTo","min","q","pm","pt","ts","ms","nsh","ys","y0","yt","d1","d2","ONE","qd","addTo","negate","km","bitLength","equals","add","subtract","multiply","divide","modPow","z","k1","g2","is1","r2","HEX_MSB_REGEX","AuthenticationHelper","PoolName","N","BigInteger","hexHash","padHex","smallAValue","generateRandomSmallA","getLargeAValue","infoBits","poolName","getSmallAValue","_this","largeAValue","calculateA","hexRandom","generateRandomString","getRandomPassword","randomPassword","getSaltDevices","SaltToHashDevices","getVerifierDevices","verifierDevices","generateHashDevice","deviceGroupKey","_this2","combinedString","hashedString","verifierDevicesNotPadded","_this3","A","calculateU","B","UHexHash","buf","str","hashHex","hexStr","computehkdf","ikm","salt","infoBitsWordArray","String","fromCharCode","ikmWordArray","saltWordArray","prk","hmac","getPasswordAuthenticationKey","serverBValue","_this4","UValue","usernamePassword","usernamePasswordHash","xValue","calculateS","sValue","hkdf","_this5","gModPowXN","err2","getNewPasswordRequiredChallengeUserAttributePrefix","bigInt","isNegative","invertedNibbles","invertedNibble","toUpperCase","startsWith","CognitoJwtToken","decodePayload","getJwtToken","getExpiration","exp","getIssuedAt","iat","_setPrototypeOf","o","setPrototypeOf","__proto__","CognitoAccessToken","_CognitoJwtToken","subClass","superClass","_temp","AccessToken","call","create","CognitoIdToken","IdToken","CognitoRefreshToken","RefreshToken","getToken","CognitoUserSession","ClockDrift","accessToken","clockDrift","calculateClockDrift","getIdToken","getAccessToken","getClockDrift","adjusted","monthNames","weekNames","DateHelper","getNowString","weekDay","getUTCDay","month","getUTCMonth","day","getUTCDate","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","getUTCFullYear","getValue","setValue","getName","setName","toJSON","dataMemory","MemoryStorage","clear","StorageHelper","storageWindow","localStorage","exception","getStorage","userAgent","pool","Session","client","signInUserSession","authenticationFlowType","storage","Storage","keyPrefix","getClientId","userDataKey","setSignInUserSession","clearCachedUserData","cacheTokens","getSignInUserSession","getAuthenticationFlowType","setAuthenticationFlowType","initiateAuth","authDetails","USERNAME","clientMetaData","jsonReq","AuthFlow","getUserContextData","UserContextData","challengeName","ChallengeName","challengeParameters","ChallengeParameters","customChallenge","getCognitoUserSession","AuthenticationResult","authenticateUserPlainUsernamePassword","authenticateUserDefaultAuth","authenticationHelper","getUserPoolName","dateHelper","deviceKey","DEVICE_KEY","errOnAValue","aValue","SRP_A","CHALLENGE_NAME","USER_ID_FOR_SRP","SRP_B","SALT","getCachedDeviceKeyAndPassword","errOnHkdf","dateNow","SECRET_BLOCK","signatureString","challengeResponses","PASSWORD_CLAIM_SECRET_BLOCK","TIMESTAMP","PASSWORD_CLAIM_SIGNATURE","jsonReqResp","ChallengeResponses","respondToAuthChallenge","challenge","challengeCallback","errChallenge","dataChallenge","indexOf","clearCachedDeviceKeyAndPassword","errAuthenticate","dataAuthenticate","authenticateUserInternal","PASSWORD","authResult","mfaRequired","selectMFAType","mfaSetup","totpRequired","rawRequiredAttributes","userAttributesPrefix","substr","getDeviceResponse","newDeviceMetadata","NewDeviceMetadata","DeviceGroupKey","DeviceKey","errGenHash","deviceSecretVerifierConfig","Salt","PasswordVerifier","DeviceSecretVerifierConfig","DeviceName","errConfirm","dataConfirm","cacheDeviceKeyAndPassword","UserConfirmationNecessary","completeNewPasswordChallenge","newPassword","requiredAttributeData","finalUserAttributes","forEach","NEW_PASSWORD","_this6","errAValue","errHkdf","confirmRegistration","confirmationCode","forceAliasCreation","ConfirmationCode","ForceAliasCreation","sendCustomChallengeAnswer","answerChallenge","_this7","ANSWER","sendMFACode","mfaType","_this8","SMS_MFA_CODE","mfaTypeSelection","SOFTWARE_TOKEN_MFA_CODE","oldUserPassword","newUserPassword","PreviousPassword","ProposedPassword","enableMFA","mfaOptions","DeliveryMedium","AttributeName","MFAOptions","setUserMfaPreference","smsMfaSettings","softwareTokenMfaSettings","SMSMfaSettings","SoftwareTokenMfaSettings","disableMFA","deleteUser","_this9","clearCachedUser","_this10","UserAttributes","getUserData","bypassCache","userData","attributeList","userAttribute","getMFAOptions","createGetUserRequest","promisifyRequest","refreshSessionIfPossible","_this11","_this12","getUserDataFromCache","isFetchUserDataAndTokenRequired","fetchUserData","_ref$bypassCache","_this13","cacheUserData","deleteAttributes","_this14","UserAttributeNames","resendConfirmationCode","idTokenKey","accessTokenKey","refreshTokenKey","clockDriftKey","cachedSession","_this15","wrappedCallback","wrapRefreshSessionCallback","REFRESH_TOKEN","lastUserKey","deviceKeyKey","authenticationResult","clearCachedTokens","randomPasswordKey","deviceGroupKeyKey","attributeName","Code","getDevice","forgetSpecificDevice","forgetDevice","_this16","setDeviceStatusRemembered","DeviceRememberedStatus","setDeviceStatusNotRemembered","listDevices","paginationToken","requestParams","Limit","PaginationToken","globalSignOut","_this17","revokeTokenCallback","_this18","_session","revokeTokens","cleanClientData","isSessionRevocable","revokeToken","origin_jti","_ref2","requestWithRetry","Token","sendMFASelectionAnswer","_this19","associateSoftwareToken","_this20","associateSecretCode","SecretCode","verifySoftwareToken","totpCode","friendlyDeviceName","_this21","UserCode","FriendlyDeviceName","errRespond","dataRespond","BASE_USER_AGENT","Platform","product","isReactNative","UserAgent","appendToCognitoUserAgent","content","_wrapNativeSuper","Class","_cache","Map","Function","TypeError","has","get","Wrapper","_construct","_getPrototypeOf","enumerable","writable","configurable","Parent","args","_isNativeReflectConstruct","construct","instance","sham","Proxy","Boolean","valueOf","getPrototypeOf","CognitoError","_Error","statusCode","Client","region","credentials","operation","maxDelayMs","MAX_DELAY_MS","retry","attempt","delay","jitteredBackoff","mode","cache","resp","json","ok","__type","Message","ex","functionToRetry","delayFn","retryIn","setTimeout","AdvancedSecurityDataCollectionFlag","userPoolId","clientId","advancedSecurityDataCollectionFlag","getUserPoolId","signUp","returnData","userConfirmed","UserConfirmed","userSub","UserSub","codeDeliveryDetails","CodeDeliveryDetails","lastAuthUser","AmazonCognitoAdvancedSecurityData","amazonCognitoAdvancedSecurityDataConst","advancedSecurityData","getData","EncodedData","CookieStorage","domain","path","expires","secure","sameSite","cookies","numKeys","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","arr","Arr","_byteLength","curByte","len","revLookup","fromByteArray","uint8","extraBytes","parts","maxChunkLength","len2","encodeChunk","lookup","Uint8Array","start","end","num","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","encodingOrOffset","allocUnsafe","from","ArrayBuffer","byteOffset","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","isBuffer","copy","buffer","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","foo","subarray","typedArraySupport","poolSize","_augment","Symbol","species","alloc","fill","allocUnsafeSlow","_isBuffer","compare","pos","swap16","swap32","swap64","inspect","thisStart","thisEnd","thisCopy","targetCopy","isFinite","_arr","ret","out","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","stringtrim","base64clean","src","dst","CryptoJS","globalThis","F","subtype","C","C_lib","lib","Base","extend","overrides","mixIn","init","$super","properties","propertyName","clone","encoder","Hex","thisWords","thatWords","thisSigBytes","thatSigBytes","thatByte","ceil","C_enc","enc","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","decodeURIComponent","escape","utf8Str","unescape","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","doFlush","processedWords","dataWords","dataSigBytes","blockSize","nBlocksReady","nWordsReady","_minBufferSize","nBytesReady","_doProcessBlock","C_algo","Hasher","cfg","_doReset","update","messageUpdate","finalize","_doFinalize","_createHelper","hasher","_createHmacHelper","HMAC","algo","Base64","_map","base64Chars","triplet","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","paddingIndex","bitsCombined","parseLoop","HmacSHA256","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","superInit","subInit","typedArray","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Float32Array","Float64Array","typedArrayByteLength","H","K","isPrime","sqrtN","sqrt","factor","getFractionalBits","nPrime","W","SHA256","_hash","M","f","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","t1","nBitsTotal","nBitsLeft","isLE","mLen","eLen","eMax","eBias","nBits","NaN","rt","log","LN2","decode","converter","api","document","toUTCString","stringifiedAttributes","cookie","jar","getJSON","remove","withConverter","XMLHttpRequest","statusText","responseURL","responseText","open","onload","getAllResponseHeaders","withCredentials","setRequestHeader","send","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","prop","toStringTag"],"sourceRoot":""}