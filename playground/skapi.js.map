{"version":3,"file":"skapi.js","mappings":"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","sources":["webpack://skapi-js/webpack/universalModuleDefinition","webpack://skapi-js/./node_modules/base64-js/index.js","webpack://skapi-js/./node_modules/buffer/index.js","webpack://skapi-js/./node_modules/crypto-js/core.js","webpack://skapi-js/./node_modules/crypto-js/enc-base64.js","webpack://skapi-js/./node_modules/crypto-js/hmac-sha256.js","webpack://skapi-js/./node_modules/crypto-js/hmac.js","webpack://skapi-js/./node_modules/crypto-js/lib-typedarrays.js","webpack://skapi-js/./node_modules/crypto-js/sha256.js","webpack://skapi-js/./node_modules/ieee754/index.js","webpack://skapi-js/./node_modules/isarray/index.js","webpack://skapi-js/./node_modules/isomorphic-unfetch/browser.js","webpack://skapi-js/./node_modules/js-cookie/src/js.cookie.js","webpack://skapi-js/./node_modules/unfetch/dist/unfetch.module.js","webpack://skapi-js/webpack/bootstrap","webpack://skapi-js/webpack/runtime/compat get default export","webpack://skapi-js/webpack/runtime/define property getters","webpack://skapi-js/webpack/runtime/global","webpack://skapi-js/webpack/runtime/hasOwnProperty shorthand","webpack://skapi-js/webpack/runtime/make namespace object","webpack://skapi-js/./js/main/error.js","webpack://skapi-js/./js/utils/utils.js","webpack://skapi-js/./js/utils/validator.js","webpack://skapi-js/./js/methods/request.js","webpack://skapi-js/./js/methods/database.js","webpack://skapi-js/./js/methods/realtime.js","webpack://skapi-js/./js/methods/subscription.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/AuthenticationDetails.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/utils/cryptoSecureRandomInt.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/utils/WordArray.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/BigInteger.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/AuthenticationHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoJwtToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoAccessToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoIdToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoRefreshToken.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserSession.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/DateHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserAttribute.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/StorageHelper.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUser.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/Platform/index.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/UserAgent.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/Client.js","webpack://skapi-js/./node_modules/amazon-cognito-identity-js/es/CognitoUserPool.js","webpack://skapi-js/./js/methods/user.js","webpack://skapi-js/./js/main/skapi.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              var bitsCombined = bits1 | bits2;\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha256\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha256\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacSHA256;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Check if typed arrays are supported\n\t    if (typeof ArrayBuffer != 'function') {\n\t        return;\n\t    }\n\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\n\t    // Reference original init\n\t    var superInit = WordArray.init;\n\n\t    // Augment WordArray.init to handle typed arrays\n\t    var subInit = WordArray.init = function (typedArray) {\n\t        // Convert buffers to uint8\n\t        if (typedArray instanceof ArrayBuffer) {\n\t            typedArray = new Uint8Array(typedArray);\n\t        }\n\n\t        // Convert other array views to uint8\n\t        if (\n\t            typedArray instanceof Int8Array ||\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\n\t            typedArray instanceof Int16Array ||\n\t            typedArray instanceof Uint16Array ||\n\t            typedArray instanceof Int32Array ||\n\t            typedArray instanceof Uint32Array ||\n\t            typedArray instanceof Float32Array ||\n\t            typedArray instanceof Float64Array\n\t        ) {\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n\t        }\n\n\t        // Handle Uint8Array\n\t        if (typedArray instanceof Uint8Array) {\n\t            // Shortcut\n\t            var typedArrayByteLength = typedArray.byteLength;\n\n\t            // Extract bytes\n\t            var words = [];\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\n\t            }\n\n\t            // Initialize this word array\n\t            superInit.call(this, words, typedArrayByteLength);\n\t        } else {\n\t            // Else call normal init\n\t            superInit.apply(this, arguments);\n\t        }\n\t    };\n\n\t    subInit.prototype = WordArray;\n\t}());\n\n\n\treturn CryptoJS.lib.WordArray;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = self.fetch || (self.fetch = require('unfetch').default || require('unfetch'));\n","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","export default function(e,n){return n=n||{},new Promise(function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||\"get\",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+\",\"+t:t}),t(a())},s.onerror=r,s.withCredentials=\"include\"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)})}\n//# sourceMappingURL=unfetch.module.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default class SkapiError extends Error {\n    constructor(error, options) {\n        if (Array.isArray(error) && error.length <= 2) {\n            super((error[1] || 'Something went wrong.').trim());\n            this.name = options && options.name || \"SKAPI\";\n            this.code = error[0] || \"ERROR\";\n            if (options) {\n                if (options.code) {\n                    this.code = options.code;\n                }\n                if (options.cause) {\n                    this.cause = options.cause;\n                }\n            }\n        }\n        else if (typeof error === 'string') {\n            super((error || 'Something went wrong.').trim());\n            this.name = \"SKAPI\";\n            this.code = 'ERROR';\n            if (options) {\n                if (options.code) {\n                    this.code = options.code;\n                }\n                if (options.cause) {\n                    this.cause = options.cause;\n                }\n            }\n        }\n        else if (error instanceof Error) {\n            super((error.message || 'Something went wrong.').trim());\n            this.cause = error;\n            this.name = error.name;\n            if (error.hasOwnProperty('code')) {\n                this.code = error.code;\n            }\n        }\n    }\n}\n","import SkapiError from \"../main/error\";\nclass MD5 {\n    static hash(str) {\n        if (typeof str !== 'string') {\n            console.warn('coercing non-string value to empty string');\n            str = '';\n        }\n        const x = MD5.sb(str);\n        let a = 1732584193;\n        let b = -271733879;\n        let c = -1732584194;\n        let d = 271733878;\n        let lastA;\n        let lastB;\n        let lastC;\n        let lastD;\n        for (let i = 0; i < x.length; i += 16) {\n            lastA = a;\n            lastB = b;\n            lastC = c;\n            lastD = d;\n            a = MD5.ff(a, b, c, d, x[i], 7, -680876936);\n            d = MD5.ff(d, a, b, c, x[i + 1], 12, -389564586);\n            c = MD5.ff(c, d, a, b, x[i + 2], 17, 606105819);\n            b = MD5.ff(b, c, d, a, x[i + 3], 22, -1044525330);\n            a = MD5.ff(a, b, c, d, x[i + 4], 7, -176418897);\n            d = MD5.ff(d, a, b, c, x[i + 5], 12, 1200080426);\n            c = MD5.ff(c, d, a, b, x[i + 6], 17, -1473231341);\n            b = MD5.ff(b, c, d, a, x[i + 7], 22, -45705983);\n            a = MD5.ff(a, b, c, d, x[i + 8], 7, 1770035416);\n            d = MD5.ff(d, a, b, c, x[i + 9], 12, -1958414417);\n            c = MD5.ff(c, d, a, b, x[i + 10], 17, -42063);\n            b = MD5.ff(b, c, d, a, x[i + 11], 22, -1990404162);\n            a = MD5.ff(a, b, c, d, x[i + 12], 7, 1804603682);\n            d = MD5.ff(d, a, b, c, x[i + 13], 12, -40341101);\n            c = MD5.ff(c, d, a, b, x[i + 14], 17, -1502002290);\n            b = MD5.ff(b, c, d, a, x[i + 15], 22, 1236535329);\n            a = MD5.gg(a, b, c, d, x[i + 1], 5, -165796510);\n            d = MD5.gg(d, a, b, c, x[i + 6], 9, -1069501632);\n            c = MD5.gg(c, d, a, b, x[i + 11], 14, 643717713);\n            b = MD5.gg(b, c, d, a, x[i], 20, -373897302);\n            a = MD5.gg(a, b, c, d, x[i + 5], 5, -701558691);\n            d = MD5.gg(d, a, b, c, x[i + 10], 9, 38016083);\n            c = MD5.gg(c, d, a, b, x[i + 15], 14, -660478335);\n            b = MD5.gg(b, c, d, a, x[i + 4], 20, -405537848);\n            a = MD5.gg(a, b, c, d, x[i + 9], 5, 568446438);\n            d = MD5.gg(d, a, b, c, x[i + 14], 9, -1019803690);\n            c = MD5.gg(c, d, a, b, x[i + 3], 14, -187363961);\n            b = MD5.gg(b, c, d, a, x[i + 8], 20, 1163531501);\n            a = MD5.gg(a, b, c, d, x[i + 13], 5, -1444681467);\n            d = MD5.gg(d, a, b, c, x[i + 2], 9, -51403784);\n            c = MD5.gg(c, d, a, b, x[i + 7], 14, 1735328473);\n            b = MD5.gg(b, c, d, a, x[i + 12], 20, -1926607734);\n            a = MD5.hh(a, b, c, d, x[i + 5], 4, -378558);\n            d = MD5.hh(d, a, b, c, x[i + 8], 11, -2022574463);\n            c = MD5.hh(c, d, a, b, x[i + 11], 16, 1839030562);\n            b = MD5.hh(b, c, d, a, x[i + 14], 23, -35309556);\n            a = MD5.hh(a, b, c, d, x[i + 1], 4, -1530992060);\n            d = MD5.hh(d, a, b, c, x[i + 4], 11, 1272893353);\n            c = MD5.hh(c, d, a, b, x[i + 7], 16, -155497632);\n            b = MD5.hh(b, c, d, a, x[i + 10], 23, -1094730640);\n            a = MD5.hh(a, b, c, d, x[i + 13], 4, 681279174);\n            d = MD5.hh(d, a, b, c, x[i], 11, -358537222);\n            c = MD5.hh(c, d, a, b, x[i + 3], 16, -722521979);\n            b = MD5.hh(b, c, d, a, x[i + 6], 23, 76029189);\n            a = MD5.hh(a, b, c, d, x[i + 9], 4, -640364487);\n            d = MD5.hh(d, a, b, c, x[i + 12], 11, -421815835);\n            c = MD5.hh(c, d, a, b, x[i + 15], 16, 530742520);\n            b = MD5.hh(b, c, d, a, x[i + 2], 23, -995338651);\n            a = MD5.ii(a, b, c, d, x[i], 6, -198630844);\n            d = MD5.ii(d, a, b, c, x[i + 7], 10, 1126891415);\n            c = MD5.ii(c, d, a, b, x[i + 14], 15, -1416354905);\n            b = MD5.ii(b, c, d, a, x[i + 5], 21, -57434055);\n            a = MD5.ii(a, b, c, d, x[i + 12], 6, 1700485571);\n            d = MD5.ii(d, a, b, c, x[i + 3], 10, -1894986606);\n            c = MD5.ii(c, d, a, b, x[i + 10], 15, -1051523);\n            b = MD5.ii(b, c, d, a, x[i + 1], 21, -2054922799);\n            a = MD5.ii(a, b, c, d, x[i + 8], 6, 1873313359);\n            d = MD5.ii(d, a, b, c, x[i + 15], 10, -30611744);\n            c = MD5.ii(c, d, a, b, x[i + 6], 15, -1560198380);\n            b = MD5.ii(b, c, d, a, x[i + 13], 21, 1309151649);\n            a = MD5.ii(a, b, c, d, x[i + 4], 6, -145523070);\n            d = MD5.ii(d, a, b, c, x[i + 11], 10, -1120210379);\n            c = MD5.ii(c, d, a, b, x[i + 2], 15, 718787259);\n            b = MD5.ii(b, c, d, a, x[i + 9], 21, -343485551);\n            a = MD5.ad(a, lastA);\n            b = MD5.ad(b, lastB);\n            c = MD5.ad(c, lastC);\n            d = MD5.ad(d, lastD);\n        }\n        return MD5.rh(a) + MD5.rh(b) + MD5.rh(c) + MD5.rh(d);\n    }\n    static rh(n) {\n        let s = '';\n        for (let j = 0; j <= 3; j++) {\n            s += MD5.alphabet.charAt((n >> (j * 8 + 4)) & 0x0F) + MD5.alphabet.charAt((n >> (j * 8)) & 0x0F);\n        }\n        return s;\n    }\n    static ad(x, y) {\n        const l = (x & 0xFFFF) + (y & 0xFFFF);\n        const m = (x >> 16) + (y >> 16) + (l >> 16);\n        return (m << 16) | (l & 0xFFFF);\n    }\n    static rl(n, c) {\n        return (n << c) | (n >>> (32 - c));\n    }\n    static cm(q, a, b, x, s, t) {\n        return MD5.ad(MD5.rl(MD5.ad(MD5.ad(a, q), MD5.ad(x, t)), s), b);\n    }\n    static ff(a, b, c, d, x, s, t) {\n        return MD5.cm(b & c | ~b & d, a, b, x, s, t);\n    }\n    static gg(a, b, c, d, x, s, t) {\n        return MD5.cm(b & d | c & ~d, a, b, x, s, t);\n    }\n    static hh(a, b, c, d, x, s, t) {\n        return MD5.cm(b ^ c ^ d, a, b, x, s, t);\n    }\n    static ii(a, b, c, d, x, s, t) {\n        return MD5.cm(c ^ (b | ~d), a, b, x, s, t);\n    }\n    static sb(x) {\n        let i;\n        const numBlocks = ((x.length + 8) >> 6) + 1;\n        const blocks = new Array(numBlocks * 16);\n        for (i = 0; i < numBlocks * 16; i++) {\n            blocks[i] = 0;\n        }\n        for (i = 0; i < x.length; i++) {\n            blocks[i >> 2] |= x.charCodeAt(i) << ((i % 4) * 8);\n        }\n        blocks[i >> 2] |= 0x80 << ((i % 4) * 8);\n        blocks[numBlocks * 16 - 2] = x.length * 8;\n        return blocks;\n    }\n}\nMD5.alphabet = '0123456789abcdef';\nfunction generateRandom(length = 6) {\n    let result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    const charactersLength = characters.length;\n    let counter = 0;\n    while (counter < length) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        counter += 1;\n    }\n    return result;\n}\nfunction extractFormMeta(form) {\n    function appendData(meta, key, val) {\n        let fchar = key.slice(0, 1);\n        let lchar = key.slice(-1);\n        if (fchar === '.') {\n            key = key.slice(1);\n        }\n        if (lchar === '.') {\n            key = key.slice(0, -1);\n        }\n        if (key.includes('.')) {\n            let nestKey = key.split('.');\n            key = nestKey.pop();\n            for (let k of nestKey) {\n                if (!k) {\n                    continue;\n                }\n                if (!meta.hasOwnProperty(k)) {\n                    meta[k] = {};\n                }\n                meta = meta[k];\n            }\n        }\n        if (meta.hasOwnProperty(key)) {\n            if (Array.isArray(meta[key])) {\n                meta[key].push(val);\n            }\n            else {\n                meta[key] = [meta[key], val];\n            }\n        }\n        else {\n            meta[key] = val;\n        }\n    }\n    let to_bin = [];\n    if (form instanceof FormData) {\n        let meta = {};\n        let totalFileSize = 0;\n        let files = [];\n        for (let pair of form.entries()) {\n            let name = pair[0];\n            let v = pair[1];\n            if (v instanceof File) {\n                if ((totalFileSize + v.size) > 4000000) {\n                    to_bin.push({ name, file: v });\n                    continue;\n                }\n                totalFileSize += v.size;\n                files.push({ name, file: v });\n            }\n            else if (v instanceof FileList) {\n                if (v && v.length > 0) {\n                    for (let idx = 0; idx <= v.length - 1; idx++) {\n                        if ((totalFileSize + v.item(idx).size) > 4000000) {\n                            to_bin.push({ name, file: v.item(idx) });\n                            continue;\n                        }\n                        totalFileSize += v.item(idx).size;\n                        files.push({ name, file: v.item(idx) });\n                    }\n                }\n            }\n            else {\n                appendData(meta, name, v);\n            }\n        }\n        return { meta, files, to_bin };\n    }\n    if (form instanceof SubmitEvent) {\n        form = form.target;\n    }\n    if (form instanceof HTMLFormElement) {\n        let meta = {};\n        let files = [];\n        let totalFileSize = 0;\n        let inputs = form.querySelectorAll('input');\n        let textarea = form.querySelectorAll('textarea');\n        for (let idx = 0; idx < textarea.length; idx++) {\n            let i = textarea[idx];\n            if (i.name) {\n                appendData(meta, i.name, i.value);\n            }\n        }\n        for (let idx = 0; idx < inputs.length; idx++) {\n            let i = inputs[idx];\n            if (i.name) {\n                if (i.type === 'number') {\n                    if (i.value) {\n                        appendData(meta, i.name, Number(i.value));\n                    }\n                }\n                else if (i.type === 'checkbox' || i.type === 'radio') {\n                    if (i.checked) {\n                        if (i.value === '' && i.type === 'checkbox' || i.value === 'on' || i.value === 'true') {\n                            appendData(meta, i.name, true);\n                        }\n                        else if (i.value === 'false') {\n                            appendData(meta, i.name, false);\n                        }\n                        else if (i.value) {\n                            appendData(meta, i.name, i.value);\n                        }\n                    }\n                    else if (i.type === 'checkbox') {\n                        if (i.value === '' || i.value === 'on' || i.value === 'true') {\n                            appendData(meta, i.name, false);\n                        }\n                        else if (i.value === 'false') {\n                            appendData(meta, i.name, true);\n                        }\n                        else {\n                            appendData(meta, i.name, undefined);\n                        }\n                    }\n                }\n                else if (i.type === 'file') {\n                    if (i.files && i.files.length > 0) {\n                        for (let idx = 0; idx <= i.files.length - 1; idx++) {\n                            if ((totalFileSize + i.files.item(idx).size) > 4000000) {\n                                to_bin.push({ name: i.name, file: i.files.item(idx) });\n                                continue;\n                            }\n                            totalFileSize += i.files.item(idx).size;\n                            files.push({ name: i.name, file: i.files.item(idx) });\n                        }\n                    }\n                }\n                else {\n                    appendData(meta, i.name, i.value);\n                }\n            }\n        }\n        function sizeof(object) {\n            return new Blob([JSON.stringify(object)]).size;\n        }\n        if (sizeof(meta) > 2 * 1024 * 1024) {\n            throw new SkapiError('JSON Data should not exceed 2MB', { code: 'INVALID_REQUEST' });\n        }\n        return { meta, files, to_bin };\n    }\n    return null;\n}\nexport { extractFormMeta, MD5, generateRandom };\n","import SkapiError from '../main/error';\nimport { extractFormMeta } from './utils';\nfunction UserId(id, param = 'User ID') {\n    let uuid_regex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    if (!id) {\n        throw new SkapiError(`${param} is empty.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (typeof id !== 'string') {\n        throw new SkapiError(`${param} should be type: string.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (!id.match(uuid_regex)) {\n        throw new SkapiError(`${param} is invalid.`, { code: 'INVALID_PARAMETER' });\n    }\n    return id;\n}\nfunction PhoneNumber(value) {\n    if (value) {\n        if (typeof value !== 'string' || value.charAt(0) !== '+' || isNaN(Number(value.substring(1)))) {\n            throw new SkapiError('\"phone_number\" is invalid. The format should be \"+00123456789\". Type: string.', { code: 'INVALID_PARAMETER' });\n        }\n    }\n    return value || '';\n}\nfunction Birthdate(birthdate) {\n    if (birthdate) {\n        if (typeof birthdate !== 'string') {\n            throw new SkapiError('\"birthdate\" is invalid. The format should be \"yyyy-mm-dd\". Type: string.', { code: 'INVALID_PARAMETER' });\n        }\n        else {\n            let date_regex = new RegExp(/([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/);\n            if (birthdate.length !== 10 || birthdate.split('-').length !== 3 || !date_regex.test(birthdate)) {\n                throw new SkapiError('\"birthdate\" is invalid. The format should be \"yyyy-mm-dd\". Type: string.', { code: 'INVALID_PARAMETER' });\n            }\n        }\n    }\n    return birthdate || '';\n}\nfunction Password(password) {\n    if (!password) {\n        throw new SkapiError('\"password\" is required.', { code: 'INVALID_PARAMETER' });\n    }\n    else if (typeof password !== 'string') {\n        throw new SkapiError('\"password\" should be type: string.', { code: 'INVALID_PARAMETER' });\n    }\n    else if (password.length < 6) {\n        throw new SkapiError('\"password\" should be at least 6 characters.', { code: 'INVALID_PARAMETER' });\n    }\n    else if (password.length > 60) {\n        throw new SkapiError('\"password\" can be up to 60 characters max.', { code: 'INVALID_PARAMETER' });\n    }\n    return password;\n}\nfunction Email(email, paramName = 'email') {\n    if (!email) {\n        throw new SkapiError(`\"${paramName}\" is required.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (typeof email !== 'string') {\n        throw new SkapiError(`\"${paramName}\"should be type: string.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (email.length < 5) {\n        throw new SkapiError(`\"${paramName}\" should be at least 5 characters.`, { code: 'INVALID_PARAMETER' });\n    }\n    else if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email)) {\n        email = email.trim();\n        let splitAt = email.split('@');\n        let tld = splitAt[1].split('.');\n        if (tld.length >= 2) {\n            return email.toLowerCase();\n        }\n    }\n    throw new SkapiError(`\"${email}\" is an invalid email.`, { code: 'INVALID_PARAMETER' });\n}\nfunction Url(url) {\n    const baseUrl = (() => {\n        let baseUrl = window.location.origin || null;\n        if (baseUrl && baseUrl.slice(-1) === '/') {\n            baseUrl = baseUrl.slice(0, -1);\n        }\n        return baseUrl;\n    })();\n    let check = (c) => {\n        if (typeof c === 'string') {\n            if (c === '*') {\n                return '*';\n            }\n            else {\n                let cu = c.trim();\n                if (cu[0] === '/' && baseUrl) {\n                    if (baseUrl.slice(0, 5) === 'file:') {\n                        throw new SkapiError(`\"${c}\" is an invalid url. Relative URL does not work on local file system. Use full URL string.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    cu = baseUrl + cu;\n                }\n                else if (cu[0] === '.' && baseUrl) {\n                    if (baseUrl.slice(0, 5) === 'file:') {\n                        throw new SkapiError(`\"${c}\" is an invalid url. Relative URL does not work on local file system. Use full URL string.`, { code: 'INVALID_PARAMETER' });\n                    }\n                    let curr_loc = window.location.href.split('?')[0];\n                    if (curr_loc.slice(-1) !== '/') {\n                        curr_loc += '/';\n                    }\n                    cu = curr_loc + cu.slice(1);\n                }\n                let _url;\n                try {\n                    _url = new URL(cu);\n                }\n                catch (err) {\n                    throw new SkapiError(`\"${c}\" is an invalid url.`, { code: 'INVALID_PARAMETER' });\n                }\n                if (_url.protocol) {\n                    let url = _url.href;\n                    return url;\n                }\n            }\n        }\n        throw new SkapiError(`\"${c}\" is an invalid url.`, { code: 'INVALID_PARAMETER' });\n    };\n    if (Array.isArray(url)) {\n        return url.map(u => check(u));\n    }\n    else {\n        return check(url);\n    }\n}\nfunction specialChars(string, p = 'parameter', allowPeriods = false, allowWhiteSpace = false) {\n    let checkStr = (s) => {\n        if (typeof s !== 'string') {\n            throw new SkapiError(`${p} should be type: <string | string[]>.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (!allowWhiteSpace && s.includes(' ')) {\n            throw new SkapiError(`${p} should not have whitespace.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (!allowPeriods && s.includes('.')) {\n            throw new SkapiError(`${p} should not have periods.`, { code: 'INVALID_PARAMETER' });\n        }\n        if (/[!@#$%&*()+\\-={};':\"\\|,<>\\/?~]/.test(s)) {\n            throw new SkapiError(`${p} should not have special characters.`, { code: 'INVALID_PARAMETER' });\n        }\n    };\n    if (Array.isArray(string)) {\n        for (let s of string) {\n            checkStr(s);\n        }\n    }\n    else {\n        checkStr(string);\n    }\n    return string;\n}\nfunction Params(params, struct, required = null, bypassCheck = [], _parentKey = null) {\n    if (Array.isArray(bypassCheck)) {\n        bypassCheck = bypassCheck.concat([\n            'service',\n            'owner',\n        ]);\n    }\n    function isObjectWithKeys(obj) {\n        if (obj instanceof Promise) {\n            throw new SkapiError('Parameter should not be a promise', { code: 'INVALID_PARAMETER' });\n        }\n        return obj && typeof obj === 'object' && !Array.isArray(obj) && Object.keys(obj).length;\n    }\n    function isEmptyObject(obj) {\n        return obj && typeof obj === 'object' && !Array.isArray(obj) && !Object.keys(obj).length;\n    }\n    let _params = params;\n    let val;\n    let errToThrow = null;\n    let isInvalid = _parentKey ? ` in \"${_parentKey}\" is invalid.` : '. Parameter should be type <object>.';\n    if (_parentKey === null) {\n        if (isObjectWithKeys(_params)) {\n            if (_params instanceof HTMLFormElement || _params instanceof FormData || _params instanceof SubmitEvent) {\n                _params = extractFormMeta(params)?.meta;\n            }\n            else {\n                _params = JSON.parse(JSON.stringify(params));\n            }\n            for (let k in _params) {\n                if (!struct.hasOwnProperty(k) && Array.isArray(bypassCheck) && !bypassCheck.includes(k)) {\n                    throw new SkapiError(`Key name \"${k}\" is invalid in parameter.`, { code: 'INVALID_PARAMETER' });\n                }\n            }\n            if (Array.isArray(required) && required.length) {\n                for (let k of required) {\n                    if (!Object.keys(_params).includes(k)) {\n                        throw new SkapiError(`Key \"${k}\" is required in parameter.`, { code: 'INVALID_PARAMETER' });\n                    }\n                }\n            }\n        }\n        else if (isEmptyObject(_params) || typeof _params === 'undefined') {\n            let defaults = {};\n            for (let s in struct) {\n                let structValue = struct[s];\n                if (Array.isArray(structValue) && typeof structValue[structValue.length - 1] === 'function')\n                    defaults[s] = structValue[structValue.length - 1]();\n            }\n            return Object.keys(defaults).length ? defaults : _params;\n        }\n        if (_params === null) {\n            return null;\n        }\n    }\n    if (isObjectWithKeys(struct) && isObjectWithKeys(_params)) {\n        for (let s in struct) {\n            let structValue = struct[s];\n            if (_params.hasOwnProperty(s) && _params[s] === null) {\n                _params[s] = null;\n            }\n            else if (_params.hasOwnProperty(s) && typeof _params[s] !== 'undefined') {\n                _params[s] = Params(_params[s], structValue, null, null, s);\n            }\n            else {\n                let defaultSetter = Array.isArray(structValue) &&\n                    typeof structValue[structValue.length - 1] === 'function' ? structValue[structValue.length - 1] : null;\n                if (defaultSetter) {\n                    let def = defaultSetter();\n                    if (def !== undefined) {\n                        _params[s] = def;\n                    }\n                }\n            }\n        }\n        val = _params;\n    }\n    else if (Array.isArray(struct)) {\n        for (let s of struct) {\n            try {\n                if (typeof _params !== undefined && typeof s !== 'function') {\n                    val = Params(_params, s, null, null, _parentKey);\n                }\n                break;\n            }\n            catch (err) {\n                if (typeof err === 'string' && err.substring(0, 6) === 'BREAK:') {\n                    err = err.substring(6);\n                    let errMsg = err.split(':');\n                    errToThrow = new SkapiError(errMsg[1], { code: errMsg[0] });\n                    break;\n                }\n                else {\n                    errToThrow = err;\n                }\n            }\n        }\n    }\n    else if (typeof struct === 'function') {\n        return struct(_params);\n    }\n    else if (typeof struct === 'string') {\n        if (Array.isArray(_params)) {\n            if (struct !== 'array') {\n                throw new SkapiError(`Invalid type \"${typeof _params}\"${isInvalid}`, { code: 'INVALID_PARAMETER' });\n            }\n            for (let p of _params) {\n                if (!['number', 'string', 'boolean'].includes(typeof p) && p !== null) {\n                    throw new SkapiError(`Invalid type \"${typeof p}\" in \"${_parentKey}\" array value.`, { code: 'INVALID_PARAMETER' });\n                }\n            }\n            val = _params;\n        }\n        else if (!['number', 'string', 'boolean', 'array', 'function'].includes(struct)) {\n            if (_params === struct) {\n                val = _params;\n            }\n            else {\n                throw new SkapiError(`Value: ${_params}${isInvalid}`, { code: 'INVALID_PARAMETER' });\n            }\n        }\n        else if (typeof _params === struct) {\n            if (struct === 'number') {\n                if (Math.abs(_params) > 4503599627370496) {\n                    throw `BREAK:INVALID_PARAMETER:\"${_parentKey}\" integer value should be within -4503599627370496 ~ +4503599627370546.`;\n                }\n            }\n            val = _params;\n        }\n        else {\n            throw new SkapiError(`Value: ${_params}${isInvalid}`, { code: 'INVALID_PARAMETER' });\n        }\n    }\n    else if (struct === null) {\n        val = _params;\n    }\n    if (val === undefined && errToThrow) {\n        throw errToThrow;\n    }\n    return val;\n}\nexport default {\n    UserId,\n    PhoneNumber,\n    Birthdate,\n    Password,\n    Email,\n    Url,\n    specialChars,\n    Params\n};\n","import SkapiError from '../main/error';\nimport { MD5, generateRandom } from '../utils/utils';\nimport validator from '../utils/validator';\nconst __pendingRequest = {};\nexport function getConnection() {\n    return this.__connection;\n}\nexport async function request(url, data = null, options) {\n    options = options || {};\n    let { auth = false, method = 'post', meta = null, bypassAwaitConnection = false, } = options;\n    method = method.toLowerCase();\n    let __connection = bypassAwaitConnection ? null : (await this.__connection);\n    if (!__connection && !bypassAwaitConnection) {\n        throw new SkapiError('Invalid connection. The service could have been disabled, or has a restricted CORS.', { code: 'INVALID_REQUEST' });\n    }\n    let token = auth ? this.session?.idToken?.jwtToken : null;\n    if (auth) {\n        if (!token) {\n            this.logout();\n            throw new SkapiError('User login is required.', { code: 'INVALID_REQUEST' });\n        }\n        else {\n            let currTime = Date.now() / 1000;\n            if (this.session.idToken.payload.exp < currTime) {\n                try {\n                    await this.authentication().getSession({ refreshToken: true });\n                    token = this.session?.idToken?.jwtToken;\n                }\n                catch (err) {\n                    this.logout();\n                    throw new SkapiError('User login is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n        }\n    }\n    let isExternalUrl = '';\n    try {\n        isExternalUrl = validator.Url(url);\n    }\n    catch (err) {\n    }\n    const getEndpoint = async (dest, auth) => {\n        const endpoints = await Promise.all([\n            this.admin_endpoint,\n            this.record_endpoint\n        ]);\n        const admin = endpoints[0];\n        const record = endpoints[1];\n        const get_ep = () => {\n            switch (dest) {\n                case 'get-newsletters':\n                case 'get-public-newsletters':\n                case 'get-users':\n                case 'post-userdata':\n                case 'remove-account':\n                case 'post-secure':\n                case 'subscribe-newsletter':\n                case 'subscribe-public-newsletter':\n                case 'signup':\n                case 'confirm-signup':\n                case 'recover-account':\n                case 'mock':\n                case 'service':\n                case 'grant-access':\n                case 'last-verified-email':\n                case 'ticket':\n                case 'get-newsletter-subscription':\n                case 'request-username-change':\n                case 'jwt-login':\n                case 'client-secret-request':\n                    return {\n                        public: admin.admin_public,\n                        private: admin.admin_private\n                    };\n                case 'post-record':\n                case 'get-records':\n                case 'subscription':\n                case 'get-subscription':\n                case 'del-records':\n                case 'get-table':\n                case 'get-tag':\n                case 'get-index':\n                case 'get-signed-url':\n                case 'grant-private-access':\n                case 'request-private-access-key':\n                case 'get-ws-group':\n                case 'del-files':\n                    return {\n                        private: record.record_private,\n                        public: record.record_public\n                    };\n                default:\n                    return null;\n            }\n        };\n        return (get_ep()?.[auth ? 'private' : 'public'] || '') + dest;\n    };\n    let endpoint = isExternalUrl || (await getEndpoint(url, !!auth));\n    let service = this.session?.attributes?.['custom:service'] || __connection?.service || this.service;\n    let owner = this.session?.attributes?.['custom:owner'] || __connection?.owner || this.owner;\n    if (meta) {\n        if (typeof meta === 'object' && !Array.isArray(meta)) {\n            meta = JSON.parse(JSON.stringify(meta));\n        }\n        else {\n            throw new SkapiError('Invalid meta data.', { code: 'INVALID_REQUEST' });\n        }\n    }\n    if (Array.isArray(data) || data && typeof data !== 'object') {\n        throw new SkapiError('Request data should be a JSON Object | FormData | HTMLFormElement.', { code: 'INVALID_REQUEST' });\n    }\n    let required = options?.responseType !== 'blob' ? { service, owner } : {};\n    let fetchOptions = {};\n    let { fetchMore = false, progress } = options?.fetchOptions || {};\n    if (options?.fetchOptions && Object.keys(options.fetchOptions).length) {\n        let fetOpt = {};\n        for (let k of ['limit', 'startKey', 'ascending']) {\n            if (options.fetchOptions.hasOwnProperty(k)) {\n                fetOpt[k] = options.fetchOptions[k];\n            }\n        }\n        fetOpt = validator.Params(fetOpt, {\n            limit: 'number',\n            startKey: null,\n            ascending: 'boolean'\n        });\n        if (fetOpt.hasOwnProperty('limit') && typeof fetOpt.limit === 'number') {\n            if (fetOpt.limit > 1000) {\n                throw new SkapiError('Fetch limit should be below 1000.', { code: 'INVALID_REQUEST' });\n            }\n            Object.assign(fetchOptions, { limit: fetOpt.limit });\n        }\n        if (fetOpt.hasOwnProperty('startKey') && typeof fetOpt.startKey === 'object' && fetOpt.startKey && Object.keys(fetOpt.startKey)) {\n            Object.assign(fetchOptions, { startKey: fetOpt.startKey });\n        }\n        if (fetOpt.hasOwnProperty('ascending') && typeof fetOpt.ascending === 'boolean') {\n            Object.assign(fetchOptions, { ascending: fetOpt.ascending });\n        }\n    }\n    Object.assign(required, fetchOptions);\n    let isForm = false;\n    if (data instanceof SubmitEvent) {\n        data = data?.target;\n    }\n    if (data instanceof HTMLFormElement) {\n        data = new FormData(data);\n    }\n    if (data instanceof FormData) {\n        isForm = true;\n    }\n    if (meta) {\n        meta = Object.assign(required, meta);\n    }\n    else {\n        if (!data) {\n            data = required;\n        }\n        else if (isForm) {\n            for (let k in required) {\n                if (required[k] !== undefined) {\n                    data.set(k, new Blob([JSON.stringify(required[k])], {\n                        type: 'application/json'\n                    }));\n                }\n            }\n        }\n        else {\n            data = Object.assign(required, data);\n        }\n    }\n    if (isForm && typeof options?.fetchOptions?.formData === 'function') {\n        let cb = options.fetchOptions.formData(data);\n        if (cb instanceof Promise) {\n            cb = await cb;\n        }\n        if (cb instanceof FormData) {\n            data = cb;\n        }\n        if (data instanceof FormData) {\n            let totalFileSize = 0;\n            for (let pair of data.entries()) {\n                let v = pair[1];\n                if (v instanceof File) {\n                    totalFileSize += v.size;\n                }\n                else if (v instanceof FileList) {\n                    if (v && v.length > 0) {\n                        for (let idx = 0; idx <= v.length - 1; idx++) {\n                            totalFileSize += v.item(idx).size;\n                        }\n                    }\n                }\n            }\n            if (totalFileSize > 4200000) {\n                throw new SkapiError('Files cannot exceed 4MB. Use skapi.uploadFiles(...) instead.', { code: 'INVALID_REQUEST' });\n            }\n        }\n        else {\n            throw new SkapiError('Callback for extractFormData() should return FormData', { code: 'INVALID_PARAMETER' });\n        }\n    }\n    let requestKey = load_startKey_keys.bind(this)({\n        params: data,\n        url: isExternalUrl || url,\n        fetchMore: isForm ? false : fetchMore\n    });\n    if (requestKey && typeof requestKey === 'object') {\n        return requestKey;\n    }\n    if (!requestKey || typeof requestKey !== 'string') {\n        return null;\n    }\n    if (__pendingRequest[requestKey] instanceof Promise) {\n        return __pendingRequest[requestKey];\n    }\n    let headers = {\n        'Accept': '*/*'\n    };\n    if (token) {\n        headers.Authorization = token;\n    }\n    if (meta) {\n        let meta_key = '__meta__' + generateRandom(16);\n        if (data instanceof FormData) {\n            headers[\"Content-Meta\"] = window.btoa(encodeURIComponent(JSON.stringify({\n                meta_key: meta_key,\n                merge: 'data'\n            })));\n            data.set(meta_key, new Blob([JSON.stringify(meta)], {\n                type: 'application/json'\n            }));\n        }\n    }\n    if (options.hasOwnProperty('contentType')) {\n        if (options?.contentType) {\n            headers[\"Content-Type\"] = options.contentType;\n        }\n    }\n    else if (!(data instanceof FormData)) {\n        headers[\"Content-Type\"] = 'application/json';\n    }\n    let opt = { headers };\n    if (options?.responseType) {\n        opt.responseType = options.responseType;\n    }\n    if (method === 'post') {\n        __pendingRequest[requestKey] = _post.bind(this)(endpoint, data, opt, progress);\n    }\n    else if (method === 'get') {\n        __pendingRequest[requestKey] = _get.bind(this)(endpoint, data, opt, progress, options?.noParams);\n    }\n    try {\n        let response = await __pendingRequest[requestKey];\n        if (isForm) {\n            return response;\n        }\n        else {\n            return update_startKey_keys.bind(this)({\n                hashedParam: requestKey,\n                url,\n                response\n            });\n        }\n    }\n    catch (err) {\n        throw err;\n    }\n    finally {\n        if (requestKey && __pendingRequest.hasOwnProperty(requestKey)) {\n            delete __pendingRequest[requestKey];\n        }\n    }\n}\n;\nfunction load_startKey_keys(option) {\n    let { params = {}, url, fetchMore = false } = option || {};\n    if (params.hasOwnProperty('startKey') && params.startKey) {\n        if (typeof params.startKey !== 'object' && !Object.keys(params.startKey).length &&\n            params.startKey !== 'start' && params.startKey !== 'end') {\n            throw new SkapiError(`\"${params.startKey}\" is invalid startKey key.`, { code: 'INVALID_PARAMETER' });\n        }\n        switch (params.startKey) {\n            case 'start':\n                fetchMore = false;\n                delete params.startKey;\n        }\n    }\n    let hashedParams = (() => {\n        if (params && typeof params === 'object' && Object.keys(params).length) {\n            function orderObjectKeys(obj) {\n                function sortObject(obj) {\n                    if (typeof obj === 'object' && obj) {\n                        return Object.keys(obj).sort().reduce((res, key) => (res[key] = obj[key], res), {});\n                    }\n                    return obj;\n                }\n                ;\n                let _obj = sortObject(obj);\n                if (_obj.hasOwnProperty('limit')) {\n                    delete _obj.limit;\n                }\n                for (let k in _obj) {\n                    if (_obj[k] && typeof _obj[k] === 'object') {\n                        _obj[k] = sortObject(obj[k]);\n                    }\n                }\n                return _obj;\n            }\n            return MD5.hash(url + '/' + JSON.stringify(orderObjectKeys(params)));\n        }\n        return MD5.hash(url + '/' + this.service);\n    })();\n    if (!fetchMore && this.__startKeyHistory?.[url]?.[hashedParams]) {\n        if (this.__cached_requests?.[url] && this.__cached_requests?.[url]?.[hashedParams]) {\n            delete this.__cached_requests[url][hashedParams];\n        }\n        if (Array.isArray(this.__startKeyHistory[url][hashedParams]) && this.__startKeyHistory[url][hashedParams].length) {\n            for (let p of this.__startKeyHistory[url][hashedParams]) {\n                let hashedParams_cached = hashedParams + '/' + MD5.hash(JSON.stringify(p));\n                if (this.__cached_requests?.[url] && this.__cached_requests?.[url]?.[hashedParams_cached]) {\n                    delete this.__cached_requests[url][hashedParams_cached];\n                }\n            }\n        }\n        delete this.__startKeyHistory[url][hashedParams];\n        return hashedParams;\n    }\n    if (!Array.isArray(this.__startKeyHistory?.[url]?.[hashedParams])) {\n        return hashedParams;\n    }\n    let list_of_startKeys = this.__startKeyHistory[url][hashedParams];\n    let last_startKey_key = list_of_startKeys[list_of_startKeys.length - 1];\n    let cache_hashedParams = hashedParams;\n    if (last_startKey_key) {\n        if (last_startKey_key === 'end') {\n            return {\n                list: [],\n                startKey: 'end',\n                endOfList: true,\n                startKeyHistory: this.__startKeyHistory[url][hashedParams]\n            };\n        }\n        else {\n            cache_hashedParams += MD5.hash(last_startKey_key);\n            params.startKey = JSON.parse(last_startKey_key);\n        }\n    }\n    if (this.__cached_requests?.[url]?.[cache_hashedParams]) {\n        return this.__cached_requests[url][cache_hashedParams];\n    }\n    return hashedParams;\n}\n;\nasync function update_startKey_keys(option) {\n    let { hashedParam, url, response } = option;\n    let fetched = null;\n    if (response instanceof Promise) {\n        fetched = await response;\n    }\n    else {\n        fetched = response;\n    }\n    if (!fetched ||\n        typeof fetched !== 'object' ||\n        !fetched.hasOwnProperty('startKey') ||\n        !hashedParam ||\n        !url) {\n        return fetched;\n    }\n    if (!this.__startKeyHistory.hasOwnProperty(url)) {\n        this.__startKeyHistory[url] = {};\n    }\n    if (!this.__cached_requests?.[url]) {\n        this.__cached_requests[url] = {};\n    }\n    this.__cached_requests[url][hashedParam] = fetched;\n    if (!this.__startKeyHistory[url].hasOwnProperty(hashedParam)) {\n        this.__startKeyHistory[url][hashedParam] = [];\n    }\n    let startKey_string = fetched.startKey === 'end' ? 'end' : JSON.stringify(fetched.startKey);\n    if (!this.__startKeyHistory[url][hashedParam].includes(startKey_string)) {\n        this.__startKeyHistory[url][hashedParam].push(startKey_string);\n    }\n    this.__cached_requests[url][hashedParam] = fetched;\n    return Object.assign({ startKeyHistory: this.__startKeyHistory[url][hashedParam] }, fetched);\n}\n;\nasync function _fetch(url, opt, progress) {\n    let fetchProgress = (url, opts, progress) => {\n        return new Promise((res, rej) => {\n            let xhr = new XMLHttpRequest();\n            xhr.open((opt.method || 'GET').toUpperCase(), url);\n            for (var k in opts.headers || {}) {\n                xhr.setRequestHeader(k, opts.headers[k]);\n            }\n            if (opt.responseType) {\n                xhr.responseType = opt.responseType;\n            }\n            xhr.onload = () => {\n                if (xhr.status < 400) {\n                    if (opts.responseType == 'json' || opts.responseType == 'blob') {\n                        res(xhr.response);\n                    }\n                    else {\n                        let result = xhr.responseText;\n                        try {\n                            result = JSON.parse(result);\n                        }\n                        catch (err) { }\n                        res(result);\n                    }\n                }\n                else {\n                    let status = xhr.status;\n                    let errCode = [\n                        'INVALID_CORS',\n                        'INVALID_REQUEST',\n                        'SERVICE_DISABLED',\n                        'INVALID_PARAMETER',\n                        'ERROR',\n                        'EXISTS',\n                        'NOT_EXISTS'\n                    ];\n                    let result = xhr.responseText;\n                    try {\n                        result = JSON.parse(result);\n                    }\n                    catch (err) { }\n                    if (typeof result === 'string') {\n                        let errMsg = xhr.response.split(':');\n                        let code = errMsg.splice(0, 1)[0].trim();\n                        rej(new SkapiError(errMsg.join('').trim(), { code: (errCode.includes(code) ? code : 'ERROR') }));\n                    }\n                    else if (typeof result === 'object' && result?.message) {\n                        let code = (result?.code || (status ? status.toString() : null) || 'ERROR');\n                        rej(new SkapiError(result.message.trim(), { code: code }));\n                    }\n                    else {\n                        rej(result);\n                    }\n                }\n            };\n            xhr.onerror = () => rej('Network error');\n            xhr.onabort = () => rej('Aborted');\n            xhr.ontimeout = () => rej('Timeout');\n            if (typeof progress === 'function') {\n                xhr.onprogress = (p) => {\n                    progress({\n                        status: 'download',\n                        progress: p.loaded / p.total * 100,\n                        loaded: p.loaded,\n                        total: p.total,\n                        abort: () => xhr.abort()\n                    });\n                };\n                if (xhr.upload) {\n                    xhr.upload.onprogress = (p) => {\n                        progress({\n                            status: 'upload',\n                            progress: p.loaded / p.total * 100,\n                            loaded: p.loaded,\n                            total: p.total,\n                            abort: () => xhr.abort()\n                        });\n                    };\n                }\n            }\n            xhr.send(opts.body);\n        });\n    };\n    let received = await fetchProgress(url, {\n        headers: opt?.headers,\n        body: opt.body,\n        responseType: opt?.responseType\n    }, progress);\n    if (typeof received === 'object' && opt.method === 'GET' && received.hasOwnProperty('body')) {\n        try {\n            received = JSON.parse(received.body);\n        }\n        catch (err) { }\n    }\n    return received;\n}\n;\nasync function _post(url, params, option, progress) {\n    let opt = Object.assign({\n        method: 'POST'\n    }, option, {\n        body: params instanceof FormData ? params : JSON.stringify(params)\n    });\n    return _fetch.bind(this)(url, opt, progress);\n}\n;\nasync function _get(url, params, option, progress, noParams) {\n    if (params && typeof params === 'object' && !noParams && Object.keys(params).length) {\n        if (url.substring(url.length - 1) !== '?') {\n            url = url + '?';\n        }\n        let query = Object.keys(params)\n            .map(k => {\n            let value = params[k];\n            if (typeof value !== 'string') {\n                value = JSON.stringify(value);\n            }\n            return encodeURIComponent(k) + '=' + encodeURIComponent(value);\n        })\n            .join('&');\n        url += query;\n    }\n    let opt = Object.assign({\n        method: 'GET'\n    }, option);\n    return _fetch.bind(this)(url, opt, progress);\n}\n;\nexport function clientSecretRequest(params) {\n    let hasSecret = false;\n    let checkClientSecretPlaceholder = (v) => {\n        for (let k in v) {\n            if (typeof v[k] === 'string' && v[k].includes('$CLIENT_SECRET')) {\n                hasSecret = true;\n                break;\n            }\n        }\n    };\n    validator.Params(params, {\n        url: 'string',\n        clientSecretName: 'string',\n        method: ['get', 'post', 'GET', 'POST'],\n        headers: (v) => {\n            if (v && typeof v !== 'object') {\n                throw new SkapiError('\"headers\" should be type: <object>.', { code: 'INVALID_PARAMETER' });\n            }\n            checkClientSecretPlaceholder(v);\n            return v;\n        },\n        data: (v) => {\n            if (v && typeof v !== 'object') {\n                throw new SkapiError('\"data\" should be type: <object>.', { code: 'INVALID_PARAMETER' });\n            }\n            checkClientSecretPlaceholder(v);\n            return v;\n        },\n        params: (v) => {\n            if (v && typeof v !== 'object') {\n                throw new SkapiError('\"params\" should be type: <object>.', { code: 'INVALID_PARAMETER' });\n            }\n            checkClientSecretPlaceholder(v);\n            return v;\n        }\n    }, ['clientSecretName', 'method', 'url']);\n    if (!params.data && !params.params) {\n        throw new SkapiError(`${params.method.toLowerCase() === 'post' ? '\"data\"' : '\"params\"'} is required.`, { code: 'INVALID_PARAMETER' });\n    }\n    if (!hasSecret) {\n        throw new SkapiError(`At least one parameter value should include \"$CLIENT_SECRET\" in ${params.method.toLowerCase() === 'post' ? '\"data\"' : '\"params\"'} or \"headers\".`, { code: 'INVALID_PARAMETER' });\n    }\n    return request.bind(this)(\"client-secret-request\", params);\n}\nexport async function secureRequest(params) {\n    await this.__connection;\n    let paramsStruct = {\n        url: (v) => {\n            return validator.Url(v);\n        },\n        data: null,\n        sync: ['boolean', () => true]\n    };\n    if (Array.isArray(params)) {\n        for (let r of params) {\n            r = validator.Params(r, paramsStruct);\n        }\n    }\n    else {\n        params = validator.Params(params, paramsStruct);\n    }\n    return request.bind(this)('post-secure', params, { auth: true });\n}\n;\nexport async function mock(data, options) {\n    await this.__connection;\n    let { auth = true, method = 'POST', meta, bypassAwaitConnection = false, responseType, contentType } = options || {};\n    let { response, onerror, formData, progress } = options || {};\n    if (options) {\n        Object.assign({ auth, method, meta, bypassAwaitConnection, responseType, contentType }, {\n            fetchOptions: { response, onerror, formData, progress }\n        });\n    }\n    return request.bind(this)('mock', data, options);\n}\n;\nexport async function getFormResponse() {\n    await this.__connection;\n    let responseKey = `${this.service}:${MD5.hash(window.location.href.split('?')[0])}`;\n    let stored = window.sessionStorage.getItem(responseKey);\n    if (stored !== null) {\n        try {\n            stored = JSON.parse(stored);\n        }\n        catch (err) { }\n        return stored;\n    }\n    throw new SkapiError(\"Form response doesn't exist.\", { code: 'NOT_EXISTS' });\n}\n;\nconst pendPromise = {};\nexport function formHandler(options) {\n    let { preventMultipleCalls = false } = options || {};\n    return function (target, propertyKey, descriptor) {\n        const fn = descriptor.value;\n        descriptor.value = function (...arg) {\n            let form = arg[0];\n            let option = arg?.[1] || {};\n            let routeWithDataKey = true;\n            let formEl = null;\n            let actionDestination = '';\n            let fileBase64String = {};\n            if (form instanceof SubmitEvent) {\n                form.preventDefault();\n                let currentUrl = window.location.href;\n                formEl = form.target;\n                let href = new URL(formEl.action);\n                actionDestination = href.href;\n                let placeholders = actionDestination ? actionDestination.match(/(?<=\\{).*?(?=\\})/g) : '';\n                if (placeholders) {\n                    for (let p of placeholders) {\n                        if (!p) {\n                            continue;\n                        }\n                        let inputElement = formEl.querySelector(`[name=\"${p}\"]`);\n                        if (!inputElement) {\n                            continue;\n                        }\n                        if (inputElement.type === 'file') {\n                            for (let i = 0; i <= inputElement.files.length - 1; i++) {\n                                if (!inputElement.files[i])\n                                    continue;\n                                if (!fileBase64String[p]) {\n                                    fileBase64String[p] = [];\n                                }\n                                fileBase64String[p].push(new Promise((res, rej) => {\n                                    let reader = new FileReader();\n                                    reader.onload = function () {\n                                        res(reader.result);\n                                    };\n                                    reader.readAsDataURL(inputElement.files[i]);\n                                }));\n                            }\n                        }\n                        else {\n                            var value = inputElement.value;\n                            actionDestination = actionDestination.replace(`{${p}}`, value);\n                        }\n                    }\n                }\n                if (!formEl.action || href.href === currentUrl) {\n                    routeWithDataKey = false;\n                }\n            }\n            const handleResponse = async (response) => {\n                if (option?.response) {\n                    if (typeof option.response === 'function') {\n                        return option.response(response);\n                    }\n                    else {\n                        throw new SkapiError('Callback \"response\" should be type: function.', { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                if (actionDestination) {\n                    for (let k in fileBase64String) {\n                        if (fileBase64String[k].length) {\n                            actionDestination = actionDestination.replace(`{${k}}`, (await Promise.all(fileBase64String[k])).join(','));\n                        }\n                    }\n                }\n                if (formEl) {\n                    if (routeWithDataKey) {\n                        window.sessionStorage.setItem(`${this.service}:${MD5.hash(actionDestination)}`, JSON.stringify(response));\n                        window.location.href = actionDestination;\n                    }\n                }\n                return response;\n            };\n            let response;\n            let handleError = (err) => {\n                if (form instanceof SubmitEvent) {\n                    form.preventDefault();\n                }\n                if (err instanceof SkapiError) {\n                    err.name = propertyKey + '()';\n                }\n                else {\n                    err = err instanceof Error ? err : new SkapiError(err, { name: propertyKey + '()' });\n                }\n                if (option?.onerror) {\n                    if (typeof option.onerror === 'function') {\n                        return option.onerror(err);\n                    }\n                    else {\n                        return new SkapiError('Callback \"onerror\" should be type: function.', { code: 'INVALID_PARAMETER', name: propertyKey + '()' });\n                    }\n                }\n                return err;\n            };\n            const executeMethod = () => {\n                try {\n                    response = fn.bind(this)(...arg);\n                }\n                catch (err) {\n                    let is_err = handleError(err);\n                    if (is_err instanceof Error) {\n                        throw is_err;\n                    }\n                    return is_err;\n                }\n                if (response instanceof Promise) {\n                    return (async () => {\n                        try {\n                            let resolved = await response;\n                            let data = await handleResponse(resolved);\n                            return data;\n                        }\n                        catch (err) {\n                            let is_err = handleError(err);\n                            if (is_err instanceof Error) {\n                                throw is_err;\n                            }\n                            return is_err;\n                        }\n                    })();\n                }\n            };\n            if (preventMultipleCalls) {\n                return (async () => {\n                    if (pendPromise?.[propertyKey] instanceof Promise) {\n                        return pendPromise[propertyKey];\n                    }\n                    else {\n                        pendPromise[propertyKey] = executeMethod().finally(() => {\n                            pendPromise[propertyKey] = null;\n                        });\n                        return pendPromise[propertyKey];\n                    }\n                })();\n            }\n            return executeMethod();\n        };\n    };\n}\n;\n","import SkapiError from '../main/error';\nimport { extractFormMeta, generateRandom } from '../utils/utils';\nimport validator from '../utils/validator';\nimport { request } from './request';\nconst __index_number_range = 4503599627370496;\nfunction fromBase62(str) {\n    const base62Chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n    let result = 0;\n    for (let i = 0; i < str.length; i++) {\n        result = result * 62 + base62Chars.indexOf(str[i]);\n    }\n    return result;\n}\nexport function normalizeRecord(record) {\n    function base_decode(chars) {\n        let charset = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n        return chars.split('').reverse().reduce((prev, curr, i) => prev + (charset.indexOf(curr) * (62 ** i)), 0);\n    }\n    const output = {\n        user_id: '',\n        record_id: '',\n        updated: 0,\n        uploaded: 0,\n        table: {\n            name: '',\n            access_group: 0\n        },\n        reference: {\n            reference_limit: null,\n            allow_multiple_reference: true,\n            referenced_count: 0\n        },\n        ip: '',\n        bin: {}\n    };\n    const keys = {\n        'ip': (r) => {\n            if (r.slice(-1) === 'R') {\n                output.readonly = true;\n                r = r.slice(0, -1);\n            }\n            else {\n                output.readonly = false;\n            }\n            output.ip = r;\n        },\n        'rec': (r) => {\n            if (!r)\n                return;\n            output.record_id = r;\n            let base62timestamp = r.substring(0, r.length - 9);\n            let uploaded = base_decode(base62timestamp);\n            output.uploaded = uploaded;\n        },\n        'usr': (r) => {\n            output.user_id = r;\n        },\n        'tbl': (r) => {\n            if (!r)\n                return;\n            let rSplit = r.split('/');\n            output.table.name = rSplit[0];\n            output.table.access_group = rSplit[2] == '**' ? 'private' : parseInt(rSplit[2]);\n            if (rSplit?.[3]) {\n                output.table.subscription = true;\n            }\n            else {\n                output.table.subscription = false;\n            }\n        },\n        'usr_tbl': (r) => {\n            let rSplit = r.split('/');\n            output.user_id = rSplit[0];\n            output.table.name = rSplit[1];\n            output.table.access_group = rSplit[3] == '**' ? 'private' : parseInt(rSplit[3]);\n            if (rSplit?.[4]) {\n                output.table.subscription = true;\n            }\n            else {\n                output.table.subscription = false;\n            }\n        },\n        'idx': (r) => {\n            if (!r)\n                return;\n            let rSplit = r.split('!');\n            let name = rSplit.splice(0, 1)[0];\n            let value = normalizeTypedString('!' + rSplit.join('!'));\n            output.index = {\n                name,\n                value\n            };\n        },\n        'ref': (r) => {\n            if (!r)\n                return;\n            output.reference.record_id = r.split('/')[0];\n        },\n        'tags': (r) => {\n            output.tags = r;\n        },\n        'upd': (r) => {\n            output.updated = r;\n        },\n        'acpt_mrf': (r) => {\n            output.reference.allow_multiple_reference = r;\n        },\n        'ref_limt': (r) => {\n            output.reference.reference_limit = r;\n        },\n        'rfd': (r) => {\n            output.reference.referenced_count = r;\n        },\n        'bin': (r) => {\n            let binObj = {};\n            if (Array.isArray(r)) {\n                for (let url of r) {\n                    let path = url.split('/').slice(3).join('/');\n                    let splitPath = path.split('/');\n                    let filename = decodeURIComponent(splitPath.slice(-1)[0]);\n                    let pathKey = decodeURIComponent(splitPath[10]);\n                    let size = splitPath[9];\n                    let uploaded = splitPath[8];\n                    let access_group = splitPath[6] == '**' ? 'private' : parseInt(splitPath[6]);\n                    access_group = access_group == 0 ? 'public' : access_group == 1 ? 'authorized' : access_group;\n                    let obj = {\n                        access_group,\n                        filename,\n                        url,\n                        path,\n                        size: fromBase62(size),\n                        uploaded: fromBase62(uploaded),\n                        getFile: (dataType, progress) => {\n                            let config = {\n                                dataType: dataType || 'download',\n                                progress\n                            };\n                            return getFile.bind(this)(url, config);\n                        }\n                    };\n                    if (binObj[pathKey]) {\n                        binObj[pathKey].push(obj);\n                        continue;\n                    }\n                    binObj[pathKey] = [obj];\n                }\n            }\n            output.bin = binObj;\n        },\n        'data': (r) => {\n            let data = r;\n            if (r === '!D%{}') {\n                data = {};\n            }\n            else if (r === '!L%[]') {\n                data = [];\n            }\n            output.data = data;\n        }\n    };\n    if (record.record_id) {\n        return record;\n    }\n    for (let k in keys) {\n        if (record.hasOwnProperty(k)) {\n            keys[k](record[k]);\n        }\n    }\n    if (record.private_key) {\n        this.__private_access_key[output.record_id] = record.private_key;\n    }\n    return output;\n}\nfunction normalizeTypedString(v) {\n    let value = v.substring(3);\n    let type = v.substring(0, 3);\n    switch (type) {\n        case \"!S%\":\n            return value;\n        case \"!N%\":\n            let splitDec = value.split('.');\n            let calcNumb = Number(splitDec[0]) - 4503599627370496;\n            if (splitDec.length === 1) {\n                return calcNumb;\n            }\n            return parseFloat(calcNumb.toString() + '.' + splitDec[1]);\n        case \"!B%\":\n            return value === '1';\n        case \"!L%\":\n        case \"!D%\":\n            try {\n                return JSON.parse(value);\n            }\n            catch (err) {\n                throw new SkapiError('Value parse error.', { code: 'PARSE_ERROR' });\n            }\n        default:\n            return v;\n    }\n}\nexport async function deleteFiles(params) {\n    let { endpoints } = params;\n    if (typeof endpoints === 'string') {\n        endpoints = [endpoints];\n    }\n    if (!Array.isArray(endpoints)) {\n        throw new SkapiError('\"endpoints\" should be type: array | string.', { code: 'INVALID_PARAMETER' });\n    }\n    let updatedRec = request.bind(this)('del-files', {\n        endpoints,\n        storage: 'records'\n    }, { auth: true, method: 'post' });\n    return updatedRec.map(r => normalizeRecord.bind(this)(r));\n}\nexport async function uploadFiles(fileList, params) {\n    await this.__connection;\n    let params_request = params?.request || 'post';\n    let nestKey = params?.nestKey || '';\n    let service = params?.service || this.service;\n    if (params_request === 'post') {\n        if (!params?.record_id) {\n            throw new SkapiError('\"record_id\" is required.', { code: 'INVALID_PARAMETER' });\n        }\n    }\n    else {\n        if (service === this.service) {\n            throw new SkapiError('invalid service.', { code: 'INVALID_PARAMETER' });\n        }\n        if (params_request !== 'host') {\n            throw new SkapiError('invalid request.', { code: 'INVALID_PARAMETER' });\n        }\n    }\n    if (fileList instanceof SubmitEvent) {\n        fileList = fileList.target;\n    }\n    if (fileList instanceof HTMLFormElement) {\n        fileList = new FormData(fileList);\n    }\n    let formDataKeys = [];\n    if (fileList instanceof FormData) {\n        let fileEntries = [];\n        for (let entry of fileList.entries()) {\n            let value = entry[1];\n            if (value instanceof File) {\n                let key = entry[0];\n                formDataKeys.push(key);\n                fileEntries.push(value);\n            }\n        }\n        fileList = fileEntries;\n    }\n    if (!(fileList[0] instanceof File)) {\n        throw new SkapiError('\"fileList\" should be a FileList or array of File object.', { code: 'INVALID_PARAMETER' });\n    }\n    let reserved_key = generateRandom();\n    let getSignedParams = {\n        reserved_key,\n        service,\n        request: params_request\n    };\n    if (params?.record_id) {\n        getSignedParams.id = params.record_id;\n    }\n    let xhr;\n    let fetchProgress = (url, body, progressCallback) => {\n        return new Promise((res, rej) => {\n            xhr = new XMLHttpRequest();\n            xhr.open('POST', url);\n            xhr.onload = (e) => {\n                let result = xhr.responseText;\n                try {\n                    result = JSON.parse(result);\n                }\n                catch (err) { }\n                if (xhr.status >= 200 && xhr.status < 300) {\n                    let result = xhr.responseText;\n                    try {\n                        result = JSON.parse(result);\n                    }\n                    catch (err) { }\n                    res(result);\n                }\n                else {\n                    rej(result);\n                }\n            };\n            xhr.onerror = () => rej('Network error');\n            xhr.onabort = () => rej('Aborted');\n            xhr.ontimeout = () => rej('Timeout');\n            if (xhr.upload && typeof params.progress === 'function') {\n                xhr.upload.onprogress = progressCallback;\n            }\n            xhr.send(body);\n        });\n    };\n    let completed = [];\n    let failed = [];\n    function toBase62(num) {\n        const base62Chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n        if (num === 0)\n            return base62Chars[0];\n        let result = '';\n        while (num > 0) {\n            result = base62Chars[num % 62] + result;\n            num = Math.floor(num / 62);\n        }\n        return result;\n    }\n    let bin_endpoints = [];\n    for (let i = 0; i < fileList.length; i++) {\n        let f = fileList[i];\n        let key = formDataKeys?.[i] || '';\n        let signedParams = Object.assign({\n            key: params_request === 'host' ? (nestKey ? nestKey + '/' : '') + f.name : key ? key + '/' + f.name : f.name,\n            sizeKey: toBase62(f.size),\n            contentType: f.type || null\n        }, getSignedParams);\n        let { fields = null, url, cdn } = await request.bind(this)('get-signed-url', signedParams, { auth: true });\n        bin_endpoints.push(cdn);\n        let form = new FormData();\n        for (let name in fields) {\n            form.append(name, fields[name]);\n        }\n        form.append('file', f);\n        try {\n            await fetchProgress(url, form, (p) => {\n                if (typeof params.progress !== 'function')\n                    return;\n                params.progress({\n                    status: 'upload',\n                    progress: p.loaded / p.total * 100,\n                    currentFile: f,\n                    completed,\n                    failed,\n                    loaded: p.loaded,\n                    total: p.total,\n                    abort: () => xhr.abort()\n                });\n            });\n            completed.push(f);\n        }\n        catch (err) {\n            failed.push(f);\n        }\n    }\n    return { completed, failed, bin_endpoints };\n}\nexport async function getFile(url, config) {\n    if (typeof url !== 'string') {\n        throw new SkapiError('\"url\" should be type: string.', { code: 'INVALID_PARAMETER' });\n    }\n    validator.Url(url);\n    let isValidEndpoint = false;\n    let splitUrl = url.split('/');\n    let host = splitUrl[2];\n    let splitHost = host.split('.');\n    let subdomain = null;\n    if (splitHost.length === 3 && splitHost[1] === 'skapi') {\n        subdomain = splitHost[0];\n        isValidEndpoint = true;\n    }\n    let target_key = splitUrl.slice(3);\n    if (!isValidEndpoint) {\n        if (target_key[0] !== 'auth' && target_key[0] !== 'publ') {\n            throw new SkapiError('Invalid file url.', { code: 'INVALID_PARAMETER' });\n        }\n        try {\n            validator.UserId(target_key[2]);\n            validator.UserId(target_key[3]);\n        }\n        catch {\n            throw new SkapiError('Invalid file url.', { code: 'INVALID_PARAMETER' });\n        }\n    }\n    let service = subdomain ? null : target_key[1];\n    config = validator.Params(config, {\n        expires: 'number',\n        dataType: ['base64', 'blob', 'endpoint', 'download', () => 'download'],\n        progress: p => p\n    });\n    let needAuth = target_key[0] == 'auth';\n    let filename = url.split('/').slice(-1)[0];\n    let expires = config?.expires || 0;\n    if (expires) {\n        if (expires < 0) {\n            throw new SkapiError('\"config.expires\" should be > 0. (seconds)', { code: 'INVALID_PARAMETER' });\n        }\n        let params = {\n            request: subdomain ? 'get-host' : 'get',\n            id: subdomain || target_key[5],\n            key: url,\n            expires\n        };\n        if (service) {\n            params.service = service;\n        }\n        url = (await request.bind(this)('get-signed-url', params, { auth: true })).url;\n    }\n    else if (needAuth) {\n        let token = this.session?.idToken?.jwtToken;\n        let access_group = target_key[6] === '**' ? '**' : parseInt(target_key[6]);\n        if (!token) {\n            throw new SkapiError('User login is required.', { code: 'INVALID_REQUEST' });\n        }\n        else {\n            let currTime = Date.now() / 1000;\n            if (this.session.idToken.payload.exp < currTime) {\n                try {\n                    await this.authentication().getSession({ refreshToken: true });\n                    token = this.session?.idToken?.jwtToken;\n                }\n                catch (err) {\n                    this.logout();\n                    throw new SkapiError('User login is required.', { code: 'INVALID_REQUEST' });\n                }\n            }\n        }\n        if (access_group === '**') {\n            if (this.__user.user_id !== target_key[3]) {\n                throw new SkapiError('User has no access.', { code: 'INVALID_REQUEST' });\n            }\n        }\n        else if (this.__user.access_group < access_group) {\n            throw new SkapiError('User has no access.', { code: 'INVALID_REQUEST' });\n        }\n        url += `?t=${token}`;\n    }\n    if (config?.dataType === 'endpoint') {\n        return url;\n    }\n    if (config?.dataType === 'download') {\n        let a = document.createElement('a');\n        a.href = url;\n        document.body.appendChild(a);\n        a.setAttribute('download', filename);\n        a.target = '_blank';\n        a.click();\n        document.body.removeChild(a);\n        return null;\n    }\n    let blob = new Promise(async (res, rej) => {\n        try {\n            let b = await request.bind(this)(url, { service: service || this.service }, { method: 'get', noParams: true, contentType: null, responseType: 'blob', fetchOptions: { progress: config?.progress } });\n            if (config?.dataType === 'base64') {\n                const reader = new FileReader();\n                reader.onloadend = () => res(reader.result);\n                reader.readAsDataURL(b);\n            }\n        }\n        catch (err) {\n            rej(err);\n        }\n    });\n    return blob;\n}\nexport async function getRecords(query, fetchOptions) {\n    await this.__connection;\n    const indexTypes = {\n        '$updated': 'number',\n        '$uploaded': 'number',\n        '$referenced_count': 'number'\n    };\n    if (typeof query?.table === 'string') {\n        query.table = {\n            name: query.table,\n            access_group: 0\n        };\n    }\n    const struct = {\n        table: {\n            name: 'string',\n            access_group: ['number', 'private', 'public', 'authorized'],\n            subscription: (v) => validator.UserId(v, 'User ID in \"subscription\"')\n        },\n        reference: 'string',\n        index: {\n            name: (v) => {\n                if (typeof v !== 'string') {\n                    throw new SkapiError('\"index.name\" should be type: string.', { code: 'INVALID_PARAMETER' });\n                }\n                if (indexTypes.hasOwnProperty(v)) {\n                    return v;\n                }\n                if (['$uploaded', '$updated', '$referenced_count', '$user_id'].includes(v)) {\n                    return v;\n                }\n                return validator.specialChars(v, 'index.name', true, false);\n            },\n            value: (v) => {\n                if (query.index?.name && indexTypes.hasOwnProperty(query.index.name)) {\n                    let tp = indexTypes[query.index.name];\n                    if (typeof v === tp) {\n                        return v;\n                    }\n                    else {\n                        throw new SkapiError(`\"index.value\" should be type: ${tp}.`, { code: 'INVALID_PARAMETER' });\n                    }\n                }\n                if (typeof v === 'number') {\n                    if (v > __index_number_range || v < -__index_number_range) {\n                        throw new SkapiError(`Number value should be within range -${__index_number_range} ~ +${__index_number_range}`, { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                }\n                else if (typeof v === 'boolean') {\n                    return v;\n                }\n                else {\n                    if ('$user_id' == query.index?.name) {\n                        return validator.UserId(v);\n                    }\n                    return validator.specialChars(v, 'index.value', false, true);\n                }\n            },\n            condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne'],\n            range: (v) => {\n                if (!query.index || !('value' in query.index)) {\n                    throw new SkapiError('\"index.value\" is required.', { code: 'INVALID_PARAMETER' });\n                }\n                if (query.index.name === '$record_id') {\n                    throw new SkapiError(`Cannot do \"index.range\" on ${query.index.name}`, { code: 'INVALID_PARAMETER' });\n                }\n                if (typeof query.index.value !== typeof v) {\n                    throw new SkapiError('\"index.range\" type should match the type of \"index.value\".', { code: 'INVALID_PARAMETER' });\n                }\n                if (typeof v === 'string') {\n                    return validator.specialChars(v, 'index.range', false, true);\n                }\n                return v;\n            }\n        },\n        tag: 'string',\n        private_key: 'string'\n    };\n    if (query?.tag) {\n        validator.specialChars(query.tag, 'tag', false, true);\n    }\n    if (query?.table) {\n        if (query.table.access_group === 'public') {\n            query.table.access_group = 0;\n        }\n        else if (query.table.access_group === 'authorized') {\n            query.table.access_group = 1;\n        }\n        if (query.table?.name) {\n            validator.specialChars(query.table.name, 'table name', true, true);\n        }\n        if (typeof query.table.access_group === 'number') {\n            if (!this.__user) {\n                if (0 < query.table.access_group) {\n                    throw new SkapiError(\"User has no access\", { code: 'INVALID_REQUEST' });\n                }\n            }\n            else if (this.user.access_group < query.table.access_group) {\n                throw new SkapiError(\"User has no access\", { code: 'INVALID_REQUEST' });\n            }\n        }\n        if (!query.table.hasOwnProperty('access_group')) {\n            query.table.access_group = query.table?.subscription ? 1 : 0;\n        }\n    }\n    if (query?.index && !query.index?.name) {\n        throw new SkapiError('\"index.name\" is required when using \"index\" parameter.', { code: 'INVALID_REQUEST' });\n    }\n    let is_reference_fetch = '';\n    if (query?.record_id) {\n        validator.specialChars(query.record_id, 'record_id', false, false);\n        let outputObj = { record_id: query.record_id };\n        if (query?.service) {\n            outputObj.service = query.service;\n        }\n        query = outputObj;\n        if (this.__private_access_key[query.record_id]) {\n            query.private_key = this.__private_access_key[query.record_id];\n        }\n    }\n    else {\n        let ref_user;\n        if (!this.session && query.table?.access_group === 'private') {\n            throw new SkapiError('Unsigned users have no access to private records.', { code: 'INVALID_REQUEST' });\n        }\n        if (query.reference) {\n            try {\n                ref_user = validator.UserId(query.reference);\n            }\n            catch (err) {\n                validator.specialChars(query.reference, 'reference', false, false);\n                is_reference_fetch = query.reference;\n                if (this.__private_access_key[is_reference_fetch]) {\n                    query.private_key = this.__private_access_key[is_reference_fetch];\n                }\n            }\n        }\n        let isAdmin = await this.checkAdmin();\n        let q = validator.Params(query || {}, struct, ref_user || isAdmin ? [] : ['table']);\n        if (typeof q.table !== 'string') {\n            if (q.table?.subscription) {\n                if (!this.session) {\n                    throw new SkapiError('Unsigned users have no access to subscription records.', { code: 'INVALID_REQUEST' });\n                }\n                q.table.subscription = {\n                    user_id: q.table.subscription,\n                    group: 1\n                };\n            }\n        }\n        query = q;\n    }\n    let auth = query.hasOwnProperty('access_group') && typeof query.table !== 'string' && query.table.access_group ? true : !!this.__user;\n    let result = await request.bind(this)('get-records', query, {\n        fetchOptions,\n        auth,\n        method: auth ? 'post' : 'get'\n    });\n    for (let i in result.list) {\n        result.list[i] = normalizeRecord.bind(this)(result.list[i]);\n    }\n    ;\n    if (is_reference_fetch && result?.reference_private_key) {\n        this.__private_access_key[is_reference_fetch] = result.reference_private_key;\n    }\n    return result;\n}\nexport async function postRecord(form, config) {\n    let isAdmin = await this.checkAdmin();\n    if (!config) {\n        throw new SkapiError('\"config\" argument is required.', { code: 'INVALID_PARAMETER' });\n    }\n    if (!this.user) {\n        throw new SkapiError('Login is required.', { code: 'INVALID_REQUEST' });\n    }\n    let fetchOptions = {};\n    if (typeof config?.formData === 'function') {\n        fetchOptions.formData = config.formData;\n        delete config.formData;\n    }\n    if (typeof config.table === 'string') {\n        config.table = {\n            name: config.table\n        };\n        if (!config.record_id) {\n            config.table.access_group = 0;\n        }\n    }\n    if (typeof config.reference === 'string') {\n        config.reference = {\n            record_id: config.reference\n        };\n    }\n    let progress = config.progress || null;\n    let reference_private_key = null;\n    let config_chkd = validator.Params(config || {}, {\n        record_id: 'string',\n        readonly: 'boolean',\n        table: {\n            name: 'string',\n            subscription: 'boolean',\n            access_group: ['number', 'private', 'public', 'authorized']\n        },\n        reference: {\n            record_id: (v) => {\n                validator.specialChars(v, '\"reference.record_id\"', false, false);\n                if (this.__private_access_key[v]) {\n                    reference_private_key = this.__private_access_key[v];\n                }\n                return v;\n            },\n            reference_limit: (v) => {\n                if (v === null) {\n                    return null;\n                }\n                else if (typeof v === 'number') {\n                    if (0 > v) {\n                        throw new SkapiError(`\"reference_limit\" should be >= 0`, { code: 'INVALID_PARAMETER' });\n                    }\n                    if (v > 4503599627370546) {\n                        throw new SkapiError(`\"reference_limit\" should be <= 4503599627370546`, { code: 'INVALID_PARAMETER' });\n                    }\n                    return v;\n                }\n                throw new SkapiError(`\"reference_limit\" should be type: <number | null>`, { code: 'INVALID_PARAMETER' });\n            },\n            allow_multiple_reference: 'boolean',\n        },\n        index: {\n            name: 'string',\n            value: ['string', 'number', 'boolean']\n        },\n        tags: (v) => {\n            if (v === null) {\n                return v;\n            }\n            if (typeof v === 'string') {\n                return v.split(',').map(t => t.trim());\n            }\n            if (Array.isArray(v)) {\n                for (let i of v) {\n                    if (typeof i !== 'string') {\n                        throw new SkapiError(`\"tags\" should be type: <string | string[]>`, { code: 'INVALID_PARAMETER' });\n                    }\n                    validator.specialChars(v, 'tag', false, true);\n                }\n                return v;\n            }\n            throw new SkapiError(`\"tags\" should be type: <string | string[]>`, { code: 'INVALID_PARAMETER' });\n        },\n        remove_bin: (v) => {\n            if (!v) {\n                return null;\n            }\n            let arr = [];\n            if (Array.isArray(v)) {\n                for (let i of v) {\n                    if (typeof i === 'string') {\n                        arr.push(i);\n                    }\n                    else if (i.url && i.size && i.filename) {\n                        arr.push(i.url);\n                    }\n                    else {\n                        throw new SkapiError(`\"remove_bin\" should be type: <string[] | BinaryFile[]>`, { code: 'INVALID_PARAMETER' });\n                    }\n                }\n            }\n            else {\n                throw new SkapiError(`\"remove_bin\" should be type: <string[] | BinaryFile[]>`, { code: 'INVALID_PARAMETER' });\n            }\n            return arr;\n        }\n    }, [], ['response', 'onerror', 'progress'], null);\n    if (!config_chkd?.table && !config_chkd?.record_id) {\n        throw new SkapiError('Either \"record_id\" or \"table\" should have a value.', { code: 'INVALID_PARAMETER' });\n    }\n    if (config_chkd.table) {\n        if (config_chkd.table.access_group === 'public') {\n            config_chkd.table.access_group = 0;\n        }\n        else if (config_chkd.table.access_group === 'authorized') {\n            config_chkd.table.access_group = 1;\n        }\n        if (typeof config_chkd.table.access_group === 'number') {\n            if (!isAdmin && this.user.access_group < config_chkd.table.access_group) {\n                throw new SkapiError(\"User has no access\", { code: 'INVALID_REQUEST' });\n            }\n        }\n        if (!config_chkd.table.name) {\n            throw new SkapiError('\"table.name\" cannot be empty string.', { code: 'INVALID_PARAMETER' });\n        }\n        validator.specialChars(config_chkd.table.name, 'table name', true, true);\n        if (isAdmin) {\n            if (config_chkd.table.access_group === 'private') {\n                throw new SkapiError('Service owner cannot write private records.', { code: 'INVALID_REQUEST' });\n            }\n        }\n        if (config_chkd.table?.subscription) {\n            if (!config_chkd?.record_id && !config_chkd.table.hasOwnProperty('access_group')) {\n                config_chkd.table.access_group = 1;\n            }\n            if (config_chkd.table.access_group === 0) {\n                throw new SkapiError('Public records cannot require subscription.', { code: 'INVALID_REQUEST' });\n            }\n            config_chkd.table.subscription_group = 1;\n            delete config_chkd.table.subscription;\n        }\n    }\n    config = config_chkd;\n    delete config.response;\n    delete config.onerror;\n    delete config.progress;\n    if (reference_private_key) {\n        config.reference_private_key = reference_private_key;\n    }\n    if (config.index) {\n        if (!config.index.name || typeof config.index.name !== 'string') {\n            throw new SkapiError('\"index.name\" is required. type: string.', { code: 'INVALID_PARAMETER' });\n        }\n        if (!['$uploaded', '$updated', '$referenced_count', '$user_id'].includes(config.index.name)) {\n            validator.specialChars(config.index.name, 'index name', true);\n        }\n        if (!config.index.hasOwnProperty('value')) {\n            throw new SkapiError('\"index.value\" is required.', { code: 'INVALID_PARAMETER' });\n        }\n        if (typeof config.index.value === 'string') {\n            validator.specialChars(config.index.value, 'index value', false, true);\n        }\n        else if (typeof config.index.value === 'number') {\n            if (config.index.value > __index_number_range || config.index.value < -__index_number_range) {\n                throw new SkapiError(`Number value should be within range -${__index_number_range} ~ +${__index_number_range}`, { code: 'INVALID_PARAMETER' });\n            }\n        }\n    }\n    let options = { auth: true };\n    let postData = null;\n    let to_bin = null;\n    if ((form instanceof HTMLFormElement) || (form instanceof FormData) || (form instanceof SubmitEvent)) {\n        form = (form instanceof SubmitEvent) ? form.target : form;\n        let formMeta = extractFormMeta(form);\n        if (formMeta.to_bin.length) {\n            to_bin = formMeta.to_bin;\n        }\n        if (formMeta.files.length) {\n            if (!to_bin) {\n                to_bin = [];\n            }\n            for (let f of formMeta.files) {\n                to_bin.push(f);\n            }\n        }\n        postData = Object.assign({ data: formMeta.meta }, config);\n    }\n    else {\n        postData = Object.assign({ data: form }, config);\n    }\n    if (typeof progress === 'function') {\n        fetchOptions.progress = progress;\n    }\n    if (Object.keys(fetchOptions).length) {\n        Object.assign(options, { fetchOptions });\n    }\n    let rec = await request.bind(this)('post-record', postData, options);\n    if (to_bin) {\n        let bin_formData = new FormData();\n        for (let f of to_bin) {\n            bin_formData.append(f.name, f.file, f.file.name);\n        }\n        let uploadFileParams = {\n            record_id: rec.rec,\n            progress\n        };\n        if (config.hasOwnProperty('service')) {\n            uploadFileParams['service'] = config.service;\n        }\n        let { bin_endpoints } = await uploadFiles.bind(this)(bin_formData, uploadFileParams);\n        if (!rec.bin) {\n            rec.bin = bin_endpoints;\n        }\n        else {\n            rec.bin.push(...bin_endpoints);\n        }\n    }\n    return normalizeRecord.bind(this)(rec);\n}\nexport async function getTables(query, fetchOptions) {\n    let res = await request.bind(this)('get-table', validator.Params(query || {}, {\n        table: 'string',\n        condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n    }), Object.assign({ auth: true }, { fetchOptions }));\n    let convert = {\n        'cnt_rec': 'number_of_records',\n        'tbl': 'table',\n        'srvc': 'service'\n    };\n    if (Array.isArray(res?.list)) {\n        for (let t of res.list) {\n            for (let k in convert) {\n                if (t.hasOwnProperty(k)) {\n                    t[convert[k]] = t[k];\n                    delete t[k];\n                }\n            }\n        }\n    }\n    return res;\n}\nexport async function getIndexes(query, fetchOptions) {\n    if (!query?.table) {\n        throw new SkapiError('\"table\" is required.', { code: 'INVALID_PARAMETER' });\n    }\n    let p = validator.Params(query || {}, {\n        table: 'string',\n        index: (v) => validator.specialChars(v, 'index name', true, false),\n        order: {\n            by: [\n                'average_number',\n                'total_number',\n                'number_count',\n                'average_bool',\n                'total_bool',\n                'bool_count',\n                'string_count',\n                'index_name',\n                'number_of_records'\n            ],\n            value: ['string', 'number', 'boolean'],\n            condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n        }\n    }, ['table']);\n    if (p.hasOwnProperty('order')) {\n        if (!p.order?.by) {\n            throw new SkapiError('\"order.by\" is required.', { code: 'INVALID_PARAMETER' });\n        }\n        if (p.order.hasOwnProperty('condition') && !p.order.hasOwnProperty('value')) {\n            throw new SkapiError('\"value\" is required for \"condition\".', { code: 'INVALID_PARAMETER' });\n        }\n        if (p.hasOwnProperty('index')) {\n            if (p.index.substring(p.index.length - 1) !== '.') {\n                throw new SkapiError('\"index\" should be a parent index name of the compound index when using \"order.by\"', { code: 'INVALID_PARAMETER' });\n            }\n        }\n    }\n    let res = await request.bind(this)('get-index', p, Object.assign({ auth: true }, { fetchOptions }));\n    let convert = {\n        'cnt_bool': 'boolean_count',\n        'cnt_numb': 'number_count',\n        'totl_numb': 'total_number',\n        'totl_bool': 'total_bool',\n        'avrg_numb': 'average_number',\n        'avrg_bool': 'average_bool',\n        'cnt_str': 'string_count'\n    };\n    if (Array.isArray(res?.list)) {\n        res.list = res.list.map((i) => {\n            let iSplit = i.idx.split('/');\n            let resolved = {\n                table: iSplit[1],\n                index: iSplit[2],\n                number_of_records: i.cnt_rec\n            };\n            for (let k in convert) {\n                if (i?.[k]) {\n                    resolved[convert[k]] = i[k];\n                }\n            }\n            return resolved;\n        });\n    }\n    return res;\n}\nexport async function getTags(query, fetchOptions) {\n    let res = await request.bind(this)('get-tag', validator.Params(query || {}, {\n        table: 'string',\n        tag: 'string',\n        condition: ['gt', 'gte', 'lt', 'lte', '>', '>=', '<', '<=', '=', 'eq', '!=', 'ne']\n    }), Object.assign({ auth: true }, { fetchOptions }));\n    if (Array.isArray(res?.list)) {\n        for (let i in res.list) {\n            let item = res.list[i];\n            let tSplit = item.tag.split('/');\n            res.list[i] = {\n                table: tSplit[1],\n                tag: tSplit[0],\n                number_of_records: item.cnt_rec\n            };\n        }\n    }\n    return res;\n}\nexport async function deleteRecords(params) {\n    let isAdmin = await this.checkAdmin();\n    if (isAdmin && !params?.service) {\n        throw new SkapiError('Service ID is required.', { code: 'INVALID_PARAMETER' });\n    }\n    if (params?.record_id) {\n        return await request.bind(this)('del-records', {\n            service: params.service || this.service,\n            record_id: (id => {\n                if (typeof id === 'string') {\n                    return [id];\n                }\n                if (!Array.isArray(id)) {\n                    throw new SkapiError('\"record_id\" should be type: <string | string[]>', { code: 'INVALID_PARAMETER' });\n                }\n                if (id.length > 100) {\n                    throw new SkapiError('\"record_id\" should not exceed 100 items.', { code: 'INVALID_PARAMETER' });\n                }\n                return validator.specialChars(id, 'record_id', false, false);\n            })(params.record_id)\n        }, { auth: true });\n    }\n    else {\n        if (!params?.table) {\n            if (isAdmin) {\n                return null;\n            }\n            throw new SkapiError('Either \"table\" or \"record_id\" is required.', { code: 'INVALID_PARAMETER' });\n        }\n        let struct = {\n            access_group: (v) => {\n                if (typeof v === 'string' && ['private', 'public', 'authorized'].includes(v)) {\n                    switch (v) {\n                        case 'private':\n                            return v;\n                        case 'public':\n                            return 0;\n                        case 'authorized':\n                            return 1;\n                    }\n                }\n                else if (typeof v === 'number' && v >= 0 && v < 100) {\n                    return v;\n                }\n                throw new SkapiError('Invalid \"table.access_group\". Access group should be type <number (0~99) | \"private\" | \"public\" | \"authorized\">.', { code: 'INVALID_PARAMETER' });\n            },\n            name: 'string',\n            subscription: (v) => {\n                if (isAdmin && typeof params?.table?.subscription === 'string') {\n                    return validator.UserId(v, 'User ID in \"table.subscription\"');\n                }\n                if (typeof v === 'boolean') {\n                    if (v) {\n                        return this.__user.user_id;\n                    }\n                    else {\n                        return null;\n                    }\n                }\n                throw new SkapiError('\"table.subscription\" is an invalid parameter key.', { code: 'INVALID_PARAMETER' });\n            },\n        };\n        let table_p = validator.Params(params.table || {}, struct, isAdmin ? [] : ['name']);\n        if (table_p.hasOwnProperty('subscription')) {\n            if (table_p.subscription === null) {\n                delete table_p.subscription;\n            }\n            else {\n                if (!table_p.hasOwnProperty('access_group')) {\n                    throw new SkapiError('\"table.access_group\" is required for subscription records.', { code: 'INVALID_PARAMETER' });\n                }\n                else if (table_p.access_group === 0) {\n                    throw new SkapiError('Public tables does not hold subscription records.', { code: 'INVALID_REQUEST' });\n                }\n                table_p.subscription_group = 1;\n            }\n        }\n        params.table = table_p;\n    }\n    return await request.bind(this)('del-records', params, { auth: true });\n}\nexport function grantPrivateRecordAccess(params) {\n    if (!params.record_id) {\n        throw new SkapiError(`Record ID is required.`, { code: 'INVALID_PARAMETER' });\n    }\n    if (!params.user_id || Array.isArray(params.user_id) && !params.user_id.length) {\n        throw new SkapiError(`User ID is required.`, { code: 'INVALID_PARAMETER' });\n    }\n    return recordAccess.bind(this)({\n        record_id: params.record_id,\n        user_id: params.user_id || null,\n        execute: 'add'\n    });\n}\nexport function removePrivateRecordAccess(params) {\n    if (!params.record_id) {\n        throw new SkapiError(`Record ID is required.`, { code: 'INVALID_PARAMETER' });\n    }\n    if (!params.user_id || Array.isArray(params.user_id) && !params.user_id.length) {\n        throw new SkapiError(`User ID is required.`, { code: 'INVALID_PARAMETER' });\n    }\n    return recordAccess.bind(this)({\n        record_id: params.record_id,\n        user_id: params.user_id || null,\n        execute: 'remove'\n    });\n}\nexport function listPrivateRecordAccess(params) {\n    let list = recordAccess.bind(this)({\n        record_id: params.record_id,\n        user_id: params.user_id || null,\n        execute: 'list'\n    });\n    list.list = list.list.map((i) => {\n        i.record_id = i.rec_usr.split('/')[0];\n        i.user_id = i.rec_usr.split('/')[1];\n        return i;\n    });\n}\nexport function requestPrivateRecordAccessKey(record_id) {\n    return request.bind(this)('request-private-access-key', { record_id }, { auth: true });\n}\nfunction recordAccess(params) {\n    let execute = params.execute;\n    let req = validator.Params(params, {\n        record_id: 'string',\n        user_id: (v) => {\n            if (!v) {\n                if (execute == 'list') {\n                    return null;\n                }\n                throw new SkapiError(`User ID is required.`, { code: 'INVALID_PARAMETER' });\n            }\n            let id = v;\n            if (typeof id === 'string') {\n                id = [id];\n            }\n            if (id.length > 100) {\n                throw new SkapiError(`Cannot process more than 100 users at once.`, { code: 'INVALID_REQUEST' });\n            }\n            for (let i of id) {\n                validator.UserId(i, 'User ID in \"user_id\"');\n            }\n            return id;\n        },\n        execute: ['add', 'remove', 'list']\n    }, [\n        'execute',\n        'record_id',\n        'user_id'\n    ]);\n    if (!req.user_id) {\n        req.user_id = null;\n    }\n    return request.bind(this)('grant-private-access', req, { auth: true });\n}\n","import SkapiError from '../main/error';\nimport validator from '../utils/validator';\nimport { extractFormMeta } from '../utils/utils';\nimport { request } from './request';\nasync function prepareWebsocket() {\n    await this.getProfile();\n    if (!this.session) {\n        throw new SkapiError(`No access.`, { code: 'INVALID_REQUEST' });\n    }\n    let r = await this.record_endpoint;\n    return new WebSocket(r.websocket_private + '?token=' + this.session.accessToken.jwtToken);\n}\nlet reconnectAttempts = 0;\nexport async function closeRealtime() {\n    let socket = this.__socket ? await this.__socket : this.__socket;\n    if (socket) {\n        socket.close();\n    }\n    this.__socket = null;\n    this.__socket_group = null;\n    return null;\n}\nexport function connectRealtime(cb, delay = 0) {\n    if (typeof cb !== 'function') {\n        throw new SkapiError(`Callback must be a function.`, { code: 'INVALID_REQUEST' });\n    }\n    if (reconnectAttempts || !(this.__socket instanceof Promise)) {\n        this.__socket = new Promise(async (resolve) => {\n            setTimeout(async () => {\n                await this.__connection;\n                let user = await this.getProfile();\n                if (!user) {\n                    throw new SkapiError(`No access.`, { code: 'INVALID_REQUEST' });\n                }\n                let socket = await prepareWebsocket.bind(this)();\n                socket.onopen = () => {\n                    reconnectAttempts = 0;\n                    cb({ status: 'success', message: 'Connected to WebSocket server.' });\n                    if (this.__socket_group) {\n                        socket.send(JSON.stringify({\n                            action: 'joinGroup',\n                            rid: this.__socket_group,\n                            token: this.session.accessToken.jwtToken\n                        }));\n                    }\n                    resolve(socket);\n                };\n                socket.onmessage = event => {\n                    let data = JSON.parse(decodeURI(event.data));\n                    let status = 'message';\n                    if (data?.['#private']) {\n                        status = 'private';\n                    }\n                    else if (data?.['#notice']) {\n                        status = 'notice';\n                    }\n                    let ret = { status, message: (data?.['#message'] || data?.['#private'] || data?.['#notice']) || null };\n                    if (data?.['#user_id']) {\n                        ret.sender = data['#user_id'];\n                    }\n                    cb(ret);\n                };\n                socket.onclose = event => {\n                    if (event.wasClean) {\n                        cb({ status: 'close', message: 'WebSocket connection closed.' });\n                        this.__socket = null;\n                        this.__socket_group = null;\n                    }\n                    else {\n                        const maxAttempts = 10;\n                        reconnectAttempts++;\n                        if (reconnectAttempts < maxAttempts) {\n                            let delay = Math.min(1000 * (2 ** reconnectAttempts), 30000);\n                            cb({ status: 'error', message: `Skapi: WebSocket connection error. Reconnecting in ${delay / 1000} seconds...` });\n                            connectRealtime.bind(this)(cb, delay);\n                        }\n                        else {\n                            cb({ status: 'error', message: 'Skapi: WebSocket connection error. Max reconnection attempts reached.' });\n                            this.__socket = null;\n                        }\n                    }\n                };\n                socket.onerror = () => {\n                    cb({ status: 'error', message: 'Skapi: WebSocket connection error.' });\n                    throw new SkapiError(`Skapi: WebSocket connection error.`, { code: 'ERROR' });\n                };\n            }, delay);\n        });\n    }\n    return this.__socket;\n}\nexport async function postRealtime(message, recipient) {\n    let socket = this.__socket ? await this.__socket : this.__socket;\n    if (!socket) {\n        throw new SkapiError(`No realtime connection. Execute connectRealtime() before this method.`, { code: 'INVALID_REQUEST' });\n    }\n    if (!recipient) {\n        throw new SkapiError(`No recipient.`, { code: 'INVALID_REQUEST' });\n    }\n    if (message instanceof FormData || message instanceof SubmitEvent || message instanceof HTMLFormElement) {\n        message = extractFormMeta(message).meta;\n    }\n    if (socket.readyState === 1) {\n        try {\n            validator.UserId(recipient);\n            socket.send(JSON.stringify({\n                action: 'sendMessage',\n                uid: recipient,\n                content: message,\n                token: this.session.accessToken.jwtToken\n            }));\n        }\n        catch (err) {\n            if (this.__socket_group !== recipient) {\n                throw new SkapiError(`User has not joined to the recipient group. Run joinRealtime({ group: \"${recipient}\" })`, { code: 'INVALID_REQUEST' });\n            }\n            socket.send(JSON.stringify({\n                action: 'broadcast',\n                rid: recipient,\n                content: message,\n                token: this.session.accessToken.jwtToken\n            }));\n        }\n        return { status: 'success', message: 'Message sent.' };\n    }\n    throw new SkapiError('Realtime connection is not open. Try reconnecting with connectRealtime().', { code: 'INVALID_REQUEST' });\n}\nexport async function joinRealtime(params) {\n    let socket = this.__socket ? await this.__socket : this.__socket;\n    if (!socket) {\n        throw new SkapiError(`No realtime connection. Execute connectRealtime() before this method.`, { code: 'INVALID_REQUEST' });\n    }\n    if (params instanceof FormData || params instanceof SubmitEvent || params instanceof HTMLFormElement) {\n        params = extractFormMeta(params).meta;\n    }\n    let { group = null } = params;\n    if (!group && !this.__socket_group) {\n        return { status: 'success', message: 'Left realtime message group.' };\n    }\n    if (group !== null && typeof group !== 'string') {\n        throw new SkapiError(`\"group\" must be a string | null.`, { code: 'INVALID_PARAMETER' });\n    }\n    socket.send(JSON.stringify({\n        action: 'joinGroup',\n        rid: group,\n        token: this.session.accessToken.jwtToken\n    }));\n    this.__socket_group = group;\n    return { status: 'success', message: group ? `Joined realtime message group: \"${group}\".` : 'Left realtime message group.' };\n}\nexport async function getRealtimeUsers(params, fetchOptions) {\n    await this.__connection;\n    params = validator.Params(params, {\n        user_id: (v) => validator.UserId(v, 'User ID in \"user_id\"'),\n        group: 'string'\n    }, ['group']);\n    if (!params.group) {\n        throw new SkapiError(`\"group\" is required.`, { code: 'INVALID_PARAMETER' });\n    }\n    let res = await request.bind(this)('get-ws-group', params, {\n        fetchOptions,\n        auth: true,\n        method: 'post'\n    });\n    for (let i = 0; i < res.list.length; i++) {\n        res.list[i] = res.list[i].uid.split('#')[1];\n    }\n    return res;\n}\nexport async function getRealtimeGroups(params, fetchOptions) {\n    await this.__connection;\n    if (!params) {\n        params = { searchFor: 'group' };\n    }\n    params = validator.Params(params, {\n        searchFor: ['group', 'number_of_users', () => 'group'],\n        value: ['string', 'number', () => {\n                if (params?.searchFor && params?.searchFor === 'number_of_users') {\n                    return 0;\n                }\n                return ' ';\n            }],\n        condition: ['>', '>=', '=', '<', '<=', '!=', 'gt', 'gte', 'eq', 'lt', 'lte', 'ne'],\n        range: ['string', 'number']\n    });\n    if (!params.condition) {\n        if (params.value === ' ' || !params.value) {\n            params.condition = '>';\n        }\n        else {\n            params.condition = '=';\n        }\n    }\n    if (params.range && params.condition) {\n        delete params.condition;\n    }\n    if (params.searchFor === 'number_of_users' && typeof params.value !== 'number') {\n        throw new SkapiError(`\"value\" must be a number.`, { code: 'INVALID_PARAMETER' });\n    }\n    if (params.searchFor === 'group' && typeof params.value !== 'string') {\n        throw new SkapiError(`\"value\" must be a string.`, { code: 'INVALID_PARAMETER' });\n    }\n    if (params.hasOwnProperty('range') && typeof params.range !== typeof params.value) {\n        throw new SkapiError(`\"range\" must be a ${typeof params.value}.`, { code: 'INVALID_PARAMETER' });\n    }\n    let res = await request.bind(this)('get-ws-group', params, {\n        fetchOptions,\n        auth: true,\n        method: 'post'\n    });\n    res.list = res.list.map((v) => {\n        return {\n            group: v.rid.split('#')[1],\n            number_of_users: v.cnt\n        };\n    });\n    return res;\n}\n","import SkapiError from '../main/error';\nimport validator from '../utils/validator';\nimport { request } from './request';\nfunction subscriptionGroupCheck(option) {\n    option = validator.Params(option, {\n        user_id: (v) => validator.UserId(v, '\"user_id\"'),\n    }, ['user_id']);\n    if (this.__user && option.user_id === this.__user.user_id) {\n        throw new SkapiError(`\"user_id\" cannot be the user's own ID.`, { code: 'INVALID_PARAMETER' });\n    }\n    return option;\n}\n;\nexport async function getSubscriptions(params, fetchOptions, _mapper) {\n    params = validator.Params(params, {\n        subscriber: (v) => validator.UserId(v, 'User ID in \"subscriber\"'),\n        subscription: (v) => validator.UserId(v, 'User ID in \"subscription\"'),\n        blocked: 'boolean'\n    });\n    if (!params.subscriber && !params.subscription) {\n        throw new SkapiError('At least either \"subscriber\" or \"subscription\" should have a value.', { code: 'INVALID_PARAMETER' });\n    }\n    Object.assign(params, { group: 1 });\n    let response = await request.bind(this)('get-subscription', params, Object.assign({ auth: true }, { fetchOptions }));\n    response.list = response.list.map(_mapper || ((s) => {\n        let subscription = {};\n        let subSplit = s.sub.split('#');\n        subscription.subscriber = subSplit[2];\n        subscription.subscription = subSplit[0];\n        subscription.group = parseInt(subSplit[1]);\n        subscription.timestamp = s.stmp;\n        subscription.blocked = s.grp.substring(0, 1) === 'N';\n        return subscription;\n    }));\n    return response;\n}\nexport async function subscribe(option) {\n    await this.__connection;\n    let { user_id } = subscriptionGroupCheck.bind(this)(option);\n    return await request.bind(this)('subscription', {\n        subscribe: user_id,\n        group: 1\n    }, { auth: true });\n}\nexport async function unsubscribe(option) {\n    await this.__connection;\n    let { user_id } = subscriptionGroupCheck.bind(this)(option);\n    return await request.bind(this)('subscription', {\n        unsubscribe: user_id,\n        group: 1\n    }, { auth: true });\n}\nexport async function blockSubscriber(option) {\n    await this.__connection;\n    let { user_id } = subscriptionGroupCheck.bind(this)(option);\n    return await request.bind(this)('subscription', { block: user_id, group: 1 }, { auth: true });\n}\nexport async function unblockSubscriber(option) {\n    await this.__connection;\n    let { user_id } = subscriptionGroupCheck.bind(this)(option);\n    return await request.bind(this)('subscription', { unblock: user_id, group: 1 }, { auth: true });\n}\nexport async function getSubscribedTo(option, fetchOptions) {\n    await this.__connection;\n    option = validator.Params(option, {\n        user_id: (v) => validator.UserId(v, '\"user_id\"'),\n        blocked: 'boolean'\n    }) || {};\n    return getSubscriptions.bind(this)({\n        subscriber: option.user_id || this.__user?.user_id,\n        group: 1,\n        blocked: option.blocked\n    }, fetchOptions);\n}\n;\nexport async function getSubscribers(option, fetchOptions) {\n    await this.__connection;\n    option = validator.Params(option, {\n        user_id: (v) => validator.UserId(v, '\"user_id\"'),\n        blocked: 'boolean'\n    }) || {};\n    let subParams = {\n        subscription: option.user_id || this.__user?.user_id,\n        group: 1,\n        blocked: option.blocked\n    };\n    return getSubscriptions.bind(this)(subParams, fetchOptions);\n}\n;\nexport async function getNewsletterSubscription(params) {\n    await this.__connection;\n    let isAdmin = await this.checkAdmin();\n    params = validator.Params(params, {\n        user_id: v => {\n            if (v !== this.__user.user_id && !isAdmin) {\n                throw new SkapiError(`No access.`, { code: 'INVALID_REQUEST' });\n            }\n            return v;\n        },\n        group: v => {\n            if (v === 'public') {\n                v = 0;\n            }\n            if (v === 'authorized') {\n                v = 1;\n            }\n            if (typeof v !== 'number') {\n                throw new SkapiError('\"group\" should be type number | \"public\" | \"authorized\".', { code: 'INVALID_PARAMETER' });\n            }\n            return v;\n        }\n    });\n    let list = await request.bind(this)('get-newsletter-subscription', params, { auth: true });\n    let result = [];\n    for (let sub of list) {\n        let subt = sub['subt'].split('#');\n        let active = true;\n        if (subt[0].charAt(0) === '@') {\n            active = false;\n            subt[0] = subt[0].substring(1);\n        }\n        let group = parseInt(subt[0]);\n        result.push({\n            timestamp: sub['stmp'],\n            group,\n            subscribed_email: subt[1],\n            active\n        });\n    }\n    return result;\n}\nexport async function subscribeNewsletter(form) {\n    await this.__connection;\n    let params = validator.Params(form || {}, {\n        email: (v) => validator.Email(v),\n        group: ['number', 'public', 'authorized'],\n        redirect: (v) => validator.Url(v)\n    }, this.__user ? ['group'] : ['email', 'group']);\n    return request.bind(this)(`subscribe-${this.__user ? '' : 'public-'}newsletter`, params, { auth: !!this.__user });\n}\nexport async function unsubscribeNewsletter(params) {\n    await this.__connection;\n    params = validator.Params(params, {\n        group: ['number', 'public', 'authorized']\n    }, ['group']);\n    let param_send = Object.assign({\n        action: 'unsubscribe'\n    }, params);\n    return request.bind(this)('subscribe-newsletter', param_send, { auth: true });\n}\nexport async function getNewsletters(params, fetchOptions) {\n    let isAdmin = await this.checkAdmin();\n    let searchType = {\n        'message_id': 'string',\n        'timestamp': 'number',\n        'read': 'number',\n        'complaint': 'number',\n        'subject': 'string'\n    };\n    if (!params) {\n        if (!fetchOptions) {\n            fetchOptions = {};\n        }\n        fetchOptions.ascending = false;\n    }\n    let _params = params || {\n        searchFor: 'timestamp',\n        value: 0,\n        condition: '>'\n    };\n    params = validator.Params(_params, {\n        searchFor: ['message_id', 'timestamp', 'read', 'complaint', 'group', 'subject'],\n        value: (v) => {\n            if (typeof v !== searchType[_params.searchFor]) {\n                throw new SkapiError(`\"value\" type does not match the type of \"${_params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n            }\n            else if (typeof v === 'string' && !v) {\n                throw new SkapiError('\"value\" should not be empty string.', { code: 'INVALID_PARAMETER' });\n            }\n            return v;\n        },\n        range: (v) => {\n            if (!_params.hasOwnProperty('value') || typeof v !== typeof _params.value) {\n                throw new SkapiError('\"range\" should match type of \"value\".', { code: 'INVALID_PARAMETER' });\n            }\n            return v;\n        },\n        condition: ['>', '>=', '=', '<', '<=', 'gt', 'gte', 'eq', 'lt', 'lte', () => '='],\n        group: (x) => {\n            if (!this.session) {\n                throw new SkapiError('User should be logged in.', { code: 'INVALID_REQUEST' });\n            }\n            if (x === 'public') {\n                return 0;\n            }\n            else if (x === 'authorized') {\n                return 1;\n            }\n            else if (typeof x === 'number') {\n                if (!isAdmin && x > parseInt(this.session.idToken.payload.access_group)) {\n                    throw new SkapiError('User has no access.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            return x;\n        }\n    }, ['searchFor', 'value', 'group']);\n    let mails = await request.bind(this)(params.group === 0 ? 'get-public-newsletters' : 'get-newsletters', params, Object.assign({ method: 'get', auth: params.group !== 0 }, { fetchOptions }));\n    let remap = {\n        'message_id': 'mid',\n        'timestamp': 'stmp',\n        'complaint': 'cmpl',\n        'read': 'read',\n        'subject': 'subj',\n        'bounced': 'bnce',\n        'url': 'url'\n    };\n    let defaults = {\n        'message_id': '',\n        'timestamp': 0,\n        'complaint': 0,\n        'read': 0,\n        'subject': '',\n        'bounced': 0,\n        'url': ''\n    };\n    mails.list = mails.list.map(m => {\n        let remapped = {};\n        for (let k in remap) {\n            remapped[k] = m[remap[k]] || defaults[remap[k]];\n        }\n        return remapped;\n    });\n    return mails;\n}\n","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar AuthenticationDetails = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationDetails object\n   * @param {object=} data Creation options.\n   * @param {string} data.Username User being authenticated.\n   * @param {string} data.Password Plain-text password to authenticate with.\n   * @param {(AttributeArg[])?} data.ValidationData Application extra metadata.\n   * @param {(AttributeArg[])?} data.AuthParamaters Authentication paramaters for custom auth.\n   */\n  function AuthenticationDetails(data) {\n    var _ref = data || {},\n      ValidationData = _ref.ValidationData,\n      Username = _ref.Username,\n      Password = _ref.Password,\n      AuthParameters = _ref.AuthParameters,\n      ClientMetadata = _ref.ClientMetadata;\n    this.validationData = ValidationData || {};\n    this.authParameters = AuthParameters || {};\n    this.clientMetadata = ClientMetadata || {};\n    this.username = Username;\n    this.password = Password;\n  }\n\n  /**\n   * @returns {string} the record's username\n   */\n  var _proto = AuthenticationDetails.prototype;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {string} the record's password\n   */;\n  _proto.getPassword = function getPassword() {\n    return this.password;\n  }\n\n  /**\n   * @returns {Array} the record's validationData\n   */;\n  _proto.getValidationData = function getValidationData() {\n    return this.validationData;\n  }\n\n  /**\n   * @returns {Array} the record's authParameters\n   */;\n  _proto.getAuthParameters = function getAuthParameters() {\n    return this.authParameters;\n  }\n\n  /**\n   * @returns {ClientMetadata} the clientMetadata for a Lambda trigger\n   */;\n  _proto.getClientMetadata = function getClientMetadata() {\n    return this.clientMetadata;\n  };\n  return AuthenticationDetails;\n}();\nexport { AuthenticationDetails as default };","var crypto;\n\n// Native crypto from window (Browser)\nif (typeof window !== 'undefined' && window.crypto) {\n  crypto = window.crypto;\n}\n\n// Native (experimental IE 11) crypto from window (Browser)\nif (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n  crypto = window.msCrypto;\n}\n\n// Native crypto from global (NodeJS)\nif (!crypto && typeof global !== 'undefined' && global.crypto) {\n  crypto = global.crypto;\n}\n\n// Native crypto import via require (NodeJS)\nif (!crypto && typeof require === 'function') {\n  try {\n    crypto = require('crypto');\n  } catch (err) {}\n}\n\n/*\n * Cryptographically secure pseudorandom number generator\n * As Math.random() is cryptographically not safe to use\n */\nexport default function cryptoSecureRandomInt() {\n  if (crypto) {\n    // Use getRandomValues method (Browser)\n    if (typeof crypto.getRandomValues === 'function') {\n      try {\n        return crypto.getRandomValues(new Uint32Array(1))[0];\n      } catch (err) {}\n    }\n\n    // Use randomBytes method (NodeJS)\n    if (typeof crypto.randomBytes === 'function') {\n      try {\n        return crypto.randomBytes(4).readInt32LE();\n      } catch (err) {}\n    }\n  }\n  throw new Error('Native crypto module could not be used to get secure random number.');\n}","import cryptoSecureRandomInt from './cryptoSecureRandomInt';\n\n/**\n * Hex encoding strategy.\n * Converts a word array to a hex string.\n * @param {WordArray} wordArray The word array.\n * @return {string} The hex string.\n * @static\n */\nfunction hexStringify(wordArray) {\n  // Shortcuts\n  var words = wordArray.words;\n  var sigBytes = wordArray.sigBytes;\n\n  // Convert\n  var hexChars = [];\n  for (var i = 0; i < sigBytes; i++) {\n    var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 0xff;\n    hexChars.push((bite >>> 4).toString(16));\n    hexChars.push((bite & 0x0f).toString(16));\n  }\n  return hexChars.join('');\n}\nvar WordArray = /*#__PURE__*/function () {\n  function WordArray(words, sigBytes) {\n    words = this.words = words || [];\n    if (sigBytes != undefined) {\n      this.sigBytes = sigBytes;\n    } else {\n      this.sigBytes = words.length * 4;\n    }\n  }\n  var _proto = WordArray.prototype;\n  _proto.random = function random(nBytes) {\n    var words = [];\n    for (var i = 0; i < nBytes; i += 4) {\n      words.push(cryptoSecureRandomInt());\n    }\n    return new WordArray(words, nBytes);\n  };\n  _proto.toString = function toString() {\n    return hexStringify(this);\n  };\n  return WordArray;\n}();\nexport { WordArray as default };","// A small implementation of BigInteger based on http://www-cs-students.stanford.edu/~tjw/jsbn/\n//\n// All public methods have been removed except the following:\n//   new BigInteger(a, b) (only radix 2, 4, 8, 16 and 32 supported)\n//   toString (only radix 2, 4, 8, 16 and 32 supported)\n//   negate\n//   abs\n//   compareTo\n//   bitLength\n//   mod\n//   equals\n//   add\n//   subtract\n//   multiply\n//   divide\n//   modPow\n\nexport default BigInteger;\n\n/*\n * Copyright (c) 2003-2005  Tom Wu\n * All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS-IS\" AND WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY\n * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n *\n * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,\n * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER\n * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF\n * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT\n * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * In addition, the following condition applies:\n *\n * All redistributions must retain an intact copy of this copyright notice\n * and disclaimer.\n */\n\n// (public) Constructor\nfunction BigInteger(a, b) {\n  if (a != null) this.fromString(a, b);\n}\n\n// return new, unset BigInteger\nfunction nbi() {\n  return new BigInteger(null);\n}\n\n// Bits per digit\nvar dbits;\n\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = (canary & 0xffffff) == 0xefcafe;\n\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n) {\n  while (--n >= 0) {\n    var v = x * this[i++] + w[j] + c;\n    c = Math.floor(v / 0x4000000);\n    w[j++] = v & 0x3ffffff;\n  }\n  return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n) {\n  var xl = x & 0x7fff,\n    xh = x >> 15;\n  while (--n >= 0) {\n    var l = this[i] & 0x7fff;\n    var h = this[i++] >> 15;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n    c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n    w[j++] = l & 0x3fffffff;\n  }\n  return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n) {\n  var xl = x & 0x3fff,\n    xh = x >> 14;\n  while (--n >= 0) {\n    var l = this[i] & 0x3fff;\n    var h = this[i++] >> 14;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n    c = (l >> 28) + (m >> 14) + xh * h;\n    w[j++] = l & 0xfffffff;\n  }\n  return c;\n}\nvar inBrowser = typeof navigator !== 'undefined';\nif (inBrowser && j_lm && navigator.appName == 'Microsoft Internet Explorer') {\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n} else if (inBrowser && j_lm && navigator.appName != 'Netscape') {\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n} else {\n  // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = (1 << dbits) - 1;\nBigInteger.prototype.DV = 1 << dbits;\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n\n// Digit conversions\nvar BI_RM = '0123456789abcdefghijklmnopqrstuvwxyz';\nvar BI_RC = new Array();\nvar rr, vv;\nrr = '0'.charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\nrr = 'a'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nrr = 'A'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nfunction int2char(n) {\n  return BI_RM.charAt(n);\n}\nfunction intAt(s, i) {\n  var c = BI_RC[s.charCodeAt(i)];\n  return c == null ? -1 : c;\n}\n\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n  for (var i = this.t - 1; i >= 0; --i) r[i] = this[i];\n  r.t = this.t;\n  r.s = this.s;\n}\n\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n  this.t = 1;\n  this.s = x < 0 ? -1 : 0;\n  if (x > 0) this[0] = x;else if (x < -1) this[0] = x + this.DV;else this.t = 0;\n}\n\n// return bigint initialized to value\nfunction nbv(i) {\n  var r = nbi();\n  r.fromInt(i);\n  return r;\n}\n\n// (protected) set from string and radix\nfunction bnpFromString(s, b) {\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  this.t = 0;\n  this.s = 0;\n  var i = s.length,\n    mi = false,\n    sh = 0;\n  while (--i >= 0) {\n    var x = intAt(s, i);\n    if (x < 0) {\n      if (s.charAt(i) == '-') mi = true;\n      continue;\n    }\n    mi = false;\n    if (sh == 0) this[this.t++] = x;else if (sh + k > this.DB) {\n      this[this.t - 1] |= (x & (1 << this.DB - sh) - 1) << sh;\n      this[this.t++] = x >> this.DB - sh;\n    } else this[this.t - 1] |= x << sh;\n    sh += k;\n    if (sh >= this.DB) sh -= this.DB;\n  }\n  this.clamp();\n  if (mi) BigInteger.ZERO.subTo(this, this);\n}\n\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n  var c = this.s & this.DM;\n  while (this.t > 0 && this[this.t - 1] == c) --this.t;\n}\n\n// (public) return string representation in given radix\nfunction bnToString(b) {\n  if (this.s < 0) return '-' + this.negate().toString(b);\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  var km = (1 << k) - 1,\n    d,\n    m = false,\n    r = '',\n    i = this.t;\n  var p = this.DB - i * this.DB % k;\n  if (i-- > 0) {\n    if (p < this.DB && (d = this[i] >> p) > 0) {\n      m = true;\n      r = int2char(d);\n    }\n    while (i >= 0) {\n      if (p < k) {\n        d = (this[i] & (1 << p) - 1) << k - p;\n        d |= this[--i] >> (p += this.DB - k);\n      } else {\n        d = this[i] >> (p -= k) & km;\n        if (p <= 0) {\n          p += this.DB;\n          --i;\n        }\n      }\n      if (d > 0) m = true;\n      if (m) r += int2char(d);\n    }\n  }\n  return m ? r : '0';\n}\n\n// (public) -this\nfunction bnNegate() {\n  var r = nbi();\n  BigInteger.ZERO.subTo(this, r);\n  return r;\n}\n\n// (public) |this|\nfunction bnAbs() {\n  return this.s < 0 ? this.negate() : this;\n}\n\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n  var r = this.s - a.s;\n  if (r != 0) return r;\n  var i = this.t;\n  r = i - a.t;\n  if (r != 0) return this.s < 0 ? -r : r;\n  while (--i >= 0) if ((r = this[i] - a[i]) != 0) return r;\n  return 0;\n}\n\n// returns bit length of the integer x\nfunction nbits(x) {\n  var r = 1,\n    t;\n  if ((t = x >>> 16) != 0) {\n    x = t;\n    r += 16;\n  }\n  if ((t = x >> 8) != 0) {\n    x = t;\n    r += 8;\n  }\n  if ((t = x >> 4) != 0) {\n    x = t;\n    r += 4;\n  }\n  if ((t = x >> 2) != 0) {\n    x = t;\n    r += 2;\n  }\n  if ((t = x >> 1) != 0) {\n    x = t;\n    r += 1;\n  }\n  return r;\n}\n\n// (public) return the number of bits in \"this\"\nfunction bnBitLength() {\n  if (this.t <= 0) return 0;\n  return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s & this.DM);\n}\n\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n, r) {\n  var i;\n  for (i = this.t - 1; i >= 0; --i) r[i + n] = this[i];\n  for (i = n - 1; i >= 0; --i) r[i] = 0;\n  r.t = this.t + n;\n  r.s = this.s;\n}\n\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n, r) {\n  for (var i = n; i < this.t; ++i) r[i - n] = this[i];\n  r.t = Math.max(this.t - n, 0);\n  r.s = this.s;\n}\n\n// (protected) r = this << n\nfunction bnpLShiftTo(n, r) {\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << cbs) - 1;\n  var ds = Math.floor(n / this.DB),\n    c = this.s << bs & this.DM,\n    i;\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + ds + 1] = this[i] >> cbs | c;\n    c = (this[i] & bm) << bs;\n  }\n  for (i = ds - 1; i >= 0; --i) r[i] = 0;\n  r[ds] = c;\n  r.t = this.t + ds + 1;\n  r.s = this.s;\n  r.clamp();\n}\n\n// (protected) r = this >> n\nfunction bnpRShiftTo(n, r) {\n  r.s = this.s;\n  var ds = Math.floor(n / this.DB);\n  if (ds >= this.t) {\n    r.t = 0;\n    return;\n  }\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << bs) - 1;\n  r[0] = this[ds] >> bs;\n  for (var i = ds + 1; i < this.t; ++i) {\n    r[i - ds - 1] |= (this[i] & bm) << cbs;\n    r[i - ds] = this[i] >> bs;\n  }\n  if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\n  r.t = this.t - ds;\n  r.clamp();\n}\n\n// (protected) r = this - a\nfunction bnpSubTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] - a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c -= a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c -= a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c -= a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c < -1) r[i++] = this.DV + c;else if (c > 0) r[i++] = c;\n  r.t = i;\n  r.clamp();\n}\n\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a, r) {\n  var x = this.abs(),\n    y = a.abs();\n  var i = x.t;\n  r.t = i + y.t;\n  while (--i >= 0) r[i] = 0;\n  for (i = 0; i < y.t; ++i) r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n  r.s = 0;\n  r.clamp();\n  if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\n}\n\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n  var x = this.abs();\n  var i = r.t = 2 * x.t;\n  while (--i >= 0) r[i] = 0;\n  for (i = 0; i < x.t - 1; ++i) {\n    var c = x.am(i, x[i], r, 2 * i, 0, 1);\n    if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n      r[i + x.t] -= x.DV;\n      r[i + x.t + 1] = 1;\n    }\n  }\n  if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n  r.s = 0;\n  r.clamp();\n}\n\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m, q, r) {\n  var pm = m.abs();\n  if (pm.t <= 0) return;\n  var pt = this.abs();\n  if (pt.t < pm.t) {\n    if (q != null) q.fromInt(0);\n    if (r != null) this.copyTo(r);\n    return;\n  }\n  if (r == null) r = nbi();\n  var y = nbi(),\n    ts = this.s,\n    ms = m.s;\n  var nsh = this.DB - nbits(pm[pm.t - 1]);\n  // normalize modulus\n  if (nsh > 0) {\n    pm.lShiftTo(nsh, y);\n    pt.lShiftTo(nsh, r);\n  } else {\n    pm.copyTo(y);\n    pt.copyTo(r);\n  }\n  var ys = y.t;\n  var y0 = y[ys - 1];\n  if (y0 == 0) return;\n  var yt = y0 * (1 << this.F1) + (ys > 1 ? y[ys - 2] >> this.F2 : 0);\n  var d1 = this.FV / yt,\n    d2 = (1 << this.F1) / yt,\n    e = 1 << this.F2;\n  var i = r.t,\n    j = i - ys,\n    t = q == null ? nbi() : q;\n  y.dlShiftTo(j, t);\n  if (r.compareTo(t) >= 0) {\n    r[r.t++] = 1;\n    r.subTo(t, r);\n  }\n  BigInteger.ONE.dlShiftTo(ys, t);\n  t.subTo(y, y);\n  // \"negative\" y so we can replace sub with am later\n  while (y.t < ys) y[y.t++] = 0;\n  while (--j >= 0) {\n    // Estimate quotient digit\n    var qd = r[--i] == y0 ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n    if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {\n      // Try it out\n      y.dlShiftTo(j, t);\n      r.subTo(t, r);\n      while (r[i] < --qd) r.subTo(t, r);\n    }\n  }\n  if (q != null) {\n    r.drShiftTo(ys, q);\n    if (ts != ms) BigInteger.ZERO.subTo(q, q);\n  }\n  r.t = ys;\n  r.clamp();\n  if (nsh > 0) r.rShiftTo(nsh, r);\n  // Denormalize remainder\n  if (ts < 0) BigInteger.ZERO.subTo(r, r);\n}\n\n// (public) this mod a\nfunction bnMod(a) {\n  var r = nbi();\n  this.abs().divRemTo(a, null, r);\n  if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\n  return r;\n}\n\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n  if (this.t < 1) return 0;\n  var x = this[0];\n  if ((x & 1) == 0) return 0;\n  var y = x & 3;\n  // y == 1/x mod 2^2\n  y = y * (2 - (x & 0xf) * y) & 0xf;\n  // y == 1/x mod 2^4\n  y = y * (2 - (x & 0xff) * y) & 0xff;\n  // y == 1/x mod 2^8\n  y = y * (2 - ((x & 0xffff) * y & 0xffff)) & 0xffff;\n  // y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n  y = y * (2 - x * y % this.DV) % this.DV;\n  // y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n  return y > 0 ? this.DV - y : -y;\n}\nfunction bnEquals(a) {\n  return this.compareTo(a) == 0;\n}\n\n// (protected) r = this + a\nfunction bnpAddTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] + a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c += a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c += a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c > 0) r[i++] = c;else if (c < -1) r[i++] = this.DV + c;\n  r.t = i;\n  r.clamp();\n}\n\n// (public) this + a\nfunction bnAdd(a) {\n  var r = nbi();\n  this.addTo(a, r);\n  return r;\n}\n\n// (public) this - a\nfunction bnSubtract(a) {\n  var r = nbi();\n  this.subTo(a, r);\n  return r;\n}\n\n// (public) this * a\nfunction bnMultiply(a) {\n  var r = nbi();\n  this.multiplyTo(a, r);\n  return r;\n}\n\n// (public) this / a\nfunction bnDivide(a) {\n  var r = nbi();\n  this.divRemTo(a, r, null);\n  return r;\n}\n\n// Montgomery reduction\nfunction Montgomery(m) {\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp & 0x7fff;\n  this.mph = this.mp >> 15;\n  this.um = (1 << m.DB - 15) - 1;\n  this.mt2 = 2 * m.t;\n}\n\n// xR mod m\nfunction montConvert(x) {\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t, r);\n  r.divRemTo(this.m, null, r);\n  if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\n  return r;\n}\n\n// x/R mod m\nfunction montRevert(x) {\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n}\n\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n  while (x.t <= this.mt2)\n  // pad x so am has enough room later\n  x[x.t++] = 0;\n  for (var i = 0; i < this.m.t; ++i) {\n    // faster way of calculating u0 = x[i]*mp mod DV\n    var j = x[i] & 0x7fff;\n    var u0 = j * this.mpl + ((j * this.mph + (x[i] >> 15) * this.mpl & this.um) << 15) & x.DM;\n    // use am to combine the multiply-shift-add into one call\n    j = i + this.m.t;\n    x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n    // propagate carry\n    while (x[j] >= x.DV) {\n      x[j] -= x.DV;\n      x[++j]++;\n    }\n  }\n  x.clamp();\n  x.drShiftTo(this.m.t, x);\n  if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x, r) {\n  x.squareTo(r);\n  this.reduce(r);\n}\n\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n\n// (public) this^e % m (HAC 14.85)\nfunction bnModPow(e, m, callback) {\n  var i = e.bitLength(),\n    k,\n    r = nbv(1),\n    z = new Montgomery(m);\n  if (i <= 0) return r;else if (i < 18) k = 1;else if (i < 48) k = 3;else if (i < 144) k = 4;else if (i < 768) k = 5;else k = 6;\n\n  // precomputation\n  var g = new Array(),\n    n = 3,\n    k1 = k - 1,\n    km = (1 << k) - 1;\n  g[1] = z.convert(this);\n  if (k > 1) {\n    var g2 = nbi();\n    z.sqrTo(g[1], g2);\n    while (n <= km) {\n      g[n] = nbi();\n      z.mulTo(g2, g[n - 2], g[n]);\n      n += 2;\n    }\n  }\n  var j = e.t - 1,\n    w,\n    is1 = true,\n    r2 = nbi(),\n    t;\n  i = nbits(e[j]) - 1;\n  while (j >= 0) {\n    if (i >= k1) w = e[j] >> i - k1 & km;else {\n      w = (e[j] & (1 << i + 1) - 1) << k1 - i;\n      if (j > 0) w |= e[j - 1] >> this.DB + i - k1;\n    }\n    n = k;\n    while ((w & 1) == 0) {\n      w >>= 1;\n      --n;\n    }\n    if ((i -= n) < 0) {\n      i += this.DB;\n      --j;\n    }\n    if (is1) {\n      // ret == 1, don't bother squaring or multiplying it\n      g[w].copyTo(r);\n      is1 = false;\n    } else {\n      while (n > 1) {\n        z.sqrTo(r, r2);\n        z.sqrTo(r2, r);\n        n -= 2;\n      }\n      if (n > 0) z.sqrTo(r, r2);else {\n        t = r;\n        r = r2;\n        r2 = t;\n      }\n      z.mulTo(r2, g[w], r);\n    }\n    while (j >= 0 && (e[j] & 1 << i) == 0) {\n      z.sqrTo(r, r2);\n      t = r;\n      r = r2;\n      r2 = t;\n      if (--i < 0) {\n        i = this.DB - 1;\n        --j;\n      }\n    }\n  }\n  var result = z.revert(r);\n  callback(null, result);\n  return result;\n}\n\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.addTo = bnpAddTo;\n\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.modPow = bnModPow;\n\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\nimport CryptoJS from 'crypto-js/core';\nimport 'crypto-js/lib-typedarrays'; // necessary for crypto js\nimport SHA256 from 'crypto-js/sha256';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport WordArray from './utils/WordArray';\n\n/**\n * Returns a Buffer with a sequence of random nBytes\n *\n * @param {number} nBytes\n * @returns {Buffer} fixed-length sequence of random bytes\n */\n\nfunction randomBytes(nBytes) {\n  return Buffer.from(new WordArray().random(nBytes).toString(), 'hex');\n}\nimport BigInteger from './BigInteger';\n\n/**\n * Tests if a hex string has it most significant bit set (case-insensitive regex)\n */\nvar HEX_MSB_REGEX = /^[89a-f]/i;\nvar initN = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1' + '29024E088A67CC74020BBEA63B139B22514A08798E3404DD' + 'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245' + 'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED' + 'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D' + 'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F' + '83655D23DCA3AD961C62F356208552BB9ED529077096966D' + '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B' + 'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9' + 'DE2BCBF6955817183995497CEA956AE515D2261898FA0510' + '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64' + 'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7' + 'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B' + 'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C' + 'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31' + '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';\nvar newPasswordRequiredChallengeUserAttributePrefix = 'userAttributes.';\n\n/** @class */\nvar AuthenticationHelper = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationHelper object\n   * @param {string} PoolName Cognito user pool name.\n   */\n  function AuthenticationHelper(PoolName) {\n    this.N = new BigInteger(initN, 16);\n    this.g = new BigInteger('2', 16);\n    this.k = new BigInteger(this.hexHash(\"\" + this.padHex(this.N) + this.padHex(this.g)), 16);\n    this.smallAValue = this.generateRandomSmallA();\n    this.getLargeAValue(function () {});\n    this.infoBits = Buffer.from('Caldera Derived Key', 'utf8');\n    this.poolName = PoolName;\n  }\n\n  /**\n   * @returns {BigInteger} small A, a random number\n   */\n  var _proto = AuthenticationHelper.prototype;\n  _proto.getSmallAValue = function getSmallAValue() {\n    return this.smallAValue;\n  }\n\n  /**\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   */;\n  _proto.getLargeAValue = function getLargeAValue(callback) {\n    var _this = this;\n    if (this.largeAValue) {\n      callback(null, this.largeAValue);\n    } else {\n      this.calculateA(this.smallAValue, function (err, largeAValue) {\n        if (err) {\n          callback(err, null);\n        }\n        _this.largeAValue = largeAValue;\n        callback(null, _this.largeAValue);\n      });\n    }\n  }\n\n  /**\n   * helper function to generate a random big integer\n   * @returns {BigInteger} a random value.\n   * @private\n   */;\n  _proto.generateRandomSmallA = function generateRandomSmallA() {\n    // This will be interpreted as a postive 128-bit integer\n    var hexRandom = randomBytes(128).toString('hex');\n    var randomBigInt = new BigInteger(hexRandom, 16);\n\n    // There is no need to do randomBigInt.mod(this.N - 1) as N (3072-bit) is > 128 bytes (1024-bit)\n\n    return randomBigInt;\n  }\n\n  /**\n   * helper function to generate a random string\n   * @returns {string} a random value.\n   * @private\n   */;\n  _proto.generateRandomString = function generateRandomString() {\n    return randomBytes(40).toString('base64');\n  }\n\n  /**\n   * @returns {string} Generated random value included in password hash.\n   */;\n  _proto.getRandomPassword = function getRandomPassword() {\n    return this.randomPassword;\n  }\n\n  /**\n   * @returns {string} Generated random value included in devices hash.\n   */;\n  _proto.getSaltDevices = function getSaltDevices() {\n    return this.SaltToHashDevices;\n  }\n\n  /**\n   * @returns {string} Value used to verify devices.\n   */;\n  _proto.getVerifierDevices = function getVerifierDevices() {\n    return this.verifierDevices;\n  }\n\n  /**\n   * Generate salts and compute verifier.\n   * @param {string} deviceGroupKey Devices to generate verifier for.\n   * @param {string} username User to generate verifier for.\n   * @param {nodeCallback<null>} callback Called with (err, null)\n   * @returns {void}\n   */;\n  _proto.generateHashDevice = function generateHashDevice(deviceGroupKey, username, callback) {\n    var _this2 = this;\n    this.randomPassword = this.generateRandomString();\n    var combinedString = \"\" + deviceGroupKey + username + \":\" + this.randomPassword;\n    var hashedString = this.hash(combinedString);\n    var hexRandom = randomBytes(16).toString('hex');\n\n    // The random hex will be unambiguously represented as a postive integer\n    this.SaltToHashDevices = this.padHex(new BigInteger(hexRandom, 16));\n    this.g.modPow(new BigInteger(this.hexHash(this.SaltToHashDevices + hashedString), 16), this.N, function (err, verifierDevicesNotPadded) {\n      if (err) {\n        callback(err, null);\n      }\n      _this2.verifierDevices = _this2.padHex(verifierDevicesNotPadded);\n      callback(null, null);\n    });\n  }\n\n  /**\n   * Calculate the client's public value A = g^a%N\n   * with the generated random number a\n   * @param {BigInteger} a Randomly generated small A.\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   * @private\n   */;\n  _proto.calculateA = function calculateA(a, callback) {\n    var _this3 = this;\n    this.g.modPow(a, this.N, function (err, A) {\n      if (err) {\n        callback(err, null);\n      }\n      if (A.mod(_this3.N).equals(BigInteger.ZERO)) {\n        callback(new Error('Illegal paramater. A mod N cannot be 0.'), null);\n      }\n      callback(null, A);\n    });\n  }\n\n  /**\n   * Calculate the client's value U which is the hash of A and B\n   * @param {BigInteger} A Large A value.\n   * @param {BigInteger} B Server B value.\n   * @returns {BigInteger} Computed U value.\n   * @private\n   */;\n  _proto.calculateU = function calculateU(A, B) {\n    this.UHexHash = this.hexHash(this.padHex(A) + this.padHex(B));\n    var finalU = new BigInteger(this.UHexHash, 16);\n    return finalU;\n  }\n\n  /**\n   * Calculate a hash from a bitArray\n   * @param {Buffer} buf Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hash = function hash(buf) {\n    var str = buf instanceof Buffer ? CryptoJS.lib.WordArray.create(buf) : buf;\n    var hashHex = SHA256(str).toString();\n    return new Array(64 - hashHex.length).join('0') + hashHex;\n  }\n\n  /**\n   * Calculate a hash from a hex string\n   * @param {String} hexStr Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hexHash = function hexHash(hexStr) {\n    return this.hash(Buffer.from(hexStr, 'hex'));\n  }\n\n  /**\n   * Standard hkdf algorithm\n   * @param {Buffer} ikm Input key material.\n   * @param {Buffer} salt Salt value.\n   * @returns {Buffer} Strong key material.\n   * @private\n   */;\n  _proto.computehkdf = function computehkdf(ikm, salt) {\n    var infoBitsWordArray = CryptoJS.lib.WordArray.create(Buffer.concat([this.infoBits, Buffer.from(String.fromCharCode(1), 'utf8')]));\n    var ikmWordArray = ikm instanceof Buffer ? CryptoJS.lib.WordArray.create(ikm) : ikm;\n    var saltWordArray = salt instanceof Buffer ? CryptoJS.lib.WordArray.create(salt) : salt;\n    var prk = HmacSHA256(ikmWordArray, saltWordArray);\n    var hmac = HmacSHA256(infoBitsWordArray, prk);\n    return Buffer.from(hmac.toString(), 'hex').slice(0, 16);\n  }\n\n  /**\n   * Calculates the final hkdf based on computed S value, and computed U value and the key\n   * @param {String} username Username.\n   * @param {String} password Password.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {BigInteger} salt Generated salt.\n   * @param {nodeCallback<Buffer>} callback Called with (err, hkdfValue)\n   * @returns {void}\n   */;\n  _proto.getPasswordAuthenticationKey = function getPasswordAuthenticationKey(username, password, serverBValue, salt, callback) {\n    var _this4 = this;\n    if (serverBValue.mod(this.N).equals(BigInteger.ZERO)) {\n      throw new Error('B cannot be zero.');\n    }\n    this.UValue = this.calculateU(this.largeAValue, serverBValue);\n    if (this.UValue.equals(BigInteger.ZERO)) {\n      throw new Error('U cannot be zero.');\n    }\n    var usernamePassword = \"\" + this.poolName + username + \":\" + password;\n    var usernamePasswordHash = this.hash(usernamePassword);\n    var xValue = new BigInteger(this.hexHash(this.padHex(salt) + usernamePasswordHash), 16);\n    this.calculateS(xValue, serverBValue, function (err, sValue) {\n      if (err) {\n        callback(err, null);\n      }\n      var hkdf = _this4.computehkdf(Buffer.from(_this4.padHex(sValue), 'hex'), Buffer.from(_this4.padHex(_this4.UValue), 'hex'));\n      callback(null, hkdf);\n    });\n  }\n\n  /**\n   * Calculates the S value used in getPasswordAuthenticationKey\n   * @param {BigInteger} xValue Salted password hash value.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.calculateS = function calculateS(xValue, serverBValue, callback) {\n    var _this5 = this;\n    this.g.modPow(xValue, this.N, function (err, gModPowXN) {\n      if (err) {\n        callback(err, null);\n      }\n      var intValue2 = serverBValue.subtract(_this5.k.multiply(gModPowXN));\n      intValue2.modPow(_this5.smallAValue.add(_this5.UValue.multiply(xValue)), _this5.N, function (err2, result) {\n        if (err2) {\n          callback(err2, null);\n        }\n        callback(null, result.mod(_this5.N));\n      });\n    });\n  }\n\n  /**\n   * Return constant newPasswordRequiredChallengeUserAttributePrefix\n   * @return {newPasswordRequiredChallengeUserAttributePrefix} constant prefix value\n   */;\n  _proto.getNewPasswordRequiredChallengeUserAttributePrefix = function getNewPasswordRequiredChallengeUserAttributePrefix() {\n    return newPasswordRequiredChallengeUserAttributePrefix;\n  }\n\n  /**\n   * Returns an unambiguous, even-length hex string of the two's complement encoding of an integer.\n   *\n   * It is compatible with the hex encoding of Java's BigInteger's toByteArray(), wich returns a\n   * byte array containing the two's-complement representation of a BigInteger. The array contains\n   * the minimum number of bytes required to represent the BigInteger, including at least one sign bit.\n   *\n   * Examples showing how ambiguity is avoided by left padding with:\n   * \t\"00\" (for positive values where the most-significant-bit is set)\n   *  \"FF\" (for negative values where the most-significant-bit is set)\n   *\n   * padHex(bigInteger.fromInt(-236))  === \"FF14\"\n   * padHex(bigInteger.fromInt(20))    === \"14\"\n   *\n   * padHex(bigInteger.fromInt(-200))  === \"FF38\"\n   * padHex(bigInteger.fromInt(56))    === \"38\"\n   *\n   * padHex(bigInteger.fromInt(-20))   === \"EC\"\n   * padHex(bigInteger.fromInt(236))   === \"00EC\"\n   *\n   * padHex(bigInteger.fromInt(-56))   === \"C8\"\n   * padHex(bigInteger.fromInt(200))   === \"00C8\"\n   *\n   * @param {BigInteger} bigInt Number to encode.\n   * @returns {String} even-length hex string of the two's complement encoding.\n   */;\n  _proto.padHex = function padHex(bigInt) {\n    if (!(bigInt instanceof BigInteger)) {\n      throw new Error('Not a BigInteger');\n    }\n    var isNegative = bigInt.compareTo(BigInteger.ZERO) < 0;\n\n    /* Get a hex string for abs(bigInt) */\n    var hexStr = bigInt.abs().toString(16);\n\n    /* Pad hex to even length if needed */\n    hexStr = hexStr.length % 2 !== 0 ? \"0\" + hexStr : hexStr;\n\n    /* Prepend \"00\" if the most significant bit is set */\n    hexStr = HEX_MSB_REGEX.test(hexStr) ? \"00\" + hexStr : hexStr;\n    if (isNegative) {\n      /* Flip the bits of the representation */\n      var invertedNibbles = hexStr.split('').map(function (x) {\n        var invertedNibble = ~parseInt(x, 16) & 0xf;\n        return '0123456789ABCDEF'.charAt(invertedNibble);\n      }).join('');\n\n      /* After flipping the bits, add one to get the 2's complement representation */\n      var flippedBitsBI = new BigInteger(invertedNibbles, 16).add(BigInteger.ONE);\n      hexStr = flippedBitsBI.toString(16);\n\n      /*\n      For hex strings starting with 'FF8', 'FF' can be dropped, e.g. 0xFFFF80=0xFF80=0x80=-128\n      \t\tAny sequence of '1' bits on the left can always be substituted with a single '1' bit\n      without changing the represented value.\n      \t\tThis only happens in the case when the input is 80...00\n      */\n      if (hexStr.toUpperCase().startsWith('FF8')) {\n        hexStr = hexStr.substring(2);\n      }\n    }\n    return hexStr;\n  };\n  return AuthenticationHelper;\n}();\nexport { AuthenticationHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\n\n/** @class */\nvar CognitoJwtToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoJwtToken object\n   * @param {string=} token The JWT token.\n   */\n  function CognitoJwtToken(token) {\n    // Assign object\n    this.jwtToken = token || '';\n    this.payload = this.decodePayload();\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoJwtToken.prototype;\n  _proto.getJwtToken = function getJwtToken() {\n    return this.jwtToken;\n  }\n\n  /**\n   * @returns {int} the token's expiration (exp member).\n   */;\n  _proto.getExpiration = function getExpiration() {\n    return this.payload.exp;\n  }\n\n  /**\n   * @returns {int} the token's \"issued at\" (iat member).\n   */;\n  _proto.getIssuedAt = function getIssuedAt() {\n    return this.payload.iat;\n  }\n\n  /**\n   * @returns {object} the token's payload.\n   */;\n  _proto.decodePayload = function decodePayload() {\n    var payload = this.jwtToken.split('.')[1];\n    try {\n      return JSON.parse(Buffer.from(payload, 'base64').toString('utf8'));\n    } catch (err) {\n      return {};\n    }\n  };\n  return CognitoJwtToken;\n}();\nexport { CognitoJwtToken as default };","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CognitoJwtToken from './CognitoJwtToken';\n\n/** @class */\nvar CognitoAccessToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoAccessToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoAccessToken object\n   * @param {string=} AccessToken The JWT access token.\n   */\n  function CognitoAccessToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      AccessToken = _ref.AccessToken;\n    return _CognitoJwtToken.call(this, AccessToken || '') || this;\n  }\n  return CognitoAccessToken;\n}(CognitoJwtToken);\nexport { CognitoAccessToken as default };","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CognitoJwtToken from './CognitoJwtToken';\n\n/** @class */\nvar CognitoIdToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoIdToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoIdToken object\n   * @param {string=} IdToken The JWT Id token\n   */\n  function CognitoIdToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken;\n    return _CognitoJwtToken.call(this, IdToken || '') || this;\n  }\n  return CognitoIdToken;\n}(CognitoJwtToken);\nexport { CognitoIdToken as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoRefreshToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoRefreshToken object\n   * @param {string=} RefreshToken The JWT refresh token.\n   */\n  function CognitoRefreshToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      RefreshToken = _ref.RefreshToken;\n    // Assign object\n    this.token = RefreshToken || '';\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoRefreshToken.prototype;\n  _proto.getToken = function getToken() {\n    return this.token;\n  };\n  return CognitoRefreshToken;\n}();\nexport { CognitoRefreshToken as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserSession = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserSession object\n   * @param {CognitoIdToken} IdToken The session's Id token.\n   * @param {CognitoRefreshToken=} RefreshToken The session's refresh token.\n   * @param {CognitoAccessToken} AccessToken The session's access token.\n   * @param {int} ClockDrift The saved computer's clock drift or undefined to force calculation.\n   */\n  function CognitoUserSession(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken,\n      RefreshToken = _ref.RefreshToken,\n      AccessToken = _ref.AccessToken,\n      ClockDrift = _ref.ClockDrift;\n    if (AccessToken == null || IdToken == null) {\n      throw new Error('Id token and Access Token must be present.');\n    }\n    this.idToken = IdToken;\n    this.refreshToken = RefreshToken;\n    this.accessToken = AccessToken;\n    this.clockDrift = ClockDrift === undefined ? this.calculateClockDrift() : ClockDrift;\n  }\n\n  /**\n   * @returns {CognitoIdToken} the session's Id token\n   */\n  var _proto = CognitoUserSession.prototype;\n  _proto.getIdToken = function getIdToken() {\n    return this.idToken;\n  }\n\n  /**\n   * @returns {CognitoRefreshToken} the session's refresh token\n   */;\n  _proto.getRefreshToken = function getRefreshToken() {\n    return this.refreshToken;\n  }\n\n  /**\n   * @returns {CognitoAccessToken} the session's access token\n   */;\n  _proto.getAccessToken = function getAccessToken() {\n    return this.accessToken;\n  }\n\n  /**\n   * @returns {int} the session's clock drift\n   */;\n  _proto.getClockDrift = function getClockDrift() {\n    return this.clockDrift;\n  }\n\n  /**\n   * @returns {int} the computer's clock drift\n   */;\n  _proto.calculateClockDrift = function calculateClockDrift() {\n    var now = Math.floor(new Date() / 1000);\n    var iat = Math.min(this.accessToken.getIssuedAt(), this.idToken.getIssuedAt());\n    return now - iat;\n  }\n\n  /**\n   * Checks to see if the session is still valid based on session expiry information found\n   * in tokens and the current time (adjusted with clock drift)\n   * @returns {boolean} if the session is still valid\n   */;\n  _proto.isValid = function isValid() {\n    var now = Math.floor(new Date() / 1000);\n    var adjusted = now - this.clockDrift;\n    return adjusted < this.accessToken.getExpiration() && adjusted < this.idToken.getExpiration();\n  };\n  return CognitoUserSession;\n}();\nexport { CognitoUserSession as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nvar weekNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n/** @class */\nvar DateHelper = /*#__PURE__*/function () {\n  function DateHelper() {}\n  var _proto = DateHelper.prototype;\n  /**\n   * @returns {string} The current time in \"ddd MMM D HH:mm:ss UTC YYYY\" format.\n   */\n  _proto.getNowString = function getNowString() {\n    var now = new Date();\n    var weekDay = weekNames[now.getUTCDay()];\n    var month = monthNames[now.getUTCMonth()];\n    var day = now.getUTCDate();\n    var hours = now.getUTCHours();\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n    var minutes = now.getUTCMinutes();\n    if (minutes < 10) {\n      minutes = \"0\" + minutes;\n    }\n    var seconds = now.getUTCSeconds();\n    if (seconds < 10) {\n      seconds = \"0\" + seconds;\n    }\n    var year = now.getUTCFullYear();\n\n    // ddd MMM D HH:mm:ss UTC YYYY\n    var dateNow = weekDay + \" \" + month + \" \" + day + \" \" + hours + \":\" + minutes + \":\" + seconds + \" UTC \" + year;\n    return dateNow;\n  };\n  return DateHelper;\n}();\nexport { DateHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserAttribute = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserAttribute object\n   * @param {string=} Name The record's name\n   * @param {string=} Value The record's value\n   */\n  function CognitoUserAttribute(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      Name = _ref.Name,\n      Value = _ref.Value;\n    this.Name = Name || '';\n    this.Value = Value || '';\n  }\n\n  /**\n   * @returns {string} the record's value.\n   */\n  var _proto = CognitoUserAttribute.prototype;\n  _proto.getValue = function getValue() {\n    return this.Value;\n  }\n\n  /**\n   * Sets the record's value.\n   * @param {string} value The new value.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setValue = function setValue(value) {\n    this.Value = value;\n    return this;\n  }\n\n  /**\n   * @returns {string} the record's name.\n   */;\n  _proto.getName = function getName() {\n    return this.Name;\n  }\n\n  /**\n   * Sets the record's name\n   * @param {string} name The new name.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setName = function setName(name) {\n    this.Name = name;\n    return this;\n  }\n\n  /**\n   * @returns {string} a string representation of the record.\n   */;\n  _proto.toString = function toString() {\n    return JSON.stringify(this);\n  }\n\n  /**\n   * @returns {object} a flat object representing the record.\n   */;\n  _proto.toJSON = function toJSON() {\n    return {\n      Name: this.Name,\n      Value: this.Value\n    };\n  };\n  return CognitoUserAttribute;\n}();\nexport { CognitoUserAttribute as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar dataMemory = {};\n\n/** @class */\nexport var MemoryStorage = /*#__PURE__*/function () {\n  function MemoryStorage() {}\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  MemoryStorage.setItem = function setItem(key, value) {\n    dataMemory[key] = value;\n    return dataMemory[key];\n  }\n\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */;\n  MemoryStorage.getItem = function getItem(key) {\n    return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : undefined;\n  }\n\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {boolean} return true\n   */;\n  MemoryStorage.removeItem = function removeItem(key) {\n    return delete dataMemory[key];\n  }\n\n  /**\n   * This is used to clear the storage\n   * @returns {string} nothing\n   */;\n  MemoryStorage.clear = function clear() {\n    dataMemory = {};\n    return dataMemory;\n  };\n  return MemoryStorage;\n}();\n\n/** @class */\nvar StorageHelper = /*#__PURE__*/function () {\n  /**\n   * This is used to get a storage object\n   * @returns {object} the storage\n   */\n  function StorageHelper() {\n    try {\n      this.storageWindow = window.localStorage;\n      this.storageWindow.setItem('aws.cognito.test-ls', 1);\n      this.storageWindow.removeItem('aws.cognito.test-ls');\n    } catch (exception) {\n      this.storageWindow = MemoryStorage;\n    }\n  }\n\n  /**\n   * This is used to return the storage\n   * @returns {object} the storage\n   */\n  var _proto = StorageHelper.prototype;\n  _proto.getStorage = function getStorage() {\n    return this.storageWindow;\n  };\n  return StorageHelper;\n}();\nexport { StorageHelper as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer } from 'buffer';\nimport CryptoJS from 'crypto-js/core';\nimport TypedArrays from 'crypto-js/lib-typedarrays'; // necessary for crypto js\nimport Base64 from 'crypto-js/enc-base64';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport BigInteger from './BigInteger';\nimport AuthenticationHelper from './AuthenticationHelper';\nimport CognitoAccessToken from './CognitoAccessToken';\nimport CognitoIdToken from './CognitoIdToken';\nimport CognitoRefreshToken from './CognitoRefreshToken';\nimport CognitoUserSession from './CognitoUserSession';\nimport DateHelper from './DateHelper';\nimport CognitoUserAttribute from './CognitoUserAttribute';\nimport StorageHelper from './StorageHelper';\n\n/**\n * @callback nodeCallback\n * @template T result\n * @param {*} err The operation failure reason, or null.\n * @param {T} result The operation result.\n */\n\n/**\n * @callback onFailure\n * @param {*} err Failure reason.\n */\n\n/**\n * @callback onSuccess\n * @template T result\n * @param {T} result The operation result.\n */\n\n/**\n * @callback mfaRequired\n * @param {*} details MFA challenge details.\n */\n\n/**\n * @callback customChallenge\n * @param {*} details Custom challenge details.\n */\n\n/**\n * @callback inputVerificationCode\n * @param {*} data Server response.\n */\n\n/**\n * @callback authSuccess\n * @param {CognitoUserSession} session The new session.\n * @param {bool=} userConfirmationNecessary User must be confirmed.\n */\n\nvar isBrowser = typeof navigator !== 'undefined';\nvar userAgent = isBrowser ? navigator.userAgent : 'nodejs';\n\n/** @class */\nvar CognitoUser = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUser object\n   * @param {object} data Creation options\n   * @param {string} data.Username The user's username.\n   * @param {CognitoUserPool} data.Pool Pool containing the user.\n   * @param {object} data.Storage Optional storage object.\n   */\n  function CognitoUser(data) {\n    if (data == null || data.Username == null || data.Pool == null) {\n      throw new Error('Username and Pool information are required.');\n    }\n    this.username = data.Username || '';\n    this.pool = data.Pool;\n    this.Session = null;\n    this.client = data.Pool.client;\n    this.signInUserSession = null;\n    this.authenticationFlowType = 'USER_SRP_AUTH';\n    this.storage = data.Storage || new StorageHelper().getStorage();\n    this.keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    this.userDataKey = this.keyPrefix + \".\" + this.username + \".userData\";\n  }\n\n  /**\n   * Sets the session for this user\n   * @param {CognitoUserSession} signInUserSession the session\n   * @returns {void}\n   */\n  var _proto = CognitoUser.prototype;\n  _proto.setSignInUserSession = function setSignInUserSession(signInUserSession) {\n    this.clearCachedUserData();\n    this.signInUserSession = signInUserSession;\n    this.cacheTokens();\n  }\n\n  /**\n   * @returns {CognitoUserSession} the current session for this user\n   */;\n  _proto.getSignInUserSession = function getSignInUserSession() {\n    return this.signInUserSession;\n  }\n\n  /**\n   * @returns {string} the user's username\n   */;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {String} the authentication flow type\n   */;\n  _proto.getAuthenticationFlowType = function getAuthenticationFlowType() {\n    return this.authenticationFlowType;\n  }\n\n  /**\n   * sets authentication flow type\n   * @param {string} authenticationFlowType New value.\n   * @returns {void}\n   */;\n  _proto.setAuthenticationFlowType = function setAuthenticationFlowType(authenticationFlowType) {\n    this.authenticationFlowType = authenticationFlowType;\n  }\n\n  /**\n   * This is used for authenticating the user through the custom authentication flow.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.initiateAuth = function initiateAuth(authDetails, callback) {\n    var _this = this;\n    var authParameters = authDetails.getAuthParameters();\n    authParameters.USERNAME = this.username;\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'CUSTOM_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = data.ChallengeName;\n      var challengeParameters = data.ChallengeParameters;\n      if (challengeName === 'CUSTOM_CHALLENGE') {\n        _this.Session = data.Session;\n        return callback.customChallenge(challengeParameters);\n      }\n      _this.signInUserSession = _this.getCognitoUserSession(data.AuthenticationResult);\n      _this.cacheTokens();\n      return callback.onSuccess(_this.signInUserSession);\n    });\n  }\n\n  /**\n   * This is used for authenticating the user.\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUser = function authenticateUser(authDetails, callback) {\n    if (this.authenticationFlowType === 'USER_PASSWORD_AUTH') {\n      return this.authenticateUserPlainUsernamePassword(authDetails, callback);\n    } else if (this.authenticationFlowType === 'USER_SRP_AUTH' || this.authenticationFlowType === 'CUSTOM_AUTH') {\n      return this.authenticateUserDefaultAuth(authDetails, callback);\n    }\n    return callback.onFailure(new Error('Authentication flow type is invalid.'));\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * It calls the AuthenticationHelper for SRP related\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserDefaultAuth = function authenticateUserDefaultAuth(authDetails, callback) {\n    var _this2 = this;\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    var dateHelper = new DateHelper();\n    var serverBValue;\n    var salt;\n    var authParameters = {};\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    authParameters.USERNAME = this.username;\n    authenticationHelper.getLargeAValue(function (errOnAValue, aValue) {\n      // getLargeAValue callback start\n      if (errOnAValue) {\n        callback.onFailure(errOnAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      if (_this2.authenticationFlowType === 'CUSTOM_AUTH') {\n        authParameters.CHALLENGE_NAME = 'SRP_A';\n      }\n      var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n      var jsonReq = {\n        AuthFlow: _this2.authenticationFlowType,\n        ClientId: _this2.pool.getClientId(),\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetaData\n      };\n      if (_this2.getUserContextData(_this2.username)) {\n        jsonReq.UserContextData = _this2.getUserContextData(_this2.username);\n      }\n      _this2.client.request('InitiateAuth', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        _this2.username = challengeParameters.USER_ID_FOR_SRP;\n        _this2.userDataKey = _this2.keyPrefix + \".\" + _this2.username + \".userData\";\n        serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        salt = new BigInteger(challengeParameters.SALT, 16);\n        _this2.getCachedDeviceKeyAndPassword();\n        authenticationHelper.getPasswordAuthenticationKey(_this2.username, authDetails.getPassword(), serverBValue, salt, function (errOnHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errOnHkdf) {\n            callback.onFailure(errOnHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this2.pool.getUserPoolName(), 'utf8'), Buffer.from(_this2.username, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this2.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          if (_this2.deviceKey != null) {\n            challengeResponses.DEVICE_KEY = _this2.deviceKey;\n          }\n          var respondToAuthChallenge = function respondToAuthChallenge(challenge, challengeCallback) {\n            return _this2.client.request('RespondToAuthChallenge', challenge, function (errChallenge, dataChallenge) {\n              if (errChallenge && errChallenge.code === 'ResourceNotFoundException' && errChallenge.message.toLowerCase().indexOf('device') !== -1) {\n                challengeResponses.DEVICE_KEY = null;\n                _this2.deviceKey = null;\n                _this2.randomPassword = null;\n                _this2.deviceGroupKey = null;\n                _this2.clearCachedDeviceKeyAndPassword();\n                return respondToAuthChallenge(challenge, challengeCallback);\n              }\n              return challengeCallback(errChallenge, dataChallenge);\n            });\n          };\n          var jsonReqResp = {\n            ChallengeName: 'PASSWORD_VERIFIER',\n            ClientId: _this2.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session,\n            ClientMetadata: clientMetaData\n          };\n          if (_this2.getUserContextData()) {\n            jsonReqResp.UserContextData = _this2.getUserContextData();\n          }\n          respondToAuthChallenge(jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            return _this2.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserPlainUsernamePassword = function authenticateUserPlainUsernamePassword(authDetails, callback) {\n    var _this3 = this;\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.PASSWORD = authDetails.getPassword();\n    if (!authParameters.PASSWORD) {\n      callback.onFailure(new Error('PASSWORD parameter is required'));\n      return;\n    }\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'USER_PASSWORD_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData(this.username)) {\n      jsonReq.UserContextData = this.getUserContextData(this.username);\n    }\n    // USER_PASSWORD_AUTH happens in a single round-trip: client sends userName and password,\n    // Cognito UserPools verifies password and returns tokens.\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this3.authenticateUserInternal(authResult, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {object} dataAuthenticate authentication data\n   * @param {object} authenticationHelper helper created\n   * @param {callback} callback passed on from caller\n   * @returns {void}\n   */;\n  _proto.authenticateUserInternal = function authenticateUserInternal(dataAuthenticate, authenticationHelper, callback) {\n    var _this4 = this;\n    var challengeName = dataAuthenticate.ChallengeName;\n    var challengeParameters = dataAuthenticate.ChallengeParameters;\n    if (challengeName === 'SMS_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SELECT_MFA_TYPE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.selectMFAType(challengeName, challengeParameters);\n    }\n    if (challengeName === 'MFA_SETUP') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaSetup(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SOFTWARE_TOKEN_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.totpRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'CUSTOM_CHALLENGE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.customChallenge(challengeParameters);\n    }\n    if (challengeName === 'NEW_PASSWORD_REQUIRED') {\n      this.Session = dataAuthenticate.Session;\n      var userAttributes = null;\n      var rawRequiredAttributes = null;\n      var requiredAttributes = [];\n      var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n      if (challengeParameters) {\n        userAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes);\n        rawRequiredAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes);\n      }\n      if (rawRequiredAttributes) {\n        for (var i = 0; i < rawRequiredAttributes.length; i++) {\n          requiredAttributes[i] = rawRequiredAttributes[i].substr(userAttributesPrefix.length);\n        }\n      }\n      return callback.newPasswordRequired(userAttributes, requiredAttributes);\n    }\n    if (challengeName === 'DEVICE_SRP_AUTH') {\n      this.Session = dataAuthenticate.Session;\n      this.getDeviceResponse(callback);\n      return undefined;\n    }\n    this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n    this.challengeName = challengeName;\n    this.cacheTokens();\n    var newDeviceMetadata = dataAuthenticate.AuthenticationResult.NewDeviceMetadata;\n    if (newDeviceMetadata == null) {\n      return callback.onSuccess(this.signInUserSession);\n    }\n    authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n      if (errGenHash) {\n        return callback.onFailure(errGenHash);\n      }\n      var deviceSecretVerifierConfig = {\n        Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n        PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n      };\n      _this4.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n      _this4.deviceGroupKey = newDeviceMetadata.DeviceGroupKey;\n      _this4.randomPassword = authenticationHelper.getRandomPassword();\n      _this4.client.request('ConfirmDevice', {\n        DeviceKey: newDeviceMetadata.DeviceKey,\n        AccessToken: _this4.signInUserSession.getAccessToken().getJwtToken(),\n        DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n        DeviceName: userAgent\n      }, function (errConfirm, dataConfirm) {\n        if (errConfirm) {\n          return callback.onFailure(errConfirm);\n        }\n        _this4.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n        _this4.cacheDeviceKeyAndPassword();\n        if (dataConfirm.UserConfirmationNecessary === true) {\n          return callback.onSuccess(_this4.signInUserSession, dataConfirm.UserConfirmationNecessary);\n        }\n        return callback.onSuccess(_this4.signInUserSession);\n      });\n      return undefined;\n    });\n    return undefined;\n  }\n\n  /**\n   * This method is user to complete the NEW_PASSWORD_REQUIRED challenge.\n   * Pass the new password with any new user attributes to be updated.\n   * User attribute keys must be of format userAttributes.<attribute_name>.\n   * @param {string} newPassword new password for this user\n   * @param {object} requiredAttributeData map with values for all required attributes\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *         response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.completeNewPasswordChallenge = function completeNewPasswordChallenge(newPassword, requiredAttributeData, callback, clientMetadata) {\n    var _this5 = this;\n    if (!newPassword) {\n      return callback.onFailure(new Error('New password is required.'));\n    }\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n    var finalUserAttributes = {};\n    if (requiredAttributeData) {\n      Object.keys(requiredAttributeData).forEach(function (key) {\n        finalUserAttributes[userAttributesPrefix + key] = requiredAttributeData[key];\n      });\n    }\n    finalUserAttributes.NEW_PASSWORD = newPassword;\n    finalUserAttributes.USERNAME = this.username;\n    var jsonReq = {\n      ChallengeName: 'NEW_PASSWORD_REQUIRED',\n      ClientId: this.pool.getClientId(),\n      ChallengeResponses: finalUserAttributes,\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (errAuthenticate, dataAuthenticate) {\n      if (errAuthenticate) {\n        return callback.onFailure(errAuthenticate);\n      }\n      return _this5.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get a session using device authentication. It is called at the end of user\n   * authentication\n   *\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   * @private\n   */;\n  _proto.getDeviceResponse = function getDeviceResponse(callback, clientMetadata) {\n    var _this6 = this;\n    var authenticationHelper = new AuthenticationHelper(this.deviceGroupKey);\n    var dateHelper = new DateHelper();\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.DEVICE_KEY = this.deviceKey;\n    authenticationHelper.getLargeAValue(function (errAValue, aValue) {\n      // getLargeAValue callback start\n      if (errAValue) {\n        callback.onFailure(errAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      var jsonReq = {\n        ChallengeName: 'DEVICE_SRP_AUTH',\n        ClientId: _this6.pool.getClientId(),\n        ChallengeResponses: authParameters,\n        ClientMetadata: clientMetadata,\n        Session: _this6.Session\n      };\n      if (_this6.getUserContextData()) {\n        jsonReq.UserContextData = _this6.getUserContextData();\n      }\n      _this6.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        var serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        var salt = new BigInteger(challengeParameters.SALT, 16);\n        authenticationHelper.getPasswordAuthenticationKey(_this6.deviceKey, _this6.randomPassword, serverBValue, salt, function (errHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errHkdf) {\n            return callback.onFailure(errHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this6.deviceGroupKey, 'utf8'), Buffer.from(_this6.deviceKey, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this6.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          challengeResponses.DEVICE_KEY = _this6.deviceKey;\n          var jsonReqResp = {\n            ChallengeName: 'DEVICE_PASSWORD_VERIFIER',\n            ClientId: _this6.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session\n          };\n          if (_this6.getUserContextData()) {\n            jsonReqResp.UserContextData = _this6.getUserContextData();\n          }\n          _this6.client.request('RespondToAuthChallenge', jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            _this6.signInUserSession = _this6.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n            _this6.cacheTokens();\n            return callback.onSuccess(_this6.signInUserSession);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * This is used for a certain user to confirm the registration by using a confirmation code\n   * @param {string} confirmationCode Code entered by user.\n   * @param {bool} forceAliasCreation Allow migrating from an existing email / phone number.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmRegistration = function confirmRegistration(confirmationCode, forceAliasCreation, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      ConfirmationCode: confirmationCode,\n      Username: this.username,\n      ForceAliasCreation: forceAliasCreation,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmSignUp', jsonReq, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n  }\n\n  /**\n   * This is used by the user once he has the responses to a custom challenge\n   * @param {string} answerChallenge The custom challenge answer.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge\n   *    Custom challenge response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendCustomChallengeAnswer = function sendCustomChallengeAnswer(answerChallenge, callback, clientMetadata) {\n    var _this7 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: 'CUSTOM_CHALLENGE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this7.authenticateUserInternal(data, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * This is used by the user once he has an MFA code\n   * @param {string} confirmationCode The MFA code entered by the user.\n   * @param {object} callback Result callback map.\n   * @param {string} mfaType The mfa we are replying to.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendMFACode = function sendMFACode(confirmationCode, callback, mfaType, clientMetadata) {\n    var _this8 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.SMS_MFA_CODE = confirmationCode;\n    var mfaTypeSelection = mfaType || 'SMS_MFA';\n    if (mfaTypeSelection === 'SOFTWARE_TOKEN_MFA') {\n      challengeResponses.SOFTWARE_TOKEN_MFA_CODE = confirmationCode;\n    }\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: mfaTypeSelection,\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, dataAuthenticate) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = dataAuthenticate.ChallengeName;\n      if (challengeName === 'DEVICE_SRP_AUTH') {\n        _this8.getDeviceResponse(callback);\n        return undefined;\n      }\n      _this8.signInUserSession = _this8.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n      _this8.cacheTokens();\n      if (dataAuthenticate.AuthenticationResult.NewDeviceMetadata == null) {\n        return callback.onSuccess(_this8.signInUserSession);\n      }\n      var authenticationHelper = new AuthenticationHelper(_this8.pool.getUserPoolName());\n      authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n        if (errGenHash) {\n          return callback.onFailure(errGenHash);\n        }\n        var deviceSecretVerifierConfig = {\n          Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n          PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n        };\n        _this8.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n        _this8.deviceGroupKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey;\n        _this8.randomPassword = authenticationHelper.getRandomPassword();\n        _this8.client.request('ConfirmDevice', {\n          DeviceKey: dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,\n          AccessToken: _this8.signInUserSession.getAccessToken().getJwtToken(),\n          DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n          DeviceName: userAgent\n        }, function (errConfirm, dataConfirm) {\n          if (errConfirm) {\n            return callback.onFailure(errConfirm);\n          }\n          _this8.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n          _this8.cacheDeviceKeyAndPassword();\n          if (dataConfirm.UserConfirmationNecessary === true) {\n            return callback.onSuccess(_this8.signInUserSession, dataConfirm.UserConfirmationNecessary);\n          }\n          return callback.onSuccess(_this8.signInUserSession);\n        });\n        return undefined;\n      });\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to change the current password\n   * @param {string} oldUserPassword The current password.\n   * @param {string} newUserPassword The requested new password.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.changePassword = function changePassword(oldUserPassword, newUserPassword, callback, clientMetadata) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('ChangePassword', {\n      PreviousPassword: oldUserPassword,\n      ProposedPassword: newUserPassword,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.enableMFA = function enableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    var mfaEnabled = {\n      DeliveryMedium: 'SMS',\n      AttributeName: 'phone_number'\n    };\n    mfaOptions.push(mfaEnabled);\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @param {IMfaSettings} smsMfaSettings the sms mfa settings\n   * @param {IMFASettings} softwareTokenMfaSettings the software token mfa settings\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.setUserMfaPreference = function setUserMfaPreference(smsMfaSettings, softwareTokenMfaSettings, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('SetUserMFAPreference', {\n      SMSMfaSettings: smsMfaSettings,\n      SoftwareTokenMfaSettings: softwareTokenMfaSettings,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to disable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.disableMFA = function disableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to delete itself\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.deleteUser = function deleteUser(callback, clientMetadata) {\n    var _this9 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      _this9.clearCachedUser();\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * @typedef {CognitoUserAttribute | { Name:string, Value:string }} AttributeArg\n   */\n  /**\n   * This is used by an authenticated user to change a list of attributes\n   * @param {AttributeArg[]} attributes A list of the new user attributes.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.updateAttributes = function updateAttributes(attributes, callback, clientMetadata) {\n    var _this10 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('UpdateUserAttributes', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      UserAttributes: attributes,\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this10.getUserData(function () {\n        return callback(null, 'SUCCESS');\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to get a list of attributes\n   * @param {nodeCallback<CognitoUserAttribute[]>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getUserAttributes = function getUserAttributes(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      var attributeList = [];\n      for (var i = 0; i < userData.UserAttributes.length; i++) {\n        var attribute = {\n          Name: userData.UserAttributes[i].Name,\n          Value: userData.UserAttributes[i].Value\n        };\n        var userAttribute = new CognitoUserAttribute(attribute);\n        attributeList.push(userAttribute);\n      }\n      return callback(null, attributeList);\n    });\n    return undefined;\n  }\n\n  /**\n   * This was previously used by an authenticated user to get MFAOptions,\n   * but no longer returns a meaningful response. Refer to the documentation for\n   * how to setup and use MFA: https://docs.amplify.aws/lib/auth/mfa/q/platform/js\n   * @deprecated\n   * @param {nodeCallback<MFAOptions>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getMFAOptions = function getMFAOptions(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, userData.MFAOptions);\n    });\n    return undefined;\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.createGetUserRequest = function createGetUserRequest() {\n    return this.client.promisifyRequest('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.refreshSessionIfPossible = function refreshSessionIfPossible(options) {\n    var _this11 = this;\n    if (options === void 0) {\n      options = {};\n    }\n    // best effort, if not possible\n    return new Promise(function (resolve) {\n      var refresh = _this11.signInUserSession.getRefreshToken();\n      if (refresh && refresh.getToken()) {\n        _this11.refreshSession(refresh, resolve, options.clientMetadata);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * @typedef {Object} GetUserDataOptions\n   * @property {boolean} bypassCache - force getting data from Cognito service\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used by an authenticated users to get the userData\n   * @param {nodeCallback<UserData>} callback Called on success or error.\n   * @param {GetUserDataOptions} params\n   * @returns {void}\n   */;\n  _proto.getUserData = function getUserData(callback, params) {\n    var _this12 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.clearCachedUserData();\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var userData = this.getUserDataFromCache();\n    if (!userData) {\n      this.fetchUserData().then(function (data) {\n        callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    if (this.isFetchUserDataAndTokenRequired(params)) {\n      this.fetchUserData().then(function (data) {\n        return _this12.refreshSessionIfPossible(params).then(function () {\n          return data;\n        });\n      }).then(function (data) {\n        return callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    try {\n      callback(null, JSON.parse(userData));\n      return;\n    } catch (err) {\n      this.clearCachedUserData();\n      callback(err, null);\n      return;\n    }\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.getUserDataFromCache = function getUserDataFromCache() {\n    var userData = this.storage.getItem(this.userDataKey);\n    return userData;\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.isFetchUserDataAndTokenRequired = function isFetchUserDataAndTokenRequired(params) {\n    var _ref = params || {},\n      _ref$bypassCache = _ref.bypassCache,\n      bypassCache = _ref$bypassCache === void 0 ? false : _ref$bypassCache;\n    return bypassCache;\n  }\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.fetchUserData = function fetchUserData() {\n    var _this13 = this;\n    return this.createGetUserRequest().then(function (data) {\n      _this13.cacheUserData(data);\n      return data;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to delete a list of attributes\n   * @param {string[]} attributeList Names of the attributes to delete.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.deleteAttributes = function deleteAttributes(attributeList, callback) {\n    var _this14 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUserAttributes', {\n      UserAttributeNames: attributeList,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this14.getUserData(function () {\n        return callback(null, 'SUCCESS');\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by a user to resend a confirmation code\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.resendConfirmationCode = function resendConfirmationCode(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    this.client.request('ResendConfirmationCode', jsonReq, function (err, result) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, result);\n    });\n  }\n\n  /**\n   * @typedef {Object} GetSessionOptions\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used to get a session, either from the session object\n   * or from  the local storage, or by using a refresh token\n   *\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {GetSessionOptions} options\n   * @returns {void}\n   */;\n  _proto.getSession = function getSession(callback, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (this.username == null) {\n      return callback(new Error('Username is null. Cannot retrieve a new session'), null);\n    }\n    if (this.signInUserSession != null && this.signInUserSession.isValid()) {\n      return callback(null, this.signInUserSession);\n    }\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var idTokenKey = keyPrefix + \".idToken\";\n    var accessTokenKey = keyPrefix + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".clockDrift\";\n    if (this.storage.getItem(idTokenKey)) {\n      var idToken = new CognitoIdToken({\n        IdToken: this.storage.getItem(idTokenKey)\n      });\n      var accessToken = new CognitoAccessToken({\n        AccessToken: this.storage.getItem(accessTokenKey)\n      });\n      var refreshToken = new CognitoRefreshToken({\n        RefreshToken: this.storage.getItem(refreshTokenKey)\n      });\n      var clockDrift = parseInt(this.storage.getItem(clockDriftKey), 0) || 0;\n      var sessionData = {\n        IdToken: idToken,\n        AccessToken: accessToken,\n        RefreshToken: refreshToken,\n        ClockDrift: clockDrift\n      };\n      var cachedSession = new CognitoUserSession(sessionData);\n      if (cachedSession.isValid()) {\n        this.signInUserSession = cachedSession;\n        return callback(null, this.signInUserSession);\n      }\n      if (!refreshToken.getToken()) {\n        return callback(new Error('Cannot retrieve a new session. Please authenticate.'), null);\n      }\n      this.refreshSession(refreshToken, callback, options.clientMetadata);\n    } else {\n      callback(new Error('Local storage is missing an ID Token, Please authenticate'), null);\n    }\n    return undefined;\n  }\n\n  /**\n   * This uses the refreshToken to retrieve a new session\n   * @param {CognitoRefreshToken} refreshToken A previous session's refresh token.\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.refreshSession = function refreshSession(refreshToken, callback, clientMetadata) {\n    var _this15 = this;\n    var wrappedCallback = this.pool.wrapRefreshSessionCallback ? this.pool.wrapRefreshSessionCallback(callback) : callback;\n    var authParameters = {};\n    authParameters.REFRESH_TOKEN = refreshToken.getToken();\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    if (this.storage.getItem(lastUserKey)) {\n      this.username = this.storage.getItem(lastUserKey);\n      var deviceKeyKey = keyPrefix + \".\" + this.username + \".deviceKey\";\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      AuthFlow: 'REFRESH_TOKEN_AUTH',\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        if (err.code === 'NotAuthorizedException') {\n          _this15.clearCachedUser();\n        }\n        return wrappedCallback(err, null);\n      }\n      if (authResult) {\n        var authenticationResult = authResult.AuthenticationResult;\n        if (!Object.prototype.hasOwnProperty.call(authenticationResult, 'RefreshToken')) {\n          authenticationResult.RefreshToken = refreshToken.getToken();\n        }\n        _this15.signInUserSession = _this15.getCognitoUserSession(authenticationResult);\n        _this15.cacheTokens();\n        return wrappedCallback(null, _this15.signInUserSession);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used to save the session tokens to local storage\n   * @returns {void}\n   */;\n  _proto.cacheTokens = function cacheTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    this.storage.setItem(idTokenKey, this.signInUserSession.getIdToken().getJwtToken());\n    this.storage.setItem(accessTokenKey, this.signInUserSession.getAccessToken().getJwtToken());\n    this.storage.setItem(refreshTokenKey, this.signInUserSession.getRefreshToken().getToken());\n    this.storage.setItem(clockDriftKey, \"\" + this.signInUserSession.getClockDrift());\n    this.storage.setItem(lastUserKey, this.username);\n  }\n\n  /**\n   * This is to cache user data\n   */;\n  _proto.cacheUserData = function cacheUserData(userData) {\n    this.storage.setItem(this.userDataKey, JSON.stringify(userData));\n  }\n\n  /**\n   * This is to remove cached user data\n   */;\n  _proto.clearCachedUserData = function clearCachedUserData() {\n    this.storage.removeItem(this.userDataKey);\n  };\n  _proto.clearCachedUser = function clearCachedUser() {\n    this.clearCachedTokens();\n    this.clearCachedUserData();\n  }\n\n  /**\n   * This is used to cache the device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.cacheDeviceKeyAndPassword = function cacheDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.setItem(deviceKeyKey, this.deviceKey);\n    this.storage.setItem(randomPasswordKey, this.randomPassword);\n    this.storage.setItem(deviceGroupKeyKey, this.deviceGroupKey);\n  }\n\n  /**\n   * This is used to get current device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.getCachedDeviceKeyAndPassword = function getCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    if (this.storage.getItem(deviceKeyKey)) {\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      this.randomPassword = this.storage.getItem(randomPasswordKey);\n      this.deviceGroupKey = this.storage.getItem(deviceGroupKeyKey);\n    }\n  }\n\n  /**\n   * This is used to clear the device key info from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedDeviceKeyAndPassword = function clearCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.removeItem(deviceKeyKey);\n    this.storage.removeItem(randomPasswordKey);\n    this.storage.removeItem(deviceGroupKeyKey);\n  }\n\n  /**\n   * This is used to clear the session tokens from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedTokens = function clearCachedTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    this.storage.removeItem(idTokenKey);\n    this.storage.removeItem(accessTokenKey);\n    this.storage.removeItem(refreshTokenKey);\n    this.storage.removeItem(lastUserKey);\n    this.storage.removeItem(clockDriftKey);\n  }\n\n  /**\n   * This is used to build a user session from tokens retrieved in the authentication result\n   * @param {object} authResult Successful auth response from server.\n   * @returns {CognitoUserSession} The new user session.\n   * @private\n   */;\n  _proto.getCognitoUserSession = function getCognitoUserSession(authResult) {\n    var idToken = new CognitoIdToken(authResult);\n    var accessToken = new CognitoAccessToken(authResult);\n    var refreshToken = new CognitoRefreshToken(authResult);\n    var sessionData = {\n      IdToken: idToken,\n      AccessToken: accessToken,\n      RefreshToken: refreshToken\n    };\n    return new CognitoUserSession(sessionData);\n  }\n\n  /**\n   * This is used to initiate a forgot password request\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode?} callback.inputVerificationCode\n   *    Optional callback raised instead of onSuccess with response data.\n   * @param {onSuccess} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.forgotPassword = function forgotPassword(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ForgotPassword', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess(data);\n    });\n  }\n\n  /**\n   * This is used to confirm a new password using a confirmationCode\n   * @param {string} confirmationCode Code entered by user.\n   * @param {string} newPassword Confirm new password.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<void>} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmPassword = function confirmPassword(confirmationCode, newPassword, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ConfirmationCode: confirmationCode,\n      Password: newPassword,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmForgotPassword', jsonReq, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n  }\n\n  /**\n   * This is used to initiate an attribute confirmation request\n   * @param {string} attributeName User attribute that needs confirmation.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode} callback.inputVerificationCode Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.getAttributeVerificationCode = function getAttributeVerificationCode(attributeName, callback, clientMetadata) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetUserAttributeVerificationCode', {\n      AttributeName: attributeName,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to confirm an attribute using a confirmation code\n   * @param {string} attributeName Attribute being confirmed.\n   * @param {string} confirmationCode Code entered by user.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.verifyAttribute = function verifyAttribute(attributeName, confirmationCode, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('VerifyUserAttribute', {\n      AttributeName: attributeName,\n      Code: confirmationCode,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get the device information using the current device key\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device data.\n   * @returns {void}\n   */;\n  _proto.getDevice = function getDevice(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget a specific device\n   * @param {string} deviceKey Device key.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetSpecificDevice = function forgetSpecificDevice(deviceKey, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('ForgetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: deviceKey\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget the current device\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetDevice = function forgetDevice(callback) {\n    var _this16 = this;\n    this.forgetSpecificDevice(this.deviceKey, {\n      onFailure: callback.onFailure,\n      onSuccess: function onSuccess(result) {\n        _this16.deviceKey = null;\n        _this16.deviceGroupKey = null;\n        _this16.randomPassword = null;\n        _this16.clearCachedDeviceKeyAndPassword();\n        return callback.onSuccess(result);\n      }\n    });\n  }\n\n  /**\n   * This is used to set the device status as remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusRemembered = function setDeviceStatusRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to set the device status as not remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusNotRemembered = function setDeviceStatusNotRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'not_remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to list all devices for a user\n   *\n   * @param {int} limit the number of devices returned in a call\n   * @param {string | null} paginationToken the pagination token in case any was returned before\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device list.\n   * @returns {void}\n   */;\n  _proto.listDevices = function listDevices(limit, paginationToken, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    var requestParams = {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      Limit: limit\n    };\n    if (paginationToken) {\n      requestParams.PaginationToken = paginationToken;\n    }\n    this.client.request('ListDevices', requestParams, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to globally revoke all tokens issued to a user\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.globalSignOut = function globalSignOut(callback) {\n    var _this17 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GlobalSignOut', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this17.clearCachedUser();\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used for the user to signOut of the application and clear the cached tokens.\n   * @returns {void}\n   */;\n  _proto.signOut = function signOut(revokeTokenCallback) {\n    var _this18 = this;\n    // If tokens won't be revoked, we just clean the client data.\n    if (!revokeTokenCallback || typeof revokeTokenCallback !== 'function') {\n      this.cleanClientData();\n      return;\n    }\n    this.getSession(function (error, _session) {\n      if (error) {\n        return revokeTokenCallback(error);\n      }\n      _this18.revokeTokens(function (err) {\n        _this18.cleanClientData();\n        revokeTokenCallback(err);\n      });\n    });\n  };\n  _proto.revokeTokens = function revokeTokens(revokeTokenCallback) {\n    if (revokeTokenCallback === void 0) {\n      revokeTokenCallback = function revokeTokenCallback() {};\n    }\n    if (typeof revokeTokenCallback !== 'function') {\n      throw new Error('Invalid revokeTokenCallback. It should be a function.');\n    }\n    var tokensToBeRevoked = [];\n    if (!this.signInUserSession) {\n      var error = new Error('User is not authenticated');\n      return revokeTokenCallback(error);\n    }\n    if (!this.signInUserSession.getAccessToken()) {\n      var _error = new Error('No Access token available');\n      return revokeTokenCallback(_error);\n    }\n    var refreshToken = this.signInUserSession.getRefreshToken().getToken();\n    var accessToken = this.signInUserSession.getAccessToken();\n    if (this.isSessionRevocable(accessToken)) {\n      if (refreshToken) {\n        return this.revokeToken({\n          token: refreshToken,\n          callback: revokeTokenCallback\n        });\n      }\n    }\n    revokeTokenCallback();\n  };\n  _proto.isSessionRevocable = function isSessionRevocable(token) {\n    if (token && typeof token.decodePayload === 'function') {\n      try {\n        var _token$decodePayload2 = token.decodePayload(),\n          origin_jti = _token$decodePayload2.origin_jti;\n        return !!origin_jti;\n      } catch (err) {\n        // Nothing to do, token doesnt have origin_jti claim\n      }\n    }\n    return false;\n  };\n  _proto.cleanClientData = function cleanClientData() {\n    this.signInUserSession = null;\n    this.clearCachedUser();\n  };\n  _proto.revokeToken = function revokeToken(_ref2) {\n    var token = _ref2.token,\n      callback = _ref2.callback;\n    this.client.requestWithRetry('RevokeToken', {\n      Token: token,\n      ClientId: this.pool.getClientId()\n    }, function (err) {\n      if (err) {\n        return callback(err);\n      }\n      callback();\n    });\n  }\n\n  /**\n   * This is used by a user trying to select a given MFA\n   * @param {string} answerChallenge the mfa the user wants\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.sendMFASelectionAnswer = function sendMFASelectionAnswer(answerChallenge, callback) {\n    var _this19 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var jsonReq = {\n      ChallengeName: 'SELECT_MFA_TYPE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this19.Session = data.Session;\n      if (answerChallenge === 'SMS_MFA') {\n        return callback.mfaRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      if (answerChallenge === 'SOFTWARE_TOKEN_MFA') {\n        return callback.totpRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This returns the user context data for advanced security feature.\n   * @returns {string} the user context data from CognitoUserPool\n   */;\n  _proto.getUserContextData = function getUserContextData() {\n    var pool = this.pool;\n    return pool.getUserContextData(this.username);\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to associate a TOTP MFA\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.associateSoftwareToken = function associateSoftwareToken(callback) {\n    var _this20 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('AssociateSoftwareToken', {\n        Session: this.Session\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this20.Session = data.Session;\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    } else {\n      this.client.request('AssociateSoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    }\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to verify a TOTP MFA\n   * @param {string} totpCode The MFA code entered by the user.\n   * @param {string} friendlyDeviceName The device name we are assigning to the device.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.verifySoftwareToken = function verifySoftwareToken(totpCode, friendlyDeviceName, callback) {\n    var _this21 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('VerifySoftwareToken', {\n        Session: this.Session,\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this21.Session = data.Session;\n        var challengeResponses = {};\n        challengeResponses.USERNAME = _this21.username;\n        var jsonReq = {\n          ChallengeName: 'MFA_SETUP',\n          ClientId: _this21.pool.getClientId(),\n          ChallengeResponses: challengeResponses,\n          Session: _this21.Session\n        };\n        if (_this21.getUserContextData()) {\n          jsonReq.UserContextData = _this21.getUserContextData();\n        }\n        _this21.client.request('RespondToAuthChallenge', jsonReq, function (errRespond, dataRespond) {\n          if (errRespond) {\n            return callback.onFailure(errRespond);\n          }\n          _this21.signInUserSession = _this21.getCognitoUserSession(dataRespond.AuthenticationResult);\n          _this21.cacheTokens();\n          return callback.onSuccess(_this21.signInUserSession);\n        });\n        return undefined;\n      });\n    } else {\n      this.client.request('VerifySoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.onSuccess(data);\n      });\n    }\n  };\n  return CognitoUser;\n}();\nexport { CognitoUser as default };","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { version } from './version';\nvar BASE_USER_AGENT = \"aws-amplify/\" + version;\nexport var Platform = {\n  userAgent: BASE_USER_AGENT + \" js\",\n  product: '',\n  navigator: null,\n  isReactNative: false\n};\nif (typeof navigator !== 'undefined' && navigator.product) {\n  Platform.product = navigator.product || '';\n  Platform.navigator = navigator || null;\n  switch (navigator.product) {\n    case 'ReactNative':\n      Platform.userAgent = BASE_USER_AGENT + \" react-native\";\n      Platform.isReactNative = true;\n      break;\n    default:\n      Platform.userAgent = BASE_USER_AGENT + \" js\";\n      Platform.isReactNative = false;\n      break;\n  }\n}\nexport var getUserAgent = function getUserAgent() {\n  return Platform.userAgent;\n};\n\n/**\n * @deprecated use named import\n */\nexport default Platform;","import { getUserAgent } from \"./Platform\";\n// constructor\nfunction UserAgent() {}\n// public\nUserAgent.prototype.userAgent = getUserAgent();\nexport var appendToCognitoUserAgent = function appendToCognitoUserAgent(content) {\n  if (!content) {\n    return;\n  }\n  if (UserAgent.prototype.userAgent && !UserAgent.prototype.userAgent.includes(content)) {\n    UserAgent.prototype.userAgent = UserAgent.prototype.userAgent.concat(' ', content);\n  }\n  if (!UserAgent.prototype.userAgent || UserAgent.prototype.userAgent === '') {\n    UserAgent.prototype.userAgent = content;\n  }\n};\n\n// class for defining the amzn user-agent\nexport default UserAgent;","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nimport 'isomorphic-unfetch';\nimport UserAgent from './UserAgent';\nvar CognitoError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(CognitoError, _Error);\n  function CognitoError(message, code, name, statusCode) {\n    var _this;\n    _this = _Error.call(this, message) || this;\n    _this.code = code;\n    _this.name = name;\n    _this.statusCode = statusCode;\n    return _this;\n  }\n  return CognitoError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n/** @class */\nvar Client = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AWS Cognito Identity Provider client object\n   * @param {string} region AWS region\n   * @param {string} endpoint endpoint\n   * @param {object} fetchOptions options for fetch API (only credentials is supported)\n   */\n  function Client(region, endpoint, fetchOptions) {\n    this.endpoint = endpoint || \"https://cognito-idp.\" + region + \".amazonaws.com/\";\n    var _ref = fetchOptions || {},\n      credentials = _ref.credentials;\n    this.fetchOptions = credentials ? {\n      credentials: credentials\n    } : {};\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @returns Promise<object>\n   */\n  var _proto = Client.prototype;\n  _proto.promisifyRequest = function promisifyRequest(operation, params) {\n    var _this2 = this;\n    return new Promise(function (resolve, reject) {\n      _this2.request(operation, params, function (err, data) {\n        if (err) {\n          reject(new CognitoError(err.message, err.code, err.name, err.statusCode));\n        } else {\n          resolve(data);\n        }\n      });\n    });\n  };\n  _proto.requestWithRetry = function requestWithRetry(operation, params, callback) {\n    var _this3 = this;\n    var MAX_DELAY_IN_MILLIS = 5 * 1000;\n    jitteredExponentialRetry(function (p) {\n      return new Promise(function (res, rej) {\n        _this3.request(operation, p, function (error, result) {\n          if (error) {\n            rej(error);\n          } else {\n            res(result);\n          }\n        });\n      });\n    }, [params], MAX_DELAY_IN_MILLIS).then(function (result) {\n      return callback(null, result);\n    })[\"catch\"](function (error) {\n      return callback(error);\n    });\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @param {function} callback Callback called when a response is returned\n   * @returns {void}\n   */;\n  _proto.request = function request(operation, params, callback) {\n    var headers = {\n      'Content-Type': 'application/x-amz-json-1.1',\n      'X-Amz-Target': \"AWSCognitoIdentityProviderService.\" + operation,\n      'X-Amz-User-Agent': UserAgent.prototype.userAgent,\n      'Cache-Control': 'no-store'\n    };\n    var options = Object.assign({}, this.fetchOptions, {\n      headers: headers,\n      method: 'POST',\n      mode: 'cors',\n      body: JSON.stringify(params)\n    });\n    var response;\n    var responseJsonData;\n    fetch(this.endpoint, options).then(function (resp) {\n      response = resp;\n      return resp;\n    }, function (err) {\n      // If error happens here, the request failed\n      // if it is TypeError throw network error\n      if (err instanceof TypeError) {\n        throw new Error('Network error');\n      }\n      throw err;\n    }).then(function (resp) {\n      return resp.json()[\"catch\"](function () {\n        return {};\n      });\n    }).then(function (data) {\n      // return parsed body stream\n      if (response.ok) return callback(null, data);\n      responseJsonData = data;\n\n      // Taken from aws-sdk-js/lib/protocol/json.js\n      // eslint-disable-next-line no-underscore-dangle\n      var code = (data.__type || data.code).split('#').pop();\n      var error = new Error(data.message || data.Message || null);\n      error.name = code;\n      error.code = code;\n      return callback(error);\n    })[\"catch\"](function (err) {\n      // first check if we have a service error\n      if (response && response.headers && response.headers.get('x-amzn-errortype')) {\n        try {\n          var code = response.headers.get('x-amzn-errortype').split(':')[0];\n          var error = new Error(response.status ? response.status.toString() : null);\n          error.code = code;\n          error.name = code;\n          error.statusCode = response.status;\n          return callback(error);\n        } catch (ex) {\n          return callback(err);\n        }\n        // otherwise check if error is Network error\n      } else if (err instanceof Error && err.message === 'Network error') {\n        err.code = 'NetworkError';\n      }\n      return callback(err);\n    });\n  };\n  return Client;\n}();\nexport { Client as default };\nvar logger = {\n  debug: function debug() {\n    // Intentionally blank. This package doesn't have logging\n  }\n};\n\n/**\n * For now, all errors are retryable.\n */\nvar NonRetryableError = /*#__PURE__*/function (_Error2) {\n  _inheritsLoose(NonRetryableError, _Error2);\n  function NonRetryableError(message) {\n    var _this4;\n    _this4 = _Error2.call(this, message) || this;\n    _this4.nonRetryable = true;\n    return _this4;\n  }\n  return NonRetryableError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar isNonRetryableError = function isNonRetryableError(obj) {\n  var key = 'nonRetryable';\n  return obj && obj[key];\n};\nfunction retry(functionToRetry, args, delayFn, attempt) {\n  if (attempt === void 0) {\n    attempt = 1;\n  }\n  if (typeof functionToRetry !== 'function') {\n    throw Error('functionToRetry must be a function');\n  }\n  logger.debug(functionToRetry.name + \" attempt #\" + attempt + \" with args: \" + JSON.stringify(args));\n  return functionToRetry.apply(void 0, args)[\"catch\"](function (err) {\n    logger.debug(\"error on \" + functionToRetry.name, err);\n    if (isNonRetryableError(err)) {\n      logger.debug(functionToRetry.name + \" non retryable error\", err);\n      throw err;\n    }\n    var retryIn = delayFn(attempt, args, err);\n    logger.debug(functionToRetry.name + \" retrying in \" + retryIn + \" ms\");\n    if (retryIn !== false) {\n      return new Promise(function (res) {\n        return setTimeout(res, retryIn);\n      }).then(function () {\n        return retry(functionToRetry, args, delayFn, attempt + 1);\n      });\n    } else {\n      throw err;\n    }\n  });\n}\nfunction jitteredBackoff(maxDelayMs) {\n  var BASE_TIME_MS = 100;\n  var JITTER_FACTOR = 100;\n  return function (attempt) {\n    var delay = Math.pow(2, attempt) * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n    return delay > maxDelayMs ? false : delay;\n  };\n}\nvar MAX_DELAY_MS = 5 * 60 * 1000;\nfunction jitteredExponentialRetry(functionToRetry, args, maxDelayMs) {\n  if (maxDelayMs === void 0) {\n    maxDelayMs = MAX_DELAY_MS;\n  }\n  return retry(functionToRetry, args, jitteredBackoff(maxDelayMs));\n}","/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Client from './Client';\nimport CognitoUser from './CognitoUser';\nimport StorageHelper from './StorageHelper';\nvar USER_POOL_ID_MAX_LENGTH = 55;\n\n/** @class */\nvar CognitoUserPool = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserPool object\n   * @param {object} data Creation options.\n   * @param {string} data.UserPoolId Cognito user pool id.\n   * @param {string} data.ClientId User pool application client id.\n   * @param {string} data.endpoint Optional custom service endpoint.\n   * @param {object} data.fetchOptions Optional options for fetch API.\n   *        (only credentials option is supported)\n   * @param {object} data.Storage Optional storage object.\n   * @param {boolean} data.AdvancedSecurityDataCollectionFlag Optional:\n   *        boolean flag indicating if the data collection is enabled\n   *        to support cognito advanced security features. By default, this\n   *        flag is set to true.\n   */\n  function CognitoUserPool(data, wrapRefreshSessionCallback) {\n    var _ref = data || {},\n      UserPoolId = _ref.UserPoolId,\n      ClientId = _ref.ClientId,\n      endpoint = _ref.endpoint,\n      fetchOptions = _ref.fetchOptions,\n      AdvancedSecurityDataCollectionFlag = _ref.AdvancedSecurityDataCollectionFlag;\n    if (!UserPoolId || !ClientId) {\n      throw new Error('Both UserPoolId and ClientId are required.');\n    }\n    if (UserPoolId.length > USER_POOL_ID_MAX_LENGTH || !/^[\\w-]+_[0-9a-zA-Z]+$/.test(UserPoolId)) {\n      throw new Error('Invalid UserPoolId format.');\n    }\n    var region = UserPoolId.split('_')[0];\n    this.userPoolId = UserPoolId;\n    this.clientId = ClientId;\n    this.client = new Client(region, endpoint, fetchOptions);\n\n    /**\n     * By default, AdvancedSecurityDataCollectionFlag is set to true,\n     * if no input value is provided.\n     */\n    this.advancedSecurityDataCollectionFlag = AdvancedSecurityDataCollectionFlag !== false;\n    this.storage = data.Storage || new StorageHelper().getStorage();\n    if (wrapRefreshSessionCallback) {\n      this.wrapRefreshSessionCallback = wrapRefreshSessionCallback;\n    }\n  }\n\n  /**\n   * @returns {string} the user pool id\n   */\n  var _proto = CognitoUserPool.prototype;\n  _proto.getUserPoolId = function getUserPoolId() {\n    return this.userPoolId;\n  }\n\n  /**\n   * @returns {string} the user pool name\n   */;\n  _proto.getUserPoolName = function getUserPoolName() {\n    return this.getUserPoolId().split('_')[1];\n  }\n\n  /**\n   * @returns {string} the client id\n   */;\n  _proto.getClientId = function getClientId() {\n    return this.clientId;\n  }\n\n  /**\n   * @typedef {object} SignUpResult\n   * @property {CognitoUser} user New user.\n   * @property {bool} userConfirmed If the user is already confirmed.\n   */\n  /**\n   * method for signing up a user\n   * @param {string} username User's username.\n   * @param {string} password Plain-text initial password entered by user.\n   * @param {(AttributeArg[])=} userAttributes New user attributes.\n   * @param {(AttributeArg[])=} validationData Application metadata.\n   * @param {(AttributeArg[])=} clientMetadata Client metadata.\n   * @param {nodeCallback<SignUpResult>} callback Called on error or with the new user.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.signUp = function signUp(username, password, userAttributes, validationData, callback, clientMetadata) {\n    var _this = this;\n    var jsonReq = {\n      ClientId: this.clientId,\n      Username: username,\n      Password: password,\n      UserAttributes: userAttributes,\n      ValidationData: validationData,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData(username)) {\n      jsonReq.UserContextData = this.getUserContextData(username);\n    }\n    this.client.request('SignUp', jsonReq, function (err, data) {\n      if (err) {\n        return callback(err, null);\n      }\n      var cognitoUser = {\n        Username: username,\n        Pool: _this,\n        Storage: _this.storage\n      };\n      var returnData = {\n        user: new CognitoUser(cognitoUser),\n        userConfirmed: data.UserConfirmed,\n        userSub: data.UserSub,\n        codeDeliveryDetails: data.CodeDeliveryDetails\n      };\n      return callback(null, returnData);\n    });\n  }\n\n  /**\n   * method for getting the current user of the application from the local storage\n   *\n   * @returns {CognitoUser} the user retrieved from storage\n   */;\n  _proto.getCurrentUser = function getCurrentUser() {\n    var lastUserKey = \"CognitoIdentityServiceProvider.\" + this.clientId + \".LastAuthUser\";\n    var lastAuthUser = this.storage.getItem(lastUserKey);\n    if (lastAuthUser) {\n      var cognitoUser = {\n        Username: lastAuthUser,\n        Pool: this,\n        Storage: this.storage\n      };\n      return new CognitoUser(cognitoUser);\n    }\n    return null;\n  }\n\n  /**\n   * This method returns the encoded data string used for cognito advanced security feature.\n   * This would be generated only when developer has included the JS used for collecting the\n   * data on their client. Please refer to documentation to know more about using AdvancedSecurity\n   * features\n   * @param {string} username the username for the context data\n   * @returns {string} the user context data\n   **/;\n  _proto.getUserContextData = function getUserContextData(username) {\n    if (typeof AmazonCognitoAdvancedSecurityData === 'undefined') {\n      return undefined;\n    }\n    /* eslint-disable */\n    var amazonCognitoAdvancedSecurityDataConst = AmazonCognitoAdvancedSecurityData;\n    /* eslint-enable */\n\n    if (this.advancedSecurityDataCollectionFlag) {\n      var advancedSecurityData = amazonCognitoAdvancedSecurityDataConst.getData(username, this.userPoolId, this.clientId);\n      if (advancedSecurityData) {\n        var userContextData = {\n          EncodedData: advancedSecurityData\n        };\n        return userContextData;\n      }\n    }\n    return {};\n  };\n  return CognitoUserPool;\n}();\nexport { CognitoUserPool as default };","import SkapiError from '../main/error';\nimport { CognitoUserAttribute, CognitoUser, AuthenticationDetails, CognitoUserPool } from 'amazon-cognito-identity-js';\nimport validator from '../utils/validator';\nimport { request } from './request';\nimport { MD5 } from '../utils/utils';\nlet cognitoUser = null;\nexport let userPool = null;\nexport function setUserPool(params) {\n    userPool = new CognitoUserPool(params);\n}\nexport function consumeTicket(params) {\n    if (!params.ticket_id) {\n        throw new SkapiError('Ticket ID is required.', { code: 'INVALID_PARAMETER' });\n    }\n    return request.bind(this)('ticket', { ticket_id: params.ticket_id, exec: 'consume' }, { auth: true });\n}\nexport function releaseTicket(params) {\n    if (!params.ticket_id) {\n        throw new SkapiError('Ticket ID is required.', { code: 'INVALID_PARAMETER' });\n    }\n    return request.bind(this)('ticket', { ticket_id: params.ticket_id, exec: 'release' }, { auth: true });\n}\nexport function getTicketKey(params) {\n    if (!params.ticket_id) {\n        throw new SkapiError('Ticket ID is required.', { code: 'INVALID_PARAMETER' });\n    }\n    return request.bind(this)('ticket', { ticket_id: params.ticket_id, exec: 'request' }, { auth: true });\n}\nexport function authentication() {\n    if (!userPool)\n        throw new SkapiError('User pool is missing', { code: 'INVALID_REQUEST' });\n    const normalizeUserAttributes = (attr) => {\n        let user = {};\n        if (Array.isArray(attr)) {\n            let normalized_user_attribute_keys = {};\n            for (let i of attr) {\n                normalized_user_attribute_keys[i.Name] = i.Value;\n                if (i.Name === 'custom:service' && normalized_user_attribute_keys[i.Name] !== this.service) {\n                    throw new SkapiError('The user is not registered to the service.', { code: 'INVALID_REQUEST' });\n                }\n            }\n            attr = normalized_user_attribute_keys;\n        }\n        for (let k in attr) {\n            if (k.includes('custom:')) {\n                if (k === 'custom:service' && attr[k] !== this.service) {\n                    throw new SkapiError('The user is not registered to the service.', { code: 'INVALID_REQUEST' });\n                }\n                user[k.replace('custom:', '')] = attr[k];\n            }\n            else {\n                if (k === 'address') {\n                    let addr_main = attr[k];\n                    if (addr_main && typeof addr_main === 'object' && Object.keys(addr_main).length) {\n                        if (addr_main?.formatted) {\n                            try {\n                                attr[k] = JSON.parse(addr_main.formatted);\n                            }\n                            catch (err) {\n                                attr[k] = addr_main.formatted;\n                            }\n                        }\n                    }\n                }\n                user[k] = attr[k];\n            }\n        }\n        for (let k of [\n            'address_public',\n            'birthdate_public',\n            'email_public',\n            'gender_public',\n            'phone_number_public',\n            'access_group'\n        ]) {\n            if (k.includes('_public')) {\n                if (user.hasOwnProperty(k.split('_')[0]))\n                    user[k] = user.hasOwnProperty(k) ? !!Number(user[k]) : false;\n                else\n                    delete user[k];\n            }\n            else\n                user[k] = user.hasOwnProperty(k) ? Number(user[k]) : 0;\n        }\n        for (let k of [\n            'email',\n            'phone_number'\n        ]) {\n            if (user.hasOwnProperty(k)) {\n                if (user[k + '_verified'] === true || user[k + '_verified'] === 'true') {\n                    user[k + '_verified'] = true;\n                }\n                else {\n                    user[k + '_verified'] = false;\n                }\n            }\n            else {\n                delete user[k + '_verified'];\n            }\n        }\n        for (let k of [\n            'aud',\n            { from: 'auth_time', to: 'log' },\n            'cognito:username',\n            'event_id',\n            'exp',\n            'iat',\n            'iss',\n            'jti',\n            'origin_jti',\n            'secret_key',\n            { from: 'sub', to: 'user_id' },\n            'token_use'\n        ]) {\n            if (typeof k === 'string') {\n                delete user[k];\n            }\n            else {\n                user[k.to] = user[k.from];\n                delete user[k.from];\n            }\n        }\n        ;\n        this.__user = user;\n    };\n    const getUser = () => {\n        return new Promise((res, rej) => {\n            if (!this.session) {\n                res(null);\n            }\n            if (cognitoUser === null) {\n                rej(new SkapiError('Invalid session', { code: 'INVALID_REQUEST' }));\n            }\n            else {\n                cognitoUser.getUserAttributes((attrErr, attributes) => {\n                    if (attrErr)\n                        rej(attrErr);\n                    else {\n                        normalizeUserAttributes(attributes);\n                        res(this.user);\n                    }\n                });\n            }\n        });\n    };\n    const getSession = async (option) => {\n        let { refreshToken = false } = option || {};\n        return new Promise((res, rej) => {\n            cognitoUser = userPool?.getCurrentUser() || null;\n            if (cognitoUser === null) {\n                rej(null);\n                return;\n            }\n            cognitoUser.getSession((err, session) => {\n                if (err) {\n                    rej(err);\n                    return;\n                }\n                if (!session) {\n                    rej(new SkapiError('Current session does not exist.', { code: 'INVALID_REQUEST' }));\n                    return;\n                }\n                let respond = (session) => {\n                    let idToken = session.getIdToken().payload;\n                    if (idToken['custom:service'] !== this.service) {\n                        cognitoUser.signOut();\n                        this.session = null;\n                        rej(new SkapiError('Invalid session.', { code: 'INVALID_REQUEST' }));\n                        return;\n                    }\n                    this.session = session;\n                    normalizeUserAttributes(idToken);\n                    res(session);\n                };\n                if (refreshToken || !session.isValid()) {\n                    cognitoUser.refreshSession(session.getRefreshToken(), (refreshErr, refreshedSession) => {\n                        if (refreshErr) {\n                            rej(refreshErr);\n                        }\n                        else {\n                            if (refreshedSession.isValid()) {\n                                return respond(refreshedSession);\n                            }\n                            else {\n                                rej(new SkapiError('Invalid session.', { code: 'INVALID_REQUEST' }));\n                                return;\n                            }\n                        }\n                    });\n                }\n                else {\n                    return respond(session);\n                }\n            });\n        });\n    };\n    const createCognitoUser = async (email) => {\n        if (!email)\n            throw new SkapiError('E-Mail is required.', { code: 'INVALID_PARAMETER' });\n        let username = email.includes(this.service + '-') ? email : this.service + '-' + MD5.hash(email);\n        return {\n            cognitoUser: new CognitoUser({\n                Username: username,\n                Pool: userPool\n            }),\n            cognitoUsername: username\n        };\n    };\n    const authenticateUser = (email, password) => {\n        return new Promise((res, rej) => {\n            this.__request_signup_confirmation = null;\n            this.__disabledAccount = null;\n            createCognitoUser(email).then(initUser => {\n                let username = initUser.cognitoUsername;\n                let authenticationDetails = new AuthenticationDetails({\n                    Username: username,\n                    Password: password\n                });\n                initUser.cognitoUser.authenticateUser(authenticationDetails, {\n                    newPasswordRequired: (userAttributes, requiredAttributes) => {\n                        this.__request_signup_confirmation = username;\n                        if (userAttributes['custom:signup_ticket'] === 'PASS' || userAttributes['custom:signup_ticket'] === 'MEMBER') {\n                            initUser.cognitoUser.completeNewPasswordChallenge(password, {}, {\n                                onSuccess: _ => {\n                                    cognitoUser = initUser.cognitoUser;\n                                    getSession().then(session => res(this.user));\n                                },\n                                onFailure: (err) => {\n                                    rej(new SkapiError(err.message || 'Failed to authenticate user.', { code: err.code }));\n                                }\n                            });\n                        }\n                        else {\n                            rej(new SkapiError(\"User's signup confirmation is required.\", { code: 'SIGNUP_CONFIRMATION_NEEDED' }));\n                        }\n                    },\n                    onSuccess: _ => getSession().then(_ => {\n                        res(this.user);\n                    }),\n                    onFailure: (err) => {\n                        let error = [err.message || 'Failed to authenticate user.', err?.code || 'INVALID_REQUEST'];\n                        if (err.code === \"NotAuthorizedException\") {\n                            if (err.message === \"User is disabled.\") {\n                                this.__disabledAccount = username;\n                                error = ['This account is disabled.', 'USER_IS_DISABLED'];\n                            }\n                            else {\n                                error = ['Incorrect username or password.', 'INCORRECT_USERNAME_OR_PASSWORD'];\n                            }\n                        }\n                        else if (err.code === \"UserNotFoundException\") {\n                            error = ['Incorrect username or password.', 'INCORRECT_USERNAME_OR_PASSWORD'];\n                        }\n                        else if (err.code === \"TooManyRequestsException\" || err.code === \"LimitExceededException\") {\n                            error = ['Too many attempts. Please try again later.', 'REQUEST_EXCEED'];\n                        }\n                        let errCode = error[1];\n                        let errMsg = error[0];\n                        let customErr = error[0].split('#');\n                        if (customErr.length > 1) {\n                            customErr = customErr[customErr.length - 1].split(':');\n                            errCode = customErr[0];\n                            errMsg = customErr[1];\n                        }\n                        rej(new SkapiError(errMsg, { code: errCode, cause: err }));\n                    }\n                });\n            });\n        });\n    };\n    return {\n        getSession,\n        authenticateUser,\n        createCognitoUser,\n        getUser,\n    };\n}\nexport async function getProfile(options) {\n    await this.__authConnection;\n    try {\n        await authentication.bind(this)().getSession(options);\n        return this.user;\n    }\n    catch (err) {\n        return null;\n    }\n}\nexport async function checkAdmin() {\n    await this.__connection;\n    if (this.__user?.service === this.service) {\n        return this.__user?.owner === this.host;\n    }\n    else {\n        await logout.bind(this)();\n    }\n    return false;\n}\nexport async function logout() {\n    await this.__connection;\n    if (cognitoUser) {\n        cognitoUser.signOut();\n    }\n    let to_be_erased = {\n        'session': null,\n        '__startKeyHistory': {},\n        '__cached_requests': {},\n        '__user': null\n    };\n    for (let k in to_be_erased) {\n        this[k] = to_be_erased[k];\n    }\n    return 'SUCCESS: The user has been logged out.';\n}\nexport async function resendSignupConfirmation(redirect) {\n    if (!this.__request_signup_confirmation) {\n        throw new SkapiError('Least one login attempt is required.', { code: 'INVALID_REQUEST' });\n    }\n    if (redirect) {\n        redirect = validator.Url(redirect);\n    }\n    else {\n        redirect = undefined;\n    }\n    let resend = await request.bind(this)(\"confirm-signup\", {\n        username: this.__request_signup_confirmation,\n        redirect\n    });\n    return resend;\n}\nexport async function recoverAccount(redirect = false) {\n    if (typeof redirect === 'string') {\n        redirect = validator.Url(redirect);\n    }\n    else if (typeof redirect !== 'boolean') {\n        throw new SkapiError('Argument should be type: <boolean | string>.', { code: 'INVALID_REQUEST' });\n    }\n    if (!this.__disabledAccount) {\n        throw new SkapiError('Least one signin attempt of disabled account is required.', { code: 'INVALID_REQUEST' });\n    }\n    await request.bind(this)(\"recover-account\", { username: this.__disabledAccount, redirect });\n    this.__disabledAccount = null;\n    return 'SUCCESS: Recovery e-mail has been sent.';\n}\nexport async function jwtLogin(params) {\n    validator.Params(params, {\n        idToken: 'string',\n        clientId: 'string',\n        keyUrl: (v) => validator.Url(v),\n        provider: 'string',\n        nonce: 'string'\n    }, ['idToken', 'keyUrl', 'clientId']);\n    let { hashedPassword, username } = await request.bind(this)(\"jwt-login\", params);\n    try {\n        return login.bind(this)({ username: username, password: hashedPassword });\n    }\n    catch (err) {\n        if (err?.code === 'INCORRECT_USERNAME_OR_PASSWORD') {\n            throw new SkapiError('User has migrated the account. Login with the service username and password.', { code: 'INVALID_REQUEST' });\n        }\n    }\n}\nexport async function login(form) {\n    await this.logout();\n    let params = validator.Params(form, {\n        username: 'string',\n        email: 'string',\n        password: 'string'\n    }, ['password']);\n    if (params.email) {\n        try {\n            validator.Email(params.email);\n        }\n        catch (err) {\n            params.username = params.email;\n            delete params.email;\n        }\n    }\n    if (!params.username && !params.email) {\n        throw new SkapiError('Least one of \"username\" or \"email\" is required.', { code: 'INVALID_PARAMETER' });\n    }\n    return authentication.bind(this)().authenticateUser(params.username || params.email, params.password);\n}\nexport async function signup(form, option) {\n    let is_admin = await checkAdmin.bind(this)();\n    let params = validator.Params(form || {}, {\n        username: 'string',\n        email: (v) => validator.Email(v),\n        password: (v) => validator.Password(v),\n        name: 'string',\n        address: 'string',\n        gender: 'string',\n        birthdate: (v) => validator.Birthdate(v),\n        phone_number: (v) => validator.PhoneNumber(v),\n        email_public: ['boolean', () => false],\n        address_public: ['boolean', () => false],\n        gender_public: ['boolean', () => false],\n        birthdate_public: ['boolean', () => false],\n        phone_number_public: ['boolean', () => false],\n        access_group: 'number',\n        misc: 'string',\n        picture: (v) => validator.Url(v),\n        profile: (v) => validator.Url(v),\n        family_name: 'string',\n        given_name: 'string',\n        middle_name: 'string',\n        nickname: 'string',\n        website: (v) => validator.Url(v),\n    }, is_admin ? ['email'] : ['email', 'password']);\n    let admin_creating_account = is_admin && params.service && this.service !== params.service;\n    if (admin_creating_account) {\n        params.owner = this.__user.user_id;\n    }\n    else if (!is_admin) {\n        if (params.access_group) {\n            throw new SkapiError('Only admins can set \"access_group\" parameter.', { code: 'INVALID_PARAMETER' });\n        }\n        await this.logout();\n    }\n    option = validator.Params(option || {}, {\n        email_subscription: (v) => {\n            if (typeof v !== 'boolean') {\n                throw new SkapiError('\"option.email_subscription\" should be type: <boolean>.', { code: 'INVALID_PARAMETER' });\n            }\n            if (!option?.signup_confirmation) {\n                throw new SkapiError('\"option.signup_confirmation\" is required for email subscription.', { code: 'INVALID_PARAMETER' });\n            }\n            return v;\n        },\n        signup_confirmation: (v) => {\n            if (typeof v === 'string') {\n                return validator.Url(v);\n            }\n            else if (typeof v === 'boolean') {\n                return v;\n            }\n            else {\n                throw new SkapiError('\"option.signup_confirmation\" should be type: <string | boolean>.', { code: 'INVALID_PARAMETER' });\n            }\n        },\n        login: (v) => {\n            if (typeof v === 'boolean') {\n                if (option.signup_confirmation && v) {\n                    throw new SkapiError('\"login\" is not allowed when \"option.signup_confirmation\" is true.', { code: 'INVALID_PARAMETER' });\n                }\n                return v;\n            }\n            throw new SkapiError('\"option.login\" should be type: boolean.', { code: 'INVALID_PARAMETER' });\n        }\n    });\n    let logUser = option?.login || false;\n    let signup_confirmation = option?.signup_confirmation || false;\n    if (admin_creating_account && signup_confirmation && params?.password) {\n        throw new SkapiError('Admins cannot create an account with \"option.signup_confirmation\" option.', { code: 'INVALID_PARAMETER' });\n    }\n    if (params.email_public && !signup_confirmation) {\n        throw new SkapiError('\"option.signup_confirmation\" should be true if \"email_public\" is set to true.', { code: 'INVALID_PARAMETER' });\n    }\n    params.signup_confirmation = signup_confirmation;\n    params.email_subscription = option?.email_subscription || false;\n    if (!admin_creating_account) {\n        delete params.service;\n        delete params.owner;\n    }\n    let resp = await request.bind(this)(\"signup\", params, { auth: is_admin });\n    if (!is_admin) {\n        if (signup_confirmation) {\n            let u = await authentication.bind(this)().createCognitoUser(params.username || params.email);\n            cognitoUser = u.cognitoUser;\n            this.__request_signup_confirmation = u.cognitoUsername;\n            return \"SUCCESS: The account has been created. User's signup confirmation is required.\";\n        }\n        if (logUser) {\n            return login.bind(this)({ email: params.username || params.email, password: params.password });\n        }\n        return 'SUCCESS: The account has been created.';\n    }\n    return resp;\n}\nexport async function disableAccount() {\n    await this.__connection;\n    let result = await request.bind(this)('remove-account', { disable: this.__user.user_id }, { auth: true });\n    await logout.bind(this)();\n    return result;\n}\nexport async function resetPassword(form) {\n    await this.__connection;\n    let params = validator.Params(form, {\n        email: (v) => validator.Email(v),\n        code: ['number', 'string'],\n        new_password: (v) => validator.Password(v)\n    }, ['email', 'code', 'new_password']);\n    let code = params.code, new_password = params.new_password;\n    if (typeof code === 'number') {\n        code = code.toString();\n    }\n    return new Promise(async (res, rej) => {\n        let cognitoUser = (await authentication.bind(this)().createCognitoUser(params.email)).cognitoUser;\n        cognitoUser.confirmPassword(code, new_password, {\n            onSuccess: result => {\n                res(\"SUCCESS: New password has been set.\");\n            },\n            onFailure: (err) => {\n                rej(new SkapiError(err?.message || 'Failed to reset password.', { code: err?.code }));\n            }\n        });\n    });\n}\nasync function verifyAttribute(attribute, form) {\n    await this.__connection;\n    let code;\n    if (!cognitoUser) {\n        throw new SkapiError('The user has to be logged in.', { code: 'INVALID_REQUEST' });\n    }\n    if (attribute === 'email' || attribute === 'phone_number') {\n        if (!this.__user.hasOwnProperty(attribute)) {\n            throw new SkapiError(`No ${attribute === 'email' ? 'e-mail' : 'phone number'} to verify`, { code: 'INVALID_REQUEST' });\n        }\n        if (this.__user?.[`${attribute}_verified`]) {\n            return `SUCCESS: \"${attribute}\" is verified.`;\n        }\n        code = (form ? validator.Params(form, {\n            code: ['string']\n        }) : {}).code || '';\n    }\n    else {\n        return;\n    }\n    return new Promise((res, rej) => {\n        let callback = {\n            onSuccess: (result) => {\n                if (code) {\n                    authentication.bind(this)().getSession({ refreshToken: true }).then(() => {\n                        if (this.__user) {\n                            this.__user[attribute + '_verified'] = true;\n                        }\n                        res(`SUCCESS: \"${attribute}\" is verified.`);\n                    }).catch(err => {\n                        rej(err);\n                    });\n                }\n                else {\n                    res('SUCCESS: Verification code has been sent.');\n                }\n            },\n            onFailure: (err) => {\n                rej(new SkapiError(err.message || 'Failed to request verification code.', {\n                    code: err?.code\n                }));\n            }\n        };\n        if (code) {\n            cognitoUser?.verifyAttribute(attribute, code, callback);\n        }\n        else {\n            callback.inputVerificationCode = null;\n            cognitoUser?.getAttributeVerificationCode(attribute, callback);\n        }\n    });\n}\nexport function verifyPhoneNumber(form) {\n    return verifyAttribute.bind(this)('phone_number', form);\n}\nexport function verifyEmail(form) {\n    return verifyAttribute.bind(this)('email', form);\n}\nexport async function forgotPassword(form) {\n    await this.__connection;\n    let params = validator.Params(form, {\n        email: (v) => validator.Email(v)\n    }, ['email']);\n    return new Promise(async (res, rej) => {\n        let cognitoUser = (await authentication.bind(this)().createCognitoUser(params.email)).cognitoUser;\n        cognitoUser.forgotPassword({\n            onSuccess: result => {\n                res(\"SUCCESS: Verification code has been sent.\");\n            },\n            onFailure: (err) => {\n                rej(new SkapiError(err?.message || 'Failed to send verification code.', { code: err?.code || 'ERROR' }));\n            }\n        });\n    });\n}\nexport async function changePassword(params) {\n    await this.__connection;\n    if (!this.session) {\n        throw new SkapiError('User login is required.', { code: 'INVALID_REQUEST' });\n    }\n    let p = validator.Params(params, {\n        'current_password': 'string',\n        'new_password': 'string'\n    });\n    if (!p?.current_password) {\n        throw new SkapiError('\"current_password\" is required to change password.', { code: 'INVALID_PARAMETER' });\n    }\n    if (!p?.new_password) {\n        throw new SkapiError('\"new_password\" is required to change password.', { code: 'INVALID_PARAMETER' });\n    }\n    validator.Password(p.current_password);\n    validator.Password(p.new_password);\n    return new Promise((res, rej) => {\n        cognitoUser.changePassword(p.current_password, p.new_password, (err, result) => {\n            if (err) {\n                if (err?.code === \"InvalidParameterException\") {\n                    rej(new SkapiError('Invalid password parameter.', { code: 'INVALID_PARAMETER' }));\n                }\n                else if (err?.code === \"NotAuthorizedException\") {\n                    rej(new SkapiError('Incorrect password.', { code: 'INVALID_REQUEST' }));\n                }\n                else if (err?.code === \"TooManyRequestsException\" || err?.code === \"LimitExceededException\") {\n                    rej(new SkapiError('Too many attempts. Please try again later.', { code: 'REQUEST_EXCEED' }));\n                }\n                else {\n                    rej(new SkapiError(err?.message || 'Failed to change user password.', { code: err?.code || err?.name }));\n                }\n            }\n            res('SUCCESS: Password has been changed.');\n        });\n    });\n}\nexport async function updateProfile(form) {\n    await this.__connection;\n    if (!this.session) {\n        throw new SkapiError('User login is required.', { code: 'INVALID_REQUEST' });\n    }\n    let params = validator.Params(form || {}, {\n        email: (v) => validator.Email(v),\n        address: (v) => {\n            if (!v)\n                return '';\n            if (typeof v === 'string') {\n                return v;\n            }\n            if (typeof v === 'object') {\n                return JSON.stringify(v);\n            }\n            return '';\n        },\n        name: 'string',\n        gender: 'string',\n        birthdate: (v) => validator.Birthdate(v),\n        phone_number: (v) => validator.PhoneNumber(v),\n        email_public: 'boolean',\n        phone_number_public: 'boolean',\n        address_public: 'boolean',\n        gender_public: 'boolean',\n        birthdate_public: 'boolean',\n        misc: 'string',\n        picture: (v) => validator.Url(v),\n        profile: (v) => validator.Url(v),\n        family_name: 'string',\n        given_name: 'string',\n        middle_name: 'string',\n        nickname: 'string',\n        website: (v) => validator.Url(v),\n    });\n    if (params && typeof params === 'object' && !Object.keys(params).length) {\n        return this.user;\n    }\n    if (params.email) {\n        params['preferred_username'] = this.service + '-' + MD5.hash(params.email);\n    }\n    let collision = [\n        ['email_public', 'email_verified', \"User's E-Mail should be verified to set\"],\n        ['phone_number_public', 'phone_number_verified', \"User's phone number should be verified to set\"]\n    ];\n    if (this.__user) {\n        for (let c of collision) {\n            if (params[c[0]] && !this.__user[c[1]]) {\n                throw new SkapiError(`${c[2]} \"${c[0]}\" to true.`, { code: 'INVALID_REQUEST' });\n            }\n        }\n    }\n    let toRemove = [];\n    for (let k in params) {\n        if (params[k] === this.user[k]) {\n            toRemove.push(k);\n            continue;\n        }\n        let customAttr = [\n            'email_public',\n            'phone_number_public',\n            'address_public',\n            'gender_public',\n            'birthdate_public',\n            'misc'\n        ];\n        if (customAttr.includes(k)) {\n            let parseValue = params[k];\n            if (typeof parseValue === 'boolean') {\n                parseValue = parseValue ? '1' : '0';\n            }\n            params['custom:' + k] = parseValue;\n            toRemove.push(k);\n        }\n    }\n    for (let k of toRemove) {\n        delete params[k];\n    }\n    if (params && typeof params === 'object' && Object.keys(params).length) {\n        let toSet = [];\n        for (let key in params) {\n            toSet.push(new CognitoUserAttribute({\n                Name: key,\n                Value: params[key]\n            }));\n        }\n        await new Promise((res, rej) => {\n            cognitoUser?.updateAttributes(toSet, (err, result) => {\n                if (err) {\n                    rej([\n                        err?.code || err?.name,\n                        err?.message || `Failed to update user settings.`\n                    ]);\n                }\n                res(result);\n            });\n        });\n        await authentication.bind(this)().getSession({ refreshToken: true });\n        return this.user;\n    }\n    return this.user;\n}\nexport async function getUsers(params, fetchOptions) {\n    if (!params) {\n        params = {\n            searchFor: 'timestamp',\n            condition: '>',\n            value: 0\n        };\n        if (!fetchOptions) {\n            fetchOptions = {};\n        }\n        fetchOptions.ascending = false;\n    }\n    let isAdmin = await checkAdmin.bind(this)();\n    if (isAdmin && !params.hasOwnProperty('service')) {\n        throw new SkapiError('Service ID is required.', { code: 'INVALID_PARAMETER' });\n    }\n    const searchForTypes = {\n        'user_id': (v) => validator.UserId(v),\n        'email': (v) => validator.Email(v),\n        'phone_number': (v) => validator.PhoneNumber(v),\n        'locale': (v) => {\n            if (typeof v !== 'string' || typeof v === 'string' && v.length > 5) {\n                throw new SkapiError('Value of \"locale\" should be a country code.', { code: 'INVALID_PARAMETER' });\n            }\n            return v;\n        },\n        'name': 'string',\n        'address': 'string',\n        'gender': 'string',\n        'birthdate': (v) => validator.Birthdate(v),\n        'subscribers': 'number',\n        'timestamp': 'number',\n        'access_group': 'number',\n        'approved': (v) => {\n            if (v) {\n                return 'by_admin:approved';\n            }\n            else {\n                return 'by_admin:suspended';\n            }\n        }\n    };\n    let required = ['searchFor', 'value'];\n    params = validator.Params(params, {\n        searchFor: [\n            'user_id',\n            'name',\n            'email',\n            'phone_number',\n            'address',\n            'gender',\n            'birthdate',\n            'locale',\n            'subscribers',\n            'timestamp',\n            'access_group',\n            'approved'\n        ],\n        condition: ['>', '>=', '=', '<', '<=', 'gt', 'gte', 'eq', 'lt', 'lte', () => '='],\n        value: (v) => {\n            let checker = searchForTypes[params.searchFor];\n            if (typeof checker === 'function') {\n                if (!params?.condition || params?.condition === '=' || params?.range) {\n                    return checker(v);\n                }\n            }\n            else if (typeof v !== checker) {\n                throw new SkapiError(`Value does not match the type of \"${params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n            }\n            return v;\n        },\n        range: (v) => {\n            let checker = searchForTypes[params.searchFor];\n            if (typeof checker === 'function') {\n                return checker(v);\n            }\n            else if (typeof v !== checker) {\n                throw new SkapiError(`Range does not match the type of \"${params.searchFor}\" index.`, { code: 'INVALID_PARAMETER' });\n            }\n            return v;\n        }\n    }, required);\n    if (params?.condition && params?.condition !== '=' && params.hasOwnProperty('range')) {\n        throw new SkapiError('Conditions does not apply on range search.', { code: 'INVALID_PARAMETER' });\n    }\n    if (params.searchFor === 'user_id' && params.condition !== '=') {\n        throw new SkapiError(`Conditions are not allowed on \"user_id\"`, { code: 'INVALID_PARAMETER' });\n    }\n    if (typeof params?.value === 'string' && !params?.value) {\n        throw new SkapiError('Value should not be an empty string.', { code: 'INVALID_PARAMETER' });\n    }\n    if (typeof params?.searchFor === 'string' && !params?.searchFor) {\n        throw new SkapiError('\"searchFor\" should not be an empty string.', { code: 'INVALID_PARAMETER' });\n    }\n    return request.bind(this)('get-users', params, { auth: true, fetchOptions });\n}\nexport async function lastVerifiedEmail(params) {\n    await this.__connection;\n    let res = await request.bind(this)('last-verified-email', params, { auth: true });\n    if (res.includes('SUCCESS')) {\n        await authentication.bind(this)().getSession({ refreshToken: true });\n        return this.user;\n    }\n    return res;\n}\nexport async function requestUsernameChange(params) {\n    await this.__connection;\n    params = validator.Params(params, {\n        username: validator.Email,\n        redirect: validator.Url\n    }, ['username']);\n    return await request.bind(this)('request-username-change', params, { auth: true });\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport SkapiError from './error';\nimport validator from '../utils/validator';\nimport { getRecords, postRecord, deleteRecords, getTables, getIndexes, getTags, uploadFiles, getFile, grantPrivateRecordAccess, removePrivateRecordAccess, listPrivateRecordAccess, requestPrivateRecordAccessKey, deleteFiles, normalizeRecord } from '../methods/database';\nimport { connectRealtime, joinRealtime, postRealtime, closeRealtime, getRealtimeUsers, getRealtimeGroups } from '../methods/realtime';\nimport { request, secureRequest, mock, getFormResponse, formHandler, getConnection, clientSecretRequest } from '../methods/request';\nimport { subscribe, unsubscribe, blockSubscriber, unblockSubscriber, getSubscriptions, subscribeNewsletter, getNewsletters, unsubscribeNewsletter, getNewsletterSubscription } from '../methods/subscription';\nimport { checkAdmin, getProfile, logout, recoverAccount, resendSignupConfirmation, authentication, login, signup, disableAccount, resetPassword, verifyEmail, verifyPhoneNumber, forgotPassword, changePassword, updateProfile, getUsers, setUserPool, userPool, lastVerifiedEmail, requestUsernameChange, consumeTicket, releaseTicket, getTicketKey, jwtLogin } from '../methods/user';\nexport default class Skapi {\n    get user() {\n        if (this.__user && Object.keys(this.__user).length) {\n            return JSON.parse(JSON.stringify(this.__user));\n        }\n        else {\n            return null;\n        }\n    }\n    set user(value) {\n    }\n    constructor(service, owner, options, __etc) {\n        this.version = '1.0.49';\n        this.session = null;\n        this.connection = null;\n        this.host = 'skapi';\n        this.hostDomain = 'skapi.com';\n        this.target_cdn = 'd3e9syvbtso631';\n        this.__disabledAccount = null;\n        this.__cached_requests = {};\n        this.__startKeyHistory = {};\n        this.__request_signup_confirmation = null;\n        this.__private_access_key = {};\n        this.__class_properties_has_been_cached = false;\n        this.__user = null;\n        this.validate = {\n            userId(val) {\n                try {\n                    validator.UserId(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            url(val) {\n                try {\n                    validator.Url(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            phoneNumber(val) {\n                try {\n                    validator.PhoneNumber(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            birthdate(val) {\n                try {\n                    validator.Birthdate(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            },\n            email(val) {\n                try {\n                    validator.Email(val);\n                    return true;\n                }\n                catch (err) {\n                    return false;\n                }\n            }\n        };\n        this.checkAdmin = checkAdmin.bind(this);\n        this.request = request.bind(this);\n        this.normalizeRecord = normalizeRecord.bind(this);\n        if (typeof service !== 'string' || typeof owner !== 'string') {\n            throw new SkapiError('\"service\" and \"owner\" should be type <string>.', { code: 'INVALID_PARAMETER' });\n        }\n        if (!service || !owner) {\n            throw new SkapiError('\"service\" and \"owner\" is required', { code: 'INVALID_PARAMETER' });\n        }\n        if (owner !== this.host) {\n            validator.UserId(owner, '\"owner\"');\n        }\n        this.service = service;\n        this.owner = owner;\n        let autoLogin = !!options?.autoLogin;\n        this.target_cdn = __etc?.target_cdn || this.target_cdn;\n        this.hostDomain = __etc?.hostDomain || this.hostDomain;\n        const cdn_domain = `https://${this.target_cdn}.cloudfront.net`;\n        let sreg = service.substring(0, 4);\n        this.admin_endpoint = fetch(`${cdn_domain}/${sreg}/admin.json`)\n            .then(response => response.blob())\n            .then(blob => new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }))\n            .then(data => typeof data === 'string' ? JSON.parse(window.atob(data.split(',')[1])) : null);\n        this.record_endpoint = fetch(`${cdn_domain}/${sreg}/record.json`)\n            .then(response => response.blob())\n            .then(blob => new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }))\n            .then(data => typeof data === 'string' ? JSON.parse(window.atob(data.split(',')[1])) : null);\n        if (!window.sessionStorage) {\n            throw new Error(`This browser does not support skapi.`);\n        }\n        const restore = JSON.parse(window.sessionStorage.getItem(`${service}#${owner}`) || 'null');\n        if (restore?.connection) {\n            for (let k in restore) {\n                this[k] = restore[k];\n            }\n        }\n        this.__authConnection = (async () => {\n            const admin_endpoint = await this.admin_endpoint;\n            setUserPool({\n                UserPoolId: admin_endpoint.userpool_id,\n                ClientId: admin_endpoint.userpool_client\n            });\n            if (!restore?.connection && !autoLogin) {\n                let currentUser = userPool.getCurrentUser();\n                if (currentUser) {\n                    currentUser.signOut();\n                }\n            }\n            if (autoLogin) {\n                try {\n                    await authentication.bind(this)().getSession({ refreshToken: !restore?.connection });\n                }\n                catch (err) {\n                    this.__user = null;\n                }\n            }\n        })();\n        this.__connection = (async () => {\n            let process = null;\n            if (!restore?.connection) {\n                process = this.updateConnection();\n            }\n            const storeClassProperties = () => {\n                if (this.__class_properties_has_been_cached) {\n                    return;\n                }\n                let exec = () => {\n                    let data = {};\n                    const to_be_cached = [\n                        '__startKeyHistory',\n                        '__cached_requests',\n                        '__request_signup_confirmation',\n                        'connection',\n                    ];\n                    if (this.connection) {\n                        for (let k of to_be_cached) {\n                            data[k] = this[k];\n                        }\n                        window.sessionStorage.setItem(`${service}#${owner}`, JSON.stringify(data));\n                        this.__class_properties_has_been_cached = true;\n                    }\n                };\n                return (process instanceof Promise) ? process.then(() => exec()) : exec();\n            };\n            window.addEventListener('beforeunload', () => {\n                storeClassProperties();\n                this.closeRealtime();\n            });\n            await process;\n            await this.__authConnection;\n            let skapi = `%c\\r\\n          $$\\\\                          $$\\\\ \\r\\n          $$ |                         \\\\__|\\r\\n $$$$$$$\\\\ $$ |  $$\\\\ $$$$$$\\\\   $$$$$$\\\\  $$\\\\ \\r\\n$$  _____|$$ | $$  |\\\\____$$\\\\ $$  __$$\\\\ $$ |\\r\\n\\\\$$$$$$\\\\  $$$$$$  \\/ $$$$$$$ |$$ \\/  $$ |$$ |\\r\\n \\\\____$$\\\\ $$  _$$< $$  __$$ |$$ |  $$ |$$ |\\r\\n$$$$$$$  |$$ | \\\\$$\\\\\\\\$$$$$$$ |$$$$$$$  |$$ |\\r\\n\\\\_______\\/ \\\\__|  \\\\__|\\\\_______|$$  ____\\/ \\\\__|\\r\\n                             $$ |          \\r\\n                             $$ |          \\r\\n                             \\\\__|          \\r\\n`;\n            console.log(`Built with:\\n${skapi}Version: ${this.version}\\n\\nDocumentation: https://docs.skapi.com`, `font-family: monospace; color:blue;`);\n            if (this.connection.group === 1) {\n                console.log(`%cSKAPI: THE SERVICE IS IN TRIAL MODE. ALL THE USERS AND DATA WILL BE INITIALIZED EVERY 7 DAYS.`, `font-family: monospace; color:red;`);\n            }\n            return this.connection;\n        })();\n    }\n    async updateConnection() {\n        this.connection = await request.bind(this)('service', {\n            service: this.service,\n            owner: this.owner\n        }, { bypassAwaitConnection: true, method: 'get' });\n        return this.connection;\n    }\n    connectRealtime(cb) {\n        return connectRealtime.bind(this)(cb);\n    }\n    jwtLogin(params) {\n        return jwtLogin.bind(this)(params);\n    }\n    clientSecretRequest(params) {\n        return clientSecretRequest.bind(this)(params);\n    }\n    consumeTicket(params) {\n        return consumeTicket.bind(this)(params);\n    }\n    releaseTicket(params) {\n        return releaseTicket.bind(this)(params);\n    }\n    getTicketKey(params) {\n        return getTicketKey.bind(this)(params);\n    }\n    closeRealtime() {\n        return closeRealtime.bind(this)();\n    }\n    getRealtimeUsers(params, fetchOptions) {\n        return getRealtimeUsers.bind(this)(params, fetchOptions);\n    }\n    getRealtimeGroups(params, fetchOptions) {\n        return getRealtimeGroups.bind(this)(params, fetchOptions);\n    }\n    postRealtime(message, recipient) {\n        return postRealtime.bind(this)(message, recipient);\n    }\n    joinRealtime(params) {\n        return joinRealtime.bind(this)(params);\n    }\n    getConnection() {\n        return getConnection.bind(this)();\n    }\n    getProfile(options) {\n        return getProfile.bind(this)(options);\n    }\n    getFile(url, config) {\n        return getFile.bind(this)(url, config);\n    }\n    secureRequest(params) {\n        return secureRequest.bind(this)(params);\n    }\n    getFormResponse() {\n        return getFormResponse.bind(this)();\n    }\n    getRecords(query, fetchOptions) {\n        return getRecords.bind(this)(query, fetchOptions);\n    }\n    getTables(query, fetchOptions) {\n        return getTables.bind(this)(query, fetchOptions);\n    }\n    getIndexes(query, fetchOptions) { return getIndexes.bind(this)(query, fetchOptions); }\n    getTags(query, fetchOptions) { return getTags.bind(this)(query, fetchOptions); }\n    deleteRecords(params) { return deleteRecords.bind(this)(params); }\n    resendSignupConfirmation(redirect) {\n        return resendSignupConfirmation.bind(this)(redirect);\n    }\n    recoverAccount(redirect = false) {\n        return recoverAccount.bind(this)(redirect);\n    }\n    getUsers(params, fetchOptions) {\n        return getUsers.bind(this)(params, fetchOptions);\n    }\n    disableAccount() {\n        return disableAccount.bind(this)();\n    }\n    lastVerifiedEmail(params) {\n        return lastVerifiedEmail.bind(this)(params);\n    }\n    unsubscribeNewsletter(params) {\n        return unsubscribeNewsletter.bind(this)(params);\n    }\n    getNewsletters(params, fetchOptions) {\n        return getNewsletters.bind(this)(params, fetchOptions);\n    }\n    getNewsletterSubscription(params) {\n        return getNewsletterSubscription.bind(this)(params);\n    }\n    requestUsernameChange(params) { return requestUsernameChange.bind(this)(params); }\n    grantPrivateRecordAccess(params) { return grantPrivateRecordAccess.bind(this)(params); }\n    removePrivateRecordAccess(params) {\n        return removePrivateRecordAccess.bind(this)(params);\n    }\n    listPrivateRecordAccess(params) { return listPrivateRecordAccess.bind(this)(params); }\n    requestPrivateRecordAccessKey(record_id) {\n        return requestPrivateRecordAccessKey.bind(this)(record_id);\n    }\n    deleteFiles(params) {\n        return deleteFiles.bind(this)(params);\n    }\n    uploadFiles(fileList, params) { return uploadFiles.bind(this)(fileList, params); }\n    mock(data, options) { return mock.bind(this)(data, options); }\n    login(form) { return login.bind(this)(form); }\n    logout() { return logout.bind(this)(); }\n    signup(form, option) {\n        return signup.bind(this)(form, option);\n    }\n    resetPassword(form) { return resetPassword.bind(this)(form); }\n    verifyEmail(form) {\n        return verifyEmail.bind(this)(form);\n    }\n    verifyPhoneNumber(form) {\n        return verifyPhoneNumber.bind(this)(form);\n    }\n    forgotPassword(form) {\n        return forgotPassword.bind(this)(form);\n    }\n    changePassword(params) { return changePassword.bind(this)(params); }\n    updateProfile(form) { return updateProfile.bind(this)(form); }\n    postRecord(form, config) { return postRecord.bind(this)(form, config); }\n    getSubscriptions(params, fetchOptions) {\n        return getSubscriptions.bind(this)(params, fetchOptions);\n    }\n    subscribe(params) {\n        return subscribe.bind(this)(params);\n    }\n    unsubscribe(params) {\n        return unsubscribe.bind(this)(params);\n    }\n    blockSubscriber(params) {\n        return blockSubscriber.bind(this)(params);\n    }\n    unblockSubscriber(params) {\n        return unblockSubscriber.bind(this)(params);\n    }\n    subscribeNewsletter(form) {\n        return subscribeNewsletter.bind(this)(form);\n    }\n}\n__decorate([\n    formHandler()\n], Skapi.prototype, \"consumeTicket\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"releaseTicket\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getTicketKey\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getRealtimeUsers\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getRealtimeGroups\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"postRealtime\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"joinRealtime\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getConnection\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getProfile\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getFile\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"secureRequest\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getFormResponse\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getRecords\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getTables\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getIndexes\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getTags\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"deleteRecords\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"resendSignupConfirmation\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"recoverAccount\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getUsers\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"disableAccount\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"lastVerifiedEmail\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"unsubscribeNewsletter\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getNewsletters\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getNewsletterSubscription\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"requestUsernameChange\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"grantPrivateRecordAccess\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"removePrivateRecordAccess\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"listPrivateRecordAccess\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"requestPrivateRecordAccessKey\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"deleteFiles\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"uploadFiles\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"mock\", null);\n__decorate([\n    formHandler({ preventMultipleCalls: true })\n], Skapi.prototype, \"login\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"logout\", null);\n__decorate([\n    formHandler({ preventMultipleCalls: true })\n], Skapi.prototype, \"signup\", null);\n__decorate([\n    formHandler({ preventMultipleCalls: true })\n], Skapi.prototype, \"resetPassword\", null);\n__decorate([\n    formHandler({ preventMultipleCalls: true })\n], Skapi.prototype, \"verifyEmail\", null);\n__decorate([\n    formHandler({ preventMultipleCalls: true })\n], Skapi.prototype, \"verifyPhoneNumber\", null);\n__decorate([\n    formHandler({ preventMultipleCalls: true })\n], Skapi.prototype, \"forgotPassword\", null);\n__decorate([\n    formHandler({ preventMultipleCalls: true })\n], Skapi.prototype, \"changePassword\", null);\n__decorate([\n    formHandler({ preventMultipleCalls: true })\n], Skapi.prototype, \"updateProfile\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"postRecord\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"getSubscriptions\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"subscribe\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"unsubscribe\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"blockSubscriber\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"unblockSubscriber\", null);\n__decorate([\n    formHandler()\n], Skapi.prototype, \"subscribeNewsletter\", null);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","arr","Arr","_byteLength","curByte","len","revLookup","charCodeAt","fromByteArray","uint8","length","extraBytes","parts","maxChunkLength","len2","push","encodeChunk","lookup","join","Uint8Array","Array","code","Error","indexOf","start","end","num","output","base64","ieee754","isArray","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","prototype","arg","encodingOrOffset","this","allocUnsafe","from","value","TypeError","ArrayBuffer","array","byteOffset","undefined","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","slice","fromString","obj","isBuffer","checked","copy","buffer","val","type","data","fromObject","assertSize","size","toString","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","b","n","m","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","call","lastIndexOf","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","Math","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","g","foo","subarray","e","typedArraySupport","poolSize","_augment","Symbol","species","Object","defineProperty","configurable","alloc","fill","allocUnsafeSlow","_isBuffer","compare","x","y","concat","list","pos","swap16","swap32","swap64","arguments","equals","inspect","max","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","set","INVALID_BASE64_RE","Infinity","leadSurrogate","trim","replace","stringtrim","base64clean","src","dst","CryptoJS","crypto","window","globalThis","msCrypto","err","cryptoSecureRandomInt","getRandomValues","Uint32Array","randomBytes","create","F","subtype","C","C_lib","lib","Base","extend","overrides","mixIn","hasOwnProperty","init","$super","instance","properties","propertyName","clone","WordArray","words","sigBytes","encoder","Hex","stringify","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","ceil","random","nBytes","C_enc","enc","hexChars","bite","parse","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","decodeURIComponent","escape","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","doFlush","processedWords","dataWords","dataSigBytes","blockSize","nBlocksReady","nWordsReady","_minBufferSize","nBytesReady","_doProcessBlock","splice","C_algo","Hasher","cfg","_doReset","update","messageUpdate","finalize","_doFinalize","_createHelper","hasher","message","_createHmacHelper","key","HMAC","algo","Base64","map","_map","base64Chars","triplet","charAt","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","paddingIndex","bitsCombined","parseLoop","HmacSHA256","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","superInit","subInit","typedArray","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Float32Array","Float64Array","typedArrayByteLength","H","K","isPrime","sqrtN","sqrt","factor","getFractionalBits","nPrime","W","SHA256","_hash","M","d","f","h","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","t1","nBitsTotal","nBitsLeft","isLE","mLen","eLen","eMax","eBias","nBits","s","NaN","rt","abs","log","LN2","fetch","result","attributes","decode","converter","api","document","path","defaults","expires","Date","toUTCString","JSON","test","stringifiedAttributes","attributeName","split","cookie","get","json","jar","cookies","name","getJSON","remove","withConverter","Promise","t","r","XMLHttpRequest","o","u","ok","status","statusText","url","responseURL","text","resolve","responseText","then","blob","Blob","response","headers","keys","entries","has","l","open","method","onload","getAllResponseHeaders","onerror","withCredentials","credentials","setRequestHeader","send","body","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","enumerable","Function","prop","toStringTag","SkapiError","constructor","error","options","super","cause","MD5","hash","console","warn","sb","lastA","lastB","lastC","lastD","ff","gg","hh","ii","ad","rh","alphabet","rl","cm","q","numBlocks","blocks","generateRandom","counter","characters","extractFormMeta","form","appendData","meta","fchar","lchar","nestKey","pop","k","to_bin","FormData","totalFileSize","files","pair","v","File","file","FileList","idx","item","SubmitEvent","HTMLFormElement","inputs","querySelectorAll","textarea","object","UserId","id","param","PhoneNumber","substring","Birthdate","birthdate","date_regex","RegExp","Password","password","Email","email","paramName","Url","baseUrl","location","origin","check","_url","cu","curr_loc","href","URL","protocol","specialChars","p","allowPeriods","allowWhiteSpace","checkStr","Params","params","struct","required","bypassCheck","_parentKey","isObjectWithKeys","_params","errToThrow","isInvalid","structValue","defaultSetter","def","errMsg","__pendingRequest","getConnection","__connection","async","request","auth","bypassAwaitConnection","token","session","idToken","jwtToken","logout","currTime","now","payload","exp","authentication","getSession","refreshToken","isExternalUrl","endpoint","dest","endpoints","all","admin_endpoint","record_endpoint","admin","record","public","admin_public","private","admin_private","record_private","record_public","get_ep","getEndpoint","service","owner","responseType","fetchOptions","fetchMore","progress","fetOpt","startKey","ascending","assign","isForm","formData","cb","requestKey","load_startKey_keys","bind","Authorization","meta_key","btoa","merge","contentType","opt","_post","_get","noParams","update_startKey_keys","hashedParam","option","hashedParams","orderObjectKeys","sortObject","sort","reduce","_obj","__startKeyHistory","__cached_requests","hashedParams_cached","list_of_startKeys","last_startKey_key","cache_hashedParams","endOfList","startKeyHistory","fetched","startKey_string","_fetch","received","opts","rej","xhr","toUpperCase","errCode","onabort","ontimeout","onprogress","loaded","total","abort","upload","fetchProgress","clientSecretRequest","hasSecret","checkClientSecretPlaceholder","clientSecretName","secureRequest","paramsStruct","sync","mock","getFormResponse","responseKey","stored","sessionStorage","getItem","pendPromise","formHandler","preventMultipleCalls","propertyKey","descriptor","fn","routeWithDataKey","formEl","actionDestination","fileBase64String","preventDefault","currentUrl","action","placeholders","inputElement","querySelector","reader","FileReader","readAsDataURL","handleResponse","setItem","handleError","executeMethod","is_err","resolved","finally","__index_number_range","fromBase62","normalizeRecord","user_id","record_id","updated","uploaded","table","access_group","reference","reference_limit","allow_multiple_reference","referenced_count","ip","bin","readonly","reverse","prev","curr","rSplit","subscription","splitDec","calcNumb","parseFloat","normalizeTypedString","index","tags","binObj","splitPath","filename","pathKey","getFile","dataType","config","private_key","__private_access_key","deleteFiles","storage","uploadFiles","fileList","params_request","formDataKeys","fileEntries","entry","getSignedParams","reserved_key","progressCallback","completed","failed","toBase62","base62Chars","bin_endpoints","signedParams","sizeKey","fields","cdn","append","currentFile","isValidEndpoint","splitUrl","splitHost","subdomain","target_key","needAuth","__user","createElement","appendChild","setAttribute","click","removeChild","onloadend","getRecords","query","indexTypes","tp","condition","range","tag","user","is_reference_fetch","outputObj","ref_user","isAdmin","checkAdmin","group","reference_private_key","postRecord","config_chkd","remove_bin","subscription_group","postData","formMeta","rec","bin_formData","uploadFileParams","getTables","convert","getIndexes","order","by","iSplit","number_of_records","cnt_rec","getTags","tSplit","deleteRecords","table_p","grantPrivateRecordAccess","recordAccess","execute","removePrivateRecordAccess","listPrivateRecordAccess","rec_usr","requestPrivateRecordAccessKey","req","prepareWebsocket","getProfile","WebSocket","websocket_private","accessToken","reconnectAttempts","closeRealtime","socket","__socket","close","__socket_group","connectRealtime","delay","setTimeout","onopen","rid","onmessage","event","decodeURI","sender","onclose","wasClean","postRealtime","recipient","readyState","uid","content","joinRealtime","getRealtimeUsers","getRealtimeGroups","searchFor","number_of_users","cnt","subscriptionGroupCheck","getSubscriptions","_mapper","subscriber","blocked","subSplit","timestamp","stmp","grp","subscribe","unsubscribe","blockSubscriber","block","unblockSubscriber","unblock","getNewsletterSubscription","subt","active","subscribed_email","subscribeNewsletter","redirect","unsubscribeNewsletter","param_send","getNewsletters","searchType","mails","remap","remapped","AuthenticationDetails","_ref","ValidationData","Username","AuthParameters","ClientMetadata","validationData","authParameters","clientMetadata","username","_proto","getUsername","getPassword","getValidationData","getAuthParameters","getClientMetadata","hexStringify","nbi","dbits","inBrowser","navigator","appName","am","w","xl","xh","DB","DM","DV","FV","F1","F2","rr","vv","BI_RC","int2char","intAt","nbv","fromInt","nbits","Montgomery","mp","invDigit","mpl","mph","um","mt2","dlShiftTo","divRemTo","compareTo","ZERO","subTo","revert","copyTo","u0","drShiftTo","mulTo","multiplyTo","sqrTo","squareTo","mi","sh","lShiftTo","bs","cbs","bm","ds","rShiftTo","pm","pt","ts","ms","nsh","ys","y0","yt","d1","d2","ONE","qd","addTo","negate","km","bitLength","mod","add","subtract","multiply","divide","modPow","callback","z","k1","g2","is1","r2","HEX_MSB_REGEX","AuthenticationHelper","PoolName","N","BigInteger","hexHash","padHex","smallAValue","generateRandomSmallA","getLargeAValue","infoBits","poolName","getSmallAValue","_this","largeAValue","calculateA","hexRandom","generateRandomString","getRandomPassword","randomPassword","getSaltDevices","SaltToHashDevices","getVerifierDevices","verifierDevices","generateHashDevice","deviceGroupKey","_this2","combinedString","hashedString","verifierDevicesNotPadded","_this3","A","calculateU","B","UHexHash","hashHex","computehkdf","ikm","salt","infoBitsWordArray","ikmWordArray","saltWordArray","prk","hmac","getPasswordAuthenticationKey","serverBValue","_this4","UValue","usernamePassword","usernamePasswordHash","xValue","calculateS","sValue","hkdf","_this5","gModPowXN","err2","getNewPasswordRequiredChallengeUserAttributePrefix","bigInt","isNegative","invertedNibbles","invertedNibble","startsWith","CognitoJwtToken","decodePayload","getJwtToken","getExpiration","getIssuedAt","iat","_setPrototypeOf","setPrototypeOf","CognitoAccessToken","_CognitoJwtToken","subClass","superClass","_temp","AccessToken","CognitoIdToken","IdToken","CognitoRefreshToken","RefreshToken","getToken","CognitoUserSession","ClockDrift","clockDrift","calculateClockDrift","getIdToken","getRefreshToken","getAccessToken","getClockDrift","isValid","adjusted","monthNames","weekNames","DateHelper","getNowString","weekDay","getUTCDay","month","getUTCMonth","day","getUTCDate","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","getUTCFullYear","CognitoUserAttribute","Name","Value","getValue","setValue","getName","setName","dataMemory","MemoryStorage","removeItem","clear","StorageHelper","storageWindow","localStorage","exception","getStorage","userAgent","CognitoUser","Pool","pool","Session","client","signInUserSession","authenticationFlowType","Storage","keyPrefix","getClientId","userDataKey","setSignInUserSession","clearCachedUserData","cacheTokens","getSignInUserSession","getAuthenticationFlowType","setAuthenticationFlowType","initiateAuth","authDetails","USERNAME","clientMetaData","jsonReq","AuthFlow","ClientId","getUserContextData","UserContextData","onFailure","challengeName","ChallengeName","challengeParameters","ChallengeParameters","customChallenge","getCognitoUserSession","AuthenticationResult","onSuccess","authenticateUser","authenticateUserPlainUsernamePassword","authenticateUserDefaultAuth","authenticationHelper","getUserPoolName","dateHelper","deviceKey","DEVICE_KEY","errOnAValue","aValue","SRP_A","CHALLENGE_NAME","USER_ID_FOR_SRP","SRP_B","SALT","getCachedDeviceKeyAndPassword","errOnHkdf","dateNow","SECRET_BLOCK","signatureString","challengeResponses","PASSWORD_CLAIM_SECRET_BLOCK","TIMESTAMP","PASSWORD_CLAIM_SIGNATURE","jsonReqResp","ChallengeResponses","respondToAuthChallenge","challenge","challengeCallback","errChallenge","dataChallenge","clearCachedDeviceKeyAndPassword","errAuthenticate","dataAuthenticate","authenticateUserInternal","PASSWORD","authResult","mfaRequired","selectMFAType","mfaSetup","totpRequired","userAttributes","rawRequiredAttributes","requiredAttributes","userAttributesPrefix","newPasswordRequired","getDeviceResponse","newDeviceMetadata","NewDeviceMetadata","DeviceGroupKey","DeviceKey","errGenHash","deviceSecretVerifierConfig","Salt","PasswordVerifier","DeviceSecretVerifierConfig","DeviceName","errConfirm","dataConfirm","cacheDeviceKeyAndPassword","UserConfirmationNecessary","completeNewPasswordChallenge","newPassword","requiredAttributeData","finalUserAttributes","forEach","NEW_PASSWORD","_this6","errAValue","errHkdf","confirmRegistration","confirmationCode","forceAliasCreation","ConfirmationCode","ForceAliasCreation","sendCustomChallengeAnswer","answerChallenge","_this7","ANSWER","sendMFACode","mfaType","_this8","SMS_MFA_CODE","mfaTypeSelection","SOFTWARE_TOKEN_MFA_CODE","changePassword","oldUserPassword","newUserPassword","PreviousPassword","ProposedPassword","enableMFA","mfaOptions","DeliveryMedium","AttributeName","MFAOptions","setUserMfaPreference","smsMfaSettings","softwareTokenMfaSettings","SMSMfaSettings","SoftwareTokenMfaSettings","disableMFA","deleteUser","_this9","clearCachedUser","updateAttributes","_this10","UserAttributes","getUserData","bypassCache","getUserAttributes","userData","attributeList","attribute","userAttribute","getMFAOptions","createGetUserRequest","promisifyRequest","refreshSessionIfPossible","_this11","refresh","refreshSession","_this12","getUserDataFromCache","isFetchUserDataAndTokenRequired","fetchUserData","_ref$bypassCache","_this13","cacheUserData","deleteAttributes","_this14","UserAttributeNames","resendConfirmationCode","idTokenKey","accessTokenKey","refreshTokenKey","clockDriftKey","cachedSession","_this15","wrappedCallback","wrapRefreshSessionCallback","REFRESH_TOKEN","lastUserKey","deviceKeyKey","authenticationResult","clearCachedTokens","randomPasswordKey","deviceGroupKeyKey","forgotPassword","inputVerificationCode","confirmPassword","getAttributeVerificationCode","verifyAttribute","Code","getDevice","forgetSpecificDevice","forgetDevice","_this16","setDeviceStatusRemembered","DeviceRememberedStatus","setDeviceStatusNotRemembered","listDevices","paginationToken","requestParams","Limit","PaginationToken","globalSignOut","_this17","signOut","revokeTokenCallback","_this18","_session","revokeTokens","cleanClientData","isSessionRevocable","revokeToken","origin_jti","_ref2","requestWithRetry","Token","sendMFASelectionAnswer","_this19","associateSoftwareToken","_this20","associateSecretCode","SecretCode","verifySoftwareToken","totpCode","friendlyDeviceName","_this21","UserCode","FriendlyDeviceName","errRespond","dataRespond","BASE_USER_AGENT","Platform","product","isReactNative","UserAgent","_wrapNativeSuper","Class","_cache","Map","Wrapper","_construct","_getPrototypeOf","writable","Parent","args","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","getPrototypeOf","CognitoError","_Error","statusCode","Client","region","operation","reject","maxDelayMs","MAX_DELAY_MS","retry","attempt","jitteredBackoff","mode","resp","__type","Message","ex","logger","debug","isNonRetryableError","functionToRetry","delayFn","retryIn","CognitoUserPool","UserPoolId","AdvancedSecurityDataCollectionFlag","userPoolId","clientId","advancedSecurityDataCollectionFlag","getUserPoolId","signUp","cognitoUser","returnData","userConfirmed","UserConfirmed","userSub","UserSub","codeDeliveryDetails","CodeDeliveryDetails","getCurrentUser","lastAuthUser","AmazonCognitoAdvancedSecurityData","amazonCognitoAdvancedSecurityDataConst","advancedSecurityData","getData","EncodedData","userPool","consumeTicket","ticket_id","exec","releaseTicket","getTicketKey","normalizeUserAttributes","attr","normalized_user_attribute_keys","addr_main","formatted","to","respond","refreshErr","refreshedSession","createCognitoUser","cognitoUsername","__request_signup_confirmation","__disabledAccount","initUser","authenticationDetails","_","customErr","getUser","attrErr","__authConnection","host","to_be_erased","resendSignupConfirmation","recoverAccount","jwtLogin","keyUrl","provider","nonce","hashedPassword","login","signup","is_admin","address","gender","phone_number","email_public","address_public","gender_public","birthdate_public","phone_number_public","misc","picture","profile","family_name","given_name","middle_name","nickname","website","admin_creating_account","email_subscription","signup_confirmation","logUser","disableAccount","disable","resetPassword","new_password","catch","verifyPhoneNumber","verifyEmail","current_password","updateProfile","collision","toRemove","parseValue","toSet","getUsers","searchForTypes","checker","lastVerifiedEmail","requestUsernameChange","__decorate","decorators","desc","getOwnPropertyDescriptor","decorate","Skapi","__etc","version","connection","hostDomain","target_cdn","__class_properties_has_been_cached","validate","userId","phoneNumber","autoLogin","cdn_domain","sreg","atob","restore","userpool_id","userpool_client","currentUser","process","updateConnection","storeClassProperties","to_be_cached","addEventListener"],"sourceRoot":""}