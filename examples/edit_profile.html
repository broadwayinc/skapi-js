<!DOCTYPE html>

<head>
    <script src="../dist/skapi.js"></script>
</head>

<body>
    <h1>Edit Profile</h1>
    <form onsubmit='skapi.updateProfile(event, { onerror:(err)=>alert(err) })' action="profile.html">
        <label for="email">E-mail</label>
        <br>
        <input id='email' type="email" name="email">

        <br>
        <br>
        <label for="email_public">Make E-Mail public</label>
        <input id='email_public' type="checkbox" name="email_public">

        <br>
        <br>
        <label for="name">Name</label>
        <br>
        <input id='name' name="name">

        <br>
        <br>
        <label for="address">Address</label>
        <br>
        <input id='address' name="address">
        
        <br>
        <br>
        <label for="address_public">Make address public</label>
        <input id='address_public' type="checkbox" name="address_public">

        <br>
        <br>
        <label for="gender">Gender</label>
        <br>
        <input id='gender' name="gender">
        
        <br>
        <br>
        <label for="gender_public">Make gender public</label>
        <input id='gender_public' type="checkbox" name="gender_public">
        
        <br>
        <br>
        <label for="birthdate">birthdate</label>
        <br>
        <input id='birthdate' type="date" name="birthdate">
        
        <br>
        <br>
        <label for="birthdate_public">Make birthdate public</label>
        <input id='birthdate_public' type="checkbox" name="birthdate_public">
        
        <br>
        <br>
        <label for="email_subscription">Subscribe to newsletters</label>
        <input id='email_subscription' type="checkbox" name="email_subscription">

        <br>
        <br>
        <input type="submit">
    </form>
</body>
<script>
    // email: (v: string) => validateEmail(v),
    // name: 'string',
    // address: 'string',
    // gender: 'string',
    // birthdate: (v: string) => validateBirthdate(v),
    // phone_number: (v: string) => validatePhoneNumber(v),
    // email_public: 'boolean',
    // phone_number_public: 'boolean',
    // address_public: 'boolean',
    // gender_public: 'boolean',
    // birthdate_public: 'boolean',
    // email_subscription: 'boolean'
    let skapi = new Skapi('ap22TS2zkW1pl08TnsVi', '7aa4ffe1-1b06-4375-9be2-47d89da9d206', { autoLogin: true });

    skapi.getProfile().then(user => {
        if (user === null) {
            // user is not logged in!
            // redirect to login page.
            return window.location.replace("login.html");
        }
    });
</script>